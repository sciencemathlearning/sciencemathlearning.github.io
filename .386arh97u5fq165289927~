/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./assets/dialog/bird.dialog.json":
/*!****************************************!*\
  !*** ./assets/dialog/bird.dialog.json ***!
  \****************************************/
/*! exports provided: entry, chirp, who, what, quest, multijump, bye, default */
/***/ (function(module) {

    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"♪ Chirp!\\\",\\\"►Who are you? @who\\\",\\\"►What are you up to? @what\\\",\\\"►[relevant]Can you help me in my quest? @quest\\\",\\\"►[not chirp]Did you just say “Chirp”? @chirp\\\",\\\"►You have strange flying technique. @multijump\\\",\\\"►Bye, bird. @bye\\\"],\\\"chirp\\\":[\\\"Yes, I did. ♪ Chirp. That's what birds say! !set chirp true @entry\\\"],\\\"who\\\":[\\\"I'm the bird around these parts. @entry\\\"],\\\"what\\\":[\\\"I do bird stuff, mostly.\\\",\\\"I fly from my nest to some bushes to find food.\\\",\\\"♪ Chirp.\\\",\\\"There isn't any, though. !set relevant true\\\",\\\"My adopted child might go hungry again.\\\",\\\"►You adopted a bird baby?\\\",\\\"No. ♪ Chirp!\\\",\\\"It's something else. But it's still my son.\\\",\\\"You can visit our nest on the tree in the west...\\\",\\\"if you can fly, that is.\\\",\\\"♪ Chirp! @entry\\\"],\\\"quest\\\":[\\\"What quest? I'm a bird!\\\",\\\"Whatever you're up to is not my concern, really.\\\",\\\"♪ Chirp. I'm just doing my daily bird things. @entry\\\"],\\\"multijump\\\":[\\\"I'm not actually flying, though.\\\",\\\"It's the multi-jump power-up that I got a while ago.\\\",\\\"♪ Chirp.\\\",\\\"They said it was a flying ability, but it's not really.\\\",\\\"But I don't care much. At least I don't have to flap my wings anymore. @entry\\\"],\\\"bye\\\":[\\\"Bye, human.\\\",\\\"♪ Chirp! @entry !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2JpcmQuZGlhbG9nLmpzb24uanMiLCJzb3VyY2VzIjpbXSwibWFwcGluZ3MiOiIiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./assets/dialog/bird.dialog.json\n");

    /***/ }),
    
    /***/ "./assets/dialog/caveman1.dialog.json":
    /*!********************************************!*\
      !*** ./assets/dialog/caveman1.dialog.json ***!
      \********************************************/
    /*! exports provided: entry, stuck, doublejump, end, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Holy macaroni, another human!\\\",\\\"[$ismale] I thought I'd never see another dude anytime soon.\\\",\\\"[not $ismale] I thought I'd never see a woman ever again.\\\",\\\"Did you stone-skip-jump your way across the river as well?\\\",\\\"►Yes! @stuck\\\"],\\\"stuck\\\":[\\\"Well, then make yourself comfortable.\\\",\\\"At least I'm not stuck here alone anymore.\\\",\\\"►What? Can't we just exit the cave?\\\",\\\"The platforms on the way up are too high…\\\",\\\"►[$hasDoubleJump]But I can double jump! @doublejump\\\",\\\"►[not $hasDoubleJump]F…\\\",\\\"Game over, man!\\\",\\\"GAME OVER! !endgameC !end\\\"],\\\"doublejump\\\":[\\\"What?\\\",\\\"How?\\\",\\\"Why?\\\",\\\"►That's a long story.\\\",\\\"I'm at a loss of words… can you help me get out?\\\",\\\"►I wouldn't know how.\\\",\\\"Damn… !end @end\\\"],\\\"end\\\":[\\\"Please let me be… I really hoped you could help me. !end @end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2NhdmVtYW4xLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/caveman1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/caveman2.dialog.json":
    /*!********************************************!*\
      !*** ./assets/dialog/caveman2.dialog.json ***!
      \********************************************/
    /*! exports provided: entry, stuck, visitedEntry, regulary, skipjump, bug, powerup, strange, questions, fire, cave, memories, shadows, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Holy macaroni, another human! !set $metcaveman\\\",\\\"[$ismale] I thought I'd never see another dude anytime soon.\\\",\\\"[not $ismale] I thought I'd never see a woman ever again.\\\",\\\"Did you stone-skip-jump your way across the river as well?\\\",\\\"►[$hasDoubleJump]No, I come here regulary. @regulary\\\",\\\"►[$hasDoubleJump]What's a stone-skip-jump? @skipjump\\\",\\\"►[not $hasDoubleJump]Yes! @stuck\\\"],\\\"stuck\\\":[\\\"Well, then make yourself comfortable.\\\",\\\"At least I'm not stuck here alone anymore.\\\",\\\"►What? Can't we just exit the cave?\\\",\\\"The platforms on the way up are too high…\\\",\\\"►F…\\\",\\\"Game over, man!\\\",\\\"GAME OVER! !endgameC !end\\\"],\\\"visitedEntry\\\":[\\\"[$ismale]Hey pal!\\\",\\\"[not $ismale]Greetings my lady.\\\",\\\"►Can I ask you some questions? @questions\\\",\\\"►I'm on my way. @visitedEntry !end\\\"],\\\"regulary\\\":[\\\"So there is a regular way to cross the river? !set visited\\\",\\\"►Yeah, it's a long story.\\\",\\\"I couldn't cross the broken bridge after falling down from the sky.\\\",\\\"I tried many times but I couldn't jump far enough.\\\",\\\"Since there wasn't anything better to do, I found out about the skip-jump by accident and ended up on this side of the river. @skipjump\\\"],\\\"skipjump\\\":[\\\"It's a secret jumping technique I mastered. !set visited\\\",\\\"Just at the moment of impact, I was able to jump on the water and cross the river this way!\\\",\\\"Just like a stone skips on water when you throw it at the right angle. Hence the name.\\\",\\\"Patent pending.\\\",\\\"And now I'm stuck here… @bug\\\"],\\\"bug\\\":[\\\"The fire up top wasn't very helpful.\\\",\\\"And after I entered the cave, I couldn't get back out.\\\",\\\"The platforms are to high for me to jump up.\\\",\\\"►The power-up fire? He gave me the ability to fly. @powerup\\\",\\\"►Keep going. @strange\\\"],\\\"powerup\\\":[\\\"Oh really? You can actually fly now?\\\",\\\"He was just repeating lines and blabbing about broken sequences.\\\",\\\"Maybe you can go talk to him?\\\",\\\"►If I have the time. Continue.\\\",\\\"Where was I? Ah! @strange\\\"],\\\"strange\\\":[\\\"But that's not all.\\\",\\\"There is something very strange going on here.\\\",\\\"►What do you mean?\\\",\\\"Don't you see it? The strange shrine in the clouds and the very supspicious fire people?\\\",\\\"How did we get here in the first place?\\\",\\\"It's like a feverish nightmare from which you can't wake up.\\\",\\\"I conducted some experiments down here and the results are alarming. @questions\\\"],\\\"questions\\\":[\\\"What do you want to know about?\\\",\\\"►How did you get here? @memories\\\",\\\"►Anything interesting about this cave? @cave\\\",\\\"►Why the open fire in the cave? @fire\\\",\\\"►Nevermind. @visitedEntry !end\\\"],\\\"fire\\\":[\\\"Good question! First of all, carbon monoxide poisoning is not something that happens here.\\\",\\\"Death in general seems to be impossible. Trust me, I tried.\\\",\\\"But the fire itself is very interesting.\\\",\\\"I made a lot of camp fires since I came here and they all look alike.\\\",\\\"I mean, practically identical. And not only that, they even resemble the fire in the entrance.\\\",\\\"Isn't that strange? It's like someone got really lazy and just made everything from the same template.\\\",\\\"►You're right, but the fire in the beginning looked different.\\\",\\\"Yeah, I remember. It looked fake.\\\",\\\"►I have other questions. @questions\\\"],\\\"cave\\\":[\\\"Yes! This cave is strange as well.\\\",\\\"It's the only cave I've seen so far that has nothing of interest in it.\\\",\\\"Very suspicious if you ask me.\\\",\\\"►Well, you are here.\\\",\\\"I don't like the tone of that…\\\",\\\"I'm a living person and not some kind of pawn that only exists to chat with anyone who enters this cave.\\\",\\\"As soon as I have the means to leave, I will.\\\",\\\"►We will see. I have other questions. @questions\\\"],\\\"memories\\\":[\\\"My memories are very hazy, I can't remember anything from before my arrival here.\\\",\\\"What about you?\\\",\\\"►No, it's all blank.\\\",\\\"Thought so… There's something sinister going on here behind the curtains.\\\",\\\"There's always a lingering feeling of being watched from the shadows.\\\",\\\"►Yeah, I met that guy under the bridge. @shadows\\\",\\\"►Creepy. I got other questions. @questions\\\"],\\\"shadows\\\":[\\\"What guy?\\\",\\\"►The shadow person. He taught me how to run.\\\",\\\"You seem to have had a very different experience than I did…\\\",\\\"►Apparently. I got other questions. @questions\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2NhdmVtYW4yLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/caveman2.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/chicken.dialog.json":
    /*!*******************************************!*\
      !*** ./assets/dialog/chicken.dialog.json ***!
      \*******************************************/
    /*! exports provided: entry, social, touch, living, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"What?\\\",\\\"[not met]Never seen a glowing chicken before? !set met true\\\",\\\"►[not livingDialog]Are you living here? @living\\\",\\\"►[not touchDialog]What happens when I touch you? @touch\\\",\\\"►So you're not the social type… @social\\\"],\\\"social\\\":[\\\"Exactly. !end @entry\\\"],\\\"touch\\\":[\\\"Firstly, I'll fill up you health bar by five points. !set touchDialog true\\\",\\\"Secondly, I'm gonna reward you with salmonella.\\\",\\\"So, go right ahead.\\\",\\\"►I'm good, thanks.\\\",\\\"[$ismale] Good boy. @entry !end\\\",\\\"[not $ismale] Clever girl. @entry !end\\\"],\\\"living\\\":[\\\"Apparently. Living the life to it's fullest. !set livingDialog true\\\",\\\"I spent enough time just slaving my life away, being burried inside walls…\\\",\\\"…waiting for someone to accidentally free me from my prison.\\\",\\\"Just to be consumed for a cheap health buff.\\\",\\\"Used and forgotten.\\\",\\\"►Woah, that's kinda dark.\\\",\\\"It is. But we power-ups can live in peace here…\\\",\\\"The people tend to lack health bars, so I'm off the wanted list.\\\",\\\"But apparently I seem to be on the “being asked stupid questions” list.\\\",\\\"►I get the hint.\\\",\\\"Good. @entry !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2NoaWNrZW4uZGlhbG9nLmpzb24uanMiLCJzb3VyY2VzIjpbXSwibWFwcGluZ3MiOiIiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./assets/dialog/chicken.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/fire0.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/fire0.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, variableExample, help, impressed, how, why, existence, bye, details, reminder, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Hey, person! !talkedtofire\\\",\\\"►[$devmode]Hey!\\\",\\\"►[$devmode]I'm a dev, show me variables example! @variableExample\\\",\\\"I am starving, I fear to die very soon and my light will go out forever. @help !sad\\\"],\\\"variableExample\\\":[\\\"This example demonstrates variables. !set exampleSeen\\\",\\\"[exampleSeen]It's pretty cool!\\\",\\\"It is not perfect yet and a little buggy, some things don't work yet… sorry\\\",\\\"[exampleSeen]This line is conditional, and you should see it. !set fail\\\",\\\"[not fail]This line unfortunately is visible due to a bug, where conditions are evaluated one line too early.\\\",\\\"Variables sometimes only take effect after another sentence has been spoken. A little weird. Hopefully fixed in future.\\\",\\\"Variables also work with player options.\\\",\\\"►Say “hello” !set hello 1\\\",\\\"►Say “howdy” !set hello 0\\\",\\\"…\\\",\\\"[hello=1]Hello!\\\",\\\"[hello!=1]Howdy!\\\",\\\"What was the other word again?\\\",\\\"►[hello=1]Howdy!\\\",\\\"►[not hello=1]Hello!\\\",\\\"►I don't know… !set idk\\\",\\\"…\\\",\\\"[idk]You're a little forgetful…\\\",\\\"[not idk]Ah, right!\\\",\\\"Also, now setting a global variable which could be accessed from other dialogs. !set $test 42\\\",\\\"Which can be accessed using a dollar sign.\\\",\\\"[$test]Isn't that cool?\\\",\\\"►Yes!\\\",\\\"Bye! @entry !end\\\"],\\\"help\\\":[\\\"Would you help me out, kind stranger?\\\",\\\"►Oh my God, a talking fire?! @impressed\\\",\\\"►Why should I help you? @why\\\",\\\"►How can I help you? @how\\\",\\\"►I don't care! !angry\\\",\\\"Oh you son of a…! No, sorry, I get it. Well, maybe another time. !neutral\\\",\\\"Just be aware this whole game is pretty pointless if you don't help me out… @help !end\\\"],\\\"impressed\\\":[\\\"Well yes, I'm impressed too. Took me some time to get used to it. @help !amused\\\"],\\\"how\\\":[\\\"[not $ismale]I really need some wood. Surely a strong and marvelous woman like you can help an old fire out.\\\",\\\"[$ismale]I really need some wood. Surely a strong and marvelous man like you can help an old fire out.\\\",\\\"►Sounds boring. Maybe later… @bye\\\",\\\"►I'm in. @details\\\",\\\"►What do we say to the god of fire?\\\",\\\"I don't know, what?\\\",\\\"►Not today!\\\",\\\"But if you don't help me out, there may not be a tomorrow. @why\\\"],\\\"why\\\":[\\\"Because I am the essence of life. If I die, everything dies. Do you want everything to die?\\\",\\\"►Oh, I wouldn't want to be responsible for that! @details\\\",\\\"►I don't know, do I?\\\",\\\"►Yes!\\\",\\\"No!\\\",\\\"►OK\\\",\\\"So you'll help me then?\\\",\\\"►Definitely! @details\\\",\\\"►Do I even have a choice?\\\",\\\"Technically yes. Practically deciding against it would be a little stupid though.\\\",\\\"►Well OK then, you convinced me. @details\\\",\\\"►Why? @existence\\\"],\\\"existence\\\":[\\\"Because your sole existence in this world hinges on helping to keep me alive.\\\",\\\"That's why you're here. There's nothing else for you to do anyway.\\\",\\\"►Cool! I'll help you. @details\\\",\\\"►I'd rather think about this in private. @bye\\\"],\\\"bye\\\":[\\\"Sure, take your time. You'll come back eventually! @help !end\\\"],\\\"details\\\":[\\\"Great! I knew I could rely on you. I know a good person when I see one!\\\",\\\"►So what exactly should I do?\\\",\\\"It's easy! I just need a little firewood so I can keep burning a little longer.\\\",\\\"►I can get you some wood!\\\",\\\"Yes, yes! But it needs to be a special kind of wood.\\\",\\\"There's a good tree in the east. His wood is good. !treezoom\\\",\\\"Go get it! !gotFireQuest\\\",\\\"►Sure thing! @reminder !end\\\"],\\\"reminder\\\":[\\\"Hello again!\\\",\\\"►What do I need to do?\\\",\\\"►Bye! @reminder !end\\\",\\\"Go east. Ask tree for wood. Bring me wood. Soon!\\\",\\\"►On my way! @reminder !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2ZpcmUwLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/fire0.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/fire1.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/fire1.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, holdup, secondthoughts, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Oh, you did it! That's the real deal. !amused !talkedToFireWithWood\\\",\\\"Good job on scalping that piece of junk.\\\",\\\"Just take the wood and throw it into my fire, just as we agreed.\\\",\\\"►Got it.\\\",\\\"►I have second thoughts… @secondthoughts\\\",\\\"Just do it! @holdup !end\\\"],\\\"holdup\\\":[\\\"What's the holdup? !angry\\\",\\\"Just take the wood and throw it into me! Seriously…\\\",\\\"►Got it. @holdup !end\\\"],\\\"secondthoughts\\\":[\\\"You can't be serious. Are you numb? !angry\\\",\\\"Take the WOOD and THROW it into ME, you understand? !angry\\\",\\\"Don't make me wait!\\\",\\\"►Wow, calm down.\\\",\\\"You calm down! Just give me the wood already! !angry @holdup !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2ZpcmUxLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/fire1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/fire2.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/fire2.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, noFriendship, friendship, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Omnmnommnomm, that was good!\\\",\\\"Hahahahaha!\\\",\\\"I am finally complete.\\\",\\\"►What are you doing?\\\",\\\"►Whyyy?\\\",\\\"I'm unstoppable!\\\",\\\"This was the last time I have to ask a filthy mortal for help!\\\",\\\"And now I'm going to devour the world.\\\",\\\"And I'll start with you!\\\",\\\"►It is how it is…\\\",\\\"►I thought we were friends!\\\",\\\"►Not so fast!\\\",\\\"►Stop right there!\\\",\\\"What do you want to do, stop me? You got nothing on me! You're a human! I'm literally fire!\\\",\\\"[not $hasFriendship]As a cherry on top of the fiery cake, I'm also gonna consume all of your power-ups. @noFriendship\\\",\\\"As a cherry on top of the fiery cake, I'm also gonna consume all of your power-ups. @friendship\\\"],\\\"noFriendship\\\":[\\\"All of the useful ones, that is. You can keep that annoying dancing Dave as eternal punishment!\\\",\\\"HAHAHAHAHA! !crazyzoom !end\\\"],\\\"friendship\\\":[\\\"Wait…\\\",\\\"Didn't you have a flying power-up before? Where did that go?\\\",\\\"I was really looking forward to consume it. It tastes like chicken…\\\",\\\"Oh well, doesn't matter.\\\",\\\"HAHAHAHAHA! !friendshipEnding !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2ZpcmUyLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/fire2.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/fire3.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/fire3.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, nothing, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Whoops… !amused\\\",\\\"Well this is awkward.\\\",\\\"Seriously though… now I'm in serious risk of dying. !sad\\\",\\\"Are you happy now? Is this what you wanted?\\\",\\\"You sacrificed our deep friendship for the brief satisfaction of putting out a fire. !bored\\\",\\\"I'm disappointed.\\\",\\\"But let's not dwell in the past. Will you help me out of this?\\\",\\\"►Yes. @nothing\\\",\\\"►No.\\\",\\\"I see you've learned a lesson here.\\\",\\\"“Keep it alive”, they said, “it will be fun”. And you almost paid the price.\\\",\\\"Good for you the weather shifted. !bored\\\",\\\"Goodbye. Maybe see you in a sequel. !endgameA !end\\\"],\\\"nothing\\\":[\\\"Then you have learned nothing!!! !angry\\\",\\\"Thank you nonetheless, very kind of you.\\\",\\\"We're still coming to an end now. This game can't go on forever.\\\",\\\"You've made it. Good for you.\\\",\\\"Goodbye. !endgameA !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2ZpcmUzLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/fire3.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/fire4.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/fire4.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"I give up… !bored\\\",\\\"That was too much. Keep that dog away from me. !bored\\\",\\\"I'm no match for this kind of special companionship.\\\",\\\"And now I'm in serious risk of dying… !sad\\\",\\\"But I have learned my lesson.\\\",\\\"I won't try to destroy the world anymore. This goal really isn't worth being put out like that. !bored\\\",\\\"It will take a while getting the stench off of me… !bored\\\",\\\"Goodbye. Maybe see you in a sequel. !endgameB !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2ZpcmU0LmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/fire4.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/flameboy1.dialog.json":
    /*!*********************************************!*\
      !*** ./assets/dialog/flameboy1.dialog.json ***!
      \*********************************************/
    /*! exports provided: entry, visited, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Hello humble adventurer, welcome to my…\\\",\\\"Wait, how did you get past the river? That's not how this works! !angry\\\",\\\"►Whoops, I'll be on my way.\\\",\\\"Yeah, do that please. @visited !end\\\"],\\\"visited\\\":[\\\"No no no no! Don't go breaking all the precious sequences! !angry\\\",\\\"Get back to the other side and do things in the correct order.\\\",\\\"►You might be right\\\",\\\"Hush hush! @visited !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2ZsYW1lYm95MS5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/flameboy1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/flameboy2.dialog.json":
    /*!*********************************************!*\
      !*** ./assets/dialog/flameboy2.dialog.json ***!
      \*********************************************/
    /*! exports provided: entry, answers, attitude, otherfire, powerup, visited, more, finished, caveman, nodialog, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Hello humble adventurer, welcome to my sacred hut, yadda yadda. What do you need?\\\",\\\"►What's with that attitude? @attitude\\\",\\\"►I'm just here for some answers. @answers\\\"],\\\"answers\\\":[\\\"Answers? What? Do I look like some kind of prophet to you?\\\",\\\"►The stone from the mountain told me I should come here for answers.\\\",\\\"Ohhh, that guy. I bet he told you to throw him into the river.\\\",\\\"The fact that he floats should tell you everything about him. He's a real airhead.\\\",\\\"►So, no answers? I need to get a seed to grow.\\\",\\\"Not my problem. I'm only here to give away power-ups.\\\",\\\"►Power-ups? I'm interested @powerup\\\"],\\\"attitude\\\":[\\\"I've just had the worst day. Lost my job to some fancy pants high framerate fire jerk and was put here to give away free power-ups.\\\",\\\"►The other fire across the river? @otherfire\\\",\\\"►I don't care. I need answers! @answers\\\",\\\"►You said something about power-ups? @powerup\\\"],\\\"otherfire\\\":[\\\"Yeah, that jiggly eyed bastard!\\\",\\\"►He seemed pretty helpless to me.\\\",\\\"►I still don't care. I need answers! @answers\\\",\\\"►You said something about power-ups? @powerup\\\",\\\"Hah! That's just fantastic! Do whatever you like, just leave me out of it. And don't come back complaining after you get scorched.\\\",\\\"►Whatever. I need answers! @answers\\\",\\\"►OK… You said something about power-ups? @powerup\\\"],\\\"powerup\\\":[\\\"Yeah, I'm assigned to distribute the flying ability. It's popular amongst school children… and birds.\\\",\\\"►Nice, flying!\\\",\\\"Don't expect too much. It's more of a multi-jump if you ask me. But you know… marketing.\\\",\\\"►I'll take one.\\\",\\\"Sure, here you go. !multijump\\\",\\\"No refunds!\\\",\\\"Also, I'm obligated to tell you, that you should visit the cloud world.\\\",\\\"I personally wouldn't go there. The people there are really annoying.\\\",\\\"But that's just my opinion… @visited !end\\\"],\\\"visited\\\":[\\\"Sorry, we have a strict no return policy!\\\",\\\"►[$metcaveman]Did you know there's someone living in the caves? @caveman\\\",\\\"►I just wanted to talk some more. @more\\\",\\\"►Damn…\\\",\\\"Come on man! You didn't even pay anything. @finished !end\\\"],\\\"more\\\":[\\\"I already have a headache, thanks. Can't you just do like a bird… and multi-jump out of here? @finished !end\\\"],\\\"finished\\\":[\\\"Just let me do my job in peace. Go irritate the cloud people. They love that.\\\",\\\"►[$metcaveman] Did you know there's someone living in the caves? @caveman\\\",\\\"►Fine. @finished !end\\\"],\\\"caveman\\\":[\\\"Yeah, the best kind of neighbor: Quiet and seclusive.\\\",\\\"►Can't you just give him a free flying power-up?\\\",\\\"No, that's not how this works. He broke the sequence and messed up some triggers.\\\",\\\"That's irreversible, but not my problem.\\\",\\\"►Sequence? Triggers? What does all that mean?\\\",\\\"Whoops, don't mind me. Just giving away power-ups here.\\\",\\\"►But…\\\",\\\"Bye! @nodialog !end\\\"],\\\"nodialog\\\":[\\\"I really don't want to talk to you anymore. !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2ZsYW1lYm95Mi5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/flameboy2.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/flameboy3.dialog.json":
    /*!*********************************************!*\
      !*** ./assets/dialog/flameboy3.dialog.json ***!
      \*********************************************/
    /*! exports provided: entry, tryOut, trust, back, first, meaning, next, idle, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Thanks for the wood…\\\",\\\"But weren't you supposed to bring it somewhere else?\\\",\\\"►I just wanted to try this out first. @tryOut\\\",\\\"►I don't trust the other fire. @trust\\\",\\\"►Whoops, you're right. Can I have the wood back? @back\\\"],\\\"tryOut\\\":[\\\"Interesting. So no moral motivation? You're just driven by curiosity?\\\",\\\"Well, I take what I can get. At least you didn't just blindly follow the order of a psychotic flame.\\\",\\\"The others weren't so smart. @first\\\"],\\\"trust\\\":[\\\"Good call. I did tell you that this thing was nothing but trouble.\\\",\\\"Nice to see that you aren't as dense as the others. @first\\\"],\\\"back\\\":[\\\"No no! Don't you understand?\\\",\\\"You did good. Even if it was just by chance.\\\",\\\"I'll take what I can get. @first\\\"],\\\"first\\\":[\\\"You're actually the first one in a couple hundered years to break the cycle. !amused\\\",\\\"I'm proud of you. You can pat yourself on the back. !amused\\\",\\\"I would do so myself, but I don't have any arms in this form.\\\",\\\"►I don't understand anything… @meaning\\\",\\\"►What does this all mean?  @meaning\\\"],\\\"meaning\\\":[\\\"That's nothing that you should think too much about.\\\",\\\"Even a glimpse of the truth would instantaniously turn your sanity inside out.\\\",\\\"Let's just say this was all a dream, how about that?\\\",\\\"If you're lucky, you'll even forget that this happened at all.\\\",\\\"►What happens now? @next\\\"],\\\"next\\\":[\\\"Like I said, you can leave. I'll activate the portal here.\\\",\\\"Just go through and you're out of here.\\\",\\\"Don't dilly-dally for too long. I have a lot of paper work waiting for me.\\\",\\\"►Thanks… I guess.\\\",\\\"Yes yes. I have to thank you as well. You spared me a lot of work here. !amused\\\",\\\"The damage the fire would've done to this place, would you have fed the wood to it, is a pain to fix.\\\",\\\"I might even get some long overdue vacation time out of this. !amused\\\",\\\"So, see you around… or not. !activatefireportal !end @idle\\\"],\\\"idle\\\":[\\\"Still around?\\\",\\\"There isn't really much you can do here now.\\\",\\\"Just hop in the portal and off you go!\\\",\\\"►O-Okay… !end @idle\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2ZsYW1lYm95My5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/flameboy3.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/flameboy4.dialog.json":
    /*!*********************************************!*\
      !*** ./assets/dialog/flameboy4.dialog.json ***!
      \*********************************************/
    /*! exports provided: entry, visited, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Oh come on… \\\",\\\"I can't believe this… !angry\\\",\\\"Don't bring that stupid grey guy to this side of river. !angry\\\",\\\"How did you even get over here?\\\",\\\"I can't help you like this. Go back und do it properly!\\\",\\\"Does nobody here care for a proper order of events?\\\",\\\"►Whoops, I'll be on my way.\\\",\\\"Yes! @visited !end\\\"],\\\"visited\\\":[\\\"No! Don't talk to me while carrying that stupid stone!\\\",\\\"►On my way!. @visited !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL2ZsYW1lYm95NC5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/flameboy4.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/mimic.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/mimic.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, wakeup, who, main, questions, what, items, sleeping, sleeping_questions, eat, lucky, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"…\\\",\\\"…zZzZZ…\\\",\\\"(Someone seems to be asleep in there.)\\\",\\\"►I better force the chest open. @wakeup !wakeupchest !end\\\",\\\"►I better leave the chest alone. @entry !end\\\"],\\\"wakeup\\\":[\\\"Oh my, was I asleep?\\\",\\\"What time is it?\\\",\\\"►I have not the slightest idea…\\\",\\\"Well, no worries. @who\\\"],\\\"who\\\":[\\\"I haven't seen you before. Are you an item?\\\",\\\"►No, just a regular human.\\\",\\\"Ahh, one of those. @questions\\\"],\\\"main\\\":[\\\"Hello friend! @questions\\\"],\\\"questions\\\":[\\\"►What are you? @what\\\",\\\"►[not asked_about_items]Do you have any items? @items\\\",\\\"►[not asked_aboud_sleeping]I thought someone was sleeping in there. @sleeping\\\",\\\"►I'm off.\\\",\\\"Bye! @main !end\\\"],\\\"what\\\":[\\\"A mimic chest.\\\",\\\"But a basic one, I can't even move properly.\\\",\\\"It looks really silly when I jump to move forward, so I don't do it when people are around.\\\",\\\"►How did you get here then?\\\",\\\"Delivery services! @questions\\\"],\\\"items\\\":[\\\"No, we mimics usually don't carry items. !set asked_about_items true\\\",\\\"Some do, but that only incentivizes unnecessary violence.\\\",\\\"There's no need to attack a mimic who doesn't hold items, no?\\\",\\\"►True\\\",\\\"Yes, yes. @questions\\\"],\\\"sleeping\\\":[\\\"Oh, a common mistake! !set asked_aboud_sleeping true\\\",\\\"The people I eat usually don't have the capacity to make sleep noises anymore.\\\",\\\"But that was a long time ago. I'm living the vegan lifestyle now.\\\",\\\"I moved here when I heard how peaceful it was. @sleeping_questions\\\"],\\\"sleeping_questions\\\":[\\\"►What do you eat then? @eat\\\",\\\"►Lucky me… @lucky\\\"],\\\"eat\\\":[\\\"Vegetables, rice, and tofu.\\\",\\\"Or whatever is prepared when I'm around. I can't really cook for myself. @sleeping_questions\\\"],\\\"lucky\\\":[\\\"Indeed!\\\",\\\"If you had met me when I was still working as a trap for adventurers, you would be crushed and dismembered by now. @questions\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL21pbWljLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/mimic.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/powershiba1.dialog.json":
    /*!***********************************************!*\
      !*** ./assets/dialog/powershiba1.dialog.json ***!
      \***********************************************/
    /*! exports provided: entry, met, powerup, past, brother, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"…\\\",\\\"Oh, hello mortal. !set $metPowerShiba\\\",\\\"►Hello. Who are you?\\\",\\\"I'm a power-up.\\\",\\\"But I wasn't always one.\\\",\\\"►Were you a dog before by any chance?\\\",\\\"I do not remember my past life and it doesn't really matter either.\\\",\\\"►How does one become a power-up?\\\",\\\"I was taught by my mentor and father figure, the almighty flying power-up.\\\",\\\"After years of meditation, I was able to transcend and leave my mortal shell behind.\\\",\\\"I lost my memories and the ability to move, but it was worth the sacrifice.\\\",\\\"►If you say so… @met\\\"],\\\"met\\\":[\\\"What is it you desire?\\\",\\\"►What kind of power do you inherit? @powerup\\\",\\\"►Aren't you interested in your past? @past\\\",\\\"►[$metShiba]Did you know, you have a brother? @brother\\\",\\\"►I'll leave you to yourself.\\\",\\\"Please do. @met !end\\\"],\\\"powerup\\\":[\\\"That I do not know.\\\",\\\"Usually, the designated power is bestowed upon birth.\\\",\\\"Since I transcended being a mortal like you, my power is unknown.\\\",\\\"But it doesn't matter either way.\\\",\\\"I have no intention to be consumed.\\\",\\\"►Not even… by me?\\\",\\\"Yes, not even by a person I met a minute ago.\\\",\\\"I shall contemplate about cloud related topics here for the rest of time.\\\",\\\"►Too bad… @met\\\"],\\\"past\\\":[\\\"No, the memories of my mortal past are but an ember of the flame I am now.\\\",\\\"This is how I must be. This is everything.\\\",\\\"►If you say so… @met\\\"],\\\"brother\\\":[\\\"I do not remember my past life.\\\",\\\"I also have no desire to involve myself with mortals.\\\",\\\"►That's harsh man… I gotta tell the other dog. @met\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3Bvd2Vyc2hpYmExLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/powershiba1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/powershiba2.dialog.json":
    /*!***********************************************!*\
      !*** ./assets/dialog/powershiba2.dialog.json ***!
      \***********************************************/
    /*! exports provided: entry, sacriface, sacrificeOptions, yourself, carry, yes, notyet, go, end, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"I… remember…\\\",\\\"A memento from the past.\\\",\\\"Thank you for bringing this to me.\\\",\\\"How is my brother? Tell me about him.\\\",\\\"►He is a good boy.\\\",\\\"Good to hear that.\\\",\\\"I can't believe I forgot about him…\\\",\\\"This is unacceptable.\\\",\\\"►Maybe you can make it up to him.\\\",\\\"Yes… I must do that.\\\",\\\"I must meet him. @sacriface\\\"],\\\"sacriface\\\":[\\\"I know that it's a lot to ask from you after you already did so much…\\\",\\\"…but would you be so kind and give away your power of multi-jumping to my brother?\\\",\\\"This is the only way for him to actually come to me. @sacrificeOptions\\\"],\\\"sacrificeOptions\\\":[\\\"►Can't you just leave the clouds yourself? @yourself\\\",\\\"►Can't I carry you down? @carry\\\",\\\"►Of course I will! @yes\\\",\\\"►Eh, no thanks. @sacriface !end\\\"],\\\"yourself\\\":[\\\"As a power-up, I lost all means to move by myself.\\\",\\\"I'm a slave to my own ambitions. @sacrificeOptions\\\"],\\\"carry\\\":[\\\"Touching me will most likely lead to a consumption of my unknown power.\\\",\\\"I might keep my consciousness, but that's not a risk I can take.\\\",\\\"Who knows how my power might manifest.\\\",\\\"I must meet him like I am now. @sacrificeOptions\\\"],\\\"yes\\\":[\\\"You… will?\\\",\\\"[not $seedgrown] Wait… @notyet\\\",\\\"This sacrifice will not be forgotten.\\\",\\\"Please go to my brother and grant him your power-up.\\\",\\\"►Of course I will! @go\\\"],\\\"notyet\\\":[\\\"Make sure you have done everything you need to do here up in the clouds.\\\",\\\"If you give away your multi-jump prematurely it could lead to a disaster.\\\",\\\"I can tell that you still have business here.\\\",\\\"►Thanks for heads up! !end @sacriface\\\"],\\\"go\\\":[\\\"Thank you human! !set $gotPowerShibaQuest true !end @end\\\"],\\\"end\\\":[\\\"Please grant your multi-jump to my mortal brother.\\\",\\\"Your sacrifice will not be forgotten.\\\",\\\"►Of course I will! @end !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3Bvd2Vyc2hpYmEyLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/powershiba2.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/powershiba3.dialog.json":
    /*!***********************************************!*\
      !*** ./assets/dialog/powershiba3.dialog.json ***!
      \***********************************************/
    /*! exports provided: entry, accept, idea, fate, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Human! Thank you for coming.\\\",\\\"Your selflessness brought an estranged family back together.\\\",\\\"This is something no amount of meditating could achieve.\\\",\\\"►Don't mention it!\\\",\\\"Please don't play this down.\\\",\\\"My brother and I came to the agreement that you should collect me.\\\",\\\"My unknown power might help you on your quest.\\\",\\\"►I don't know if I can accept that… @accept\\\",\\\"►Great idea! @idea\\\"],\\\"accept\\\":[\\\"We don't accept a “no” for an answer. @fate\\\"],\\\"idea\\\":[\\\"Good to see that you agree. @fate\\\"],\\\"fate\\\":[\\\"This is the inevitable fate of my existence.\\\",\\\"And I couldn't be happier to be at your side.\\\",\\\"►It's a deal then!\\\",\\\"I hope my power is useful to you.\\\",\\\"You should continue your quest now!\\\",\\\"Farewell! !friendship !end @entry\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3Bvd2Vyc2hpYmEzLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/powershiba3.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/seed1.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/seed1.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, visit, final, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"I have been born. I am alive!\\\",\\\"I thank you for bestowing the miracle of life onto me.\\\",\\\"My father will hear of this. Please speak to him to receive a proper reward.\\\",\\\"►I will, but please stop the creepy talk.\\\",\\\"I will not comply to this demand. Farewell! @visit !end\\\"],\\\"visit\\\":[\\\"I will drown in a very short amount of time. Can you stop the unending rush of fluids?\\\",\\\"►I guess there is no dry-dance, sorry.\\\",\\\"Oh father, why have you forsaken me?\\\",\\\"►Gotta go, fast! @final !end\\\"],\\\"final\\\":[\\\"My life was in vain… Avenge me! !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3NlZWQxLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/seed1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/shadowpresence1.dialog.json":
    /*!***************************************************!*\
      !*** ./assets/dialog/shadowpresence1.dialog.json ***!
      \***************************************************/
    /*! exports provided: entry, what, visited, bridge, running, pokemon, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Greetings, human!\\\",\\\"[not $gotFireQuest]You might wanna talk to the flame first.\\\",\\\"[not $gotFireQuest]My hands are tied until then.\\\",\\\"►[$gotFireQuest]Oh my god, what are you? @what\\\",\\\"►I can't handle this darkness.\\\",\\\"[not $gotFireQuest]Sure, no hard feelings. @entry !end\\\",\\\"[$gotFireQuest]Sure, come around again if you're ready. @entry !end\\\"],\\\"what\\\":[\\\"[$ismale]No need to soil your pants.\\\",\\\"[not $ismale]No need to soil your skirt.\\\",\\\"Ever had the feeling someone was watching you from a dark corner at home?\\\",\\\"Or you're being followed at night but no one is there when you turn around?\\\",\\\"That's probably me, or one of my coworkers.\\\",\\\"But I'm on my break right now. It's nice to have a chat every once in a while. @visited\\\"],\\\"visited\\\":[\\\"[visited]Welcome back, friend!\\\",\\\"►[not taught]Any idea how to get over that bridge? @bridge\\\",\\\"►[not pokemon]What are you doing here exactly? @pokemon\\\",\\\"►[taught]How does the running work again? @running\\\",\\\"►I'll get going. !set visited\\\",\\\"Sure, keep up the good work. @visited !end\\\"],\\\"bridge\\\":[\\\"That bridge is pretty busted, isn't it? !set visited\\\",\\\"You can an easily vault over the gap if you gain enough speed.\\\",\\\"►I can only walk. I'm too slow.\\\",\\\"That's not a problem. I can teach you how to run.\\\",\\\"It's a pleasure seeing people run anyway.\\\",\\\"►How does it work?\\\",\\\"Close your eyes and envision that unique feeling.\\\",\\\"The creeping anxiety you feel on an empty walkway at night.\\\",\\\"Someone is behind you. Cold sweat oozes from your skin.\\\",\\\"You can almost feel the dark presence crawling up your spine.\\\",\\\"Your irrational fear swells up and blossoms to a beautiful raging panic!\\\",\\\"…or in other words: Just hold your run button. Fairly easy. !enableRunning !set taught\\\",\\\"►Awesome!\\\",\\\"Have fun with your new ability. @visited !end\\\"],\\\"running\\\":[\\\"Just remember that one feeling, that creeping anxiety at night.\\\",\\\"Someone is behind you. You can almost feel the cold presence on your skin.\\\",\\\"The fear swells up and bursts out as raging panic. Beautiful!\\\",\\\"…or in other words: just hold the run button. Fairly easy.\\\",\\\"►Thanks!\\\",\\\"See you around. @visited !end\\\"],\\\"pokemon\\\":[\\\"I'm hooked on Pokémon GO since last year.\\\",\\\"This bridge used to be a popular poke-stop, but the folks around here stopped playing.\\\",\\\"I might be the last one playing. Finishing raids like this is nearly impossible.\\\",\\\"►Can't you just stop playing as well?\\\",\\\"I already invested so much time and effort. How could I stop now?\\\",\\\"►Suit yourself. !set pokemon @visited\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3NoYWRvd3ByZXNlbmNlMS5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/shadowpresence1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/shiba1.dialog.json":
    /*!******************************************!*\
      !*** ./assets/dialog/shiba1.dialog.json ***!
      \******************************************/
    /*! exports provided: entry, met, met2, tree, reminder, search, found, boneReminder, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Hello! Friend!\\\",\\\"You smell nice.\\\",\\\"Are you here to play???\\\",\\\"►A talking dog, I'm not surprised.\\\",\\\"Yes. Talking!\\\",\\\"Mother taught me to speak.\\\",\\\"♪ Bark!\\\",\\\"I mean… ♪ Chirp. @met\\\"],\\\"met\\\":[\\\"Play???\\\",\\\"►[not inTree]Why are you in a tree? @tree\\\",\\\"►[inTree]Can you tell me about your brother again? @reminder\\\",\\\"►We'll play another time.\\\",\\\"►(Pet the dog already!) !petDoggo !end @met\\\",\\\"♪ OK friend. !end @met\\\"],\\\"met2\\\":[\\\"Did you find my brother?\\\",\\\"Also… Play???\\\",\\\"►[$metPowerShiba]I found your brother… @found\\\",\\\"►[inTree]Can you tell me about your brother again? @reminder\\\",\\\"►We'll play another time.\\\",\\\"►(Pet the dog already!) !petDoggo !end @met2\\\",\\\"♪ OK friend. !end @met2\\\"],\\\"tree\\\":[\\\"I fell from the sky. !set inTree\\\",\\\"Bird mother brought me here, gave me food.\\\",\\\"Brother is still missing… We separated.\\\",\\\"►There is another dog?\\\",\\\"Yes, in the clouds. I fell.\\\",\\\"Can you find brother? You can fly! !set $metShiba\\\",\\\"►[not $metPowerShiba]Sure, I can take a look. @search\\\",\\\"►[$metPowerShiba]I already found him. @found\\\"],\\\"reminder\\\":[\\\"Yes! Brother!\\\",\\\"I fell from the sky, my brother stayed.\\\",\\\"I howl every night, but no response.\\\",\\\"Please find brother!\\\",\\\"►I'll see what I can find in the clouds. @met2\\\"],\\\"search\\\":[\\\"Wow! Thanks!\\\",\\\"I want to smell brother!\\\",\\\"►I'll see what I can find in the clouds. @met2 !end\\\"],\\\"found\\\":[\\\"Wow! Really? !set $gotBoneQuest\\\",\\\"How does he smell?\\\",\\\"►Really nice… That's not the issue though.\\\",\\\"Did you bring him? Where is he?\\\",\\\"►He doesn't remember you…\\\",\\\"What??? Oh no… why?\\\",\\\"►It's complicated. Any ideas how to make him remember?\\\",\\\"Mmmh…\\\",\\\"Yes… the bone! ♪\\\",\\\"We had a bone… when we were with human.\\\",\\\"In a cave, when we came to the clouds.\\\",\\\"It's the favorite bone. He must remember the bone!\\\",\\\"Can you bring favorite bone?\\\",\\\"►The bone in the portal room… I remember that.\\\",\\\"Can you bring???\\\",\\\"►This might be tricky. The throw power-up seemed to know a lot about items.\\\",\\\"Please bring… @boneReminder !end\\\"],\\\"boneReminder\\\":[\\\"Hello friend!\\\",\\\"Can you bring favorite bone?\\\",\\\"it's in the cloud cave. You can fly!\\\",\\\"►Can't get items through doors… Gotta talk to the throw power-up @boneReminder !end\\\",\\\"►(Pet the dog already!) !petDoggo !end @boneReminder\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3NoaWJhMS5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/shiba1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/shiba2.dialog.json":
    /*!******************************************!*\
      !*** ./assets/dialog/shiba2.dialog.json ***!
      \******************************************/
    /*! exports provided: entry, entry2, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"You found bone!\\\",\\\"Wow!!!\\\",\\\"Bring to brother please.\\\",\\\"►Sure, I'm on the way! !end @entry2\\\"],\\\"entry2\\\":[\\\"Friend!\\\",\\\"Go to brother.\\\",\\\"Bring bone. He will remember!\\\",\\\"►Sure, I'm on the way! !end @entry2\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3NoaWJhMi5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/shiba2.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/shiba3.dialog.json":
    /*!******************************************!*\
      !*** ./assets/dialog/shiba3.dialog.json ***!
      \******************************************/
    /*! exports provided: entry, main, meet, go, nevermind, giveaway, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"How was it? Did you give bone?\\\",\\\"►Yeah, your brother remembered you after all!\\\",\\\"Wow! I'm happy. Best day. @main\\\"],\\\"main\\\":[\\\"You are the best!\\\",\\\"►[$gotPowerShibaQuest]Do you want to meet your brother? @meet @entry\\\",\\\"►Have a nice day! !end @main\\\"],\\\"meet\\\":[\\\"Yes!!!\\\",\\\"Can he come?\\\",\\\"►No, that won't be possible…\\\",\\\"Awww…\\\",\\\"►But you can go to him. @go\\\",\\\"►There's nothing I can do. @main !end\\\"],\\\"go\\\":[\\\"How???\\\",\\\"►In theory, I could give you the power to go to him.\\\",\\\"I can fly?\\\",\\\"►Yes… you can now! @giveaway\\\",\\\"►On second thought… nevermind @nevermind\\\"],\\\"nevermind\\\":[\\\"What??? Nooo… !end @main\\\"],\\\"giveaway\\\":[\\\"I can feel it. Thank you!\\\",\\\"No time wasting!\\\",\\\"I will go get brother.\\\",\\\"Find us on the mountain. I will wait at bird feeding spot.\\\",\\\"►At the bird feeding spot… check!\\\",\\\"You are best friend!\\\",\\\"See you there. !shibaNextState !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3NoaWJhMy5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/shiba3.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/shiba4.dialog.json":
    /*!******************************************!*\
      !*** ./assets/dialog/shiba4.dialog.json ***!
      \******************************************/
    /*! exports provided: entry, entry2, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Hello best friend!\\\",\\\"Thank you for visiting.\\\",\\\"We have the best day.\\\",\\\"Brother is glowing!\\\",\\\"►He sure is. @entry2 !end\\\"],\\\"entry2\\\":[\\\"♪ Happy bark!\\\",\\\"Play???\\\",\\\"►Later. I have to deal with the fire first. @entry2 !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3NoaWJhNC5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/shiba4.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/shiba5.dialog.json":
    /*!******************************************!*\
      !*** ./assets/dialog/shiba5.dialog.json ***!
      \******************************************/
    /*! exports provided: entry, play, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"I helped!\\\",\\\"►You sure did, buddy.\\\",\\\"At last, time to play!!!\\\",\\\"►Just a minute! @play !end\\\"],\\\"play\\\":[\\\"Play with friend???\\\",\\\"►Just a minute! @play !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3NoaWJhNS5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/shiba5.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/spider1.dialog.json":
    /*!*******************************************!*\
      !*** ./assets/dialog/spider1.dialog.json ***!
      \*******************************************/
    /*! exports provided: entry, nerve, rejected, nicetomeet, chosenone, whatsgoingon, spider, fairyschool, racist, magic, moregenders, swapgender, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"[not visited]Greetings, adventurer. Welcome to this ancient and mysterious land. !set $talkedToSpider true\\\",\\\"[not visited]I am your designated magical gender fairy and will guide you on your quest. I bet you have a lot of questions. !set visited\\\",\\\"[visited]How can I help?\\\",\\\"►[not option_nicetomeet]It's nice to meet you. @nicetomeet\\\",\\\"►What's going on here? @whatsgoingon\\\",\\\"►[not toggledgender]What is a gender fairy? @magic\\\",\\\"►[toggledgender]Can you “accidentally” change my gender again? @swapgender\\\",\\\"►Seriously? Magical FAIRY? @spider\\\",\\\"►[not visited]I got no time for this… @nerve\\\",\\\"►[visited]Gonna go…\\\",\\\"Byeeee! @entry !end\\\"],\\\"nerve\\\":[\\\"The nerve! @rejected !end\\\"],\\\"rejected\\\":[\\\"Look who comes crawling back…\\\",\\\"►Sorry, I actually do need some guidance. @entry\\\",\\\"►I just pressed the wrong button!\\\",\\\"Jerk! @rejected !end\\\"],\\\"nicetomeet\\\":[\\\"[not $ismale]Ho ho ho, what a sweet gal you are. The last one wasn't of the talkative kind. !set option_nicetomeet\\\",\\\"[$ismale]Ho ho ho, what a friendly fella you are. The last one wasn't of the talkative kind. !set option_nicetomeet\\\",\\\"He had the WORST time!\\\",\\\"But you and I will get along just fine.\\\",\\\"►What happened to the last one? @chosenone\\\",\\\"►Yeah sure, back to topic.\\\",\\\"Suuuure… @entry\\\"],\\\"chosenone\\\":[\\\"It wasn't a pretty sight. Lots of misunderstandings, some disrespectful verbal exchanges.\\\",\\\"Long story short, you won't see him anytime soon. Trust me.\\\",\\\"Some would say, he “burned” to “death”.\\\",\\\"…\\\",\\\"Subtlety is not my strong suit.\\\",\\\"►I can see that. Back to topic!\\\",\\\"Aye! @entry\\\"],\\\"whatsgoingon\\\":[\\\"[not talkedAboutQuest]Nothing really. Just make yourself at home. You're part of our world now.\\\",\\\"►[not talkedAboutQuest]Really? There's nothing to do?\\\",\\\"[not talkedAboutQuest]You can always approach the other habitants and have interesting chats with them.\\\",\\\"[not talkedAboutQuest]The one downstairs might even need some help.\\\",\\\"[talkedAboutQuest]Like I said, we just live our lives in peace here. There isn't really much to do.\\\",\\\"[talkedAboutQuest]You can go and meet the other habitants. You can start downstairs.\\\",\\\"►Sure, I'll give it a try.\\\",\\\"Great! !set talkedAboutQuest true @entry.\\\"],\\\"spider\\\":[\\\"[not isracist]What, don't you see the fairy wings on my back? My golden hair and cute make up?\\\",\\\"[not isracist]I worked really hard to earn all of these traits.\\\",\\\"[isracist]…\\\",\\\"►Can anyone become a fairy? @fairyschool\\\",\\\"►[not isracist]Since when are spiders allowed to be fairies? @racist\\\",\\\"►Nevermind. @entry\\\"],\\\"fairyschool\\\":[\\\"Are you kidding me?\\\",\\\"Of course not. Only the best of the best can become fairies.\\\",\\\"I went through six years of fairy university and another two years of unpaid internships as fairy assistant.\\\",\\\"Can't wait until I get my new pink fairy dress. The one I got at graduation didn't fit.\\\",\\\"►I cannot guess why… Back to topic. @entry\\\"],\\\"racist\\\":[\\\"I will ignore your racist remark in good faith… you racist! !set isracist !set askedaboutspider\\\",\\\"►Sorry… @spider\\\"],\\\"magic\\\":[\\\"[not askedformoregenders]Great that you ask!\\\",\\\"[not askedformoregenders]I'm not just a normal fairy, but one with an academic background.\\\",\\\"[not askedformoregenders]With my bachelor degree in gender studies, I know everything about genders.\\\",\\\"[not askedformoregenders]I can instantly tell that you've been born to be at least one of two genders!\\\",\\\"[askedformoregenders] Like I said, you have a gender!\\\",\\\"►[not askedformoregenders]Aren't there more? @moregenders\\\",\\\"►Is that all…?\\\",\\\"Ha! Not in the least. I have the power to accidentally change the gender of humans against their will.\\\",\\\"Abracadabra and it is done!\\\",\\\"►What… WAIT !set toggledgender !togglegender\\\",\\\"You are very welcome, gender swapped human!\\\",\\\"►It's not that bad, actually. @entry\\\",\\\"►You even changed the clothes, nice. @entry\\\"],\\\"moregenders\\\":[\\\"There's only so much you can do with this kind of pixel resolution…\\\",\\\"Also, don't question my bachelor knowledge!\\\",\\\"►Two genders is fine. !set askedformoregenders @magic\\\"],\\\"swapgender\\\":[\\\"Why? Don't you like your current gender?\\\",\\\"Whoops, there we go again. !togglegender\\\",\\\"►I feel sick. @entry\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3NwaWRlcjEuZGlhbG9nLmpzb24uanMiLCJzb3VyY2VzIjpbXSwibWFwcGluZ3MiOiIiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./assets/dialog/spider1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/stone1.dialog.json":
    /*!******************************************!*\
      !*** ./assets/dialog/stone1.dialog.json ***!
      \******************************************/
    /*! exports provided: entry, tips, visitedentry, introduction, noteacher, ionlymaster, getthisdone, woman, man, beard, genderswap, touche, human, onmyown, yesmaster, soo, drink, rain, nottouchyou, lift, remember, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"[not met]I am the wise stone. Hard, but fair. !talkedToStone\\\",\\\"[not met]I oversee the sacred garden up that hill. What wisdom do you seek? !set met\\\",\\\"[met]Welcome back young human. What wisdom do you seek?\\\",\\\"►[not $seedplanted]I need to plant a seed. Any tips? @tips\\\",\\\"►[$seedplanted]I planted the seed but nothing happened… @introduction\\\",\\\"►Nevermind. @entry !end\\\"],\\\"tips\\\":[\\\"You can use the sacred garden of course. Just throw the seed directly onto the soil.\\\",\\\"The item will be absorbed by the blessed and fertile ground to help create new life.\\\",\\\"What a miracle!\\\",\\\"►It's just a gardening…\\\",\\\"►Will do.\\\",\\\"Good luck! @entry !end\\\"],\\\"visitedentry\\\":[\\\"I see that you still struggle with your task.\\\",\\\"►Yeah, kind of. @introduction\\\"],\\\"introduction\\\":[\\\"Well, if you are willing to listen, I would be willing to teach you the ways of the sacred soil.\\\",\\\"►I do not need a teacher. @noteacher\\\",\\\"►Sure, whatever will help me finally get this done. @getthisdone\\\",\\\"►Seriously, can everything talk here? @getthisdone\\\",\\\"►I can do this on my own, thanks. @onmyown\\\"],\\\"noteacher\\\":[\\\"Without my teachings your little tree will remain but a sad seed in the sand.\\\",\\\"Return to me when you've grown some wisdom! @visitedentry !end\\\"],\\\"ionlymaster\\\":[\\\"Fool! Out of my sight! @visitedentry !end\\\"],\\\"getthisdone\\\":[\\\"[$ismale]A bit more respect, young boy. Start by calling me master!\\\",\\\"[not $ismale]A bit more respect, young girl. Start by calling me master!\\\",\\\"►I am the only master I acknowledge! @ionlymaster\\\",\\\"►Fine, what can you teach me… master? @yesmaster\\\",\\\"►Forgive me, master. I am willing to learn. @yesmaster\\\",\\\"►[$ismale]When do you beings stop calling me “boy” for once?!\\\",\\\"►[not $ismale]When do you beings stop calling me “girl” for once?!\\\",\\\"[$ismale]What are you saying, boy?\\\",\\\"[not $ismale]What are you saying, girl?\\\",\\\"►[$ismale]I'm a girl! @genderswap\\\",\\\"►[not $ismale]I'm a woman! @woman\\\",\\\"►[$ismale]I'm a man! @man\\\",\\\"►[not $ismale]I'm a man! @genderswap\\\",\\\"►I'm a human, leave me alone with your gender talk! @human\\\"],\\\"woman\\\":[\\\"Great for you. @getthisdone\\\"],\\\"man\\\":[\\\"Ohohoh. Have you looked in a mirror? You have less facial hair than a stone.\\\",\\\"►You're right, master. @yesmaster\\\",\\\"►Touché! @touche\\\",\\\"►A man is defined by his actions, not by his beard.\\\",\\\"And for now you have neither. But I reckon this may change today.\\\",\\\"►You're right, master. @yesmaster\\\",\\\"►But I have accomplished so much!\\\",\\\"►Are you saying I'll grow a beard today? @beard\\\",\\\"So what, you talked to a fire, bounced off a mushroom and stuck a pine cone into the mud.\\\",\\\"Mediocre!\\\",\\\"But I'll lead you to greatness once you've accepted your current lack thereof.\\\",\\\"►Please do, master. @yesmaster\\\",\\\"►Just get to the point already.\\\",\\\"So impatient. I'll bless you with my teachings once you've demonstrated your willingness to accept them!\\\",\\\"►OK, master, you win. @yesmaster\\\",\\\"►Just tell me!\\\",\\\"Well, let me help you help yourself then…\\\",\\\"►Master master master master!\\\",\\\"See, easy! @yesmaster\\\"],\\\"beard\\\":[\\\"Well that's a miracle for another game. Your fate in this world is a different one, one of carrying and dancing, I presume.\\\",\\\"►OK, master. @yesmaster\\\",\\\"►But I want a beard!\\\",\\\"Are you sure this is what you desire?\\\",\\\"►No, master. But I'm ready for your teachings. @yesmaster\\\",\\\"►Sure!\\\",\\\"Aren't there more important things right now?\\\",\\\"►Yes, master. Let's discuss those instead. @yesmaster\\\",\\\"►No, I really want a beard!\\\",\\\"Well… I guess I could lend you a piece of mine. But please call me master first.\\\",\\\"►Master master master!\\\",\\\"Here you go. !givebeard\\\",\\\"But don't complain! I can only do white ones. This is your life now.\\\",\\\"►Thank you, master. Now back to your teachings. @yesmaster\\\",\\\"►Mphffpfhffhfpf.\\\",\\\"Takes some getting used to. But, where were we… right. @yesmaster\\\"],\\\"genderswap\\\":[\\\"Well I guess even my immense wisdom has its limits.\\\",\\\"Maybe you should switch up your appearance next time…\\\",\\\"►All righty. Maybe I'll do that.\\\",\\\"Where were we? Ah yes! @getthisdone\\\"],\\\"touche\\\":[\\\"…\\\",\\\"►…touché, master. @yesmaster\\\"],\\\"human\\\":[\\\"This… exceeds my expertise. Umm. Where were we. Ah, yes. @yesmaster\\\"],\\\"onmyown\\\":[\\\"Good luck, fool. @visitedentry !end\\\"],\\\"yesmaster\\\":[\\\"So, let an old and wise stone tell you: Basic gardening requires water. So…\\\",\\\"►Sooo…? @soo\\\",\\\"►I think I need a drink… a hard one. @drink\\\",\\\"►Wait… I want to talk about something else first. @introduction\\\"],\\\"soo\\\":[\\\"This is harder than I thought. @rain\\\"],\\\"drink\\\":[\\\"Me too, although I am hard enough already, hahahahaha. @rain\\\"],\\\"rain\\\":[\\\"[$ismale]You need some rain of course, you foolish man. Magical rain from the clouds above!\\\",\\\"[not $ismale]You need some rain of course, you foolish woman. Magical rain from the clouds above!\\\",\\\"You need to grow as person to get access to the cloud world. Not literally, but metaphorically.\\\",\\\"Though… literally might also work, but I digress.\\\",\\\"As a part of this trial, you have to bring me down to the river and toss me in. !riverzoom\\\",\\\"I will grant you incredible strength so you are able to carry me down the mountain.\\\",\\\"Beyond the river, you will find the answer to your quest in a sacred cave.\\\",\\\"►I am not sure if I really want to touch you… @nottouchyou\\\",\\\"►[$ismale]By the power of Grayskull! @lift\\\",\\\"►[not $ismale]For the honor of Greyskull! @lift\\\",\\\"►Yes, master. @lift\\\",\\\"►On second thought, I don't like this… at all.\\\",\\\"What a hard disappointment… @visitedentry !end\\\"],\\\"nottouchyou\\\":[\\\"This is the beauty about power, and now lift me up!\\\",\\\"►I… need… to… lift… my… master… @lift\\\"],\\\"lift\\\":[\\\"You are wooooorthy! @remember !pickupstone !end\\\"],\\\"remember\\\":[\\\"There you are again, my padawan. @remember !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3N0b25lMS5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/stone1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/stone2.dialog.json":
    /*!******************************************!*\
      !*** ./assets/dialog/stone2.dialog.json ***!
      \******************************************/
    /*! exports provided: entry, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"At last, I can take a bath. @entry!end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3N0b25lMi5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/stone2.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/stonedisciple1.dialog.json":
    /*!**************************************************!*\
      !*** ./assets/dialog/stonedisciple1.dialog.json ***!
      \**************************************************/
    /*! exports provided: entry, no, yes, suspicious, onmyway, visited, introduction, onmyown, explaination, solution, end, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Hello! !set $talkedToStoneDisciple true\\\",\\\"I'm a stone monk and student of the wise stone atop the mountain peak.\\\",\\\"Are you here to climb the mountain?\\\",\\\"►Yes. @yes\\\",\\\"►Is there any other way to get up there? @no\\\"],\\\"no\\\":[\\\"No.\\\",\\\"[$ismale]Maybe flying, but you don't look like a bird man or man bird.\\\",\\\"[not $ismale]Maybe flying, but you don't look like a bird woman or woman bird.\\\",\\\"►Damn… then yes. @yes\\\"],\\\"yes\\\":[\\\"Good.\\\",\\\"In order to get up, just jump up the platforms here…\\\",\\\"It's easy. Just jump and that's it.\\\",\\\"…pfftttt. !amused\\\",\\\"Nothing special to consider.\\\",\\\"…hehe! !amused\\\",\\\"►Why the suspicious act? @suspicious\\\",\\\"►I'm on my way then. @onmyway\\\"],\\\"suspicious\\\":[\\\"That's part of the fun!\\\",\\\"►OK… I'm on my way then. @onmyway\\\"],\\\"onmyway\\\":[\\\"Pffttttt… !amused\\\",\\\"Good luck!@visited !end\\\"],\\\"visited\\\":[\\\"[not $gotTeleported]Go on, I'll wait here. !end\\\",\\\"[$gotTeleported]Welcome back… @introduction !set $talkedToStoneDiscipleAgain true\\\"],\\\"introduction\\\":[\\\"How far did you get? Pftttt… hihi! !amused\\\",\\\"►Not so far according to your reaction.\\\",\\\"Yes, very true.\\\",\\\"Just say a word if you need help.\\\",\\\"►I'm in a hurry, give me something to work with. @explaination\\\",\\\"►Riddles are my strong suit. I'll do it myself!\\\",\\\"Respectable. Good luck then! @onmyown !end\\\"],\\\"onmyown\\\":[\\\"How goes the riddling?\\\",\\\"►Progress is imminent! I can do this. @onmyown !end\\\",\\\"►I could use some help after all.\\\",\\\"I thought so! @explaination\\\"],\\\"explaination\\\":[\\\"This is a magical climbing chamber with unlimited height. !set $mountainRiddleExplained true\\\",\\\"We adopted the concept from a fire spitting turtle.\\\",\\\"He used it to keep some plumbers out. You can't make this stuff up.\\\",\\\"►I really don't care, how can I overcome the trial? @solution\\\"],\\\"solution\\\":[\\\"You might already have guessed that the distinct gates are the key.\\\",\\\"Just go through them in the right order and that's it.\\\",\\\"►And you're gonna tell me the order?\\\",\\\"No.\\\",\\\"Wouldn't be much of a trial I spoiled the solution here and now.\\\",\\\"►…\\\",\\\"Don't worry. I have a cryptic tip for you!\\\",\\\"Listen closely:\\\",\\\"The solution is represented outside on the wall to the right…\\\",\\\"►That is very specific and not cryptic at all.\\\",\\\"…whoops.\\\",\\\"I got the wrong tip sheet here.\\\",\\\"Well, good luck nontheless.\\\",\\\"►I'll try my best. @end !end\\\"],\\\"end\\\":[\\\"Still not finished?\\\",\\\"Remember the tip: The solution is represented outside on the wall to the right.\\\",\\\"►Yeah, thanks. @end !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3N0b25lZGlzY2lwbGUxLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/stonedisciple1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/stonedisciple2.dialog.json":
    /*!**************************************************!*\
      !*** ./assets/dialog/stonedisciple2.dialog.json ***!
      \**************************************************/
    /*! exports provided: entry, teaching, easy, struggled, end, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"You did it!\\\",\\\"[not $mountainRiddleExplained]And you even did it without my help.\\\",\\\"[not $mountainRiddleExplained]You rock!\\\",\\\"[not $mountainRiddleExplained]I have nothing left to teach to.\\\",\\\"[$mountainRiddleExplained]It was fairly easy with my help, wasn't it?\\\",\\\"►[not $mountainRiddleExplained]You didn't really teach me anything. @teaching\\\",\\\"►[$mountainRiddleExplained]Yeah. @easy\\\",\\\"►[$mountainRiddleExplained]I still struggled. @struggled\\\"],\\\"teaching\\\":[\\\"Don't be like that…\\\",\\\"Bye! @end !end\\\"],\\\"easy\\\":[\\\"I really should keep track of my tip sheets.\\\",\\\"I feel kinda bad for spoiling your fun…\\\",\\\"Well, bye! @end !end\\\"],\\\"struggled\\\":[\\\"What, really?\\\",\\\"Maybe I have to revisit the tip sheet for brain dead humans…\\\",\\\"Well, bye! @end !end\\\"],\\\"end\\\":[\\\"Hey again!\\\",\\\"You can still use this mountain trial in your free time, if you want. @end !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3N0b25lZGlzY2lwbGUyLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/stonedisciple2.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/superthrow.dialog.json":
    /*!**********************************************!*\
      !*** ./assets/dialog/superthrow.dialog.json ***!
      \**********************************************/
    /*! exports provided: entry, sorry, collectible, hey, greetings, bone, throw, who, clouds, down, what, seed, seed2, bye, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"Hey! No touching!\\\",\\\"►Woah, sorry. @sorry\\\",\\\"►But aren't you collectible? @collectible\\\"],\\\"sorry\\\":[\\\"No hard feelings.\\\",\\\"Just keep your hands where I can see them. @greetings\\\",\\\"►Sure don't worry… @greetings\\\"],\\\"collectible\\\":[\\\"I am, that's why you shouldn't just go around touching me!\\\",\\\"You really don't want to own a power-up that hates you!\\\",\\\"►I guess… @greetings\\\"],\\\"hey\\\":[\\\"Hey there! @greetings\\\"],\\\"greetings\\\":[\\\"Need anything?\\\",\\\"►Who are you? @who\\\",\\\"►What are you up to? @what\\\",\\\"►[not talkedAboutSeed]I have this seed problem… @seed\\\",\\\"►[talkedAboutSeed]I still have this seed problem… @seed2\\\",\\\"►[$gotBoneQuest]I have this bone problem… @bone\\\",\\\"►I'm off… @bye\\\"],\\\"bone\\\":[\\\"A bone problem…?\\\",\\\"►[not gotBoneInfo]Yeah, I need to get a bone through a door\\\",\\\"►[gotBoneInfo]How did the trick work again? @throw\\\",\\\"Oh… that might be tricky.\\\",\\\"As you know, items won't go through doors.\\\",\\\"►Is there really nothing I can do?\\\",\\\"Well… I'll let you in on a little secret.\\\",\\\"Listen closely!\\\",\\\"It's not that items can't go through doors.\\\",\\\"They just don't want to.\\\",\\\"But you can trick them with a precise throw.\\\",\\\"►How would that help? @throw\\\"],\\\"throw\\\":[\\\"It's really easy.\\\",\\\"You pretend to go through the door without the item.\\\",\\\"Just throw it and enter the door as usual.\\\",\\\"The trick is, that you time the throw in a way, that you can still catch it.\\\",\\\"Going through a door takes some time after all!\\\",\\\"I hope that helps with your bone problem.\\\",\\\"►Awesome, I'll try that. !set gotBoneInfo @greetings\\\"],\\\"who\\\":[\\\"I'm the almighty super throw!\\\",\\\"Not that useful, but at least I'm not a dancing power-up.\\\",\\\"I live in the clouds with the rest of the family.\\\",\\\"►Like, literally in the clouds? @clouds\\\",\\\"►Why are you down here? @down\\\",\\\"►Back to topic. @greetings\\\"],\\\"clouds\\\":[\\\"Can you live there any other way?\\\",\\\"►Nevermind… @greetings\\\"],\\\"down\\\":[\\\"I'm excercising my throwing arm…\\\",\\\"Also, Dad has company over. I don't like the smell.\\\",\\\"►I really don't want any details… @greetings\\\"],\\\"what\\\":[\\\"I'm throwing stuff up the mountain to excercise.\\\",\\\"This is practically the best spot to do so in the entire world.\\\",\\\"►Any success?\\\",\\\"No, I ran out of stuff pretty quickly.\\\",\\\"►Too bad… @greetings\\\"],\\\"seed\\\":[\\\"What kind of problem?\\\",\\\"►I must get the seed up the mountain.\\\",\\\"I see. Items really hate going through doors.\\\",\\\"You're a human right? Humans can throw by default.\\\",\\\"Maybe try throwing the seed up the mountain?\\\",\\\"You won't find a better spot than this.\\\",\\\"►Good call, I'll try that. @greetings !set talkedAboutSeed true\\\"],\\\"seed2\\\":[\\\"Really? Still?\\\",\\\"Like I said, throw the seed up the mountain whenever possible.\\\",\\\"This spot here is a perfect start.\\\",\\\"This trick might come in handy later on as well.\\\",\\\"►Got it. @greetings\\\"],\\\"bye\\\":[\\\"See ya! @hey !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3N1cGVydGhyb3cuZGlhbG9nLmpzb24uanMiLCJzb3VyY2VzIjpbXSwibWFwcGluZ3MiOiIiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./assets/dialog/superthrow.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/tree0.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/tree0.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, visited, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"You are the dancing tree,\\\\nOld and rough. !amused\\\",\\\"One hundred and seventeen,\\\\ndancing tree. !amused\\\",\\\"►Hello?\\\",\\\"Feel the beat from the tree topsee, oh yeah! !amused\\\",\\\"►He seems preoccupied with singing. @visited !end\\\"],\\\"visited\\\":[\\\"La la la…\\\",\\\"►Maybe I should talk to the fire first… @visited !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3RyZWUwLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/tree0.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/tree1.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/tree1.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, danced, dare, nothelpful, smile, request, prank, wood, sure, pinecones, lovethat, weird, notime, nevermind, definitely, missinggear, cool, reminder, reward, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"You are the dancing tree,\\\\nOld and rough. !amused !talkedtotree\\\",\\\"One hundred and seventeen,\\\\ndancing tree. !amused\\\",\\\"Feel the beat from the tree topsee, oh yeah! !amused\\\",\\\"►Hello?\\\",\\\"►Wait… what?\\\",\\\"You can dance\\\\nYou can grow. !amused\\\",\\\"Having the root of your life. !amused\\\",\\\"►Can you hear me?\\\",\\\"►What is this?\\\",\\\"►I know that song!\\\",\\\"Ooh, see that birch\\\\nWatch that tribe. !amused\\\",\\\"Digging the dancing tree. !amused\\\",\\\"►Are you done yet?\\\",\\\"Rude! !angry\\\",\\\"I'll talk to you after you prove you're worthy.\\\",\\\"[$ismale]Show me your moves, boy!\\\",\\\"[not $ismale]Show me your moves, girl!\\\",\\\"Follow the beat! Get ready! @danced !end !dance 1\\\"],\\\"danced\\\":[\\\"Your little dance amuses me. You're keeping the beat alive! !amused\\\",\\\"►Thanks for the compliment! @smile\\\",\\\"►There is nothing like putting a smile on a tree's face. How are you? @smile \\\",\\\"►How dare you?! @dare\\\"],\\\"dare\\\":[\\\"Oh you pesky human! Can't even take a compliment! @request !end\\\"],\\\"nothelpful\\\":[\\\"Oh you gnarly individual. I should have never trusted you in the first place… @request !end\\\"],\\\"smile\\\":[\\\"You seem like a decent lad! Maybe you can help me out with something.\\\",\\\"►Actually, I was about to ask you for something.\\\",\\\"Huh? You came here just for me? How nice! @request\\\"],\\\"request\\\":[\\\"What is it that made you come all this way?\\\",\\\"►I'd like to humbly ask you for a piece of your wood. @wood\\\",\\\"►I'm gonna cut you down.\\\",\\\"You… and what army?! !angry\\\",\\\"►Haha, it's just a prank bro! @prank\\\",\\\"►You're right, stupid idea. @request\\\",\\\"►Maybe we can help each other out.\\\",\\\"How? Why are you here?\\\",\\\"►I need a piece of you. @wood\\\"],\\\"prank\\\":[\\\"Go prank somebody else. I'm too old for this. @sure !end\\\"],\\\"wood\\\":[\\\"Sure sure. I can spare some. If you help me, you shall have your wood.\\\",\\\"►Awesome! @sure\\\",\\\"►What can I do for you? @sure\\\"],\\\"sure\\\":[\\\"I'm an old tree. I don't have any children.\\\",\\\"My pine cones never amount to anything…\\\",\\\"I could really need your help. With procreation.\\\",\\\"►I'd love that! @lovethat\\\",\\\"►Isn't that a little… weird? @weird\\\",\\\"►Oh no! What happens to your pine cones? @pinecones\\\",\\\"►Nah I'm not really the helpful kind. @nothelpful\\\"],\\\"pinecones\\\":[\\\"Well that's a super long story.\\\",\\\"But I'll gladly tell you, little one.\\\",\\\"►Um, nevermind. @nevermind\\\",\\\"►Cool! @cool\\\"],\\\"lovethat\\\":[\\\"I figured it all out.\\\",\\\"The only way I can get a son is if you plant one of my pine cones on the mountain in the west. !mountainzoom\\\",\\\"Would you do that for me?\\\",\\\"►Definitely! @definitely\\\",\\\"►Ain't nobody got time for that! @notime\\\"],\\\"weird\\\":[\\\"Oh you judgemental humanoid! Show some empathy! @request !end\\\"],\\\"notime\\\":[\\\"Oh you are not a very helpful life-form! @request !end\\\"],\\\"nevermind\\\":[\\\"Oh you rude leafless imposter! Won't even listen to my sad, sad story. @request !end\\\"],\\\"definitely\\\":[\\\"Awesome. @missinggear\\\"],\\\"missinggear\\\":[\\\"Oh, and I almost forgot!\\\",\\\"You will need some special gear to be able to climb that mountain. I hereby grant my personal pair of double jump boots!\\\",\\\"►Awesome, thanks! !doublejump\\\",\\\"I'll drop the seed for you now. Good luck on your journey! !spawnseed @reminder !end\\\"],\\\"cool\\\":[\\\"So the thing with pine cones, you see, is they need very special fertile ground to grow.\\\",\\\"Have you looked down? The soil here is rubbish. Nothing can grow here. No nutrients!\\\",\\\"Which, ironically, is why I'm too weak to throw my pine cones far enough onto better grounds.\\\",\\\"A vicious circle of non-procreation!\\\",\\\"So I need somebody to carry my pine cone to the best possible place in the area.\\\",\\\"I just want my child to have it easier than me, you know?\\\",\\\"►Definitely! @lovethat\\\",\\\"►Ain't nobody got time for that! @notime\\\"],\\\"reminder\\\":[\\\"You know, you wanted to help me procreate. Bring my cone to the highest place in this area.\\\",\\\"►Got it! @reminder !end\\\",\\\"►[not $seedplanted]Sorry, I lost your cone!\\\",\\\"►[$seedplanted]I planted the seed. How about the reward? @reward\\\",\\\"You did… what? Thank god I have an unlimited supply of them. @reminder !spawnseed !end\\\"],\\\"reward\\\":[\\\"You will get a reward when my offspring sprouts. That was the deal.\\\",\\\"►But... that might take forever!\\\",\\\"Ho ho, maybe you can go the extra mile and make the little cone grow faster?\\\",\\\"►I'll try... There might be some trick to it. !end @reminder\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3RyZWUxLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/tree1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/tree2.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/tree2.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, alive, barelyalive, spoiled, returning, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"How did you fare?\\\",\\\"►There was a suspiciously convenient patch of soil at the top of the mountain.\\\",\\\"The sacred garden, yes. How about my seed?\\\",\\\"►He is alive and well. @alive\\\",\\\"►He is alive… for now. @barelyalive\\\",\\\"►He is alive but you might want to check if your seeds are not spoiled. @spoiled\\\"],\\\"alive\\\":[\\\"This is good news. This deed will not be forgotten.\\\",\\\"As promised, you may have a piece of my crusty bark.\\\",\\\"►Thanks! @returning !spawnwood !end\\\"],\\\"barelyalive\\\":[\\\"Trees are sturdy creatures. He will make me proud, I'm sure of it!\\\",\\\"►If you say so…\\\",\\\"Yes, yes… where were we? Ah yes, as promised, you may have a piece of my crusty bark.\\\",\\\"►Thanks! @returning !spawnwood !end\\\"],\\\"spoiled\\\":[\\\"Oh dear… what did he say? Was he making strange frog related puns?\\\",\\\"►That's a very specific… but no.\\\",\\\"Well, don't mind him then. It's just a phase, he will grow out of it.\\\",\\\"As promised, you may have a piece of my crusty bark.\\\",\\\"►Thanks! @returning !spawnwood !end\\\"],\\\"returning\\\":[\\\"Greetings, friend!\\\",\\\"►See you around! @returning !end\\\",\\\"►Sorry, I lost the wood you gave me earlier!\\\",\\\"You do this on purpose, right? Wood is not growing on trees! @returning !spawnwood !end\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3RyZWUyLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/tree2.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/window.dialog.json":
    /*!******************************************!*\
      !*** ./assets/dialog/window.dialog.json ***!
      \******************************************/
    /*! exports provided: entry, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"(The blinds on this window are only half closed.)\\\",\\\"(It is possible to take a look through the window.)\\\",\\\"►Take a look !end @entry !lookThroughWindow\\\",\\\"►Step back !end @entry\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3dpbmRvdy5kaWFsb2cuanNvbi5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/dialog/window.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/dialog/wing1.dialog.json":
    /*!*****************************************!*\
      !*** ./assets/dialog/wing1.dialog.json ***!
      \*****************************************/
    /*! exports provided: entry, dontcallmethat, looking, jumping, noflying, pickup, seed, water, annoy, deal, giveaway, takecare, use, grown, sarcastic, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"entry\\\":[\\\"[visited]You again… Breaking into my home.\\\",\\\"[not visited]Who are you? Why are you breaking into my house…?\\\",\\\"►[not visited]I was just looking around. @looking\\\",\\\"►You… look like a flying ability power-up. @pickup\\\",\\\"►[$seedplanted]Do you know anything about growing seeds? @seed\\\",\\\"►[$seedgrown]I did it, the seed has grown. @grown\\\",\\\"►[not visited]What a strange person…\\\",\\\"►[visited]Bye power-up. @dontcallmethat\\\",\\\"Whatever. @entry !end\\\"],\\\"dontcallmethat\\\":[\\\"Don't call me that! @entry !end\\\"],\\\"looking\\\":[\\\"And you think this is an accepted behaviour?\\\",\\\"Nevermind, it's apparent what your standards are.\\\",\\\"How did you get up here in the first place?\\\",\\\"►Via jumping. @jumping\\\"],\\\"jumping\\\":[\\\"Aw man, another one of the multi-jump gang. Flying is better and you know it. !set visited\\\",\\\"►There was no flying ability available. @noflying\\\",\\\"►I like the multi-jump.\\\",\\\"Yeah, you look like someone who would. @entry\\\"],\\\"noflying\\\":[\\\"That's because I'm up here and don't let strangers touch me. That includes you! @entry !end\\\"],\\\"pickup\\\":[\\\"[$ismale]And you look like generic action guy.\\\",\\\"[not $ismale]And you look like a random japanese school girl.\\\",\\\"Go be generic somewhere else, it's unbearable. !set visited\\\",\\\"►Don't change the subject. You're even glowing.\\\",\\\"►Ouch! The truth hurts. @entry\\\",\\\"Yeah, so? That's none of your business and as if you needed a flying ability in the first place!\\\",\\\"I bet you got one of those multi-jump things! Even birds are falling for this scam nowadays.\\\",\\\"►Guilty as charged.\\\",\\\"I guessed so. @entry\\\"],\\\"seed\\\":[\\\"[not deal]Seeds? What is there to know? That's basic gardening. !set visited\\\",\\\"[not deal]Just put the thing in dirt and pour some liquids over it.\\\",\\\"►[not deal]I don't have any water.\\\",\\\"[not deal]Well, that's too bad. But not really my problem, is it?\\\",\\\"►[not deal]Then I will annoy you until it rains naturally. @annoy\\\",\\\"[not deal]Don't you have some water? @water\\\",\\\"[not $seedgrown]Seriously? I already gave you my stupid son and an instruction on how to get the water.\\\",\\\"►[not $seedgrown]Sorry, can you repeat it?\\\",\\\"[not $seedgrown]Wow… stand on top of the grey cloud next to my house.\\\",\\\"[not $seedgrown]It's very very simple. There shouldn't be any reason for me to repeat this.\\\",\\\"[not $seedgrown]Go away please!\\\",\\\"►[not $seedgrown]OK… !end @entry\\\",\\\"That's a trick question! I know that you already grew the seed.\\\",\\\"You really can't hold your side of our deal, can you?\\\",\\\"►Sorry, I just like being around you.\\\",\\\"Leave before I call the cops on you.\\\",\\\"►I'm on my way! !end @entry\\\"],\\\"water\\\":[\\\"Look around you! I'm living in the clouds.\\\",\\\"When I get thirsty, I just put my face in through my living room wall and breathe in.\\\",\\\"►Then I will annoy you until it rains naturally. @annoy\\\"],\\\"annoy\\\":[\\\"Company of a human is the last thing I need right now.\\\",\\\"OK, let's strike a deal.\\\",\\\"I get you your water and you leave me alone forever.\\\",\\\"How does that sound?\\\",\\\"►Best deal ever made. @deal\\\",\\\"►I might still send you emails in secret.\\\",\\\"Joke's on you, I forgot my email password a long time ago! @deal\\\",\\\"►OK OK, the deal is great. @deal\\\"],\\\"deal\\\":[\\\"So, listen closely. You can get water out of the darker clouds.\\\",\\\"Since waiting is not an option, there is the possibility of rain dancing.\\\",\\\"I think one of my children holds this kind of useless power.\\\",\\\"Let's see…\\\",\\\"…\\\",\\\"Yeah… Dave! That little misfit is nothing but trouble.\\\",\\\"You can have him.\\\",\\\"►Are you really just giving away your child? @giveaway\\\",\\\"►Thanks. I will take care of him. @takecare\\\"],\\\"giveaway\\\":[\\\"Don't worry. I have plenty more where this one comes from.\\\",\\\"Also, this might be the only opportunity for him to actually be of any importance.\\\",\\\"Plus, you have no idea how annoying he can be.\\\",\\\"So, win-win I guess? !learnraindance @use\\\"],\\\"takecare\\\":[\\\"Whatever. Just don't bring him back! !learnraindance @use\\\"],\\\"use\\\":[\\\"Where was I? Ah…\\\",\\\"Using the power is easy: Stand on top of the cloud and Dave should give you a hint on what to do.\\\",\\\"►I'm on my way then!\\\",\\\"Close the door on your way out. !end !set deal true @entry\\\"],\\\"grown\\\":[\\\"What a great achievement. I'm so proud of you. !set visited\\\",\\\"►Thanks!\\\",\\\"►Are you being sarcastic? @sarcastic\\\",\\\"That was sarcasm. I couldn't care less. @entry\\\"],\\\"sarcastic\\\":[\\\"Oh no, I have been found out!\\\",\\\"►Shame on you!\\\",\\\"I couldn't care less. @entry\\\"]}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvZGlhbG9nL3dpbmcxLmRpYWxvZy5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/dialog/wing1.dialog.json\n");
    
    /***/ }),
    
    /***/ "./assets/maps/level.json":
    /*!********************************!*\
      !*** ./assets/maps/level.json ***!
      \********************************/
    /*! exports provided: compressionlevel, editorsettings, height, infinite, layers, nextlayerid, nextobjectid, orientation, renderorder, tiledversion, tileheight, tilesets, tilewidth, type, version, width, default */
    /***/ (function(module) {
    
    eval("module.exports = JSON.parse(\"{\\\"compressionlevel\\\":0,\\\"editorsettings\\\":{\\\"export\\\":{\\\"target\\\":\\\".\\\"}},\\\"height\\\":109,\\\"infinite\\\":false,\\\"layers\\\":[{\\\"compression\\\":\\\"zlib\\\",\\\"data\\\":\\\"eAHtXbvSLDcRXv9UgbEJgCIwOGC5PgMG7ASeANuQQNVJiKB4BNcJ4AEIyblUUbwCtgkMGUTYxoENGSRcAy7Job/d+fb036uWNLuaHc1Mq6r/llpSt/Tpm57Z+W+7XZRA4AYIPLHbPSGym1rfYCsRYoMIkLd26559GPdx6f+EyNTaLivagcBoBMjlQd+JfgQnxn7WTgUqzKn2XfCTCh22QGAMAjY3Pyuce0bE2tkG/x+QlyYQx3i65NubZ+0mbDQDgfEIkMODLuVk9IP3eJ45K4OPs3vDYC/59uad2c8ChyEQGIeAzaWlnIx+j/fWl22XfNvxXnvcDmN0IJBAwOToUk5eYr5/8W63o7wk9SiBgM2ppZy8xHxPzkMH79tz/g1x+WuR37R3PZnHVyTfvx/eK5/Bke/xjn7s8z1CYK4tF73vt04K7eB9AaAru9+V+e+J/PFKP7eeDt4z79fk+yTnlQ/60hp7gm9bLnnfb32U2sH7EkKX9/9Jpv5b5D8i/73czawzkfspFy1E5nv5G/5Onx2Uc2981q7mR3VeBP4n4T8s5/4RkY+KbLHo/J7K4/peQnxS40p+ODd0INAFApl8j/x9yvccJ4vO5nWOs7qLzcYiAoEjAqU8rfP9JXme/gPvQOAaBHSuBSf5cznaJ75HRbsej/c/Z8XmZdM+y/emn++UivoscBgCgUoEhHM65+pcDA9og/MQ7+d1bCTmY0/rGDq2N96z27jRDgRqEQCndP62uRht8t7L94f5OqDxafO2jWH7q9s6ZtQDgTEICEd1zrW5uCbfY74uXn6m3cagfazWMaMeCIxBAFyLfD8GsRi7FgQi36/lJGMfoxEY8r599o7n+9FIxoQFIcBna/vsHc/3CzrEWOpVCOj3Njrfn7238aKYzwz2/Yy9p9j+6rYXP+yBwAUI6Pf0Ot8/MO9tPNe8d3ja3lO8cSW7Fz/sgcAsCBTyfXU+L/mZZXPbCvoX2S4kShmBUp5u1V9eSYy4FoHfigPw/nfXOor5gcCCEAjeL+iwYqnNENgK738viGmxAOo+1u2YaAcCS0KAPLaae7B2ttkfOhBYGgLk8CXa7jX+RodFJNq9InAJ3zlH7yn+No1GY9l1Ptuv+T0mOXyJ1qc7J+8/KQvB30KxotcX9XoENO/1e/w1XQeX8J1zNJK98V6vLerjEEjxnvxfy/t8cBiFXB6jjzOPX4P3Go1l14P3/vVgTzZ4bxFZbnsLvOfp1OT5H3Fw5/rw9z47X2PPy9sS7/U56GcfbV9KnZ9vl7Le3ta5Vd73dg5j1xO8LyOWezcTvC/j1+OI4L1/KpbT/sjjz2PyPQ71Wt7n5Pa91L7gvX9ylvfgs+UyxvxZhFzX2o71I0XPrRHweI93Tlsvwfv1MkDzHnXwfc73rD0hHbx3TqP0O37sd6b3YA7e+6cQvE9jU/u7gOnZfVjBe5bI90TiqIP39/E4tZjPS/o0ob9K8N4/k+B9Gptr8r1+vkh7v41V815HjM+1u13wXjNC1W2eV125KjkPvc8NvEGfx/sbhO4+RPA+fUQ236dH3bdqzgfv72PTWyt4P5yIze+2XXFwwfsKkDoZAt6XCsas/ftWNr/bdgkj9PfEe66lZt0xJo0Avj+7dt4X/3ZfGpp7VnKNen+v97YNruG2UZcdTf8cAneS+nkEjEvZOWdJ2uZ3267ZC7lGXTNnqjE9rGGqvU3hV3OedS8O+61ey7Xg7duzk2vU3jj8/vfe62xkL62hUZhVuLH8zbXBba8/eP/4WT9FjOB9CpV5bB6HPbv3vI/x5D3fFbE9z85uF5U5VutU9Kl5X4qfWtNctlcl8GsirzdcwA/lXZz3ee3b6BsK+elxPGXfBO+Hd5nYf03RfGM9NW9q3sN/Ln5qTXPY3pSgb4m8LfIHkXdEWpSfy7nZz2dsvxK8fwzxwG+bI1LXu2eDM3JN68dBHteu4T3mlsoSeP9X2cTfRP4u8g+Rf4r8S6RFaZ3vsSYv92k+8LmG9xG2W+xpCh/MBVbrPdn6d2Qh3x3wICaa77au130t77XvvTi2/pbA+w9IrnlS5IMiT4k8LfIhkRalRb5vsY7ufQje+n8367xv+c7292VTPxBhm3vUnGR9z85BW56a7mxTcxr+9yLWnx6TdTZj514w/5TIp0U+I/JZkc+JfF7k2nJtvr82/lLm2zyv2+S1/t/Ouh92Xch1rfd6gNQtT013tqk5vWTePye4fVHkSyJfFnle5AWRFmVMvrfxcN5bLeQs8j55j/sB7FHaIPA1wfNFkZdEXhb5usg3RJoV8ZW8hzcLsD5H5H2tXh8Cy9+RvSezvfydtdtBLb+9ce1WEp6aIdA63+NeZH02W+w8jjw+19rnWXVEzSHA/G51bk6uD34eKLGf63Jze+2r5bc3rtd9bXpdNjc77TuxPxKgqL2cjn7Ne8xZevH4XGtf+v7XuH6b5732s8LnZ0So7Thgg8/H6Ne8R33ppZbf3ril73+V6xdeJt/nGDvzPPVZvh/GJ/M9fS0UQI/PtfaFbnvVy7Z522szz1Pnxul8j3sExy4VyFp+e+OWuu/e1/30iAU+L2Nf0OOZiwuaeZ76knzPe4EOzzruOfpnQGnvQXt8rrX3sIe1rIHfj752P8zFJc08T+2NR7+X79mXWjPe++ifAU2NmctWy29v3FzrXmPcVrw/YePk+8OzvwxiLpZhSPUHOc1FZZjPnE7uH97nJPq0nXMZ457fDhoen2vtHWzh4iV8TM4O0ksh76FrCs4oV7z8zffvOhcDBg0F6pzPnE7e6+d73aftnKtj5NZ6675afnvjbr3eS+Lp88R8njF0j7y3fLZtiwGukz2Nsinmc5paaeB1KkMcfS/oPd/rs/b4XGs/4dBrhTzwdEfrZr7X2O8r1neP9zKe+Tw5lTgkO/NGmXoqzOdLyvdb4j3Px9Ong+yg0or32XxP3huNvH2YZ3UHuLT6jLAl3uOhJnmeg70VppfQAzzXpRXvc/neu/513uZz/CO9uDnrDc4KnN8S771zpn3Oz12a56DVcyL6GQf1vUipwM8+MSj3u1c2H+jndPIen1NvWfTvzOi4Lc5qa7y352vbc+d7zfPWvAePkMdT71nIJeoe8v2961QTX/aAe/Y1Z7U13vNcPd1Lvgf/Ne+/MLT3+vydei7fI48fnlcG7tjrnm0v39fOpx/qEkf1vY57nDLfA7otPeccqDKcObgl1YMwzx76Z/qiz34K3rfI97X3C5tXSvlE730/4D9lvkeIrfGeZ7I13oNHtfl66fme+Syl+YyzJd4DB957e+M9lmZLzX3IjkHu3FtH0r4m3zNX9Jrv9f0CW0/xnbat8p5nSN7r6yBBl8P9UGNl65jzcgOBH55NjU6Nh00X7hU2+GS+T/ofjPjMaPP9YbJy/EDGZN/vSL9+Xzzm+Z5hxjzfB++JWlrjaHGG+kzIBdpxPaBYfnttjP1eA4EfrK+lcE/0yXzNttZ4z8/rxL7PgV2PtXXOgx2FberS8/1x1v2vHt6wl4pdn25rv/TDe+almn561dg/z4KaXGDb27vGS9ex1955T/7zGqcmH9hPbfM9x5X02bnLBPvOEW2N3xT13Dp1PK7XO/NaO/30qoEHz5aaHGCb2u4ZUzVmrMPeK+95LVPzGqcmP9hPbfM9x9VqYIJCfzrf475C7KbSuXXqmMdVnn9/0J6918Z89PVegAfPgpocYJva2yvsFrteec9rmJrXODXtVl+a71N805wAbigavynqqXXQpuMdV3M578kR+ulVH2CXL7nne3KAe0ppi10L3vNcWmpew9S8xqlptxr9+nn/2jWRD/CjsZuqnluvjsl1pc54jI1+etXAI3XGqe/d1+wbGKL0ynt7/szz1LzGS9r6uaateTdVPbc+HfN4epHviQPuB7fmPWLnzqtFH/M8tc0BXrtFbPrQvJuqzlgprWPyvHnWX7nb7b4qwnatpp9eNXCwZ+txoGbPwBClRb6Hn9Q5TWFjvp/Cd8mn5t1U9dwadExgjsKz/qZw/lsr5b2HCfaOAg1siEVOYxzK0njPa93DYkq75t1U9dz6dczj6a3/aw4P9LEAmxzf2YdxKC14X1rbmvo196ao57DS8Y6nt/6vOTzQxwJswG1q2Ml1q9HXgvfwU1rfGvo176aq53DSMYH5FsqT75P/oRYSGEzEgV6voeB8XPdTciB4H/yakl+9+g7eB+975eaU6+qV97GuQGCLCPxUviexRfmZ7PsnIj++2z38lehakfGHeZirpYQhxjJmaWyr/jli6rX3fD29JuexRfmF7PuXIq8bedW0bT/adgzaJQwxBjExvzS2Vf8cMfXae+b9m3IOW5Q3zL7fkrYWYPL2ccxD2NEe9EPYUR/6qQ92D0uMRUz68sa1tCOW3WdL/yVfPfN+LWsrnUH03z6/9cytKT/Lh+94h9Ur94Obwc0pORC8D35Nya9efQfvg/e9cnPKdfXK+/8DCiNATA==\\\",\\\"encoding\\\":\\\"base64\\\",\\\"height\\\":109,\\\"id\\\":4,\\\"name\\\":\\\"background\\\",\\\"opacity\\\":1,\\\"type\\\":\\\"tilelayer\\\",\\\"visible\\\":true,\\\"width\\\":190,\\\"x\\\":0,\\\"y\\\":0},{\\\"compression\\\":\\\"zlib\\\",\\\"data\\\":\\\"eAHtXVmvFUUQPtdXFXDhH6gIqP9AuODVRxKfVFB8g0SNGyq+cRI1bnAv+Oyu7AJqYtxQVvfEuMQXorJEAZf4AFFBI/gVnEqKvj37nHN6er5O6nZ3dXV31dc1PT3dc+Z2OgxEgAgQASJABIgAESACRIAICALrRjqd9aANoDJB6iq5bcw/r9PZgfJdJdsuow/rEIEkBFYbPxS/FL/dB5ow/KS6Ll99XmLX7xfB7xmIQCgIbHT8W3x/J6jMvKx+f7xE/eWOHqHgQz2IQBYCcr2UvWbsfSerH5YTgZARuKKn3AWIZ/TSUxIUpt8nAEN2XxAQn9RQda0xVRsqEdPvS4DGKrUgMEzfc58zajGIjRCBABEY63S6AapFlYgAESACRKAiAlWfHyp2z+pEoO8I+PZthvn80HeD2QERSECAfp8ADNlDQSDLH+UM9xhIzmOrhKx+qrTNukSgKAJ59hD1/YWibVv5PP1YeaaJQMwIcD8z5tEN27bpA1AP/s1ABKJDQNZCZd7j9AHBZwEfKuTFjgCfBWIf4cHbZ99FS+r9wqSCDP4SzPlLK+z7VK2foR6LiUDtCMh7xyvg813QdZ7Wk643+56y1p/lqU8WESACRIAIEAEiQASIABEgAkSACBABIkAEiAARIAJEgAgQASJABIgAESACzUdgM84TXwNtAW0FMRCB2BHYAz/fC/oI9DHoE5AbfsrxfQvIMBCBxiDwPfz8B9CPoP2gAyA3nHIZnvx/Hl6TWN81SVnqWhmBP+Hnf4H+Bp0AnQRlBZn/Y5vf6fdZox5X+RR8h30qaBroItDFoKwg83/T5/csG1keNwIz4OdXgmaCZoFmgxiIABEgAkSACBABIhADAnn2KGOwkzYQAYsAnk+7Ns80EWgbApz72zbitFcQyHM+1TakRj37W6tynHG0Dacm2zsH4zkXNAqalzG2sZ1bFRm3HRnYFGmLssNH4CaM582gW0ALM8Y29nOrMfPcsxhDc7sZHt+37E0xkw1D4F74+n2g+0HLMvy+YaZRXSKQiMCT8PWnQE+DVrbc7/k/eBLdJLqCl+Hrr4BeBa1tud/zO6zRufckgw6OnN3Dfx++vh30AehD+v0knMggArEjEPN8v8Dszc5s+fyWx49xXzgnvIn7xBug10HbevcMFViIxCLQraDblNmgmN/dbtBg1aSqnNsKZTX3BXz9c9BnoE8dv1+Gyg+AHgQ9lNVQQOXXQ5cbAtKHqgwOAZzbdqu+t7MS6q4CjYMmBqc6eyICtSGAuX9S8PGs0Fpk1oHWgzbYAqaJQEMQ8L234+M1xByq2SIE3PV61nzdImhoaoQIbOjtwciaXd6n0v+vV/X9mo3AalOEeNGk5iOwDn6ufj8Ma6ah092gPcPonH22CgH7DGnn91aBQGNbh8AuWDwXNNqzXP6nni9c7jBXI7/G4TFLBIgAESACzUFgHGv8CRADEWgTAuvNs23S/wluEx60NT4ExjwmWb/3FJPVIgS2t8hW+n2LBttj6o1mjdumbz5bv/fdDzxQkRURAnfA7+8E3QX6IyK7skwRv9cz2jTZ+ea3CPOQxndjumnyVcpw/fWt7TJ6LQBGGjStsfA1rbHlab1Q40dg26Ogx4yNoepap17HPfaKT8O3u7afRcbvLR+yZ4Lv90duG7Ye02Eg8CzG/zmPD4Sh3XC0KPLNgLTfH/muieFYxF5dBN6Czx/Fb4KOgA6DfnZ+H+TKx5KfmmJIXf6ap53Q1jYpsERV9CX8fkTu7aDT8PlTLfH7tEHM8tfFqCzfCZuR1gjKstrJqJ6r+HmM3wugF0EvgcoEXHve4Fu35+V5GyQzOASWQ6OHa9bKtwaSZ2MJ9nn5LKfc37fh6++A3gW9V9LvtefzNcGYCASOwFfw9a9B34C+rej3gZvaavXkW9OyB9nUsAS6L+3pr98oKPuexCG08wvoV9BvoN9BDHEiIL8ZEb8XKvPbEd1/HBQ67vPzCujdBTUh5F3L++SaYF+TdKzq96Hbyv2dwY5Q78zmnE5DPH+R30odA8m5U57z1nMMQiZp78KV0+dOeQ5192UEK1d+2HnVd9h6sP96EJD53Q3i+2V83m0nLW/PaV2/13p5ryGV72ds9e1nPzG1HfLvL3RdU2YtnzZG7r0sbd3v249MaluuEaUkGcsvc+9w/49Uv8bPt27Py7M2hpqu26fqtFP8vuyapk490trqrRG7KuPeH2QN4l5nKlsmdu+BIY9fGfsGVacsbninoXMYdAR0FNSPMIg1jepd5L0creOLXb+3MnJfwXXQtbyiacHEhn6v+WxfMaXL+j3eaeicljHAWI6AJFyW8C6tnAUmlZ2pWODPtZCdU0A+r6j4a9m9dNtH1roIa/Gule9Xuk7M+6XjMNvdh/EeF/+NOOCMp9sv8/T8Sd/b6Vc/0u4SjJOee2k/Pp6WZcVXpwjkXcv75FKaDaZIz4GCUahliuA+mDusgN+7516Wl3ZPvSp3L/ELyjOj0E5Q0XBN0Qol5e14aZ/uPKX8kl14q40lrNm8wgWYdT1HFOhykujsSZz2Mdz1vew9FD0Hcf0wNBRD0i/tuXdYuLXxOpD53g2hnYNcCgXtvO/q65blnf99++eyTyjPO/3aF3d1rzvvYqHt+6796VroiX3r9rw8T3ONY8neG+75wYW8vu1TPG3PRfxennnkeT903/f5ss9e8iYjYNexab7kuxfKPBxLkPWdXOOyPy7vAInvu2vAkG31zfO8LkIesXTdioydb+y19SLt6Jwfgt+7eqetTdTWtNg3f4l82pyX1p4tuxtzxT2gpoQ6bB6WrVX9wNV7Chjq924Z8+kIPA6ff6JBfp80B6RbOZxSuUabfJ0WRS2vrXnlivZPeSKQB4Gqzzxpa7U8/VOmPAKhz//umre8pXHUzHutuGtC3iPCHv9LalbPHf+am2dzRIAIEAEiQASIABEgAkSACBABIkAEiAARIAJ9RmAN3st5pvdbSemq7rxP/br7cNsbRp95dPDpNWjeZoy1jzYl8FV2o6dc62isskVjra9xVn2V01jlVUfhC9n8NuRt2I/8gR7vIOJDvbTl27StK2lfH6KH9CllErb2YtXPxiJj85L28VwZm9e+tJ70ucXpU8u0nuRdnq9vldHY1te0G0v/oYa9sNtHexL4KrvbU651NFbZorHW1zirvspprPKqo/CFbF7HYxz8CbyHeQLxSZCEfxD/20srHzIdTZ+V6nRW9WTQRtfXh+ghfUqZDaqfjUXG5iXt47kyNq99aT1fn1qm9STv8nx9q4zGtr6m3dj2zzQRIAJEgAgQASJABIgAESACRIAIEAEiUB8C/wOkAQzq\\\",\\\"encoding\\\":\\\"base64\\\",\\\"height\\\":109,\\\"id\\\":6,\\\"name\\\":\\\"decoration\\\",\\\"opacity\\\":1,\\\"type\\\":\\\"tilelayer\\\",\\\"visible\\\":true,\\\"width\\\":190,\\\"x\\\":0,\\\"y\\\":0},{\\\"compression\\\":\\\"zlib\\\",\\\"data\\\":\\\"eAHtXU3TbUdVfvOllgoOUG4CSajcOxAGWGAgqQIG3lQZPsoE9QeQ8yZvFSroVKK55UnQP2AJiYiQOaCUWsWHE6bqSEAHAiMKBoTwoVMHPs/reW49d93VvXvvs/c5+5yzu2rd/tirV3evfnr16t77PfdHd5yd/cjox0i/erbQSenA5n+FdKSLpCzyZPmh9TJZrWWAblNwzDNN3P/MQielg1cx38IB8XXjjrN1F2bBcwaedSseJY+yW+sM4WsCPZg0XsXE/ZsWOikdRNyX8PYJ4OLZAv0VylWPa0LpGNdkZLJdrmRl601tboP7B9DvL0DA50FM310gPsvoQZTfb89cVsZfku/lXs/lOY/S4lU+xnq+Tewyoxx/5unI15X3ukPTXW3weQn3EaPPgLcUnsazDKPCquLzioxMdpR7A/UlK4szGVmZ7Lxi2nuFHyDxQ9BfgqLe7zE+8bfGkrtChXNQlB3ztbbuQj+c33m7+q1+tPabfKqjdc01HkPW7iciE/IrEMf/9Camrj1kcnysxKznYzpr0+UrneGemK/hXHU9FkYvKr5MX9xTvuRmOI9l3p9aWnhXfO3Os7OfbuaSc8t5/RwEyPbLlmu+iQPO2zO1RsIzyX0W5XGumHd7zrn1tiI2HH+Sq+ZK8tXfyK96tbiljuuL/ed4/i4RGvvna5bsUQ5liaQTjV/lir3NFWSdg14BUX+cM6alB8f9DbRBLA3BJ0RWMUrZU8h17LMPLYF4j/vZzwH7rUE26bnWCsYXbTUxH+fe2C99J823l5fS6lu2tob0t9TO0PLYv1b73Le9uL5cH9SD414YGopP9u0pzKPkxHgbubL7WD/rKFf5Vt0Q99v0RTapDx7VtzjvjvsVmM5BtEmMo51HUWdQ33yelZ4KY52dMgb1jzba7bOxjJLM9Ox6mAr32juEScbbYI3KEPZd5gXkKt+qsG1x39pOxqd555rRfq31E21UbR/IZLNsBToHaY49lr2Xvz7EX4PogwjSM9cXSfrWWou4B17Xz4HvvRt6H+IsvN94xMv4T0HCYYwz3D9ekPMBlGehtp9k/FnZPnGf9Udl0UYNsc9x7TjutY6ir6X1oH6cQhxxH7HKNRCxT8zX8B1lKJ/JijjmuiM/eTPsR37JZtwa5op7t1GyS61jEl9cO457rSPinmtA+Nd6kIxS/C08+LbRd0qMHeUrPD8HvQIa4suh2tahhPsL86Pd/nfZdOIP2G22+R8Dr+7u411otj+Mhfs4pv9EP/qEFZjPQX5XwHnUXO7Lh/C1w/1d5Ovo8+in9n0+l5+F4stQ6vtrwPtao19COoYVCs5B0oXHukvxPUlrMcrx/AoZyXR9S57ztqYd98B6Ea9uV7uwHXmZ1zrKsKy+Rv894x0L97T5ovfgLufnQX2Cz53b1Jjehw+xwkCIE+KCcV+behd0w3EM6XuXXijzfsjmevO1iOJiqMkc0kc25LjP8Dp2GbH8ZrT7lsIoHftduL8BWd6/gsjbioV3xR8F5v8woT+qrAVhI+I85ulDlOznbR0bqSDipNWPUfPCZdwH9LwWq672Gcauk9iXFYSdg7QvaK0qz9jrx7Tktej4D2yOP4K05t8xNFWaWL6OsTwGKgXadGB63YX72MeSvFiu8Som7h3jK1QYMhecY9ow+hGad2JHa4S2aQWi7L42GFWaQ/TxW3yJZuEDGDV+YlY4lZi4RiOuVcdlOI/kacyt9j+z9/GdTvS/S8+d7wJjjLhkPvrVtbNrtjdM4ef4dwqcjyFzIf1rPj2WDeQakGzy00bJrj2NdJ/3vy4/pj+HAq29Vl8iyhgzL0wSr3ENSjeyE47pLK1x6Znkacyte1TEfe0bBWEus8OuJ/FluPeyLpue7Q2SfWHnbsn0PtTSsvOKr8He6zsF1otzoTnxmPoln+y79L1C/XMQ8ZzZdNkt4l5pzWHcD7QuuCYok/JK+/kq4fF+lOqh2uRBmGxZg9JJph+3LdJ99i1Ey4Ai7muYFuZqPGxTfMJjjB2zmSzVfw7Y4P2R36PqWZTJfGsQ3j2ONr9VVuSTPSeWZYuch/PFZ5pXxSrz+iwrUdzPh9bzvs0h7XtDHHumz6F93gfuHbM13IvPeabG/QqKPAeV7HWXnolr7gs12yZbxT1b+wbrMF2bd8eB2z72aWi9rvHs+rn2Bt9bu/TZ0scVmM5BmtcM91/H82+AvgnyQMzV/CDxZti82NTVGUDxMyiPQfVZh9h33Pt9P2X4nX+UU8q7nVda9t7t5pj2hX1Zgc5B7rcge0vQvDvGs3Ts29B6tzR+xBmfV+rTcX8DPrN8C317EH0MxyDVxO8MyPOkkXAre6041i2pOdav1XPekrxYLqx7LNy32OsorzUfdR9ttstx+91q++jDZ2tE9Wt7kLd9jGnNq3ThuBc+PXbMEWOep35KZS5D6Vi3pF/KxBq8eR9Uqzc27kt9GqPcsUx8Rpvtbch+t56XWZdzS376T/G87bKX9K32Xvj0mJiTLaeP8ScgBdp6fqcTcRlxK3mRT3IY+7ssxzLr1uo5r8urpd3OKy17X6u37TNhmTanr+31vSLuE/u8q9lWJ/uq38fexz4Kc9E3Kn2zVsPvdQh/bNOA5LasF/Jib1iTtzUI6x7vAvet/cv4tE9zn4i4vwtlLI93PJmcbcu+AgFfBf3ztoL2XH8M3AufXXFcHzpDxDium1o9521VpeNd6bnjXmMjxku4l08k3jHjeyHsPtCLoDXob0BXQCw/hODfKPCblNJ3ChcbG9qKOce87K+XDUmjDzd9/K76PA+0BmHd40PGPfeCKTHvev0iMl8G9P/BCw8w7fa+L866sFh7TpzWng951qp+x7vSh4L7XWI80+e/oPBfQf+WPTygMsf9EKzV6hBTxNOr0EdG/htlbwIffdQHjJgn8Zl4MzmlsofR7v0JCeseHwruDwhas+6q497xI5wp9mdMq5yYjMRn5BGuiCnxx1h1iW/e633StOX3fo79KKOUX3Bvypw4+WeQv97Q8xO3NYb4DPfCkTBZwhzLMxstfse9y/K0bPoXMBh+Y/T3Nijd+4nH67WkF9ybMrdI6iy7howSvYRnf72h7yKeeyjhnrhyTDMdscay+O6F9w3k49px3Au7WRzvJ6LOaPfl/2T1S2UL7qMm++U/A/bPgniWFaY9/vdQ/iUsC5x5z3jmZb2XQXMNNdw7HnmeEvYUy0b72Eq4V50s7nMX4b5PhneXv+DeZ2Z4WrjnPY7jvpQm7uceWnHfNY5fwJ3oL4Ic9+9C/mdBfX6LrKsd+T6Ob6Xj+llw36XNtue6w/lbsMOm32b7YfdvWQ+Hjnva0+xvJzJt8V35KyDWkZ+z7zuS30J/ngj0buTlfyke8nflEHNy4XsYMe8wSVwDmb3/NMoP4Y4z2nudaYlf2tFoQzGsNMgPmhPus45yDxDeFe97fWb9nHsZ14BwT59e6e/PveOb/mW4p712377PUNzPmSOeFtz3mc06r9t/7gGHgnmOalvcy6+nLPo6uvPhvvEQfPv/QNz3N5koa6qw4H4qzR6W3BLu5a8wpt9eI/KI5Nv7e6v4Ox270tAb0NBdG3oQ8VXQgnsoYQbhw3vuQ4Z7+fiy3S2x6jAm5h33+/J3dK7lWfadGz0vuM8Bl72b4jeXU4Xfm0pwo9yIe2HWcdySVj2PdW7U75H5bzNl3fO/PcmeDy17ARUX3Ne1xzv6eEe57X0kbfqVQrNzxb3jd2hauG+199eho8cKetq2+B4IKPk58fdztm3rEOvrjp73MrqPj7jnntBnD6hh+4N7VpLb+9q3lUOeCfdduLoXOrgPRH+cfvgUgbhnyPwc9rN1bf6/lOP9V/eT+t7AR8o9Ia4Ffx7TNdxH3l3np8S9zpSKiemaL0N//MmJFLDgvl2xsv3x/RPXRHZXWTqjHjLub8AWyta3/C4meS82deK37/Sxr4Om8mV8Zrl/oBs3A3Ff8nMWe39TTYMSJXzv25epDabV3g/5vaiI+0fQEdr+MX0Z+UbZ+ekdNvDF3psyRk7OGd+lobbivvZbCJL91MbOa3+IuFdedyuqt03c4hs9hAYW3G+j5eOrW8I9fJXL3+YQhsfGPX0O0rUdqXTxc3ak6ANppoR74V1xxP3jsO1dv/8h++7xu6CXqc6uJZXTz2+x978KxjeTeQlHr4GhuI8+jdaHx8T4E4F2hXn5/bwjpZ/fhXu9W+Nvq3S9X4O4JRyQBuJv59R+P8fxy/sZt/e8KxHudXcjfr//GdOPb1Gzm+ro9y9+TosGT4OH6yD+bhRwu87uK/13Makd4V54z+Jd497vb3wGfx8Z9eXU31v57x6soZc+9Dz4jyVkfo7b9tI454j7Ul+J9Y9vHp4y7on5l0D8FmEIfQr1jgX72+Cee0Nm51UmGwt1TRbctyk1It+ez0u4d//e/0/PY/D1+V3NGhQx/6Xwd7FcC/w+QWvi00j73xWC/4zYXwfq880Oqu49/ASguQpfR9/RCK9d9v79qOe/x6p6HtPPJ+55V0niOVPvrOI7Jp1BwdI7OKZLlcXDbyQy3B/739fq9xCE5w2+1573dPZd2vegO/1Nra8N/pYIv9nh74ZEehllcwxu64l94fY5pOMdpeczzMf7fspye0+88T7Ty6STeAZVeUssTJMXTaZBPNfxNMP9sX+TluHecZ6laefj9zn6bkd7gOLIl07CTAqjrSfu/S5Ga0Bx7Zl4YuwYr+F+G5UQ0/ruoXSuFe65rzwK0v6m+FRwTz8lwzhttpdn356BZXD4DGpyL3h5sIRxKmaYd3sf8Ts0736O4/7ucYZxKYVyfX1F0XDjbt7dc1/h314J74qjb38MPr3rgfZe2JaNLsUtmP8I5H3UGziQ9Fth21+fEPFNu/42gIXr3+2D9OZnnZLu6AfSB3Q8Cvf0dR4AyUYjuVVw3MdzAvNvBOkuhw2RX3hXfOz2Xv5JC6apo67w52D4iy6mGT53DBKHItl14d73PqaJ+RbdyZ8s4Z7t+TNkBwfacK4jnpnpw7hcjtMxj+xJ4p7j3jbwDnTdQM9v29CE9R+APb8voYh7P7cT961/a0Pcc68gBq9uiPj0bxbG/F7BZVMu27wGyvz9zN53/T0YRJ10IOZfAkU7yLz7BMx/CrSu0D7vPPXOqXRWdXsP/2at8fbBPeu47UW2OfCe1O+PsvQHwNMn6O+8MtzT3zl2X6ePrpy3hnnhAvbxJkZUFmOtj1YMeR/GSj+Nefb/51t2XvEvYy94fUKPo0xB32N+CGVrFDr9E/JDcd/yboD95F1rH+xfR58eA50S7l/EeNcbop3VncoT0N2TIM2h7Eo2l7Tzcd+PmFZeZ0Dls/gfIe950L5CxD5sf/XdK/cGf5+lPaO0Rrhu9PdV9L0jPYrn0rfH2bsBrccYl94zPALZsT3lH0VfdJ71+Bjt/W9CD7JfbrOEOc6hf1eoubyCehlmYbM77XqsF9cC8/SF9ol9YdfxRPxn36U9Cx3x2zTaCRL/D2eWReI+ojWk83IWvx269XbHTD8M2VmbKnO8Mz2H97X3AQu8f9L65H3XFdA2wXHtNksy+Vxz5foX/rVmWmNfL117xD6xn+G+5e9opbcs9n1EOMviOeF+LraePtjvwqZSX0PPRj4nPr/EvWyWYn/uuB+ablkvWhs8E3zXO7vDtGNUY83sQt8uSZ996+2KP9r7OeGemP9t0Ji4jz6q9Kx5cl9HOCjF4L30h6NPUDsvuiyuDWF/TmfcBfdCxe5j2nvtjWPg3u1aNq/CvXAZsew+bMR1lBdlSWYWC/v7xD1n1/scxzNk9iVvSN1d1Jm7vf8dKGEM3FOXmotsXuMZ7Rn4QqXANeTrIP4dEmVtznZN5zZiPztrl9qfopy60V73EvaxF5H/JGL5gUif9SmDjMuxT9HXMWRG3M/lvdXY9p66quF+DF26DN9fop2nr+Vl254jvd2haepG/crsQl+50nXfervij7hnfg4+PnEP3360cy31qbkYY15b5sexL1sa8c59o7a3tLQzBo90w/6NoR/JG6NvU8jIcD8Hm9/X3sNVuHnvqftPxneb0jQXY8yria0mHfuO+bHwVW28x0PpZqx+SV6PLuyUNcM9y/aN/Qz3D0EzV0F+ty+M81vTzf3P5R6hM7G+0+M7AM2F3vH1eceN6oNDPA/obBDPBYMbGKGidEPcn4J/L9yU4rG+ke47NRnuJcOfCd8e697fy3g29rnl/Gbfd/j3UNm3Ck9hY/F36mOundJvKWvcU8aumzH2Q8mbss/byCY2eEfuGGFa2BnrLqVvH1+wPqkPsvcR97zzif1Xns94Tshwz/ezsv3CMr8N0fkue/f0OuCea0aUrZ2+YyU/MV/6LeUh8vrWEU45rlPAffYNtpc9iHneVyC+gdtLzHofNuVcm7fg3b/tjml+k837RfoY8f5dGG6Js/NpXDtcQ333AX4/tM+7zFPDfddcj7H2HbN90rLrtNVXQdc2lf1vDITvj/cQ7HPcNf7W59ojxN+yD/g3oNxn+ug6+zvBt0PG0OA6OQX/vvZekrZxn2cvx/3Q+czqcY71jYFw6nGXTrRnZLbf5WT7gPyp96EPm35c+kxcN31wL93In+PeR/vwTsghPQLqExz3ffpRakPySs/3XT7GGKcawwsQzPnkN9x+H7lte5oTx6jSxHzLfbruaKLPVFtPaoPrhXr3frS2q7ET934u4763zd/teV/GwITkqb9zi8cY45RjIvbfDRrz7+/l5+s+0eMWzPt4Nb/CdIx5do5lzFPv3o9Su/Rn6L/wO+x7N8TvtN3e9/HxvO+e9nGMgQnJ8zbmlB5jjFOPh9iXPePd/b7uVrNxOnZ9/WRp/2anVe/Et+6zvH3hPnvmfK1p4lRr9BT8+0z/X4eyvgH6ZqvSdsjHM63/vfwOm966KflGXBMl+65G3gGemq8+Be61L2WYUL9a40Ow9/wb0w+C/H5B5y/G/reKY/rZrTpc+G7XQB/cl+bV59j/pvVUcC+tco1m5zL9rSLv0ulnzwn7d6I//q55Tn2TXqeIiXu+k2vxc2R7ac/ly8i2M473UqeIe9eH0sK97sz0zYvjzdP0v98TSH55LK/ls+9wvB2m9V0O+8b3srFvpXXgsh/F4nHbxzTvGbO/6eXZkudK2lDy7Ct02Xv3k4T7zKZpjj0+Ff9efo704zpg+n7g4g0g4or4qlHJBskv74OTjU27pU3ca96SZ1/YZqlPvg64Hh8CXQP574W9EWOLY+6yedRV7X4+rqOu97e/Ann8vcorIAWVxXI+78K9ZDAuzSvfGcRxM981dpddSqvN0vN9l/sY492E300T+/p+gWtAOOP9utKKW/belnFrbrM21FaM/U7b18i96LN/c6F5ifOuPd/1kvWV9cUbZWT52vtb3lX+GohjeRti4pyksljOZw+DWP7rG17VifE9GLf77lnfYlnX2DN9xDLpN5bPJV8bY+nbca0Bx7/jbWzcR2wPyfM3K3ysnBe+K+Ldit8vCgPOm82V5lX8LXEJ+1rfQ8bVVYfjLtn1Up+7xp7pI5ZJP7F8LvmuMfrdm9t/6kz+T9T9LnDv6yy2r7x4aOvpy3Cs8um4t+kbjLi+uR667hk1ryXslMqjb8QzgnCv/rL/vldpPK0x7x/EO+Q3ak7Jv38S+uddZi3EuebdQDzzRn+iJq/rGX1w31M0l4ojNkp+vua+tsZ9fXdhnv2Ouog4b7Gx1B/7JNxrXFlcGht5fb0wzzmQT5qdXaJ/Fvta0xPH3hKknxbeffD0GaPG4nMs3AuD0Z/YZkxsT/L7YMHnnfOvue8zVu+3/y2Kzqt9fWbXmadbcZ+Nv1TGOYjY9ja70kP15DoTVrxsTuk+Y9RYXG8Rl1PiHmvrtjN0Nvey795PpqOPQQx33bO0/jZvbKs1Pybu5d+Uxt+nT8Ko/ELlGbeUCSteb07pLizcAWycgf4XpLG4/hz37kePMUa25/IzjGdlfead4y9hP2KefomPfYx0X9z72hfOow76jD8bQx9bWJpnYaX0fN/lcdyc22wt0DZme7vjUvoeQ2/UC3WXnZ2jryv/1n2tOK6Ydz+gz3ijnG3zwj3GcPMsGnHcknffTn7dkL7R12efPkT9B3D+MfIf25Rlvp98QMdKEDGb7BDdeJ2pcc+2vI0WDGj9eT+Zjue3+HwfeeG+Ni6t6xoPx5ztR1jfvfeokh3IcN2ls9kAPXSkq998XtMdMSlbJbyNae/Zvt4X6I6iK97G3mX6qI0/4+9T5rjXflXDd+mZdN/Sdrb+ff/LxpvV6WqLdeYauvre9dxtsXQ/Nu67+nDIzx33JUyXymVv+Fy635cufN14H+aK+6VfiwYWDSwaWDSwaGDRwKKBRQOLBhYNHI8G/vvOs9/46YZ+jJj0k0JefIz71psb//9gDKCvYSyXhDF/DWO/JI0/63PUUcZD/bTw1dqpPdM8TNlGrf2WZ+wjdXw8K+U4RvJfuH8FrY9jNPMcBXW8hHlpYMH99POx4H56HfdtYcF9X431558z7uEjnsFfO4M/dsZ0LQ9f9pKPcY0vypkjP3zPM9AafVtj7GvoYI1+X5Lrw9MaVxx75CnpMvJ53tNd8ofy7rIe55w6XsKigUUDiwYWDSwaWDSwaGDRwKKBRQOLBqbWwP8BCeG8qA==\\\",\\\"encoding\\\":\\\"base64\\\",\\\"height\\\":109,\\\"id\\\":3,\\\"name\\\":\\\"map\\\",\\\"opacity\\\":1,\\\"type\\\":\\\"tilelayer\\\",\\\"visible\\\":true,\\\"width\\\":190,\\\"x\\\":0,\\\"y\\\":0},{\\\"compression\\\":\\\"zlib\\\",\\\"data\\\":\\\"eAHt3U1OAjEUAODqKVx5ADFGNx5A2OhC3Ys7489elwaPbkkUVpAZQpl23jfJBCJD5/V7D9I0pabkIECAAAECBAgQIECAAAECBAgQIEBgDAKvRym95dNBIJLAItf8j7qPlHJ9DSLwcJzSYz4d5QQuc9NX5ZrX8g4C77nmP9T9DnLd33KbL73rfrkrCRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIBAJwHrNzsxuWhkAtZvjiyhukOAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBCoWOMmxLU8HAQIp2ZtJFbQssOu+V0PvzTTN+0LN7A3VcukNGnur+17Nc80/q/tBa6e1m/+P2bs+ttY/8RIgQIAAAQIECBAgQIAAAQIECBAgQIAAgbEK2DdnrJnVr20C9s3ZpuM1AgQIEKhZYOL/9tacHrEVEpip+0KymiVAgMDwAvfWKg+fhEoiMEdZSSKEcVABc5QH5XYzAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAlUL+J1d1ekRXCEBv7MrBKtZAgQIECBQgcCpPUUqyIIQSgi82BOtBKs2CRAgQIAAAQIECBAgQIAAAQKDCVybyxzM3o0PI7Cc0/w2r7kXbGt79sKokcYErO1pLGF/4frebzNvoiZQQuDMOLAEa3VtWsewTslNrvmpul+DeBZC4CnX/Fzdh8j1pk5GHP9/5pr/ClD3F5uSHvTvxjxBE5+7PQnUdXPQgZKtqysBc9ArinBPuox1zkeiEnHMPpLU6UZPgb5jdp+NnsAub1Kg7+eiyU4KOryA7/PwJQCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ6CHwC0xVHZU=\\\",\\\"encoding\\\":\\\"base64\\\",\\\"height\\\":109,\\\"id\\\":2,\\\"name\\\":\\\"foreground\\\",\\\"opacity\\\":1,\\\"type\\\":\\\"tilelayer\\\",\\\"visible\\\":true,\\\"width\\\":190,\\\"x\\\":0,\\\"y\\\":0},{\\\"draworder\\\":\\\"topdown\\\",\\\"id\\\":7,\\\"name\\\":\\\"objects\\\",\\\"objects\\\":[{\\\"height\\\":0,\\\"id\\\":182,\\\"name\\\":\\\"exitportal\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":156,\\\"y\\\":1928},{\\\"height\\\":0,\\\"id\\\":133,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1980,\\\"y\\\":1742},{\\\"height\\\":0,\\\"id\\\":134,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2004,\\\"y\\\":1741},{\\\"height\\\":0,\\\"id\\\":135,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2028,\\\"y\\\":1741},{\\\"height\\\":0,\\\"id\\\":136,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1980,\\\"y\\\":1718},{\\\"height\\\":0,\\\"id\\\":137,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2004,\\\"y\\\":1717},{\\\"height\\\":0,\\\"id\\\":138,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2028,\\\"y\\\":1717},{\\\"height\\\":0,\\\"id\\\":139,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1980,\\\"y\\\":1694},{\\\"height\\\":0,\\\"id\\\":140,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2004,\\\"y\\\":1693},{\\\"height\\\":0,\\\"id\\\":141,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2028,\\\"y\\\":1693},{\\\"height\\\":0,\\\"id\\\":142,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":3}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1980,\\\"y\\\":1670},{\\\"height\\\":0,\\\"id\\\":143,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":3}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2004,\\\"y\\\":1669},{\\\"height\\\":0,\\\"id\\\":144,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":3}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2028,\\\"y\\\":1669},{\\\"height\\\":0,\\\"id\\\":145,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1980,\\\"y\\\":1646},{\\\"height\\\":0,\\\"id\\\":146,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2004,\\\"y\\\":1645},{\\\"height\\\":0,\\\"id\\\":147,\\\"name\\\":\\\"riddlestone\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2028,\\\"y\\\":1645},{\\\"height\\\":0,\\\"id\\\":85,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"Use “jump” to overcome obstacles.:::The longer you press, the higher the jump.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3432,\\\"y\\\":563},{\\\"height\\\":0,\\\"id\\\":86,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"Walk over items to carry them.:::You cannot interact with doors or other entities when carrying items.:::Press “throw” to throw your current item.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3492,\\\"y\\\":443},{\\\"height\\\":0,\\\"id\\\":88,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"↓ A magical journey awaits you beneath the clouds.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1140,\\\"y\\\":370},{\\\"height\\\":0,\\\"id\\\":89,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"Be careful!\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":120,\\\"y\\\":250},{\\\"height\\\":0,\\\"id\\\":102,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"↑ Mountain\\\\n← Temple\\\\n→ Sacred Forest\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1392,\\\"y\\\":1999},{\\\"height\\\":0,\\\"id\\\":103,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"Landmark: The Broken Bridge\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1668,\\\"y\\\":1977},{\\\"height\\\":0,\\\"id\\\":104,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"↑ Entrance to mountain hiking path.:::Good jumping skills required.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2064,\\\"y\\\":2000},{\\\"height\\\":0,\\\"id\\\":109,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"◊ Popular bird feeding spot\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2016,\\\"y\\\":1235},{\\\"height\\\":0,\\\"id\\\":110,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"Bouncy mushrooms ahead →\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3876,\\\"y\\\":534},{\\\"height\\\":0,\\\"id\\\":111,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"↑ Mountain trial\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1788,\\\"y\\\":1714},{\\\"height\\\":0,\\\"id\\\":161,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"You can check the controls in the pause menu at any time.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3300,\\\"y\\\":439},{\\\"height\\\":0,\\\"id\\\":112,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"◊ Popular seed throwing spot\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2532,\\\"y\\\":1861},{\\\"height\\\":0,\\\"id\\\":82,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"Hold “down” to fall through platforms.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3336,\\\"y\\\":490},{\\\"height\\\":0,\\\"id\\\":148,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"◊ Advanced seed throwing spot\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1573,\\\"y\\\":1735},{\\\"height\\\":0,\\\"id\\\":4,\\\"name\\\":\\\"stone\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2090,\\\"y\\\":672},{\\\"height\\\":0,\\\"id\\\":2,\\\"name\\\":\\\"fire\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1212,\\\"y\\\":1968},{\\\"height\\\":0,\\\"id\\\":3,\\\"name\\\":\\\"tree\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3048,\\\"y\\\":1944},{\\\"height\\\":0,\\\"id\\\":9,\\\"name\\\":\\\"flameboy\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":156,\\\"y\\\":1930},{\\\"height\\\":0,\\\"id\\\":13,\\\"name\\\":\\\"wing\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3428,\\\"y\\\":850},{\\\"height\\\":0,\\\"id\\\":43,\\\"name\\\":\\\"campfire\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3480,\\\"y\\\":192},{\\\"height\\\":0,\\\"id\\\":42,\\\"name\\\":\\\"caveman\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3499,\\\"y\\\":177},{\\\"height\\\":0,\\\"id\\\":17,\\\"name\\\":\\\"river\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":864,\\\"y\\\":1945},{\\\"height\\\":0,\\\"id\\\":18,\\\"name\\\":\\\"forest\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2907,\\\"y\\\":1890},{\\\"height\\\":0,\\\"id\\\":19,\\\"name\\\":\\\"mountain\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1932,\\\"y\\\":579},{\\\"height\\\":0,\\\"id\\\":20,\\\"name\\\":\\\"seedposition\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1932,\\\"y\\\":562},{\\\"height\\\":0,\\\"id\\\":24,\\\"name\\\":\\\"stone_floating_position\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":804,\\\"y\\\":2018},{\\\"height\\\":0,\\\"id\\\":25,\\\"name\\\":\\\"recover_floating_position\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":929,\\\"y\\\":2010},{\\\"height\\\":131,\\\"id\\\":26,\\\"name\\\":\\\"bird_nest_left\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":5,\\\"x\\\":163,\\\"y\\\":1011},{\\\"height\\\":0,\\\"id\\\":27,\\\"name\\\":\\\"rain_spawn_position\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1933,\\\"y\\\":288},{\\\"height\\\":42,\\\"id\\\":36,\\\"name\\\":\\\"door_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"cave\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"door_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":204,\\\"y\\\":2166},{\\\"height\\\":0,\\\"id\\\":55,\\\"name\\\":\\\"movingplatform\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"direction\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"up\\\"},{\\\"name\\\":\\\"distance\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":200},{\\\"name\\\":\\\"velocity\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":44}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1585,\\\"y\\\":1172},{\\\"height\\\":0,\\\"id\\\":56,\\\"name\\\":\\\"movingplatform\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"direction\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"up\\\"},{\\\"name\\\":\\\"distance\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":100},{\\\"name\\\":\\\"velocity\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":44}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2364,\\\"y\\\":842},{\\\"height\\\":44,\\\"id\\\":37,\\\"name\\\":\\\"door_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"overworld\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"door_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3252,\\\"y\\\":148},{\\\"height\\\":288,\\\"id\\\":39,\\\"name\\\":\\\"cave1-bounds\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"bounds\\\",\\\"visible\\\":true,\\\"width\\\":480,\\\"x\\\":3168,\\\"y\\\":0},{\\\"height\\\":288,\\\"id\\\":44,\\\"name\\\":\\\"startingcave-bounds\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"bounds\\\",\\\"visible\\\":true,\\\"width\\\":480,\\\"x\\\":3168,\\\"y\\\":336},{\\\"height\\\":0,\\\"id\\\":60,\\\"name\\\":\\\"shadowpresence\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1862,\\\"y\\\":2136},{\\\"height\\\":44,\\\"id\\\":45,\\\"name\\\":\\\"startingdoor_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"overworld\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"startingdoor_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3540,\\\"y\\\":484},{\\\"height\\\":0,\\\"id\\\":80,\\\"name\\\":\\\"stonedisciple\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3480,\\\"y\\\":2204},{\\\"height\\\":44,\\\"id\\\":46,\\\"name\\\":\\\"startingdoor_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"cave\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"startingdoor_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":60,\\\"y\\\":220},{\\\"height\\\":42,\\\"id\\\":48,\\\"name\\\":\\\"forrest_door_left_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"cave\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"forrest_door_left_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":2604,\\\"y\\\":1998},{\\\"height\\\":42,\\\"id\\\":49,\\\"name\\\":\\\"forrest_door_right_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"cave\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"forrest_door_right_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":2724,\\\"y\\\":1998},{\\\"height\\\":624,\\\"id\\\":50,\\\"name\\\":\\\"forrest-cave-bounds\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"bounds\\\",\\\"visible\\\":true,\\\"width\\\":624,\\\"x\\\":3696,\\\"y\\\":0},{\\\"height\\\":42,\\\"id\\\":51,\\\"name\\\":\\\"forrest_door_left_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"overworld\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"forrest_door_left_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3804,\\\"y\\\":510},{\\\"height\\\":42,\\\"id\\\":52,\\\"name\\\":\\\"forrest_door_right_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"overworld\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"forrest_door_right_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":4188,\\\"y\\\":510},{\\\"height\\\":42,\\\"id\\\":53,\\\"name\\\":\\\"montain_door_floor_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"riddle\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"montain_door_floor_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":2100,\\\"y\\\":1974},{\\\"height\\\":42,\\\"id\\\":54,\\\"name\\\":\\\"montain_door_top_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"riddle\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"montain_door_top_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":2220,\\\"y\\\":1782},{\\\"height\\\":264,\\\"id\\\":57,\\\"name\\\":\\\"winghouse-bounds\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"bounds\\\",\\\"visible\\\":true,\\\"width\\\":480,\\\"x\\\":3168,\\\"y\\\":672},{\\\"height\\\":40,\\\"id\\\":58,\\\"name\\\":\\\"wing_house_door_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"radio\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"wing_house_door_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":2197,\\\"y\\\":224},{\\\"height\\\":40,\\\"id\\\":59,\\\"name\\\":\\\"wing_house_door_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"overworld\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"wing_house_door_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3348,\\\"y\\\":824},{\\\"height\\\":336,\\\"id\\\":61,\\\"name\\\":\\\"mountain-foot-cave-bounds\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"bounds\\\",\\\"visible\\\":true,\\\"width\\\":480,\\\"x\\\":3168,\\\"y\\\":984},{\\\"height\\\":42,\\\"id\\\":62,\\\"name\\\":\\\"montain_door_floor_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"overworld\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"montain_door_floor_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3276,\\\"y\\\":1230},{\\\"height\\\":42,\\\"id\\\":63,\\\"name\\\":\\\"montain_door_top_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"overworld\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"montain_door_top_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3492,\\\"y\\\":1063},{\\\"height\\\":960,\\\"id\\\":64,\\\"name\\\":\\\"mountain-foot-cave-bounds\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"bounds\\\",\\\"visible\\\":true,\\\"width\\\":480,\\\"x\\\":3168,\\\"y\\\":1344},{\\\"height\\\":42,\\\"id\\\":65,\\\"name\\\":\\\"montain_riddlecave_bottom_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"riddle\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"montain_riddlecave_bottom_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":1741,\\\"y\\\":1686},{\\\"height\\\":42,\\\"id\\\":66,\\\"name\\\":\\\"montain_riddlecave_bottom_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"overworld\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"montain_riddlecave_bottom_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3276,\\\"y\\\":2190},{\\\"height\\\":42,\\\"id\\\":77,\\\"name\\\":\\\"montain_riddlecave_top_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"riddle\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"montain_riddlecave_top_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":1933,\\\"y\\\":1350},{\\\"height\\\":42,\\\"id\\\":78,\\\"name\\\":\\\"montain_riddlecave_top_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"overworld\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"montain_riddlecave_top_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3540,\\\"y\\\":1397},{\\\"height\\\":505,\\\"id\\\":79,\\\"name\\\":\\\"no_emit_trigger\\\",\\\"properties\\\":[{\\\"name\\\":\\\"disableParticles\\\",\\\"type\\\":\\\"bool\\\",\\\"value\\\":true}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":384,\\\"x\\\":3216,\\\"y\\\":1608},{\\\"height\\\":45,\\\"id\\\":81,\\\"name\\\":\\\"finish_mountain_riddle\\\",\\\"properties\\\":[{\\\"name\\\":\\\"setDialogEntity\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"stonedisciple\\\"},{\\\"name\\\":\\\"setDialogValue\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"stonedisciple2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3384,\\\"y\\\":1443},{\\\"height\\\":0,\\\"id\\\":87,\\\"name\\\":\\\"skull\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3528,\\\"y\\\":432},{\\\"height\\\":0,\\\"id\\\":97,\\\"name\\\":\\\"wall\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"identifier\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"wall0\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":4260,\\\"y\\\":1464},{\\\"height\\\":0,\\\"id\\\":98,\\\"name\\\":\\\"wall\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"identifier\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"wall1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":4452,\\\"y\\\":1464},{\\\"height\\\":912,\\\"id\\\":90,\\\"name\\\":\\\"inferno-bounds\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"bounds\\\",\\\"visible\\\":true,\\\"width\\\":912,\\\"x\\\":3648,\\\"y\\\":624},{\\\"height\\\":0,\\\"id\\\":91,\\\"name\\\":\\\"boss_spawn\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":4104,\\\"y\\\":1416},{\\\"height\\\":0,\\\"id\\\":92,\\\"name\\\":\\\"bosscloud\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":4089,\\\"y\\\":936},{\\\"height\\\":0,\\\"id\\\":93,\\\"name\\\":\\\"bosscloud\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":4056,\\\"y\\\":1293},{\\\"height\\\":0,\\\"id\\\":94,\\\"name\\\":\\\"bosscloud\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":4176,\\\"y\\\":1105},{\\\"height\\\":2304,\\\"id\\\":95,\\\"name\\\":\\\"overworld-bounds\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"bounds\\\",\\\"visible\\\":true,\\\"width\\\":3168,\\\"x\\\":0,\\\"y\\\":0},{\\\"height\\\":42,\\\"id\\\":100,\\\"name\\\":\\\"boss_door2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"boss_door1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3684,\\\"y\\\":798},{\\\"height\\\":42,\\\"id\\\":101,\\\"name\\\":\\\"boss_door1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"boss_door2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":4451,\\\"y\\\":822},{\\\"height\\\":0,\\\"id\\\":105,\\\"name\\\":\\\"chicken\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3504,\\\"y\\\":844},{\\\"height\\\":0,\\\"id\\\":106,\\\"name\\\":\\\"bird\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":168,\\\"y\\\":1131},{\\\"height\\\":24,\\\"id\\\":107,\\\"name\\\":\\\"raincloud_sky\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":72,\\\"x\\\":1897,\\\"y\\\":212},{\\\"height\\\":119,\\\"id\\\":108,\\\"name\\\":\\\"bird_nest_right\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":33,\\\"x\\\":2132,\\\"y\\\":1067},{\\\"height\\\":0,\\\"id\\\":113,\\\"name\\\":\\\"superthrow\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2592,\\\"y\\\":1863},{\\\"height\\\":3,\\\"id\\\":114,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3264,\\\"y\\\":2090},{\\\"height\\\":3,\\\"id\\\":115,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3384,\\\"y\\\":2090},{\\\"height\\\":3,\\\"id\\\":116,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3504,\\\"y\\\":2090},{\\\"height\\\":3,\\\"id\\\":117,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3264,\\\"y\\\":1994},{\\\"height\\\":3,\\\"id\\\":118,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3384,\\\"y\\\":1994},{\\\"height\\\":3,\\\"id\\\":119,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3504,\\\"y\\\":1994},{\\\"height\\\":3,\\\"id\\\":120,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3264,\\\"y\\\":1898},{\\\"height\\\":3,\\\"id\\\":121,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3384,\\\"y\\\":1898},{\\\"height\\\":3,\\\"id\\\":122,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3504,\\\"y\\\":1898},{\\\"height\\\":3,\\\"id\\\":123,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":3}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3264,\\\"y\\\":1802},{\\\"height\\\":3,\\\"id\\\":124,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":3}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3384,\\\"y\\\":1802},{\\\"height\\\":3,\\\"id\\\":125,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":3}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3504,\\\"y\\\":1802},{\\\"height\\\":3,\\\"id\\\":126,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":0},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3264,\\\"y\\\":1706},{\\\"height\\\":3,\\\"id\\\":127,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3384,\\\"y\\\":1706},{\\\"height\\\":3,\\\"id\\\":128,\\\"name\\\":\\\"mountaingate\\\",\\\"properties\\\":[{\\\"name\\\":\\\"col\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":2},{\\\"name\\\":\\\"row\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":48,\\\"x\\\":3504,\\\"y\\\":1706},{\\\"height\\\":5,\\\"id\\\":129,\\\"name\\\":\\\"reset_mountain\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":384,\\\"x\\\":3216,\\\"y\\\":2140},{\\\"height\\\":1,\\\"id\\\":130,\\\"name\\\":\\\"teleporter\\\",\\\"properties\\\":[{\\\"name\\\":\\\"teleportY\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":288}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":384,\\\"x\\\":3216,\\\"y\\\":1705},{\\\"height\\\":1,\\\"id\\\":131,\\\"name\\\":\\\"teleporter\\\",\\\"properties\\\":[{\\\"name\\\":\\\"teleportY\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":192}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":384,\\\"x\\\":3216,\\\"y\\\":1801},{\\\"height\\\":1,\\\"id\\\":132,\\\"name\\\":\\\"teleporter\\\",\\\"properties\\\":[{\\\"name\\\":\\\"teleportY\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":96}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":384,\\\"x\\\":3216,\\\"y\\\":1897},{\\\"height\\\":24,\\\"id\\\":151,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"A strange device…:::There is no manual available.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3240,\\\"y\\\":417},{\\\"height\\\":24,\\\"id\\\":152,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"A little garden. Cute.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":1920,\\\"y\\\":542},{\\\"height\\\":46,\\\"id\\\":153,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"A collection of books regarding non euclidean architecture.:::Just thinking about the contents drives me mad.\\\"},{\\\"name\\\":\\\"duration\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":30,\\\"x\\\":3558,\\\"y\\\":2162},{\\\"height\\\":0,\\\"id\\\":154,\\\"name\\\":\\\"portal\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3252,\\\"y\\\":439},{\\\"height\\\":0,\\\"id\\\":156,\\\"name\\\":\\\"mimic\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3288,\\\"y\\\":857},{\\\"height\\\":0,\\\"id\\\":160,\\\"name\\\":\\\"bone\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3564,\\\"y\\\":438},{\\\"height\\\":24,\\\"id\\\":157,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"A classic mailbox.:::It's welded shut.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":14,\\\"x\\\":2141,\\\"y\\\":240},{\\\"height\\\":0,\\\"id\\\":158,\\\"name\\\":\\\"radio\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3552,\\\"y\\\":748},{\\\"height\\\":11,\\\"id\\\":159,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"Just a regular old stereo…:::How disappointing.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":30,\\\"x\\\":3537,\\\"y\\\":737},{\\\"height\\\":0,\\\"id\\\":47,\\\"name\\\":\\\"player\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3252,\\\"y\\\":426},{\\\"height\\\":0,\\\"id\\\":162,\\\"name\\\":\\\"shiba\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":184,\\\"y\\\":1231},{\\\"height\\\":0,\\\"id\\\":163,\\\"name\\\":\\\"powershiba\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2712,\\\"y\\\":249},{\\\"height\\\":24,\\\"id\\\":164,\\\"name\\\":\\\"shiba_action\\\",\\\"properties\\\":[{\\\"name\\\":\\\"velocity\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":5,\\\"x\\\":150,\\\"y\\\":1224},{\\\"height\\\":24,\\\"id\\\":165,\\\"name\\\":\\\"shiba_action\\\",\\\"properties\\\":[{\\\"name\\\":\\\"velocity\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":-1}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":5,\\\"x\\\":264,\\\"y\\\":1224},{\\\"height\\\":24,\\\"id\\\":166,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"A small dog house entrance.:::I don't fit since I'm not a dog.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":3,\\\"x\\\":144,\\\"y\\\":1224},{\\\"height\\\":12,\\\"id\\\":167,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"Some kind of bird nest made out of twigs.:::Pretty normal.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":22,\\\"x\\\":158,\\\"y\\\":1130},{\\\"height\\\":24,\\\"id\\\":168,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"This a great vantage point.:::I can see a large tree with a birds nest in the distance.\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":1392,\\\"y\\\":1440},{\\\"height\\\":0,\\\"id\\\":170,\\\"name\\\":\\\"shiba_mountain_spawn\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1950,\\\"y\\\":1235},{\\\"height\\\":0,\\\"id\\\":171,\\\"name\\\":\\\"powershiba_mountain_spawn\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1979,\\\"y\\\":1234},{\\\"height\\\":0,\\\"id\\\":172,\\\"name\\\":\\\"friendship_player_position\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1179,\\\"y\\\":1968},{\\\"height\\\":0,\\\"id\\\":173,\\\"name\\\":\\\"friendship_shiba_spawn\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1477,\\\"y\\\":2010},{\\\"height\\\":47,\\\"id\\\":175,\\\"name\\\":\\\"shiba_stop\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":12,\\\"x\\\":1212,\\\"y\\\":1921},{\\\"height\\\":0,\\\"id\\\":176,\\\"name\\\":\\\"water_sound\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"intensity\\\",\\\"type\\\":\\\"float\\\",\\\"value\\\":0.5},{\\\"name\\\":\\\"sound\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"stream\\\"},{\\\"name\\\":\\\"volume\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1}],\\\"rotation\\\":0,\\\"type\\\":\\\"sound\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":732,\\\"y\\\":1992},{\\\"height\\\":0,\\\"id\\\":177,\\\"name\\\":\\\"wind_sound\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"intensity\\\",\\\"type\\\":\\\"float\\\",\\\"value\\\":1},{\\\"name\\\":\\\"sound\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"wind\\\"},{\\\"name\\\":\\\"volume\\\",\\\"type\\\":\\\"float\\\",\\\"value\\\":0.6}],\\\"rotation\\\":0,\\\"type\\\":\\\"sound\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":2029,\\\"y\\\":933},{\\\"height\\\":0,\\\"id\\\":178,\\\"name\\\":\\\"sign\\\",\\\"point\\\":true,\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"There is currently no way to save your progress.:::A single run is pretty short so we hope that it isn't too much of a problem.::: Sorry for any resulting inconveniences!\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":3336,\\\"y\\\":563},{\\\"height\\\":0,\\\"id\\\":179,\\\"name\\\":\\\"player_reset_position\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1261,\\\"y\\\":1573},{\\\"height\\\":24,\\\"id\\\":180,\\\"name\\\":\\\"flameboy_action\\\",\\\"properties\\\":[{\\\"name\\\":\\\"velocity\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":1}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":5,\\\"x\\\":342,\\\"y\\\":1968},{\\\"height\\\":24,\\\"id\\\":181,\\\"name\\\":\\\"flameboy_action\\\",\\\"properties\\\":[{\\\"name\\\":\\\"velocity\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":-1}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":5,\\\"x\\\":504,\\\"y\\\":1968},{\\\"height\\\":44,\\\"id\\\":183,\\\"name\\\":\\\"exitportaldoor_1\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"awake\\\"},{\\\"name\\\":\\\"disabled\\\",\\\"type\\\":\\\"bool\\\",\\\"value\\\":true},{\\\"name\\\":\\\"enterSound\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"portal\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"exitportaldoor_2\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":144,\\\"y\\\":1887},{\\\"height\\\":44,\\\"id\\\":184,\\\"name\\\":\\\"exitportaldoor_2\\\",\\\"properties\\\":[{\\\"name\\\":\\\"bgm\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"cave\\\"},{\\\"name\\\":\\\"disabled\\\",\\\"type\\\":\\\"bool\\\",\\\"value\\\":true},{\\\"name\\\":\\\"exitFadeTime\\\",\\\"type\\\":\\\"float\\\",\\\"value\\\":5},{\\\"name\\\":\\\"exitSleepTime\\\",\\\"type\\\":\\\"float\\\",\\\"value\\\":5},{\\\"name\\\":\\\"exitSound\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"empty\\\"},{\\\"name\\\":\\\"target\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"exitportaldoor_1\\\"}],\\\"rotation\\\":0,\\\"type\\\":\\\"gate\\\",\\\"visible\\\":true,\\\"width\\\":24,\\\"x\\\":3360,\\\"y\\\":2452},{\\\"height\\\":264,\\\"id\\\":185,\\\"name\\\":\\\"laboratory-bounds\\\",\\\"rotation\\\":0,\\\"type\\\":\\\"bounds\\\",\\\"visible\\\":true,\\\"width\\\":3648,\\\"x\\\":0,\\\"y\\\":2328},{\\\"height\\\":41,\\\"id\\\":186,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"This door is locked. It says '100'\\\"},{\\\"name\\\":\\\"duration\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":22,\\\"x\\\":2881,\\\"y\\\":2455},{\\\"height\\\":39,\\\"id\\\":187,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"I woke up in this strange capsule\\\"},{\\\"name\\\":\\\"duration\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":19,\\\"x\\\":3362,\\\"y\\\":2457},{\\\"height\\\":39,\\\"id\\\":188,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"Some capsules are still closed. I can see a humanoid shape through the glass\\\"},{\\\"name\\\":\\\"duration\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":19,\\\"x\\\":3266,\\\"y\\\":2456},{\\\"height\\\":39,\\\"id\\\":189,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"He seems to be dead for quite some time.\\\"},{\\\"name\\\":\\\"duration\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":19,\\\"x\\\":2762,\\\"y\\\":2457},{\\\"height\\\":41,\\\"id\\\":190,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"The is door is locked as well. It says '200'\\\"},{\\\"name\\\":\\\"duration\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":22,\\\"x\\\":2185,\\\"y\\\":2455},{\\\"height\\\":0,\\\"id\\\":191,\\\"name\\\":\\\"window\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"entity\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":1680,\\\"y\\\":2476},{\\\"height\\\":41,\\\"id\\\":194,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"The blinds are shut tight.\\\"},{\\\"name\\\":\\\"duration\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":23,\\\"x\\\":1740,\\\"y\\\":2455},{\\\"height\\\":41,\\\"id\\\":195,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"The blinds are shut tight.\\\"},{\\\"name\\\":\\\"duration\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":23,\\\"x\\\":1812,\\\"y\\\":2455},{\\\"height\\\":41,\\\"id\\\":196,\\\"name\\\":\\\"readable\\\",\\\"properties\\\":[{\\\"name\\\":\\\"content\\\",\\\"type\\\":\\\"string\\\",\\\"value\\\":\\\"The blinds are shut tight.\\\"},{\\\"name\\\":\\\"duration\\\",\\\"type\\\":\\\"int\\\",\\\"value\\\":4}],\\\"rotation\\\":0,\\\"type\\\":\\\"trigger\\\",\\\"visible\\\":true,\\\"width\\\":23,\\\"x\\\":1596,\\\"y\\\":2455},{\\\"height\\\":0,\\\"id\\\":197,\\\"name\\\":\\\"windowzoomtarget\\\",\\\"point\\\":true,\\\"rotation\\\":0,\\\"type\\\":\\\"pointer\\\",\\\"visible\\\":true,\\\"width\\\":0,\\\"x\\\":275,\\\"y\\\":2465}],\\\"opacity\\\":1,\\\"type\\\":\\\"objectgroup\\\",\\\"visible\\\":true,\\\"x\\\":0,\\\"y\\\":0}],\\\"nextlayerid\\\":8,\\\"nextobjectid\\\":198,\\\"orientation\\\":\\\"orthogonal\\\",\\\"renderorder\\\":\\\"left-down\\\",\\\"tiledversion\\\":\\\"1.4.1\\\",\\\"tileheight\\\":24,\\\"tilesets\\\":[{\\\"columns\\\":25,\\\"firstgid\\\":1,\\\"image\\\":\\\"tilemap.png\\\",\\\"imageheight\\\":816,\\\"imagewidth\\\":600,\\\"margin\\\":0,\\\"name\\\":\\\"tilemap\\\",\\\"spacing\\\":0,\\\"tilecount\\\":850,\\\"tileheight\\\":24,\\\"tilewidth\\\":24,\\\"transparentcolor\\\":\\\"#ff00ff\\\"}],\\\"tilewidth\\\":24,\\\"type\\\":\\\"map\\\",\\\"version\\\":1.4,\\\"width\\\":190}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvbWFwcy9sZXZlbC5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/maps/level.json\n");
    
    /***/ }),
    
    /***/ "./lib/Animator.js":
    /*!*************************!*\
      !*** ./lib/Animator.js ***!
      \*************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Animator = void 0;\nconst Renderer_1 = __webpack_require__(/*! ./Renderer */ \"./lib/Renderer.js\");\n/**\n * The Animator class can be used to orchestrate and draw aseprite animations of an entity\n */\nclass Animator {\n    constructor(entity) {\n        this.currentAnimation = {\n            tag: \"\",\n            start: 0,\n            duration: 0,\n            finished: false,\n        };\n        this.entity = entity;\n    }\n    assignSprite(sprite) {\n        this.sprite = sprite;\n    }\n    /**\n     * Updates the animation if all conditions are met regarding the currently playing animation.\n     *\n     * @param tag    - The animation tag to draw.\n     * @param config - Optional animation configuration.\n     */\n    updateAnimation(tag, config) {\n        var _a;\n        // Early out if animation tag is already set as current animation\n        if (!this.sprite)\n            return;\n        // Animation Update Logic\n        // If current animation has a fixed duration, check if it was reached.\n        // If so, the animation is set to finished.\n        if (!this.currentAnimation.finished && this.currentAnimation.duration > 0) {\n            const animationTime = (this.entity.scene.gameTime * 1000) - this.currentAnimation.start;\n            if (animationTime + (this.entity.scene.dt * 1000) >= this.currentAnimation.duration) {\n                this.currentAnimation.finished = true;\n                if ((_a = this.currentAnimation.config) === null || _a === void 0 ? void 0 : _a.callback) {\n                    this.currentAnimation.config.callback();\n                }\n            }\n        }\n        // Leave function if the provided animation tag is the one that is already playing since\n        // there is no need to update the current animation settings.\n        if (this.currentAnimation.tag === tag)\n            return;\n        // Update Animation with new payload\n        this.currentAnimation.tag = tag;\n        this.currentAnimation.start = this.entity.scene.gameTime * 1000;\n        this.currentAnimation.config = config;\n        this.currentAnimation.finished = false;\n        this.currentAnimation.duration = this.sprite.getAnimationDurationByTag(tag) || 0;\n    }\n    /**\n     * Method to call from draw method of the entity to draw a specific animation by tag.\n     *\n     * @param tag    - The animation tag to draw.\n     * @param ctx    - The canvas context to draw to.\n     * @param config - Optional animation configuration.\n     */\n    play(tag, direction, config) {\n        this.currentAnimation.direction = direction;\n        this.updateAnimation(tag, config);\n        let animationTime = (this.entity.scene.gameTime * 1000) - this.currentAnimation.start;\n        /**\n         * Forcefully stop the loop at the last frame, if looping is disabled.\n         * We subtract an arbitrary small number the animation duration, since the exact animation\n         * duration time will play frame 1 of the animation.\n         */\n        if ((config === null || config === void 0 ? void 0 : config.loop) === false) {\n            const lastFrameTime = this.currentAnimation.duration - 1;\n            animationTime = Math.min(lastFrameTime, animationTime);\n        }\n        /**\n         * Zero Animation timer fix.\n         * Sometimes (?), an animation time of zero does not play the first but the last frame, thus\n         * we just skip 0.\n         */\n        if (animationTime === 0)\n            animationTime += 1;\n        this.draw(animationTime);\n    }\n    draw(animationTime) {\n        if (this.sprite) {\n            this.entity.scene.renderer.addAseprite(this.sprite, this.currentAnimation.tag, this.entity.x, this.entity.y, Renderer_1.RenderingLayer.ENTITIES, this.currentAnimation.direction, animationTime);\n        }\n    }\n}\nexports.Animator = Animator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvQW5pbWF0b3IuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQW5pbWF0b3IudHM/ODgxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciB9IGZyb20gXCIuL1JlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgdHlwZSBBbmltYXRpb25Db25maWcgPSB7XHJcbiAgICBsb29wPzogYm9vbGVhbjtcclxuICAgIGNhbGxiYWNrPzogRnVuY3Rpb247XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBDdXJyZW50QW5pbWF0aW9uU3RhdGUgPSB7XHJcbiAgICB0YWc6IHN0cmluZztcclxuICAgIHN0YXJ0OiBudW1iZXI7XHJcbiAgICBmaW5pc2hlZDogYm9vbGVhbjtcclxuICAgIGR1cmF0aW9uOiBudW1iZXI7XHJcbiAgICBjb25maWc/OiBBbmltYXRpb25Db25maWc7XHJcbiAgICBkaXJlY3Rpb24/OiBudW1iZXI7XHJcbn07XHJcblxyXG4vKipcclxuICogVGhlIEFuaW1hdG9yIGNsYXNzIGNhbiBiZSB1c2VkIHRvIG9yY2hlc3RyYXRlIGFuZCBkcmF3IGFzZXByaXRlIGFuaW1hdGlvbnMgb2YgYW4gZW50aXR5XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQW5pbWF0b3Ige1xyXG4gICAgcHJpdmF0ZSBlbnRpdHk6IEVudGl0eTtcclxuICAgIHByaXZhdGUgc3ByaXRlPzogQXNlcHJpdGU7XHJcblxyXG4gICAgcHJpdmF0ZSBjdXJyZW50QW5pbWF0aW9uOiBDdXJyZW50QW5pbWF0aW9uU3RhdGUgPSB7XHJcbiAgICAgICAgdGFnOiBcIlwiLFxyXG4gICAgICAgIHN0YXJ0OiAwLFxyXG4gICAgICAgIGR1cmF0aW9uOiAwLFxyXG4gICAgICAgIGZpbmlzaGVkOiBmYWxzZSxcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yIChlbnRpdHk6IEVudGl0eSkge1xyXG4gICAgICAgIHRoaXMuZW50aXR5ID0gZW50aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3NpZ25TcHJpdGUoc3ByaXRlOiBBc2Vwcml0ZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlID0gc3ByaXRlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgYW5pbWF0aW9uIGlmIGFsbCBjb25kaXRpb25zIGFyZSBtZXQgcmVnYXJkaW5nIHRoZSBjdXJyZW50bHkgcGxheWluZyBhbmltYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRhZyAgICAtIFRoZSBhbmltYXRpb24gdGFnIHRvIGRyYXcuXHJcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gT3B0aW9uYWwgYW5pbWF0aW9uIGNvbmZpZ3VyYXRpb24uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlQW5pbWF0aW9uKHRhZzogc3RyaW5nLCBjb25maWc/OiBBbmltYXRpb25Db25maWcpOiB2b2lkIHtcclxuICAgICAgICAvLyBFYXJseSBvdXQgaWYgYW5pbWF0aW9uIHRhZyBpcyBhbHJlYWR5IHNldCBhcyBjdXJyZW50IGFuaW1hdGlvblxyXG4gICAgICAgIGlmICghdGhpcy5zcHJpdGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gQW5pbWF0aW9uIFVwZGF0ZSBMb2dpY1xyXG4gICAgICAgIC8vIElmIGN1cnJlbnQgYW5pbWF0aW9uIGhhcyBhIGZpeGVkIGR1cmF0aW9uLCBjaGVjayBpZiBpdCB3YXMgcmVhY2hlZC5cclxuICAgICAgICAvLyBJZiBzbywgdGhlIGFuaW1hdGlvbiBpcyBzZXQgdG8gZmluaXNoZWQuXHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRBbmltYXRpb24uZmluaXNoZWQgJiYgdGhpcy5jdXJyZW50QW5pbWF0aW9uLmR1cmF0aW9uID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBhbmltYXRpb25UaW1lID0gKHRoaXMuZW50aXR5LnNjZW5lLmdhbWVUaW1lICogMTAwMCkgLSB0aGlzLmN1cnJlbnRBbmltYXRpb24uc3RhcnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoYW5pbWF0aW9uVGltZSArICh0aGlzLmVudGl0eS5zY2VuZS5kdCAqIDEwMDApID49IHRoaXMuY3VycmVudEFuaW1hdGlvbi5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50QW5pbWF0aW9uLmZpbmlzaGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50QW5pbWF0aW9uLmNvbmZpZz8uY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRBbmltYXRpb24uY29uZmlnLmNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExlYXZlIGZ1bmN0aW9uIGlmIHRoZSBwcm92aWRlZCBhbmltYXRpb24gdGFnIGlzIHRoZSBvbmUgdGhhdCBpcyBhbHJlYWR5IHBsYXlpbmcgc2luY2VcclxuICAgICAgICAvLyB0aGVyZSBpcyBubyBuZWVkIHRvIHVwZGF0ZSB0aGUgY3VycmVudCBhbmltYXRpb24gc2V0dGluZ3MuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEFuaW1hdGlvbi50YWcgPT09IHRhZykgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgQW5pbWF0aW9uIHdpdGggbmV3IHBheWxvYWRcclxuICAgICAgICB0aGlzLmN1cnJlbnRBbmltYXRpb24udGFnID0gdGFnO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbi5zdGFydCA9IHRoaXMuZW50aXR5LnNjZW5lLmdhbWVUaW1lICogMTAwMDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRBbmltYXRpb24uY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbi5maW5pc2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbi5kdXJhdGlvbiA9IHRoaXMuc3ByaXRlLmdldEFuaW1hdGlvbkR1cmF0aW9uQnlUYWcodGFnKSB8fCAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWV0aG9kIHRvIGNhbGwgZnJvbSBkcmF3IG1ldGhvZCBvZiB0aGUgZW50aXR5IHRvIGRyYXcgYSBzcGVjaWZpYyBhbmltYXRpb24gYnkgdGFnLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0YWcgICAgLSBUaGUgYW5pbWF0aW9uIHRhZyB0byBkcmF3LlxyXG4gICAgICogQHBhcmFtIGN0eCAgICAtIFRoZSBjYW52YXMgY29udGV4dCB0byBkcmF3IHRvLlxyXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIE9wdGlvbmFsIGFuaW1hdGlvbiBjb25maWd1cmF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcGxheSh0YWc6IHN0cmluZywgZGlyZWN0aW9uOiBudW1iZXIsIGNvbmZpZz86IEFuaW1hdGlvbkNvbmZpZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbi5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcbiAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb24odGFnLCBjb25maWcpO1xyXG5cclxuICAgICAgICBsZXQgYW5pbWF0aW9uVGltZSA9ICh0aGlzLmVudGl0eS5zY2VuZS5nYW1lVGltZSAqIDEwMDApIC0gdGhpcy5jdXJyZW50QW5pbWF0aW9uLnN0YXJ0O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGb3JjZWZ1bGx5IHN0b3AgdGhlIGxvb3AgYXQgdGhlIGxhc3QgZnJhbWUsIGlmIGxvb3BpbmcgaXMgZGlzYWJsZWQuXHJcbiAgICAgICAgICogV2Ugc3VidHJhY3QgYW4gYXJiaXRyYXJ5IHNtYWxsIG51bWJlciB0aGUgYW5pbWF0aW9uIGR1cmF0aW9uLCBzaW5jZSB0aGUgZXhhY3QgYW5pbWF0aW9uXHJcbiAgICAgICAgICogZHVyYXRpb24gdGltZSB3aWxsIHBsYXkgZnJhbWUgMSBvZiB0aGUgYW5pbWF0aW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmIChjb25maWc/Lmxvb3AgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RGcmFtZVRpbWUgPSB0aGlzLmN1cnJlbnRBbmltYXRpb24uZHVyYXRpb24gLSAxO1xyXG4gICAgICAgICAgICBhbmltYXRpb25UaW1lID0gTWF0aC5taW4obGFzdEZyYW1lVGltZSwgYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBaZXJvIEFuaW1hdGlvbiB0aW1lciBmaXguXHJcbiAgICAgICAgICogU29tZXRpbWVzICg/KSwgYW4gYW5pbWF0aW9uIHRpbWUgb2YgemVybyBkb2VzIG5vdCBwbGF5IHRoZSBmaXJzdCBidXQgdGhlIGxhc3QgZnJhbWUsIHRodXNcclxuICAgICAgICAgKiB3ZSBqdXN0IHNraXAgMC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiAoYW5pbWF0aW9uVGltZSA9PT0gMCkgYW5pbWF0aW9uVGltZSArPSAxO1xyXG5cclxuICAgICAgICB0aGlzLmRyYXcoYW5pbWF0aW9uVGltZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkcmF3KGFuaW1hdGlvblRpbWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnNwcml0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eS5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShcclxuICAgICAgICAgICAgICAgIHRoaXMuc3ByaXRlLCB0aGlzLmN1cnJlbnRBbmltYXRpb24udGFnLCB0aGlzLmVudGl0eS54LCB0aGlzLmVudGl0eS55LFxyXG4gICAgICAgICAgICAgICAgUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMsIHRoaXMuY3VycmVudEFuaW1hdGlvbi5kaXJlY3Rpb24sIGFuaW1hdGlvblRpbWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFFQTtBQWdCQTs7QUFFQTtBQUNBO0FBV0E7QUFQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTs7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFqR0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/Animator.js\n");
    
    /***/ }),
    
    /***/ "./lib/Aseprite.js":
    /*!*************************!*\
      !*** ./lib/Aseprite.js ***!
      \*************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Aseprite = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst graphics_1 = __webpack_require__(/*! ./graphics */ \"./lib/graphics.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\n/**\n * Sprite implementation which uses the Aseprite JSON format. Use the static asynchronous [[load]] method to load the\n * sprite and then use [[draw]] or [[drawTag]] to draw the sprite animation.\n */\nclass Aseprite {\n    constructor(json, image) {\n        var _a;\n        this.json = json;\n        this.image = image;\n        this.frameTags = {};\n        this.frameTagDurations = {};\n        this.fallbackTag = \"idle\";\n        this.frames = Object.values(json.frames);\n        this.duration = this.frames.reduce((duration, frame) => duration + frame.duration, 0);\n        for (const frameTag of (_a = json.meta.frameTags) !== null && _a !== void 0 ? _a : []) {\n            let duration = 0;\n            for (let i = frameTag.from; i <= frameTag.to; i++) {\n                duration += this.frames[i].duration;\n            }\n            this.frameTags[frameTag.name] = frameTag;\n            this.frameTagDurations[frameTag.name] = duration;\n        }\n    }\n    /**\n     * Loads the sprite from the given source.\n     *\n     * @param source - The URL pointing to the JSON file of the sprite.\n     * @return The loaded sprite.\n     */\n    static load(source) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const json = yield (yield fetch(source)).json();\n            const baseURL = new URL(source, location.href);\n            const image = yield graphics_1.loadImage(new URL(json.meta.image, baseURL));\n            return new Aseprite(json, image);\n        });\n    }\n    /**\n     * Returns the sprite width in pixels.\n     *\n     * @return The sprite width in pixels.\n     */\n    get width() {\n        return this.frames[0].sourceSize.w;\n    }\n    /**\n     * Returns the sprite height in pixels.\n     *\n     * @return The sprite height in pixels.\n     */\n    get height() {\n        return this.frames[0].sourceSize.h;\n    }\n    calculateFrameIndex(time = util_1.now(), duration = this.duration, from = 0, to = this.frames.length - 1, direction = \"forward\") {\n        let delta = direction === \"reverse\" ? -1 : 1;\n        if (direction === \"pingpong\") {\n            duration = duration * 2 - this.frames[from].duration - this.frames[to].duration;\n        }\n        let frameTime = time % duration;\n        let frameIndex = direction === \"reverse\" ? to : from;\n        while (((delta > 0 && frameIndex < to)\n            || (delta < 0 && frameIndex > from)) && frameTime >= this.frames[frameIndex].duration) {\n            frameTime -= this.frames[frameIndex].duration;\n            frameIndex += delta;\n            if (frameIndex === to) {\n                delta = -delta;\n            }\n        }\n        return frameIndex;\n    }\n    /**\n     * Returns the frame index to be drawn at the given time.\n     *\n     * @param time - Optional time index of the animation. Current system time is used if not specified.\n     * @return The frame index to draw.\n     */\n    getFrameIndex(time = util_1.now()) {\n        return this.calculateFrameIndex(time);\n    }\n    /**\n     * Draws a single sprite animation frame.\n     *\n     * @param ctx   - The canvas context to draw to.\n     * @param index - The frame index to draw.\n     * @param x     - The X position in pixels to draw to the sprite at.\n     * @param y     - The Y position in pixels to draw to the sprite at.\n     */\n    drawFrame(ctx, index, x, y) {\n        const frame = this.frames[index];\n        if (frame == null) {\n            throw new Error(\"Frame index not found: \" + index);\n        }\n        ctx.drawImage(this.image, frame.frame.x, frame.frame.y, frame.frame.w, frame.frame.h, Math.round(x) + frame.spriteSourceSize.x, Math.round(y) + frame.spriteSourceSize.y, frame.spriteSourceSize.w, frame.spriteSourceSize.h);\n    }\n    /**\n     * Returns the frame index of a tagged sprite animation at the given time.\n     *\n     * @param tag  - The animation tag to draw.\n     * @param time - Optional time index of the animation. Current system time is used if not specified.\n     * @return The frame index to draw.\n     */\n    getTaggedFrameIndex(tag, time = util_1.now()) {\n        const frameTag = this.frameTags[tag] || this.frameTags[this.fallbackTag];\n        if (frameTag == null) {\n            throw new Error(`Frame tag not found and fallback is not available as well. Tag: '${tag}' | FallbackTag: '${this.fallbackTag}'`);\n        }\n        return this.calculateFrameIndex(time, this.frameTagDurations[tag], frameTag.from, frameTag.to, frameTag.direction);\n    }\n    /**\n     * Return the full animation duration for a specific animation tag.\n     *\n     * @param tag - The animation tag to get the duration from.\n     * @return The animation duration.\n     */\n    getAnimationDurationByTag(tag) {\n        const duration = this.frameTagDurations[tag] || this.frameTagDurations[this.fallbackTag];\n        if (duration == null) {\n            throw new Error(`Frame tag not found and fallback is not available as well. Tag: '${tag}' | FallbackTag: '${this.fallbackTag}'`);\n        }\n        return duration;\n    }\n    /**\n     * Draws a tagged sprite animation.\n     *\n     * @param ctx  - The canvas context to draw to.\n     * @param tag  - The animation tag to draw.\n     * @param x    - The X position in pixels to draw to the sprite at.\n     * @param y    - The Y position in pixels to draw to the sprite at.\n     * @param time - Optional time index of the animation. Current system time is used if not specified.\n     */\n    drawTag(ctx, tag, x, y, time = util_1.now()) {\n        this.drawFrame(ctx, this.getTaggedFrameIndex(tag, time), x, y);\n    }\n    /**\n     * Draws the untagged sprite animation (Simply all defined frames).\n     *\n     * @param ctx  - The canvas context to draw to.\n     * @param x    - The X position in pixels to draw to the sprite at.\n     * @param y    - The Y position in pixels to draw to the sprite at.\n     * @param time - Optional time index of the animation. Current system time is used if not specified.\n     */\n    draw(ctx, x, y, time = util_1.now()) {\n        const frameIndex = this.calculateFrameIndex(time);\n        this.drawFrame(ctx, frameIndex, x, y);\n    }\n    /**\n     * Returns the layer with the given name.\n     *\n     * @param name - The layer name.\n     * @return The found layer. Null if none.\n     */\n    getLayer(name) {\n        var _a, _b;\n        return (_b = (_a = this.json.meta.layers) === null || _a === void 0 ? void 0 : _a.find(layer => layer.name === name)) !== null && _b !== void 0 ? _b : null;\n    }\n}\nexports.Aseprite = Aseprite;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvQXNlcHJpdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQXNlcHJpdGUudHM/YjRlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7XHJcbiAgICBBc2Vwcml0ZURpcmVjdGlvbiwgQXNlcHJpdGVGcmFtZUpTT04sIEFzZXByaXRlRnJhbWVUYWdKU09OLCBBc2Vwcml0ZUpTT04sIEFzZXByaXRlTGF5ZXJKU09OXHJcbn0gZnJvbSBcIiouYXNlcHJpdGUuanNvblwiO1xyXG5pbXBvcnQgeyBsb2FkSW1hZ2UgfSBmcm9tIFwiLi9ncmFwaGljc1wiO1xyXG5pbXBvcnQgeyBub3cgfSBmcm9tIFwiLi91dGlsXCI7XHJcblxyXG4vKipcclxuICogU3ByaXRlIGltcGxlbWVudGF0aW9uIHdoaWNoIHVzZXMgdGhlIEFzZXByaXRlIEpTT04gZm9ybWF0LiBVc2UgdGhlIHN0YXRpYyBhc3luY2hyb25vdXMgW1tsb2FkXV0gbWV0aG9kIHRvIGxvYWQgdGhlXHJcbiAqIHNwcml0ZSBhbmQgdGhlbiB1c2UgW1tkcmF3XV0gb3IgW1tkcmF3VGFnXV0gdG8gZHJhdyB0aGUgc3ByaXRlIGFuaW1hdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBc2Vwcml0ZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZyYW1lczogQXNlcHJpdGVGcmFtZUpTT05bXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZnJhbWVUYWdzOiBSZWNvcmQ8c3RyaW5nLCBBc2Vwcml0ZUZyYW1lVGFnSlNPTj4gPSB7fTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZnJhbWVUYWdEdXJhdGlvbnM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZHVyYXRpb246IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZmFsbGJhY2tUYWcgPSBcImlkbGVcIjtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkganNvbjogQXNlcHJpdGVKU09OLCBwcml2YXRlIHJlYWRvbmx5IGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5mcmFtZXMgPSBPYmplY3QudmFsdWVzKGpzb24uZnJhbWVzKTtcclxuICAgICAgICB0aGlzLmR1cmF0aW9uID0gdGhpcy5mcmFtZXMucmVkdWNlKChkdXJhdGlvbiwgZnJhbWUpID0+IGR1cmF0aW9uICsgZnJhbWUuZHVyYXRpb24sIDApO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGZyYW1lVGFnIG9mIGpzb24ubWV0YS5mcmFtZVRhZ3MgPz8gW10pIHtcclxuICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBmcmFtZVRhZy5mcm9tOyBpIDw9IGZyYW1lVGFnLnRvOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uICs9IHRoaXMuZnJhbWVzW2ldLmR1cmF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZyYW1lVGFnc1tmcmFtZVRhZy5uYW1lXSA9IGZyYW1lVGFnO1xyXG4gICAgICAgICAgICB0aGlzLmZyYW1lVGFnRHVyYXRpb25zW2ZyYW1lVGFnLm5hbWVdID0gZHVyYXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgdGhlIHNwcml0ZSBmcm9tIHRoZSBnaXZlbiBzb3VyY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBVUkwgcG9pbnRpbmcgdG8gdGhlIEpTT04gZmlsZSBvZiB0aGUgc3ByaXRlLlxyXG4gICAgICogQHJldHVybiBUaGUgbG9hZGVkIHNwcml0ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkKHNvdXJjZTogc3RyaW5nKTogUHJvbWlzZTxBc2Vwcml0ZT4ge1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCAoYXdhaXQgZmV0Y2goc291cmNlKSkuanNvbigpIGFzIEFzZXByaXRlSlNPTjtcclxuICAgICAgICBjb25zdCBiYXNlVVJMID0gbmV3IFVSTChzb3VyY2UsIGxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgbG9hZEltYWdlKG5ldyBVUkwoanNvbi5tZXRhLmltYWdlLCBiYXNlVVJMKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgQXNlcHJpdGUoanNvbiwgaW1hZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgc3ByaXRlIHdpZHRoIGluIHBpeGVscy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBzcHJpdGUgd2lkdGggaW4gcGl4ZWxzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHdpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJhbWVzWzBdLnNvdXJjZVNpemUudztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNwcml0ZSBoZWlnaHQgaW4gcGl4ZWxzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIHNwcml0ZSBoZWlnaHQgaW4gcGl4ZWxzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZyYW1lc1swXS5zb3VyY2VTaXplLmg7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVGcmFtZUluZGV4KFxyXG4gICAgICAgIHRpbWU6IG51bWJlciA9IG5vdygpLCBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb24sIGZyb20gPSAwLCB0byA9IHRoaXMuZnJhbWVzLmxlbmd0aCAtIDEsXHJcbiAgICAgICAgZGlyZWN0aW9uOiBBc2Vwcml0ZURpcmVjdGlvbiA9IFwiZm9yd2FyZFwiXHJcbiAgICApOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBkZWx0YSA9IGRpcmVjdGlvbiA9PT0gXCJyZXZlcnNlXCIgPyAtMSA6IDE7XHJcblxyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09IFwicGluZ3BvbmdcIikge1xyXG4gICAgICAgICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uICogMiAtIHRoaXMuZnJhbWVzW2Zyb21dLmR1cmF0aW9uIC0gdGhpcy5mcmFtZXNbdG9dLmR1cmF0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZyYW1lVGltZSA9IHRpbWUgJSBkdXJhdGlvbjtcclxuICAgICAgICBsZXQgZnJhbWVJbmRleCA9IGRpcmVjdGlvbiA9PT0gXCJyZXZlcnNlXCIgPyB0byA6IGZyb207XHJcblxyXG4gICAgICAgIHdoaWxlIChcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgKGRlbHRhID4gMCAmJiBmcmFtZUluZGV4IDwgdG8pXHJcbiAgICAgICAgICAgICAgICB8fCAoZGVsdGEgPCAwICYmIGZyYW1lSW5kZXggPiBmcm9tKVxyXG4gICAgICAgICAgICApICYmIGZyYW1lVGltZSA+PSB0aGlzLmZyYW1lc1tmcmFtZUluZGV4XS5kdXJhdGlvblxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBmcmFtZVRpbWUgLT0gdGhpcy5mcmFtZXNbZnJhbWVJbmRleF0uZHVyYXRpb247XHJcbiAgICAgICAgICAgIGZyYW1lSW5kZXggKz0gZGVsdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWVJbmRleCA9PT0gdG8pIHtcclxuICAgICAgICAgICAgICAgIGRlbHRhID0gLWRlbHRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnJhbWVJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGZyYW1lIGluZGV4IHRvIGJlIGRyYXduIGF0IHRoZSBnaXZlbiB0aW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0aW1lIC0gT3B0aW9uYWwgdGltZSBpbmRleCBvZiB0aGUgYW5pbWF0aW9uLiBDdXJyZW50IHN5c3RlbSB0aW1lIGlzIHVzZWQgaWYgbm90IHNwZWNpZmllZC5cclxuICAgICAqIEByZXR1cm4gVGhlIGZyYW1lIGluZGV4IHRvIGRyYXcuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRGcmFtZUluZGV4KHRpbWU6IG51bWJlciA9IG5vdygpKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVGcmFtZUluZGV4KHRpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgYSBzaW5nbGUgc3ByaXRlIGFuaW1hdGlvbiBmcmFtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3R4ICAgLSBUaGUgY2FudmFzIGNvbnRleHQgdG8gZHJhdyB0by5cclxuICAgICAqIEBwYXJhbSBpbmRleCAtIFRoZSBmcmFtZSBpbmRleCB0byBkcmF3LlxyXG4gICAgICogQHBhcmFtIHggICAgIC0gVGhlIFggcG9zaXRpb24gaW4gcGl4ZWxzIHRvIGRyYXcgdG8gdGhlIHNwcml0ZSBhdC5cclxuICAgICAqIEBwYXJhbSB5ICAgICAtIFRoZSBZIHBvc2l0aW9uIGluIHBpeGVscyB0byBkcmF3IHRvIHRoZSBzcHJpdGUgYXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkcmF3RnJhbWUoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGluZGV4OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZnJhbWUgPSB0aGlzLmZyYW1lc1tpbmRleF07XHJcblxyXG4gICAgICAgIGlmIChmcmFtZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZyYW1lIGluZGV4IG5vdCBmb3VuZDogXCIgKyBpbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICB0aGlzLmltYWdlLFxyXG4gICAgICAgICAgICBmcmFtZS5mcmFtZS54LCBmcmFtZS5mcmFtZS55LFxyXG4gICAgICAgICAgICBmcmFtZS5mcmFtZS53LCBmcmFtZS5mcmFtZS5oLFxyXG4gICAgICAgICAgICBNYXRoLnJvdW5kKHgpICsgZnJhbWUuc3ByaXRlU291cmNlU2l6ZS54LCBNYXRoLnJvdW5kKHkpICsgZnJhbWUuc3ByaXRlU291cmNlU2l6ZS55LFxyXG4gICAgICAgICAgICBmcmFtZS5zcHJpdGVTb3VyY2VTaXplLncsIGZyYW1lLnNwcml0ZVNvdXJjZVNpemUuaFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmcmFtZSBpbmRleCBvZiBhIHRhZ2dlZCBzcHJpdGUgYW5pbWF0aW9uIGF0IHRoZSBnaXZlbiB0aW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0YWcgIC0gVGhlIGFuaW1hdGlvbiB0YWcgdG8gZHJhdy5cclxuICAgICAqIEBwYXJhbSB0aW1lIC0gT3B0aW9uYWwgdGltZSBpbmRleCBvZiB0aGUgYW5pbWF0aW9uLiBDdXJyZW50IHN5c3RlbSB0aW1lIGlzIHVzZWQgaWYgbm90IHNwZWNpZmllZC5cclxuICAgICAqIEByZXR1cm4gVGhlIGZyYW1lIGluZGV4IHRvIGRyYXcuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRUYWdnZWRGcmFtZUluZGV4KHRhZzogc3RyaW5nLCB0aW1lOiBudW1iZXIgPSBub3coKSk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgZnJhbWVUYWcgPSB0aGlzLmZyYW1lVGFnc1t0YWddIHx8IHRoaXMuZnJhbWVUYWdzW3RoaXMuZmFsbGJhY2tUYWddO1xyXG4gICAgICAgIGlmIChmcmFtZVRhZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRnJhbWUgdGFnIG5vdCBmb3VuZCBhbmQgZmFsbGJhY2sgaXMgbm90IGF2YWlsYWJsZSBhcyB3ZWxsLiBUYWc6ICcke3RhZ30nIHwgRmFsbGJhY2tUYWc6ICcke3RoaXMuZmFsbGJhY2tUYWd9J2ApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVGcmFtZUluZGV4KFxyXG4gICAgICAgICAgICB0aW1lLCB0aGlzLmZyYW1lVGFnRHVyYXRpb25zW3RhZ10sIGZyYW1lVGFnLmZyb20sIGZyYW1lVGFnLnRvLCBmcmFtZVRhZy5kaXJlY3Rpb25cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRoZSBmdWxsIGFuaW1hdGlvbiBkdXJhdGlvbiBmb3IgYSBzcGVjaWZpYyBhbmltYXRpb24gdGFnLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0YWcgLSBUaGUgYW5pbWF0aW9uIHRhZyB0byBnZXQgdGhlIGR1cmF0aW9uIGZyb20uXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBhbmltYXRpb24gZHVyYXRpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRBbmltYXRpb25EdXJhdGlvbkJ5VGFnKHRhZzogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuZnJhbWVUYWdEdXJhdGlvbnNbdGFnXSB8fCB0aGlzLmZyYW1lVGFnRHVyYXRpb25zW3RoaXMuZmFsbGJhY2tUYWddO1xyXG4gICAgICAgIGlmIChkdXJhdGlvbiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRnJhbWUgdGFnIG5vdCBmb3VuZCBhbmQgZmFsbGJhY2sgaXMgbm90IGF2YWlsYWJsZSBhcyB3ZWxsLiBUYWc6ICcke3RhZ30nIHwgRmFsbGJhY2tUYWc6ICcke3RoaXMuZmFsbGJhY2tUYWd9J2ApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGR1cmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgYSB0YWdnZWQgc3ByaXRlIGFuaW1hdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3R4ICAtIFRoZSBjYW52YXMgY29udGV4dCB0byBkcmF3IHRvLlxyXG4gICAgICogQHBhcmFtIHRhZyAgLSBUaGUgYW5pbWF0aW9uIHRhZyB0byBkcmF3LlxyXG4gICAgICogQHBhcmFtIHggICAgLSBUaGUgWCBwb3NpdGlvbiBpbiBwaXhlbHMgdG8gZHJhdyB0byB0aGUgc3ByaXRlIGF0LlxyXG4gICAgICogQHBhcmFtIHkgICAgLSBUaGUgWSBwb3NpdGlvbiBpbiBwaXhlbHMgdG8gZHJhdyB0byB0aGUgc3ByaXRlIGF0LlxyXG4gICAgICogQHBhcmFtIHRpbWUgLSBPcHRpb25hbCB0aW1lIGluZGV4IG9mIHRoZSBhbmltYXRpb24uIEN1cnJlbnQgc3lzdGVtIHRpbWUgaXMgdXNlZCBpZiBub3Qgc3BlY2lmaWVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZHJhd1RhZyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgdGFnOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCB0aW1lOiBudW1iZXIgPSBub3coKSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZHJhd0ZyYW1lKGN0eCwgdGhpcy5nZXRUYWdnZWRGcmFtZUluZGV4KHRhZywgdGltZSksIHgsIHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgdGhlIHVudGFnZ2VkIHNwcml0ZSBhbmltYXRpb24gKFNpbXBseSBhbGwgZGVmaW5lZCBmcmFtZXMpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjdHggIC0gVGhlIGNhbnZhcyBjb250ZXh0IHRvIGRyYXcgdG8uXHJcbiAgICAgKiBAcGFyYW0geCAgICAtIFRoZSBYIHBvc2l0aW9uIGluIHBpeGVscyB0byBkcmF3IHRvIHRoZSBzcHJpdGUgYXQuXHJcbiAgICAgKiBAcGFyYW0geSAgICAtIFRoZSBZIHBvc2l0aW9uIGluIHBpeGVscyB0byBkcmF3IHRvIHRoZSBzcHJpdGUgYXQuXHJcbiAgICAgKiBAcGFyYW0gdGltZSAtIE9wdGlvbmFsIHRpbWUgaW5kZXggb2YgdGhlIGFuaW1hdGlvbi4gQ3VycmVudCBzeXN0ZW0gdGltZSBpcyB1c2VkIGlmIG5vdCBzcGVjaWZpZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB4OiBudW1iZXIsIHk6IG51bWJlciwgdGltZTogbnVtYmVyID0gbm93KCkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBmcmFtZUluZGV4ID0gdGhpcy5jYWxjdWxhdGVGcmFtZUluZGV4KHRpbWUpO1xyXG4gICAgICAgIHRoaXMuZHJhd0ZyYW1lKGN0eCwgZnJhbWVJbmRleCwgeCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXllciB3aXRoIHRoZSBnaXZlbiBuYW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIGxheWVyIG5hbWUuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBmb3VuZCBsYXllci4gTnVsbCBpZiBub25lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0TGF5ZXIobmFtZTogc3RyaW5nKTogQXNlcHJpdGVMYXllckpTT04gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5qc29uLm1ldGEubGF5ZXJzPy5maW5kKGxheWVyID0+IGxheWVyLm5hbWUgPT09IG5hbWUpID8/IG51bGw7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBR0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBT0E7O0FBQUE7QUFBQTtBQUxBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBRUE7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQTFMQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/Aseprite.js\n");
    
    /***/ }),
    
    /***/ "./lib/Assets.js":
    /*!***********************!*\
      !*** ./lib/Assets.js ***!
      \***********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Assets = exports.asset = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ./Aseprite */ \"./lib/Aseprite.js\");\nconst BitmapFont_1 = __webpack_require__(/*! ./BitmapFont */ \"./lib/BitmapFont.js\");\nconst graphics_1 = __webpack_require__(/*! ./graphics */ \"./lib/graphics.js\");\nconst Sound_1 = __webpack_require__(/*! ./Sound */ \"./lib/Sound.js\");\nconst assets = new Map();\nclass AssetRequest {\n    constructor(target, propertyKey, src, options) {\n        this.target = target;\n        this.propertyKey = propertyKey;\n        this.src = src;\n        this.options = options;\n    }\n    resolve(asset) {\n        this.target[this.propertyKey] = this.options.map ? this.options.map(asset) : asset;\n    }\n}\nconst assetRequests = [];\nfunction asset(src, options = {}) {\n    return (target, propertyKey) => {\n        assetRequests.push(new AssetRequest(target, propertyKey, src, options));\n    };\n}\nexports.asset = asset;\nclass Assets {\n    loadAsset(src) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            let asset = assets.get(src);\n            if (asset == null) {\n                if (src.endsWith(\".aseprite.json\")) {\n                    asset = yield Aseprite_1.Aseprite.load(\"assets/\" + src);\n                }\n                else if (src.endsWith(\".font.json\")) {\n                    asset = yield BitmapFont_1.BitmapFont.load(\"assets/\" + src);\n                }\n                else if (src.endsWith(\".png\")) {\n                    asset = yield graphics_1.loadImage(src);\n                }\n                else if (src.endsWith(\".mp3\")) {\n                    asset = yield Sound_1.Sound.load(\"assets/\" + src);\n                }\n                else if (src.endsWith(\".ogg\")) {\n                    asset = yield Sound_1.Sound.load(\"assets/\" + src);\n                }\n                else if (src === \"appinfo.json\") {\n                    asset = (yield (yield fetch(\"appinfo.json\")).json());\n                }\n                else {\n                    throw new Error(\"Unknown asset format: \" + src);\n                }\n                assets.set(src, asset);\n            }\n            return asset;\n        });\n    }\n    load(onProgress) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const total = assetRequests.length;\n            let loaded = 0;\n            if (onProgress) {\n                onProgress(total, loaded);\n            }\n            let request;\n            while ((request = assetRequests.pop()) != null) {\n                if (typeof request.src === \"string\") {\n                    request.resolve(yield this.loadAsset(request.src));\n                }\n                else {\n                    request.resolve(yield Promise.all(request.src.map(src => this.loadAsset(src))));\n                }\n                loaded++;\n                if (onProgress) {\n                    onProgress(total, loaded);\n                }\n            }\n        });\n    }\n}\nexports.Assets = Assets;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvQXNzZXRzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0Fzc2V0cy50cz80MzFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcEluZm9KU09OIH0gZnJvbSBcImFwcGluZm8uanNvblwiO1xyXG5pbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IEJpdG1hcEZvbnQgfSBmcm9tIFwiLi9CaXRtYXBGb250XCI7XHJcbmltcG9ydCB7IGxvYWRJbWFnZSB9IGZyb20gXCIuL2dyYXBoaWNzXCI7XHJcbmltcG9ydCB7IFNvdW5kIH0gZnJvbSBcIi4vU291bmRcIjtcclxuXHJcbmNvbnN0IGFzc2V0cyA9IG5ldyBNYXA8c3RyaW5nLCB1bmtub3duPigpO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBc3NldE9wdGlvbnMge1xyXG4gICAgbWFwPzogKGFzc2V0OiBhbnkpID0+IHVua25vd247XHJcbn1cclxuXHJcbmNsYXNzIEFzc2V0UmVxdWVzdDxcclxuICAgICAgICBTIGV4dGVuZHMgc3RyaW5nIHwgc3RyaW5nW10gPSBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICAgICAgICBBIGV4dGVuZHMgKFMgZXh0ZW5kcyBzdHJpbmcgPyB1bmtub3duIDogdW5rbm93bltdKSA9IChTIGV4dGVuZHMgc3RyaW5nID8gdW5rbm93biA6IHVua25vd25bXSk+IHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdGFyZ2V0OiBhbnksXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBwcm9wZXJ0eUtleTogc3RyaW5nIHwgc3ltYm9sLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBzcmM6IFMsXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBvcHRpb25zOiBBc3NldE9wdGlvbnNcclxuICAgICkge31cclxuXHJcbiAgICBwdWJsaWMgcmVzb2x2ZShhc3NldDogQSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0W3RoaXMucHJvcGVydHlLZXldID0gdGhpcy5vcHRpb25zLm1hcCA/IHRoaXMub3B0aW9ucy5tYXAoYXNzZXQpIDogYXNzZXQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGFzc2V0UmVxdWVzdHM6IEFzc2V0UmVxdWVzdFtdID0gW107XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXNzZXQoc3JjOiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9uczogQXNzZXRPcHRpb25zID0ge30pOiBQcm9wZXJ0eURlY29yYXRvciB7XHJcbiAgICByZXR1cm4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nIHwgc3ltYm9sKTogdm9pZCA9PiB7XHJcbiAgICAgICAgYXNzZXRSZXF1ZXN0cy5wdXNoKG5ldyBBc3NldFJlcXVlc3QodGFyZ2V0LCBwcm9wZXJ0eUtleSwgc3JjLCBvcHRpb25zKSk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQXNzZXRzIHtcclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZEFzc2V0KHNyYzogc3RyaW5nKTogUHJvbWlzZTx1bmtub3duPiB7XHJcbiAgICAgICAgbGV0IGFzc2V0ID0gYXNzZXRzLmdldChzcmMpO1xyXG5cclxuICAgICAgICBpZiAoYXNzZXQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoc3JjLmVuZHNXaXRoKFwiLmFzZXByaXRlLmpzb25cIikpIHtcclxuICAgICAgICAgICAgICAgIGFzc2V0ID0gYXdhaXQgQXNlcHJpdGUubG9hZChcImFzc2V0cy9cIiArIHNyYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3JjLmVuZHNXaXRoKFwiLmZvbnQuanNvblwiKSkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXQgPSBhd2FpdCBCaXRtYXBGb250LmxvYWQoXCJhc3NldHMvXCIgKyBzcmMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNyYy5lbmRzV2l0aChcIi5wbmdcIikpIHtcclxuICAgICAgICAgICAgICAgIGFzc2V0ID0gYXdhaXQgbG9hZEltYWdlKHNyYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3JjLmVuZHNXaXRoKFwiLm1wM1wiKSkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXQgPSBhd2FpdCBTb3VuZC5sb2FkKFwiYXNzZXRzL1wiICsgc3JjKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzcmMuZW5kc1dpdGgoXCIub2dnXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NldCA9IGF3YWl0IFNvdW5kLmxvYWQoXCJhc3NldHMvXCIgKyBzcmMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNyYyA9PT0gXCJhcHBpbmZvLmpzb25cIikge1xyXG4gICAgICAgICAgICAgICAgYXNzZXQgPSBhd2FpdCAoYXdhaXQgZmV0Y2goXCJhcHBpbmZvLmpzb25cIikpLmpzb24oKSBhcyBBcHBJbmZvSlNPTjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gYXNzZXQgZm9ybWF0OiBcIiArIHNyYyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFzc2V0cy5zZXQoc3JjLCBhc3NldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXNzZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWQob25Qcm9ncmVzcz86ICh0b3RhbDogbnVtYmVyLCBsb2FkZWQ6IG51bWJlcikgPT4gdm9pZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHRvdGFsID0gYXNzZXRSZXF1ZXN0cy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGxvYWRlZCA9IDA7XHJcblxyXG4gICAgICAgIGlmIChvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3ModG90YWwsIGxvYWRlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVxdWVzdDtcclxuXHJcbiAgICAgICAgd2hpbGUgKChyZXF1ZXN0ID0gYXNzZXRSZXF1ZXN0cy5wb3AoKSkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3Quc3JjID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc29sdmUoYXdhaXQgdGhpcy5sb2FkQXNzZXQocmVxdWVzdC5zcmMpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzb2x2ZShhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0LnNyYy5tYXAoc3JjID0+IHRoaXMubG9hZEFzc2V0KHNyYykpKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvYWRlZCsrO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3ModG90YWwsIGxvYWRlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFuREE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/Assets.js\n");
    
    /***/ }),
    
    /***/ "./lib/BitmapFont.js":
    /*!***************************!*\
      !*** ./lib/BitmapFont.js ***!
      \***************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BitmapFont = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst graphics_js_1 = __webpack_require__(/*! ./graphics.js */ \"./lib/graphics.js\");\nconst CHAR_SPACING = 1;\nclass BitmapFont {\n    constructor(sourceImage, colors, charMap, charWidths, compactablePrecursors, charMargin = 1) {\n        this.sourceImage = sourceImage;\n        this.canvas = document.createElement(\"canvas\");\n        this.colorMap = this.prepareColors(colors);\n        this.charMap = charMap;\n        this.charWidths = charWidths;\n        this.compactablePrecursors = compactablePrecursors;\n        this.charStartPoints = [];\n        this.charCount = charMap.length;\n        this.charReverseMap = {};\n        for (let i = 0; i < this.charCount; i++) {\n            this.charStartPoints[i] = (i === 0) ? 0 : this.charStartPoints[i - 1] + this.charWidths[i - 1] + charMargin;\n            const char = this.charMap[i];\n            this.charReverseMap[char] = i;\n        }\n    }\n    /**\n     * Loads the sprite from the given source.\n     *\n     * @param source - The URL pointing to the JSON file of the sprite.\n     * @return The loaded sprite.\n     */\n    static load(source) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const json = yield (yield fetch(source)).json();\n            const baseURL = new URL(source, location.href);\n            const image = yield graphics_js_1.loadImage(new URL(json.image, baseURL));\n            const characters = json.characterMapping.map(charDef => charDef.char).join(\"\");\n            const widths = json.characterMapping.map(charDef => charDef.width);\n            const compactablePrecursors = json.characterMapping.map(charDef => charDef.compactablePrecursors || []);\n            return new BitmapFont(image, json.colors, characters, widths, compactablePrecursors, json.margin);\n        });\n    }\n    prepareColors(colorMap) {\n        const result = {};\n        const colors = Object.keys(colorMap);\n        const count = colors.length;\n        const w = this.canvas.width = this.sourceImage.width;\n        const h = this.sourceImage.height;\n        this.canvas.height = h * count;\n        this.charHeight = h;\n        const ctx = this.canvas.getContext(\"2d\");\n        // Fill with font\n        for (let i = 0; i < count; i++) {\n            result[colors[i]] = i;\n            ctx.drawImage(this.sourceImage, 0, h * i);\n        }\n        // Colorize\n        ctx.globalCompositeOperation = \"source-in\";\n        for (let i = 0; i < count; i++) {\n            ctx.fillStyle = colorMap[colors[i]];\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(0, h * i, w, h);\n            ctx.clip();\n            ctx.fillRect(0, 0, w, h * count);\n            ctx.restore();\n        }\n        ctx.globalCompositeOperation = \"source-over\";\n        return result;\n    }\n    getCharIndex(char) {\n        let charIndex = this.charReverseMap[char];\n        if (charIndex == null) {\n            // To signalize missing char, use last char, which is a not-def glyph\n            charIndex = this.charCount - 1;\n        }\n        return charIndex;\n    }\n    drawCharacter(ctx, char, color) {\n        const colorIndex = this.colorMap[color];\n        const charIndex = (typeof char === \"number\") ? char : this.getCharIndex(char);\n        const charX = this.charStartPoints[charIndex], charY = colorIndex * this.charHeight;\n        ctx.drawImage(this.canvas, charX, charY, this.charWidths[charIndex], this.charHeight, 0, 0, this.charWidths[charIndex], this.charHeight);\n    }\n    drawText(ctx, text, x, y, color, align = 0, alpha = 1) {\n        ctx.save();\n        ctx.translate(x, y);\n        // Ugly hack to correct text position to exact pixel boundary because Chrome renders broken character images\n        // when exactly between two pixels (Firefox doesn't have this problem).\n        if (ctx.getTransform) {\n            const transform = ctx.getTransform();\n            ctx.translate(Math.round(transform.e) - transform.e, Math.round(transform.f) - transform.f);\n        }\n        text = \"\" + text;\n        ctx.globalAlpha *= alpha;\n        const { width } = this.measureText(text);\n        ctx.translate(-align * width, 0);\n        let precursorChar = null;\n        for (const currentChar of text) {\n            const index = this.getCharIndex(currentChar);\n            const spaceReduction = precursorChar && this.compactablePrecursors[index].includes(precursorChar) ? 1 : 0;\n            ctx.translate(-spaceReduction, 0);\n            this.drawCharacter(ctx, index, color);\n            ctx.translate(this.charWidths[index] + CHAR_SPACING, 0);\n            precursorChar = currentChar;\n        }\n        ctx.restore();\n    }\n    measureText(text) {\n        let width = 0;\n        let precursorChar = null;\n        for (const currentChar of text) {\n            const index = this.getCharIndex(currentChar);\n            const spaceReduction = precursorChar && this.compactablePrecursors[index].includes(precursorChar) ? 1 : 0;\n            width += this.charWidths[index] - spaceReduction + CHAR_SPACING;\n            precursorChar = currentChar;\n        }\n        if (text.length > 0) {\n            width -= CHAR_SPACING;\n        }\n        return { width, height: this.charHeight };\n    }\n    drawTextWithOutline(ctx, text, xPos, yPos, textColor, outlineColor, align = 0) {\n        for (let yOffset = yPos - 1; yOffset <= yPos + 1; yOffset++) {\n            for (let xOffset = xPos - 1; xOffset <= xPos + 1; xOffset++) {\n                if (xOffset !== xPos || yOffset !== yPos) {\n                    this.drawText(ctx, text, xOffset, yOffset, outlineColor, align);\n                }\n            }\n        }\n        this.drawText(ctx, text, xPos, yPos, textColor, align);\n    }\n}\nexports.BitmapFont = BitmapFont;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvQml0bWFwRm9udC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9CaXRtYXBGb250LnRzPzU2ZDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRm9udEpTT04gfSBmcm9tIFwiKi5mb250Lmpzb25cIjtcclxuaW1wb3J0IHsgbG9hZEltYWdlIH0gZnJvbSBcIi4vZ3JhcGhpY3MuanNcIjtcclxuXHJcbmNvbnN0IENIQVJfU1BBQ0lORyA9IDE7XHJcblxyXG5leHBvcnQgY2xhc3MgQml0bWFwRm9udCB7XHJcbiAgICBwcml2YXRlIHNvdXJjZUltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjb2xvck1hcDogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcclxuICAgIHByaXZhdGUgY2hhck1hcDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBjaGFyV2lkdGhzOiBudW1iZXJbXTtcclxuICAgIHByaXZhdGUgY29tcGFjdGFibGVQcmVjdXJzb3JzOiBzdHJpbmdbXVtdO1xyXG4gICAgcHJpdmF0ZSBjaGFyU3RhcnRQb2ludHM6IG51bWJlcltdO1xyXG4gICAgcHJpdmF0ZSBjaGFyQ291bnQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY2hhclJldmVyc2VNYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XHJcbiAgICBwdWJsaWMgY2hhckhlaWdodCE6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHNvdXJjZUltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBjb2xvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIGNoYXJNYXA6IHN0cmluZyxcclxuICAgICAgICBjaGFyV2lkdGhzOiBudW1iZXJbXSwgY29tcGFjdGFibGVQcmVjdXJzb3JzOiBzdHJpbmdbXVtdLCBjaGFyTWFyZ2luID0gMVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5zb3VyY2VJbWFnZSA9IHNvdXJjZUltYWdlO1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICB0aGlzLmNvbG9yTWFwID0gdGhpcy5wcmVwYXJlQ29sb3JzKGNvbG9ycyk7XHJcbiAgICAgICAgdGhpcy5jaGFyTWFwID0gY2hhck1hcDtcclxuICAgICAgICB0aGlzLmNoYXJXaWR0aHMgPSBjaGFyV2lkdGhzO1xyXG4gICAgICAgIHRoaXMuY29tcGFjdGFibGVQcmVjdXJzb3JzID0gY29tcGFjdGFibGVQcmVjdXJzb3JzO1xyXG4gICAgICAgIHRoaXMuY2hhclN0YXJ0UG9pbnRzID0gW107XHJcbiAgICAgICAgdGhpcy5jaGFyQ291bnQgPSBjaGFyTWFwLmxlbmd0aDtcclxuICAgICAgICB0aGlzLmNoYXJSZXZlcnNlTWFwID0ge307XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGFyQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJTdGFydFBvaW50c1tpXSA9IChpID09PSAwKSA/IDAgOiB0aGlzLmNoYXJTdGFydFBvaW50c1tpIC0gMV0gKyB0aGlzLmNoYXJXaWR0aHNbaSAtIDFdICsgY2hhck1hcmdpbjtcclxuICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuY2hhck1hcFtpXTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyUmV2ZXJzZU1hcFtjaGFyXSA9IGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgdGhlIHNwcml0ZSBmcm9tIHRoZSBnaXZlbiBzb3VyY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBVUkwgcG9pbnRpbmcgdG8gdGhlIEpTT04gZmlsZSBvZiB0aGUgc3ByaXRlLlxyXG4gICAgICogQHJldHVybiBUaGUgbG9hZGVkIHNwcml0ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkKHNvdXJjZTogc3RyaW5nKTogUHJvbWlzZTxCaXRtYXBGb250PiB7XHJcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IChhd2FpdCBmZXRjaChzb3VyY2UpKS5qc29uKCkgYXMgRm9udEpTT047XHJcbiAgICAgICAgY29uc3QgYmFzZVVSTCA9IG5ldyBVUkwoc291cmNlLCBsb2NhdGlvbi5ocmVmKTtcclxuICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IGxvYWRJbWFnZShuZXcgVVJMKGpzb24uaW1hZ2UsIGJhc2VVUkwpKTtcclxuICAgICAgICBjb25zdCBjaGFyYWN0ZXJzID0ganNvbi5jaGFyYWN0ZXJNYXBwaW5nLm1hcChjaGFyRGVmID0+IGNoYXJEZWYuY2hhcikuam9pbihcIlwiKTtcclxuICAgICAgICBjb25zdCB3aWR0aHMgPSBqc29uLmNoYXJhY3Rlck1hcHBpbmcubWFwKGNoYXJEZWYgPT4gY2hhckRlZi53aWR0aCk7XHJcbiAgICAgICAgY29uc3QgY29tcGFjdGFibGVQcmVjdXJzb3JzID0ganNvbi5jaGFyYWN0ZXJNYXBwaW5nLm1hcChjaGFyRGVmID0+IGNoYXJEZWYuY29tcGFjdGFibGVQcmVjdXJzb3JzIHx8IFtdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBCaXRtYXBGb250KGltYWdlLCBqc29uLmNvbG9ycywgY2hhcmFjdGVycywgd2lkdGhzLCBjb21wYWN0YWJsZVByZWN1cnNvcnMsIGpzb24ubWFyZ2luKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHByZXBhcmVDb2xvcnMoY29sb3JNYXA6IHsgW3g6IHN0cmluZ106IHN0cmluZzsgfSk6IHsgW3g6IHN0cmluZ106IG51bWJlciB9IHtcclxuICAgICAgICBjb25zdCByZXN1bHQ6IHsgW3g6IHN0cmluZ106IG51bWJlcn0gPSB7fTtcclxuICAgICAgICBjb25zdCBjb2xvcnMgPSBPYmplY3Qua2V5cyhjb2xvck1hcCk7XHJcbiAgICAgICAgY29uc3QgY291bnQgPSBjb2xvcnMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuc291cmNlSW1hZ2Uud2lkdGg7XHJcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuc291cmNlSW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGggKiBjb3VudDtcclxuICAgICAgICB0aGlzLmNoYXJIZWlnaHQgPSBoO1xyXG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSE7XHJcblxyXG4gICAgICAgIC8vIEZpbGwgd2l0aCBmb250XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtjb2xvcnNbaV1dID0gaTtcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLnNvdXJjZUltYWdlLCAwLCBoICogaSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDb2xvcml6ZVxyXG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1pblwiO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yTWFwW2NvbG9yc1tpXV07XHJcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY3R4LnJlY3QoMCwgaCAqIGksIHcsIGgpO1xyXG4gICAgICAgICAgICBjdHguY2xpcCgpO1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgdywgaCAqIGNvdW50KTtcclxuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1vdmVyXCI7XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDaGFySW5kZXgoY2hhcjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgY2hhckluZGV4ID0gdGhpcy5jaGFyUmV2ZXJzZU1hcFtjaGFyXTtcclxuXHJcbiAgICAgICAgaWYgKGNoYXJJbmRleCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFRvIHNpZ25hbGl6ZSBtaXNzaW5nIGNoYXIsIHVzZSBsYXN0IGNoYXIsIHdoaWNoIGlzIGEgbm90LWRlZiBnbHlwaFxyXG4gICAgICAgICAgICBjaGFySW5kZXggPSB0aGlzLmNoYXJDb3VudCAtIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2hhckluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZHJhd0NoYXJhY3RlcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY2hhcjogbnVtYmVyLCBjb2xvcjogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY29sb3JJbmRleCA9IHRoaXMuY29sb3JNYXBbY29sb3JdO1xyXG4gICAgICAgIGNvbnN0IGNoYXJJbmRleCA9ICh0eXBlb2YgY2hhciA9PT0gXCJudW1iZXJcIikgPyBjaGFyIDogdGhpcy5nZXRDaGFySW5kZXgoY2hhcik7XHJcbiAgICAgICAgY29uc3QgY2hhclggPSB0aGlzLmNoYXJTdGFydFBvaW50c1tjaGFySW5kZXhdLCBjaGFyWSA9IGNvbG9ySW5kZXggKiB0aGlzLmNoYXJIZWlnaHQ7XHJcblxyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLCBjaGFyWCwgY2hhclksIHRoaXMuY2hhcldpZHRoc1tjaGFySW5kZXhdLCB0aGlzLmNoYXJIZWlnaHQsXHJcbiAgICAgICAgICAgIDAsIDAsIHRoaXMuY2hhcldpZHRoc1tjaGFySW5kZXhdLCB0aGlzLmNoYXJIZWlnaHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3VGV4dChcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgdGV4dDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY29sb3I6IHN0cmluZywgYWxpZ24gPSAwLFxyXG4gICAgICAgIGFscGhhID0gMVxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpO1xyXG5cclxuICAgICAgICAvLyBVZ2x5IGhhY2sgdG8gY29ycmVjdCB0ZXh0IHBvc2l0aW9uIHRvIGV4YWN0IHBpeGVsIGJvdW5kYXJ5IGJlY2F1c2UgQ2hyb21lIHJlbmRlcnMgYnJva2VuIGNoYXJhY3RlciBpbWFnZXNcclxuICAgICAgICAvLyB3aGVuIGV4YWN0bHkgYmV0d2VlbiB0d28gcGl4ZWxzIChGaXJlZm94IGRvZXNuJ3QgaGF2ZSB0aGlzIHByb2JsZW0pLlxyXG4gICAgICAgIGlmIChjdHguZ2V0VHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGN0eC5nZXRUcmFuc2Zvcm0oKTtcclxuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShcclxuICAgICAgICAgICAgICAgIE1hdGgucm91bmQodHJhbnNmb3JtLmUpIC0gdHJhbnNmb3JtLmUsXHJcbiAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHRyYW5zZm9ybS5mKSAtIHRyYW5zZm9ybS5mXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0ZXh0ID0gXCJcIiArIHRleHQ7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhICo9IGFscGhhO1xyXG5cclxuICAgICAgICBjb25zdCB7IHdpZHRoIH0gPSB0aGlzLm1lYXN1cmVUZXh0KHRleHQpO1xyXG4gICAgICAgIGN0eC50cmFuc2xhdGUoLWFsaWduICogd2lkdGgsIDApO1xyXG5cclxuICAgICAgICBsZXQgcHJlY3Vyc29yQ2hhciA9IG51bGw7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgY3VycmVudENoYXIgb2YgdGV4dCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0Q2hhckluZGV4KGN1cnJlbnRDaGFyKTtcclxuICAgICAgICAgICAgY29uc3Qgc3BhY2VSZWR1Y3Rpb24gPSBwcmVjdXJzb3JDaGFyICYmIHRoaXMuY29tcGFjdGFibGVQcmVjdXJzb3JzW2luZGV4XS5pbmNsdWRlcyhwcmVjdXJzb3JDaGFyKSA/IDEgOiAwO1xyXG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKC1zcGFjZVJlZHVjdGlvbiwgMCk7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0NoYXJhY3RlcihjdHgsIGluZGV4LCBjb2xvcik7XHJcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUodGhpcy5jaGFyV2lkdGhzW2luZGV4XSArIENIQVJfU1BBQ0lORywgMCk7XHJcbiAgICAgICAgICAgIHByZWN1cnNvckNoYXIgPSBjdXJyZW50Q2hhcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1lYXN1cmVUZXh0KHRleHQ6IHN0cmluZyk6IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSB7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gMDtcclxuICAgICAgICBsZXQgcHJlY3Vyc29yQ2hhciA9IG51bGw7XHJcbiAgICAgICAgZm9yIChjb25zdCBjdXJyZW50Q2hhciBvZiB0ZXh0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRDaGFySW5kZXgoY3VycmVudENoYXIpO1xyXG4gICAgICAgICAgICBjb25zdCBzcGFjZVJlZHVjdGlvbiA9IHByZWN1cnNvckNoYXIgJiYgdGhpcy5jb21wYWN0YWJsZVByZWN1cnNvcnNbaW5kZXhdLmluY2x1ZGVzKHByZWN1cnNvckNoYXIpID8gMSA6IDA7XHJcbiAgICAgICAgICAgIHdpZHRoICs9IHRoaXMuY2hhcldpZHRoc1tpbmRleF0gLSBzcGFjZVJlZHVjdGlvbiArIENIQVJfU1BBQ0lORztcclxuICAgICAgICAgICAgcHJlY3Vyc29yQ2hhciA9IGN1cnJlbnRDaGFyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB3aWR0aCAtPSBDSEFSX1NQQUNJTkc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4geyB3aWR0aCwgaGVpZ2h0OiB0aGlzLmNoYXJIZWlnaHQgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd1RleHRXaXRoT3V0bGluZShcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgdGV4dDogc3RyaW5nLCB4UG9zOiBudW1iZXIsIHlQb3M6IG51bWJlciwgdGV4dENvbG9yOiBzdHJpbmcsXHJcbiAgICAgICAgb3V0bGluZUNvbG9yOiBzdHJpbmcsIGFsaWduID0gMFxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgZm9yIChsZXQgeU9mZnNldCA9IHlQb3MgLSAxOyB5T2Zmc2V0IDw9IHlQb3MgKyAxOyB5T2Zmc2V0KyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgeE9mZnNldCA9IHhQb3MgLSAxOyB4T2Zmc2V0IDw9IHhQb3MgKyAxOyB4T2Zmc2V0KyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh4T2Zmc2V0ICE9PSB4UG9zIHx8IHlPZmZzZXQgIT09IHlQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdUZXh0KGN0eCwgdGV4dCwgeE9mZnNldCwgeU9mZnNldCwgb3V0bGluZUNvbG9yLCBhbGlnbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd1RleHQoY3R4LCB0ZXh0LCB4UG9zLCB5UG9zLCB0ZXh0Q29sb3IsIGFsaWduKTtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUVBO0FBRUE7QUFZQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUE5S0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/BitmapFont.js\n");
    
    /***/ }),
    
    /***/ "./lib/Camera.js":
    /*!***********************!*\
      !*** ./lib/Camera.js ***!
      \***********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Camera = void 0;\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\nconst Renderer_1 = __webpack_require__(/*! ./Renderer */ \"./lib/Renderer.js\");\nconst Particles_1 = __webpack_require__(/*! ./Particles */ \"./lib/Particles.js\");\nclass Camera {\n    constructor(scene, target, interpolationTime = 0.5, barHeight = 0.1) {\n        this.scene = scene;\n        this.target = target;\n        this.barHeight = barHeight;\n        this.x = 0;\n        this.y = 0;\n        this.zoom = 1;\n        this.rotation = 0;\n        this.focuses = [];\n        this.time = 0;\n        this.zoomingOut = false;\n        this.currentBarTarget = 0;\n        this.currentBarHeight = 0;\n        if (interpolationTime > 1) {\n            throw new Error(\"Camera interpolation time may not exceed 1\");\n        }\n        this.interpolationTime = interpolationTime / 2;\n        if (util_1.isDev()) {\n            console.log(\"Dev mode, press “Tab” to zoom out & click somewhere to teleport there.\");\n            document.addEventListener(\"keydown\", this.handleKeyDown.bind(this));\n            document.addEventListener(\"keyup\", this.handleKeyUp.bind(this));\n            this.scene.game.canvas.addEventListener(\"click\", this.handleClick.bind(this));\n        }\n        this.currentBarTarget = 0;\n        this.currentBarHeight = 0;\n        this.x = target.x;\n        this.y = target.y;\n    }\n    setBounds(bounds) {\n        this.bounds = bounds;\n    }\n    getBounds() {\n        return this.bounds;\n    }\n    handleKeyDown(e) {\n        if (e.key === \"Tab\") {\n            if (!e.repeat) {\n                this.zoomingOut = true;\n            }\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    }\n    handleKeyUp(e) {\n        if (e.key === \"Tab\") {\n            this.zoomingOut = false;\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    }\n    handleClick(e) {\n        if (this.zoomingOut) {\n            const rect = this.scene.game.canvas.getBoundingClientRect();\n            const cx = e.clientX - rect.x, cy = e.clientY - rect.y;\n            const px = cx / rect.width, py = cy / rect.height;\n            const worldRect = this.getVisibleRect();\n            const tx = worldRect.x + px * worldRect.width, ty = worldRect.y + (1 - py) * worldRect.height;\n            // Teleport player\n            this.scene.player.x = tx;\n            this.scene.player.y = ty;\n            this.scene.player.setVelocity(0, 0);\n            this.zoomingOut = false;\n        }\n    }\n    getVisibleRect(x = this.x, y = this.y) {\n        const cnv = this.scene.game.canvas;\n        const cw = cnv.width;\n        const ch = cnv.height;\n        const offx = cw / 2 / this.zoom;\n        const offy = ch / 2 / this.zoom;\n        return {\n            x: x - offx,\n            y: y - offy,\n            width: offx * 2,\n            height: offy * 2\n        };\n    }\n    isPointVisible(x, y, radius = 0) {\n        const visibleRect = this.getVisibleRect();\n        return (x >= visibleRect.x - radius\n            && y >= visibleRect.y - radius\n            && x <= visibleRect.x + visibleRect.width + radius\n            && y <= visibleRect.y + visibleRect.height + radius);\n    }\n    setCinematicBar(target) {\n        this.currentBarTarget = target;\n    }\n    getBaseCameraTarget() {\n        // Base position always on target (player)\n        let xTarget = this.target.x;\n        let yTarget = this.target.y + 30;\n        if (this.bounds) {\n            const targetVisibleRect = this.getVisibleRect(xTarget, yTarget);\n            const overBounds = {\n                left: (targetVisibleRect.x < this.bounds.x),\n                right: (targetVisibleRect.x + targetVisibleRect.width) > (this.bounds.x + this.bounds.width),\n                top: (targetVisibleRect.y + targetVisibleRect.height) > this.bounds.y,\n                bottom: targetVisibleRect.y < (this.bounds.y - this.bounds.height)\n            };\n            // Bound clip left / right\n            if (targetVisibleRect.width >= this.bounds.width) {\n                const visibleCenterX = targetVisibleRect.x + targetVisibleRect.width / 2;\n                const boundCenterX = this.bounds.x + this.bounds.width / 2;\n                const diff = boundCenterX - visibleCenterX;\n                xTarget += diff;\n            }\n            else if (overBounds.left) {\n                const diff = this.bounds.x - targetVisibleRect.x;\n                xTarget += diff;\n            }\n            else if (overBounds.right) {\n                const diff = (this.bounds.x + this.bounds.width) - (targetVisibleRect.x + targetVisibleRect.width);\n                xTarget += diff;\n            }\n            // Bound clip top / bottom\n            if (targetVisibleRect.height >= this.bounds.height) {\n                const visibleCenterY = (targetVisibleRect.y + targetVisibleRect.height) - targetVisibleRect.height / 2;\n                const boundCenterY = this.bounds.y - this.bounds.height / 2;\n                const diff = boundCenterY - visibleCenterY;\n                yTarget += diff;\n            }\n            else if (overBounds.top) {\n                const diff = this.bounds.y - (targetVisibleRect.y + targetVisibleRect.height);\n                yTarget += diff;\n            }\n            else if (overBounds.bottom) {\n                const diff = (this.bounds.y - this.bounds.height) - targetVisibleRect.y;\n                yTarget += diff;\n            }\n        }\n        return {\n            x: xTarget,\n            y: yTarget\n        };\n    }\n    update(dt, time) {\n        this.time = time;\n        // Base position always on target (player)\n        const baseCamTarget = this.getBaseCameraTarget();\n        this.x = baseCamTarget.x;\n        this.y = baseCamTarget.y;\n        // Cam Shake during apocalypse\n        if (this.scene.fire.isAngry() || this.scene.apocalypse) {\n            this.applyApocalypticShake(this.scene.fire);\n        }\n        this.zoom = this.zoomingOut ? 0.2 : 1;\n        this.rotation = 0;\n        // On top of that, apply cam focus(es)\n        for (const focus of this.focuses) {\n            this.updateAndApplyFocus(focus);\n        }\n        // Drop any focus that is done\n        this.focuses = this.focuses.filter(f => !f.dead);\n        // Update bar target towards goal\n        this.currentBarHeight = util_1.shiftValue(this.currentBarHeight, this.currentBarTarget, dt * 1.5);\n        // Reset bar to vanish automatically if not continuously set to 1\n        this.currentBarTarget = 0;\n    }\n    applyApocalypticShake(shakeSource) {\n        const dx = this.x - shakeSource.x, dy = this.y - shakeSource.y;\n        const dis = Math.sqrt(dx * dx + dy * dy);\n        const maxDis = 200;\n        if (dis < maxDis) {\n            const intensity = (shakeSource.intensity - 5) / 15;\n            if (intensity > 0) {\n                const shake = 5 * intensity * (1 - dis / maxDis) * (this.scene.player.playerConversation ? 0.5 : 1);\n                this.x += util_1.rnd(-1, 1) * shake;\n                this.y += util_1.rnd(-1, 1) * shake;\n            }\n        }\n    }\n    /**\n     * Returns true if cam target (player) currently has full attention, or is showing something else for the moment.\n     */\n    isOnTarget() {\n        return this.focuses.length === 0;\n    }\n    /**\n     * Returns strength of camera focus on something other than the player. E.g. when camera focuses on some place to\n     * show the player, the focus force will be between 0 and 1 during interpolation and exactly 1 while fully focusing\n     * on that spot. This e.g. can be used for cinematic bars at top and bottom, scaling their height.\n     */\n    getFocusForce() {\n        return this.focuses.reduce((a, b) => Math.max(a, b.force), 0);\n    }\n    applyTransform(ctx) {\n        ctx.scale(this.zoom, this.zoom);\n        ctx.rotate(this.rotation);\n        ctx.translate(-this.x, this.y);\n    }\n    focusOn(duration, x, y, zoom = 1, rotation = 0, curve = Particles_1.valueCurves.cos(this.interpolationTime)) {\n        const focus = {\n            x,\n            y,\n            duration,\n            zoom,\n            rotation,\n            startTime: this.time,\n            endTime: this.time + duration,\n            progress: 0,\n            dead: false,\n            force: 0,\n            curve\n        };\n        this.focuses.push(focus);\n        return new Promise((resolve, reject) => {\n            focus.resolve = resolve;\n            this.updateAndApplyFocus(focus);\n        });\n    }\n    updateAndApplyFocus(focus) {\n        focus.progress = util_1.clamp((this.time - focus.startTime) / focus.duration, 0, 1);\n        focus.dead = (focus.progress >= 1);\n        if (!focus.dead) {\n            // Fade in and out of focus using force lerping from 0 to 1 and back to 0 over time\n            const force = focus.force = focus.curve.get(focus.progress);\n            // Apply to camera state\n            const f1 = 1 - force;\n            this.x = f1 * this.x + force * focus.x;\n            this.y = f1 * this.y + force * focus.y;\n            const originalSize = 1 / this.zoom, targetSize = 1 / focus.zoom;\n            const currentSize = f1 * originalSize + force * targetSize;\n            this.zoom = 1 / currentSize;\n            this.rotation = f1 * this.rotation + force * focus.rotation;\n        }\n        else {\n            if (focus.resolve) {\n                focus.resolve();\n                focus.resolve = undefined;\n            }\n        }\n    }\n    addCinematicBarsToRenderer(force = this.getFocusForce()) {\n        force = Math.max(force, this.getFocusForce(), this.currentBarHeight);\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.BLACK_BARS,\n            layer: Renderer_1.RenderingLayer.BLACK_BARS,\n            color: \"black\",\n            height: this.barHeight,\n            force\n        });\n    }\n    drawBars(ctx, force = this.getFocusForce()) {\n        force = Math.max(force, this.getFocusForce(), this.currentBarHeight);\n        ctx.save();\n        ctx.fillStyle = \"black\";\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        const f = 0.5 - 0.5 * Math.cos(Math.PI * force);\n        const h = ctx.canvas.height * this.barHeight * f;\n        ctx.fillRect(0, 0, ctx.canvas.width, h);\n        ctx.fillRect(0, ctx.canvas.height - h, ctx.canvas.width, h);\n        ctx.restore();\n    }\n}\nexports.Camera = Camera;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvQ2FtZXJhLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NhbWVyYS50cz84OTUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvdW5kcyB9IGZyb20gXCIuL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBjbGFtcCwgaXNEZXYsIHJuZCwgc2hpZnRWYWx1ZSB9IGZyb20gXCIuL3V0aWxcIjtcclxuaW1wb3J0IHsgRmlyZSB9IGZyb20gXCIuL2VudGl0aWVzL0ZpcmVcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciwgUmVuZGVyaW5nVHlwZSB9IGZyb20gXCIuL1JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFZhbHVlQ3VydmUsIHZhbHVlQ3VydmVzIH0gZnJvbSBcIi4vUGFydGljbGVzXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJMaWtlIH0gZnJvbSBcIi4vZ3JhcGhpY3MvVmVjdG9yMlwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDYW1Gb2N1cyB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICBkdXJhdGlvbjogbnVtYmVyO1xyXG4gICAgc3RhcnRUaW1lOiBudW1iZXI7XHJcbiAgICBlbmRUaW1lOiBudW1iZXI7XHJcbiAgICB6b29tOiBudW1iZXI7XHJcbiAgICByb3RhdGlvbjogbnVtYmVyO1xyXG4gICAgcHJvZ3Jlc3M6IG51bWJlcjtcclxuICAgIGRlYWQ6IGJvb2xlYW47XHJcbiAgICBmb3JjZTogbnVtYmVyO1xyXG4gICAgY3VydmU6IFZhbHVlQ3VydmU7XHJcbiAgICByZXNvbHZlPzogRnVuY3Rpb247XHJcbn1cclxuXHJcbmludGVyZmFjZSBSZWN0YW5nbGUge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG59XHJcblxyXG50eXBlIE92ZXJCb3VuZERhdGEgPSB7XHJcbiAgICBsZWZ0OiBib29sZWFuO1xyXG4gICAgcmlnaHQ6IGJvb2xlYW47XHJcbiAgICB0b3A6IGJvb2xlYW47XHJcbiAgICBib3R0b206IGJvb2xlYW47XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FtZXJhIHtcclxuICAgIHB1YmxpYyB4ID0gMDtcclxuICAgIHB1YmxpYyB5ID0gMDtcclxuICAgIHB1YmxpYyB6b29tID0gMTtcclxuICAgIHB1YmxpYyByb3RhdGlvbiA9IDA7XHJcbiAgICBwcml2YXRlIGZvY3VzZXM6IENhbUZvY3VzW10gPSBbXTtcclxuICAgIHByaXZhdGUgdGltZSA9IDA7XHJcbiAgICBwcml2YXRlIGludGVycG9sYXRpb25UaW1lITogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB6b29taW5nT3V0ID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRCYXJUYXJnZXQgPSAwO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50QmFySGVpZ2h0ID0gMDtcclxuICAgIHByaXZhdGUgYm91bmRzPzogQm91bmRzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByb3RlY3RlZCBzY2VuZTogR2FtZVNjZW5lLCBwcml2YXRlIHRhcmdldDogVmVjdG9yMkxpa2UsIGludGVycG9sYXRpb25UaW1lID0gMC41LFxyXG4gICAgICAgIHByaXZhdGUgYmFySGVpZ2h0ID0gMC4xXHJcbiAgICApIHtcclxuICAgICAgICBpZiAoaW50ZXJwb2xhdGlvblRpbWUgPiAxKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbWVyYSBpbnRlcnBvbGF0aW9uIHRpbWUgbWF5IG5vdCBleGNlZWQgMVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGlvblRpbWUgPSBpbnRlcnBvbGF0aW9uVGltZSAvIDI7XHJcblxyXG4gICAgICAgIGlmIChpc0RldigpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGV2IG1vZGUsIHByZXNzIOKAnFRhYuKAnSB0byB6b29tIG91dCAmIGNsaWNrIHNvbWV3aGVyZSB0byB0ZWxlcG9ydCB0aGVyZS5cIik7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuaGFuZGxlS2V5VXAuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRCYXJUYXJnZXQgPSAwO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEJhckhlaWdodCA9IDA7XHJcbiAgICAgICAgdGhpcy54ID0gdGFyZ2V0Lng7XHJcbiAgICAgICAgdGhpcy55ID0gdGFyZ2V0Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEJvdW5kcyhib3VuZHM6IEJvdW5kcyB8IHVuZGVmaW5lZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYm91bmRzID0gYm91bmRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRCb3VuZHMoKTogQm91bmRzIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVLZXlEb3duKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09IFwiVGFiXCIpIHtcclxuICAgICAgICAgICAgaWYgKCFlLnJlcGVhdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy56b29taW5nT3V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZUtleVVwKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09IFwiVGFiXCIpIHtcclxuICAgICAgICAgICAgdGhpcy56b29taW5nT3V0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVDbGljayhlOiBNb3VzZUV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuem9vbWluZ091dCkge1xyXG4gICAgICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5zY2VuZS5nYW1lLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgY3ggPSBlLmNsaWVudFggLSByZWN0LngsIGN5ID0gZS5jbGllbnRZIC0gcmVjdC55O1xyXG4gICAgICAgICAgICBjb25zdCBweCA9IGN4IC8gcmVjdC53aWR0aCwgcHkgPSBjeSAvIHJlY3QuaGVpZ2h0O1xyXG4gICAgICAgICAgICBjb25zdCB3b3JsZFJlY3QgPSB0aGlzLmdldFZpc2libGVSZWN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gd29ybGRSZWN0LnggKyBweCAqIHdvcmxkUmVjdC53aWR0aCwgdHkgPSB3b3JsZFJlY3QueSArICgxIC0gcHkpICogd29ybGRSZWN0LmhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIC8vIFRlbGVwb3J0IHBsYXllclxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnBsYXllci54ID0gdHg7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucGxheWVyLnkgPSB0eTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucGxheWVyLnNldFZlbG9jaXR5KDAsIDApO1xyXG4gICAgICAgICAgICB0aGlzLnpvb21pbmdPdXQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFZpc2libGVSZWN0KHggPSB0aGlzLngsIHkgPSB0aGlzLnkpOiBSZWN0YW5nbGUge1xyXG4gICAgICAgIGNvbnN0IGNudiA9IHRoaXMuc2NlbmUuZ2FtZS5jYW52YXM7XHJcbiAgICAgICAgY29uc3QgY3cgPSBjbnYud2lkdGg7XHJcbiAgICAgICAgY29uc3QgY2ggPSBjbnYuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IG9mZnggPSBjdyAvIDIgLyB0aGlzLnpvb207XHJcbiAgICAgICAgY29uc3Qgb2ZmeSA9IGNoIC8gMiAvIHRoaXMuem9vbTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogeCAtIG9mZngsXHJcbiAgICAgICAgICAgIHk6IHkgLSBvZmZ5LFxyXG4gICAgICAgICAgICB3aWR0aDogb2ZmeCAqIDIsXHJcbiAgICAgICAgICAgIGhlaWdodDogb2ZmeSAqIDJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc1BvaW50VmlzaWJsZSh4OiBudW1iZXIsIHk6IG51bWJlciwgcmFkaXVzID0gMCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHZpc2libGVSZWN0ID0gdGhpcy5nZXRWaXNpYmxlUmVjdCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB4ID49IHZpc2libGVSZWN0LnggLSByYWRpdXNcclxuICAgICAgICAgICAgJiYgeSA+PSB2aXNpYmxlUmVjdC55IC0gcmFkaXVzXHJcbiAgICAgICAgICAgICYmIHggPD0gdmlzaWJsZVJlY3QueCArIHZpc2libGVSZWN0LndpZHRoICsgcmFkaXVzXHJcbiAgICAgICAgICAgICYmIHkgPD0gdmlzaWJsZVJlY3QueSArIHZpc2libGVSZWN0LmhlaWdodCArIHJhZGl1c1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldENpbmVtYXRpY0Jhcih0YXJnZXQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEJhclRhcmdldCA9IHRhcmdldDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEJhc2VDYW1lcmFUYXJnZXQoKSB7XHJcbiAgICAgICAgLy8gQmFzZSBwb3NpdGlvbiBhbHdheXMgb24gdGFyZ2V0IChwbGF5ZXIpXHJcbiAgICAgICAgbGV0IHhUYXJnZXQgPSB0aGlzLnRhcmdldC54O1xyXG4gICAgICAgIGxldCB5VGFyZ2V0ID0gdGhpcy50YXJnZXQueSArIDMwO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ib3VuZHMpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0VmlzaWJsZVJlY3QgPSB0aGlzLmdldFZpc2libGVSZWN0KHhUYXJnZXQsIHlUYXJnZXQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgb3ZlckJvdW5kczogT3ZlckJvdW5kRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6ICh0YXJnZXRWaXNpYmxlUmVjdC54IDwgdGhpcy5ib3VuZHMueCksXHJcbiAgICAgICAgICAgICAgICByaWdodDogKHRhcmdldFZpc2libGVSZWN0LnggKyB0YXJnZXRWaXNpYmxlUmVjdC53aWR0aCkgPiAodGhpcy5ib3VuZHMueCArIHRoaXMuYm91bmRzLndpZHRoKSxcclxuICAgICAgICAgICAgICAgIHRvcDogKHRhcmdldFZpc2libGVSZWN0LnkgKyB0YXJnZXRWaXNpYmxlUmVjdC5oZWlnaHQpID4gdGhpcy5ib3VuZHMueSxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogdGFyZ2V0VmlzaWJsZVJlY3QueSA8ICh0aGlzLmJvdW5kcy55IC0gdGhpcy5ib3VuZHMuaGVpZ2h0KVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gQm91bmQgY2xpcCBsZWZ0IC8gcmlnaHRcclxuICAgICAgICAgICAgaWYgKHRhcmdldFZpc2libGVSZWN0LndpZHRoID49IHRoaXMuYm91bmRzLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aXNpYmxlQ2VudGVyWCA9IHRhcmdldFZpc2libGVSZWN0LnggKyB0YXJnZXRWaXNpYmxlUmVjdC53aWR0aCAvIDI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib3VuZENlbnRlclggPSB0aGlzLmJvdW5kcy54ICsgdGhpcy5ib3VuZHMud2lkdGggLyAyO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZiA9IGJvdW5kQ2VudGVyWCAtIHZpc2libGVDZW50ZXJYO1xyXG4gICAgICAgICAgICAgICAgeFRhcmdldCArPSBkaWZmO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG92ZXJCb3VuZHMubGVmdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZiA9IHRoaXMuYm91bmRzLnggLSB0YXJnZXRWaXNpYmxlUmVjdC54O1xyXG4gICAgICAgICAgICAgICAgeFRhcmdldCArPSBkaWZmO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG92ZXJCb3VuZHMucmlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSAodGhpcy5ib3VuZHMueCArIHRoaXMuYm91bmRzLndpZHRoKSAtICh0YXJnZXRWaXNpYmxlUmVjdC54ICsgdGFyZ2V0VmlzaWJsZVJlY3Qud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgeFRhcmdldCArPSBkaWZmO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBCb3VuZCBjbGlwIHRvcCAvIGJvdHRvbVxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0VmlzaWJsZVJlY3QuaGVpZ2h0ID49IHRoaXMuYm91bmRzLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlzaWJsZUNlbnRlclkgPSAodGFyZ2V0VmlzaWJsZVJlY3QueSArIHRhcmdldFZpc2libGVSZWN0LmhlaWdodCkgLSB0YXJnZXRWaXNpYmxlUmVjdC5oZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYm91bmRDZW50ZXJZID0gdGhpcy5ib3VuZHMueSAtIHRoaXMuYm91bmRzLmhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gYm91bmRDZW50ZXJZIC0gdmlzaWJsZUNlbnRlclk7XHJcbiAgICAgICAgICAgICAgICB5VGFyZ2V0ICs9IGRpZmY7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3ZlckJvdW5kcy50b3ApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmJvdW5kcy55IC0gKHRhcmdldFZpc2libGVSZWN0LnkgKyB0YXJnZXRWaXNpYmxlUmVjdC5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgeVRhcmdldCArPSBkaWZmO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG92ZXJCb3VuZHMuYm90dG9tKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gKHRoaXMuYm91bmRzLnkgLSB0aGlzLmJvdW5kcy5oZWlnaHQpIC0gdGFyZ2V0VmlzaWJsZVJlY3QueTtcclxuICAgICAgICAgICAgICAgIHlUYXJnZXQgKz0gZGlmZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogeFRhcmdldCxcclxuICAgICAgICAgICAgeTogeVRhcmdldFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyLCB0aW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xyXG5cclxuICAgICAgICAvLyBCYXNlIHBvc2l0aW9uIGFsd2F5cyBvbiB0YXJnZXQgKHBsYXllcilcclxuICAgICAgICBjb25zdCBiYXNlQ2FtVGFyZ2V0ID0gdGhpcy5nZXRCYXNlQ2FtZXJhVGFyZ2V0KCk7XHJcbiAgICAgICAgdGhpcy54ID0gYmFzZUNhbVRhcmdldC54O1xyXG4gICAgICAgIHRoaXMueSA9IGJhc2VDYW1UYXJnZXQueTtcclxuXHJcbiAgICAgICAgLy8gQ2FtIFNoYWtlIGR1cmluZyBhcG9jYWx5cHNlXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuZmlyZS5pc0FuZ3J5KCkgfHwgdGhpcy5zY2VuZS5hcG9jYWx5cHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlBcG9jYWx5cHRpY1NoYWtlKHRoaXMuc2NlbmUuZmlyZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnpvb20gPSB0aGlzLnpvb21pbmdPdXQgPyAwLjIgOiAxO1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSAwO1xyXG5cclxuICAgICAgICAvLyBPbiB0b3Agb2YgdGhhdCwgYXBwbHkgY2FtIGZvY3VzKGVzKVxyXG4gICAgICAgIGZvciAoY29uc3QgZm9jdXMgb2YgdGhpcy5mb2N1c2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQW5kQXBwbHlGb2N1cyhmb2N1cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEcm9wIGFueSBmb2N1cyB0aGF0IGlzIGRvbmVcclxuICAgICAgICB0aGlzLmZvY3VzZXMgPSB0aGlzLmZvY3VzZXMuZmlsdGVyKGYgPT4gIWYuZGVhZCk7XHJcbiAgICAgICAgLy8gVXBkYXRlIGJhciB0YXJnZXQgdG93YXJkcyBnb2FsXHJcbiAgICAgICAgdGhpcy5jdXJyZW50QmFySGVpZ2h0ID0gc2hpZnRWYWx1ZSh0aGlzLmN1cnJlbnRCYXJIZWlnaHQsIHRoaXMuY3VycmVudEJhclRhcmdldCwgZHQgKiAxLjUpO1xyXG4gICAgICAgIC8vIFJlc2V0IGJhciB0byB2YW5pc2ggYXV0b21hdGljYWxseSBpZiBub3QgY29udGludW91c2x5IHNldCB0byAxXHJcbiAgICAgICAgdGhpcy5jdXJyZW50QmFyVGFyZ2V0ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFwcGx5QXBvY2FseXB0aWNTaGFrZShzaGFrZVNvdXJjZTogRmlyZSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGR4ID0gdGhpcy54IC0gc2hha2VTb3VyY2UueCwgZHkgPSB0aGlzLnkgLSBzaGFrZVNvdXJjZS55O1xyXG4gICAgICAgIGNvbnN0IGRpcyA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcbiAgICAgICAgY29uc3QgbWF4RGlzID0gMjAwO1xyXG5cclxuICAgICAgICBpZiAoZGlzIDwgbWF4RGlzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVuc2l0eSA9IChzaGFrZVNvdXJjZS5pbnRlbnNpdHkgLSA1KSAvIDE1O1xyXG5cclxuICAgICAgICAgICAgaWYgKGludGVuc2l0eSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoYWtlID0gNSAqIGludGVuc2l0eSAqICgxIC0gZGlzIC8gbWF4RGlzKSAqICh0aGlzLnNjZW5lLnBsYXllci5wbGF5ZXJDb252ZXJzYXRpb24gPyAwLjUgOiAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMueCArPSBybmQoLTEsIDEpICogc2hha2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnkgKz0gcm5kKC0xLCAxKSAqIHNoYWtlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGNhbSB0YXJnZXQgKHBsYXllcikgY3VycmVudGx5IGhhcyBmdWxsIGF0dGVudGlvbiwgb3IgaXMgc2hvd2luZyBzb21ldGhpbmcgZWxzZSBmb3IgdGhlIG1vbWVudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzT25UYXJnZXQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9jdXNlcy5sZW5ndGggPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHN0cmVuZ3RoIG9mIGNhbWVyYSBmb2N1cyBvbiBzb21ldGhpbmcgb3RoZXIgdGhhbiB0aGUgcGxheWVyLiBFLmcuIHdoZW4gY2FtZXJhIGZvY3VzZXMgb24gc29tZSBwbGFjZSB0b1xyXG4gICAgICogc2hvdyB0aGUgcGxheWVyLCB0aGUgZm9jdXMgZm9yY2Ugd2lsbCBiZSBiZXR3ZWVuIDAgYW5kIDEgZHVyaW5nIGludGVycG9sYXRpb24gYW5kIGV4YWN0bHkgMSB3aGlsZSBmdWxseSBmb2N1c2luZ1xyXG4gICAgICogb24gdGhhdCBzcG90LiBUaGlzIGUuZy4gY2FuIGJlIHVzZWQgZm9yIGNpbmVtYXRpYyBiYXJzIGF0IHRvcCBhbmQgYm90dG9tLCBzY2FsaW5nIHRoZWlyIGhlaWdodC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEZvY3VzRm9yY2UoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb2N1c2VzLnJlZHVjZSgoYSwgYikgPT4gTWF0aC5tYXgoYSwgYi5mb3JjZSksIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBseVRyYW5zZm9ybShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGN0eC5zY2FsZSh0aGlzLnpvb20sIHRoaXMuem9vbSk7XHJcbiAgICAgICAgY3R4LnJvdGF0ZSh0aGlzLnJvdGF0aW9uKTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKC10aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZvY3VzT24oXHJcbiAgICAgICAgZHVyYXRpb246IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHpvb20gPSAxLCByb3RhdGlvbiA9IDAsXHJcbiAgICAgICAgY3VydmUgPSB2YWx1ZUN1cnZlcy5jb3ModGhpcy5pbnRlcnBvbGF0aW9uVGltZSlcclxuICAgICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGZvY3VzOiBDYW1Gb2N1cyA9IHtcclxuICAgICAgICAgICAgeCxcclxuICAgICAgICAgICAgeSxcclxuICAgICAgICAgICAgZHVyYXRpb24sXHJcbiAgICAgICAgICAgIHpvb20sXHJcbiAgICAgICAgICAgIHJvdGF0aW9uLFxyXG4gICAgICAgICAgICBzdGFydFRpbWU6IHRoaXMudGltZSxcclxuICAgICAgICAgICAgZW5kVGltZTogdGhpcy50aW1lICsgZHVyYXRpb24sXHJcbiAgICAgICAgICAgIHByb2dyZXNzOiAwLFxyXG4gICAgICAgICAgICBkZWFkOiBmYWxzZSxcclxuICAgICAgICAgICAgZm9yY2U6IDAsXHJcbiAgICAgICAgICAgIGN1cnZlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5mb2N1c2VzLnB1c2goZm9jdXMpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBmb2N1cy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBbmRBcHBseUZvY3VzKGZvY3VzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQW5kQXBwbHlGb2N1cyhmb2N1czogQ2FtRm9jdXMpOiB2b2lkIHtcclxuICAgICAgICBmb2N1cy5wcm9ncmVzcyA9IGNsYW1wKCh0aGlzLnRpbWUgLSBmb2N1cy5zdGFydFRpbWUpIC8gZm9jdXMuZHVyYXRpb24sIDAsIDEpO1xyXG4gICAgICAgIGZvY3VzLmRlYWQgPSAoZm9jdXMucHJvZ3Jlc3MgPj0gMSk7XHJcblxyXG4gICAgICAgIGlmICghZm9jdXMuZGVhZCkge1xyXG4gICAgICAgICAgICAvLyBGYWRlIGluIGFuZCBvdXQgb2YgZm9jdXMgdXNpbmcgZm9yY2UgbGVycGluZyBmcm9tIDAgdG8gMSBhbmQgYmFjayB0byAwIG92ZXIgdGltZVxyXG4gICAgICAgICAgICBjb25zdCBmb3JjZSA9IGZvY3VzLmZvcmNlID0gZm9jdXMuY3VydmUuZ2V0KGZvY3VzLnByb2dyZXNzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFwcGx5IHRvIGNhbWVyYSBzdGF0ZVxyXG4gICAgICAgICAgICBjb25zdCBmMSA9IDEgLSBmb3JjZTtcclxuICAgICAgICAgICAgdGhpcy54ID0gZjEgKiB0aGlzLnggKyBmb3JjZSAqIGZvY3VzLng7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IGYxICogdGhpcy55ICsgZm9yY2UgKiBmb2N1cy55O1xyXG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbFNpemUgPSAxIC8gdGhpcy56b29tLCB0YXJnZXRTaXplID0gMSAvIGZvY3VzLnpvb207XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTaXplID0gZjEgKiBvcmlnaW5hbFNpemUgKyBmb3JjZSAqIHRhcmdldFNpemU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnpvb20gPSAxIC8gY3VycmVudFNpemU7XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSBmMSAqIHRoaXMucm90YXRpb24gKyBmb3JjZSAqIGZvY3VzLnJvdGF0aW9uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChmb2N1cy5yZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICBmb2N1cy5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICBmb2N1cy5yZXNvbHZlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRDaW5lbWF0aWNCYXJzVG9SZW5kZXJlcihmb3JjZSA9IHRoaXMuZ2V0Rm9jdXNGb3JjZSgpKTogdm9pZCB7XHJcbiAgICAgICAgZm9yY2UgPSBNYXRoLm1heChmb3JjZSwgdGhpcy5nZXRGb2N1c0ZvcmNlKCksIHRoaXMuY3VycmVudEJhckhlaWdodCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkKHtcclxuICAgICAgICAgICAgdHlwZTogUmVuZGVyaW5nVHlwZS5CTEFDS19CQVJTLFxyXG4gICAgICAgICAgICBsYXllcjogUmVuZGVyaW5nTGF5ZXIuQkxBQ0tfQkFSUyxcclxuICAgICAgICAgICAgY29sb3I6IFwiYmxhY2tcIixcclxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmJhckhlaWdodCxcclxuICAgICAgICAgICAgZm9yY2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd0JhcnMoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGZvcmNlID0gdGhpcy5nZXRGb2N1c0ZvcmNlKCkpOiB2b2lkIHtcclxuICAgICAgICBmb3JjZSA9IE1hdGgubWF4KGZvcmNlLCB0aGlzLmdldEZvY3VzRm9yY2UoKSwgdGhpcy5jdXJyZW50QmFySGVpZ2h0KTtcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcclxuICAgICAgICBjb25zdCBmID0gMC41IC0gMC41ICogTWF0aC5jb3MoTWF0aC5QSSAqIGZvcmNlKTtcclxuICAgICAgICBjb25zdCBoID0gY3R4LmNhbnZhcy5oZWlnaHQgKiB0aGlzLmJhckhlaWdodCAqIGY7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGgpO1xyXG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCBjdHguY2FudmFzLmhlaWdodCAtIGgsIGN0eC5jYW52YXMud2lkdGgsIGgpO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFDQTtBQUdBO0FBQ0E7QUFnQ0E7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQWRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE3U0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/Camera.js\n");
    
    /***/ }),
    
    /***/ "./lib/Campaign.js":
    /*!*************************!*\
      !*** ./lib/Campaign.js ***!
      \*************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Campaign = exports.VoiceAsset = exports.CharacterAsset = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst caveman1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/caveman1.dialog.json */ \"./assets/dialog/caveman1.dialog.json\"));\nconst caveman2_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/caveman2.dialog.json */ \"./assets/dialog/caveman2.dialog.json\"));\nconst Conversation_1 = __webpack_require__(/*! ./Conversation */ \"./lib/Conversation.js\");\nconst Face_1 = __webpack_require__(/*! ./Face */ \"./lib/Face.js\");\nconst fire0_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/fire0.dialog.json */ \"./assets/dialog/fire0.dialog.json\"));\nconst fire1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/fire1.dialog.json */ \"./assets/dialog/fire1.dialog.json\"));\nconst fire2_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/fire2.dialog.json */ \"./assets/dialog/fire2.dialog.json\"));\nconst fire3_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/fire3.dialog.json */ \"./assets/dialog/fire3.dialog.json\"));\nconst fire4_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/fire4.dialog.json */ \"./assets/dialog/fire4.dialog.json\"));\nconst flameboy1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/flameboy1.dialog.json */ \"./assets/dialog/flameboy1.dialog.json\"));\nconst flameboy2_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/flameboy2.dialog.json */ \"./assets/dialog/flameboy2.dialog.json\"));\nconst flameboy3_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/flameboy3.dialog.json */ \"./assets/dialog/flameboy3.dialog.json\"));\nconst flameboy4_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/flameboy4.dialog.json */ \"./assets/dialog/flameboy4.dialog.json\"));\nconst powershiba2_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/powershiba2.dialog.json */ \"./assets/dialog/powershiba2.dialog.json\"));\nconst Quests_1 = __webpack_require__(/*! ./Quests */ \"./lib/Quests.js\");\nconst seed1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/seed1.dialog.json */ \"./assets/dialog/seed1.dialog.json\"));\nconst shadowpresence1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/shadowpresence1.dialog.json */ \"./assets/dialog/shadowpresence1.dialog.json\"));\nconst shiba1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/shiba1.dialog.json */ \"./assets/dialog/shiba1.dialog.json\"));\nconst shiba2_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/shiba2.dialog.json */ \"./assets/dialog/shiba2.dialog.json\"));\nconst shiba3_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/shiba3.dialog.json */ \"./assets/dialog/shiba3.dialog.json\"));\nconst shiba4_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/shiba4.dialog.json */ \"./assets/dialog/shiba4.dialog.json\"));\nconst shiba5_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/shiba5.dialog.json */ \"./assets/dialog/shiba5.dialog.json\"));\nconst Signal_1 = __webpack_require__(/*! ./Signal */ \"./lib/Signal.js\");\nconst spider1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/spider1.dialog.json */ \"./assets/dialog/spider1.dialog.json\"));\nconst stone1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/stone1.dialog.json */ \"./assets/dialog/stone1.dialog.json\"));\nconst stone2_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/stone2.dialog.json */ \"./assets/dialog/stone2.dialog.json\"));\nconst stonedisciple1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/stonedisciple1.dialog.json */ \"./assets/dialog/stonedisciple1.dialog.json\"));\nconst stonedisciple2_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/stonedisciple2.dialog.json */ \"./assets/dialog/stonedisciple2.dialog.json\"));\nconst tree0_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/tree0.dialog.json */ \"./assets/dialog/tree0.dialog.json\"));\nconst tree1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/tree1.dialog.json */ \"./assets/dialog/tree1.dialog.json\"));\nconst tree2_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/tree2.dialog.json */ \"./assets/dialog/tree2.dialog.json\"));\nconst Particles_1 = __webpack_require__(/*! ./Particles */ \"./lib/Particles.js\");\nconst wing1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/dialog/wing1.dialog.json */ \"./assets/dialog/wing1.dialog.json\"));\nconst allDialogs = {\n    \"caveman1\": caveman1_dialog_json_1.default,\n    \"caveman2\": caveman2_dialog_json_1.default,\n    \"fire0\": fire0_dialog_json_1.default,\n    \"fire1\": fire1_dialog_json_1.default,\n    \"fire2\": fire2_dialog_json_1.default,\n    \"fire3\": fire3_dialog_json_1.default,\n    \"fire4\": fire4_dialog_json_1.default,\n    \"stone1\": stone1_dialog_json_1.default,\n    \"stone2\": stone2_dialog_json_1.default,\n    \"stonedisciple1\": stonedisciple1_dialog_json_1.default,\n    \"stonedisciple2\": stonedisciple2_dialog_json_1.default,\n    \"seed1\": seed1_dialog_json_1.default,\n    \"tree0\": tree0_dialog_json_1.default,\n    \"tree1\": tree1_dialog_json_1.default,\n    \"tree2\": tree2_dialog_json_1.default,\n    \"shiba1\": shiba1_dialog_json_1.default,\n    \"shiba2\": shiba2_dialog_json_1.default,\n    \"shiba3\": shiba3_dialog_json_1.default,\n    \"shiba4\": shiba4_dialog_json_1.default,\n    \"shiba5\": shiba5_dialog_json_1.default,\n    \"powershiba2\": powershiba2_dialog_json_1.default,\n    \"spider1\": spider1_dialog_json_1.default,\n    \"flameboy1\": flameboy1_dialog_json_1.default,\n    \"flameboy2\": flameboy2_dialog_json_1.default,\n    \"flameboy3\": flameboy3_dialog_json_1.default,\n    \"flameboy4\": flameboy4_dialog_json_1.default,\n    \"wing1\": wing1_dialog_json_1.default,\n    \"shadowpresence1\": shadowpresence1_dialog_json_1.default,\n};\nvar CharacterAsset;\n(function (CharacterAsset) {\n    CharacterAsset[CharacterAsset[\"FEMALE\"] = 0] = \"FEMALE\";\n    CharacterAsset[CharacterAsset[\"MALE\"] = 1] = \"MALE\";\n    CharacterAsset[CharacterAsset[\"PATIENT\"] = 2] = \"PATIENT\";\n})(CharacterAsset = exports.CharacterAsset || (exports.CharacterAsset = {}));\nvar VoiceAsset;\n(function (VoiceAsset) {\n    VoiceAsset[VoiceAsset[\"FEMALE\"] = 0] = \"FEMALE\";\n    VoiceAsset[VoiceAsset[\"MALE\"] = 1] = \"MALE\";\n})(VoiceAsset = exports.VoiceAsset || (exports.VoiceAsset = {}));\nclass Campaign {\n    constructor(game) {\n        this.game = game;\n        this.onStatesChanged = new Signal_1.Signal();\n        this.states = [\"start\"];\n        this.quests = [\n            new Quests_1.QuestA(this),\n            new Quests_1.QuestB(this),\n            new Quests_1.QuestC(this),\n            new Quests_1.QuestD(this),\n            new Quests_1.QuestE(this)\n        ];\n        this.selectedCharacter = CharacterAsset.FEMALE;\n        this.selectedVoice = VoiceAsset.FEMALE;\n    }\n    getQuest(key) {\n        const ending = this.quests.find(ending => ending.key === key);\n        if (!ending)\n            throw new Error(`Cannot find quest with key ${key}`);\n        return ending;\n    }\n    toggleCharacterAsset() {\n        this.selectedCharacter = this.selectedCharacter === CharacterAsset.MALE ? CharacterAsset.FEMALE : CharacterAsset.MALE;\n    }\n    toggleVoiceAsset() {\n        this.selectedVoice = this.selectedVoice === VoiceAsset.MALE ? VoiceAsset.FEMALE : VoiceAsset.MALE;\n    }\n    /**\n     * Init campaign. Assign Game Scene and enable all initial dialog trees\n     * @param gameScene Game Scene\n     */\n    begin(gameScene) {\n        this.gameScene = gameScene;\n        // Rest quest progress\n        this.quests.forEach(q => {\n            q.reset();\n        });\n        this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.JUST_ARRIVED);\n        // Setup initial NPC dialogs\n        this.runAction(\"enable\", null, [\"caveman\", \"caveman1\"]);\n        this.runAction(\"enable\", null, [\"fire\", \"fire0\"]);\n        this.runAction(\"enable\", null, [\"tree\", \"tree0\"]);\n        this.runAction(\"enable\", null, [\"stone\", \"stone1\"]);\n        this.runAction(\"enable\", null, [\"stonedisciple\", \"stonedisciple1\"]);\n        this.runAction(\"enable\", null, [\"flameboy\", \"flameboy1\"]);\n        this.runAction(\"enable\", null, [\"wing\", \"wing1\"]);\n        this.runAction(\"enable\", null, [\"spider\", \"spider1\"]);\n        this.runAction(\"enable\", null, [\"shadowpresence\", \"shadowpresence1\"]);\n    }\n    hasState(state) {\n        return this.states.includes(state);\n    }\n    setStates(states) {\n        this.states = states;\n        this.onStatesChanged.emit(this.states);\n    }\n    removeState(state) {\n        if (this.hasState(state)) {\n            this.states.splice(this.states.indexOf(state), 1);\n            this.onStatesChanged.emit(this.states);\n        }\n    }\n    addState(state) {\n        if (!this.hasState(state)) {\n            this.states.push(state);\n            this.onStatesChanged.emit(this.states);\n        }\n    }\n    /**\n     * Run action is only allowed when active scene is GameScene\n     * @param action - action string\n     * @param npc    - targeted npc\n     * @param params - params consisting of string array\n     */\n    runAction(action, npc, params = []) {\n        var _a, _b, _c, _d, _e;\n        if (this.gameScene) {\n            switch (action) {\n                case \"angry\":\n                    (_a = npc === null || npc === void 0 ? void 0 : npc.face) === null || _a === void 0 ? void 0 : _a.setMode(Face_1.FaceModes.ANGRY);\n                    break;\n                case \"neutral\":\n                    (_b = npc === null || npc === void 0 ? void 0 : npc.face) === null || _b === void 0 ? void 0 : _b.setMode(Face_1.FaceModes.NEUTRAL);\n                    break;\n                case \"bored\":\n                    (_c = npc === null || npc === void 0 ? void 0 : npc.face) === null || _c === void 0 ? void 0 : _c.setMode(Face_1.FaceModes.BORED);\n                    break;\n                case \"amused\":\n                    (_d = npc === null || npc === void 0 ? void 0 : npc.face) === null || _d === void 0 ? void 0 : _d.setMode(Face_1.FaceModes.AMUSED);\n                    break;\n                case \"sad\":\n                    (_e = npc === null || npc === void 0 ? void 0 : npc.face) === null || _e === void 0 ? void 0 : _e.setMode(Face_1.FaceModes.SAD);\n                    break;\n                case \"zoomin\":\n                    this.gameScene.camera.zoom += 1;\n                    break;\n                case \"zoomout\":\n                    this.gameScene.camera.zoom -= 1;\n                    break;\n                case \"treezoom\":\n                    const forestPointer = this.gameScene.pointsOfInterest.find(poi => poi.name === \"forest\");\n                    if (forestPointer) {\n                        this.gameScene.camera.focusOn(8, forestPointer.x, forestPointer.y, 1, 0, Particles_1.valueCurves.cos(0.35));\n                    }\n                    break;\n                case \"mountainzoom\":\n                    const mountainPointer = this.gameScene.pointsOfInterest.find(poi => poi.name === \"mountain\");\n                    if (mountainPointer) {\n                        this.gameScene.camera.focusOn(8, mountainPointer.x, mountainPointer.y, 1, 0, Particles_1.valueCurves.cos(0.35));\n                    }\n                    break;\n                case \"riverzoom\":\n                    const riverPointer = this.gameScene.pointsOfInterest.find(poi => poi.name === \"river\");\n                    if (riverPointer) {\n                        this.gameScene.camera.focusOn(8, riverPointer.x, riverPointer.y, 1, 0, Particles_1.valueCurves.cos(0.35));\n                    }\n                    break;\n                case \"crazyzoom\":\n                    this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.APOCALYPSE_STARTED);\n                    const duration = 12;\n                    this.gameScene.camera.focusOn(duration, this.gameScene.fire.x, this.gameScene.fire.y + 15, 8, -2 * Math.PI, Particles_1.valueCurves.cubic).then(() => this.gameScene.beginApocalypse());\n                    this.gameScene.fire.conversation = null;\n                    this.gameScene.fireFuryEndTime = this.gameScene.gameTime + duration + 8;\n                    break;\n                case \"friendshipEnding\":\n                    this.gameScene.beginFriendshipEnding();\n                    break;\n                case \"activatefireportal\":\n                    this.gameScene.exitPortal.activate();\n                    this.gameScene.flameboy.nextState();\n                    break;\n                case \"talkedtofire\":\n                    this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.TALKED_TO_FIRE);\n                    break;\n                case \"giveWoodToFlameboy\":\n                    Conversation_1.Conversation.setGlobal(\"gaveWoodToFlameboy\", \"true\");\n                    this.gameScene.setGateDisabled(\"exitportaldoor_1\", false);\n                    this.gameScene.player.removeMultiJump();\n                    this.gameScene.removeGameObject(this.gameScene.fire);\n                    this.gameScene.removeGameObject(this.gameScene.shiba);\n                    this.gameScene.removeGameObject(this.gameScene.powerShiba);\n                    this.gameScene.removeGameObject(this.gameScene.bird);\n                    this.gameScene.removeGameObject(this.gameScene.shadowPresence);\n                    this.gameScene.removeGameObject(this.gameScene.tree);\n                    this.gameScene.removeGameObject(this.gameScene.wing);\n                    this.gameScene.removeGameObject(this.gameScene.mimic);\n                    this.gameScene.removeGameObject(this.gameScene.stone);\n                    this.gameScene.removeGameObject(this.gameScene.stoneDisciple);\n                    this.runAction(\"enable\", null, [\"flameboy\", \"flameboy3\"]);\n                    break;\n                case \"giveBone\":\n                    Conversation_1.Conversation.setGlobal(\"gaveBoneToPowerShiba\", \"true\");\n                    this.runAction(\"enable\", null, [\"shiba\", \"shiba3\"]);\n                    this.runAction(\"enable\", null, [\"powershiba\", \"powershiba2\"]);\n                    break;\n                case \"shibaNextState\":\n                    this.gameScene.shiba.nextState();\n                    break;\n                case \"talkedtotree\":\n                    this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.TALKED_TO_TREE);\n                    break;\n                case \"gotFireQuest\":\n                    this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.GOT_QUEST_FROM_FIRE);\n                    Conversation_1.Conversation.setGlobal(\"gotFireQuest\", \"true\");\n                    this.runAction(\"enable\", null, [\"tree\", \"tree1\"]);\n                    break;\n                case \"endgameA\":\n                    this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.BEAT_GAME);\n                    this.getQuest(Quests_1.QuestKey.A).finish();\n                    this.gameScene.fire.conversation = null;\n                    this.gameScene.gameOver();\n                    break;\n                case \"endgameB\":\n                    this.getQuest(Quests_1.QuestKey.B).finish();\n                    this.gameScene.fire.conversation = null;\n                    this.gameScene.gameOver();\n                    break;\n                case \"endgameC\":\n                    this.getQuest(Quests_1.QuestKey.C).finish();\n                    this.gameScene.caveman.conversation = null;\n                    this.gameScene.gameOver();\n                    break;\n                case \"game\":\n                    this.addState(params[0]);\n                    break;\n                case \"enableRunning\":\n                    this.gameScene.player.enableRunning();\n                    break;\n                case \"doublejump\":\n                    this.gameScene.player.enableDoubleJump();\n                    break;\n                case \"multijump\":\n                    this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.GOT_MULTIJUMP);\n                    this.gameScene.player.enableMultiJump();\n                    break;\n                case \"friendship\":\n                    this.gameScene.player.enableFriendship();\n                    break;\n                case \"spawnseed\":\n                    this.gameScene.tree.spawnSeed();\n                    break;\n                case \"spawnwood\":\n                    this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.TREE_DROPPED_WOOD);\n                    this.gameScene.tree.spawnWood();\n                    break;\n                case \"talkedToStone\":\n                    if (this.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() === Quests_1.QuestATrigger.PLANTED_SEED) {\n                        this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.TALKED_TO_STONE);\n                    }\n                    break;\n                case \"pickupstone\":\n                    this.gameScene.stone.pickUp();\n                    break;\n                case \"learnraindance\":\n                    this.gameScene.player.enableRainDance();\n                    break;\n                case \"talkedToFireWithWood\":\n                    if (this.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() === Quests_1.QuestATrigger.GOT_WOOD) {\n                        this.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.TALKED_TO_FIRE_WITH_WOOD);\n                    }\n                    break;\n                case \"dance\":\n                    setTimeout(() => {\n                        this.gameScene.player.startDance(+params[0] || 1);\n                    }, 500);\n                    break;\n                case \"wakeupchest\":\n                    this.gameScene.mimic.nextState();\n                    break;\n                case \"petDoggo\":\n                    this.gameScene.beginPetEnding();\n                    break;\n                case \"lookThroughWindow\":\n                    this.gameScene.beginWindowEnding();\n                    break;\n                case \"enable\":\n                    const char = params[0], dialogName = params[1];\n                    const npcMap = {\n                        \"fire\": this.gameScene.fire,\n                        \"stone\": this.gameScene.stone,\n                        \"stonedisciple\": this.gameScene.stoneDisciple,\n                        \"tree\": this.gameScene.tree,\n                        \"seed\": this.gameScene.seed,\n                        \"flameboy\": this.gameScene.flameboy,\n                        \"wing\": this.gameScene.wing,\n                        \"caveman\": this.gameScene.caveman,\n                        \"shadowpresence\": this.gameScene.shadowPresence,\n                        \"shiba\": this.gameScene.shiba,\n                        \"powershiba\": this.gameScene.powerShiba\n                    };\n                    const targetNpc = npcMap[char];\n                    const dialog = allDialogs[dialogName];\n                    if (targetNpc && dialog) {\n                        targetNpc.conversation = new Conversation_1.Conversation(dialog, targetNpc);\n                    }\n                    break;\n                case \"disable\":\n                    const char1 = params[0];\n                    const npcMap1 = {\n                        \"fire\": this.gameScene.fire,\n                        \"stone\": this.gameScene.stone,\n                        \"stonedisciple\": this.gameScene.stoneDisciple,\n                        \"tree\": this.gameScene.tree,\n                        \"seed\": this.gameScene.seed,\n                        \"flameboy\": this.gameScene.flameboy,\n                        \"wing\": this.gameScene.wing,\n                        \"caveman\": this.gameScene.caveman,\n                        \"shadowpresence\": this.gameScene.shadowPresence,\n                        \"shiba\": this.gameScene.shiba,\n                        \"powershiba\": this.gameScene.powerShiba\n                    };\n                    const targetNpc1 = npcMap1[char1];\n                    if (targetNpc1) {\n                        targetNpc1.conversation = null;\n                    }\n                    break;\n            }\n        }\n    }\n}\nexports.Campaign = Campaign;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvQ2FtcGFpZ24uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ2FtcGFpZ24udHM/MWU3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2F2ZW1hbjEgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvY2F2ZW1hbjEuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IGNhdmVtYW4yIGZyb20gXCIuLi9hc3NldHMvZGlhbG9nL2NhdmVtYW4yLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuL0NvbnZlcnNhdGlvblwiO1xyXG5pbXBvcnQgdHlwZSB7IERpYWxvZ0pTT04gfSBmcm9tIFwiKi5kaWFsb2cuanNvblwiO1xyXG5pbXBvcnQgeyBGYWNlTW9kZXMgfSBmcm9tIFwiLi9GYWNlXCI7XHJcbmltcG9ydCBmaXJlMCBmcm9tIFwiLi4vYXNzZXRzL2RpYWxvZy9maXJlMC5kaWFsb2cuanNvblwiO1xyXG5pbXBvcnQgZmlyZTEgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvZmlyZTEuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IGZpcmUyIGZyb20gXCIuLi9hc3NldHMvZGlhbG9nL2ZpcmUyLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBmaXJlMyBmcm9tIFwiLi4vYXNzZXRzL2RpYWxvZy9maXJlMy5kaWFsb2cuanNvblwiO1xyXG5pbXBvcnQgZmlyZTQgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvZmlyZTQuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IGZsYW1lYm95MSBmcm9tIFwiLi4vYXNzZXRzL2RpYWxvZy9mbGFtZWJveTEuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IGZsYW1lYm95MiBmcm9tIFwiLi4vYXNzZXRzL2RpYWxvZy9mbGFtZWJveTIuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IGZsYW1lYm95MyBmcm9tIFwiLi4vYXNzZXRzL2RpYWxvZy9mbGFtZWJveTMuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IGZsYW1lYm95NCBmcm9tIFwiLi4vYXNzZXRzL2RpYWxvZy9mbGFtZWJveTQuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IHsgR2FtZSB9IGZyb20gXCIuL0dhbWVcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBOUEMgfSBmcm9tIFwiLi9lbnRpdGllcy9OUENcIjtcclxuaW1wb3J0IHBvd2Vyc2hpYmEyIGZyb20gXCIuLi9hc3NldHMvZGlhbG9nL3Bvd2Vyc2hpYmEyLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCB7IFF1ZXN0LCBRdWVzdEEsIFF1ZXN0QVRyaWdnZXIsIFF1ZXN0QiwgUXVlc3RLZXksIFF1ZXN0QywgUXVlc3RELCBRdWVzdEUgfSBmcm9tIFwiLi9RdWVzdHNcIjtcclxuaW1wb3J0IHNlZWQxIGZyb20gXCIuLi9hc3NldHMvZGlhbG9nL3NlZWQxLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBzaGFkb3dwcmVzZW5jZTEgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvc2hhZG93cHJlc2VuY2UxLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBzaGliYTEgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvc2hpYmExLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBzaGliYTIgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvc2hpYmEyLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBzaGliYTMgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvc2hpYmEzLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBzaGliYTQgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvc2hpYmE0LmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBzaGliYTUgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvc2hpYmE1LmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCB7IFNpZ25hbCB9IGZyb20gXCIuL1NpZ25hbFwiO1xyXG5pbXBvcnQgc3BpZGVyMSBmcm9tIFwiLi4vYXNzZXRzL2RpYWxvZy9zcGlkZXIxLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBzdG9uZTEgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvc3RvbmUxLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBzdG9uZTIgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvc3RvbmUyLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCBzdG9uZWRpc2NpcGxlMSBmcm9tIFwiLi4vYXNzZXRzL2RpYWxvZy9zdG9uZWRpc2NpcGxlMS5kaWFsb2cuanNvblwiO1xyXG5pbXBvcnQgc3RvbmVkaXNjaXBsZTIgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvc3RvbmVkaXNjaXBsZTIuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IHRyZWUwIGZyb20gXCIuLi9hc3NldHMvZGlhbG9nL3RyZWUwLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCB0cmVlMSBmcm9tIFwiLi4vYXNzZXRzL2RpYWxvZy90cmVlMS5kaWFsb2cuanNvblwiO1xyXG5pbXBvcnQgdHJlZTIgZnJvbSBcIi4uL2Fzc2V0cy9kaWFsb2cvdHJlZTIuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IHsgdmFsdWVDdXJ2ZXMgfSBmcm9tIFwiLi9QYXJ0aWNsZXNcIjtcclxuaW1wb3J0IHdpbmcxIGZyb20gXCIuLi9hc3NldHMvZGlhbG9nL3dpbmcxLmRpYWxvZy5qc29uXCI7XHJcblxyXG5leHBvcnQgdHlwZSBDYW1wYWlnblN0YXRlID0gXCJzdGFydFwiIHwgXCJmaW5pc2hlZFwiO1xyXG5cclxuY29uc3QgYWxsRGlhbG9nczogUmVjb3JkPHN0cmluZywgRGlhbG9nSlNPTj4gPSB7XHJcbiAgICBcImNhdmVtYW4xXCI6IGNhdmVtYW4xLFxyXG4gICAgXCJjYXZlbWFuMlwiOiBjYXZlbWFuMixcclxuICAgIFwiZmlyZTBcIjogZmlyZTAsXHJcbiAgICBcImZpcmUxXCI6IGZpcmUxLFxyXG4gICAgXCJmaXJlMlwiOiBmaXJlMixcclxuICAgIFwiZmlyZTNcIjogZmlyZTMsXHJcbiAgICBcImZpcmU0XCI6IGZpcmU0LFxyXG4gICAgXCJzdG9uZTFcIjogc3RvbmUxLFxyXG4gICAgXCJzdG9uZTJcIjogc3RvbmUyLFxyXG4gICAgXCJzdG9uZWRpc2NpcGxlMVwiOiBzdG9uZWRpc2NpcGxlMSxcclxuICAgIFwic3RvbmVkaXNjaXBsZTJcIjogc3RvbmVkaXNjaXBsZTIsXHJcbiAgICBcInNlZWQxXCI6IHNlZWQxLFxyXG4gICAgXCJ0cmVlMFwiOiB0cmVlMCxcclxuICAgIFwidHJlZTFcIjogdHJlZTEsXHJcbiAgICBcInRyZWUyXCI6IHRyZWUyLFxyXG4gICAgXCJzaGliYTFcIjogc2hpYmExLFxyXG4gICAgXCJzaGliYTJcIjogc2hpYmEyLFxyXG4gICAgXCJzaGliYTNcIjogc2hpYmEzLFxyXG4gICAgXCJzaGliYTRcIjogc2hpYmE0LFxyXG4gICAgXCJzaGliYTVcIjogc2hpYmE1LFxyXG4gICAgXCJwb3dlcnNoaWJhMlwiOiBwb3dlcnNoaWJhMixcclxuICAgIFwic3BpZGVyMVwiOiBzcGlkZXIxLFxyXG4gICAgXCJmbGFtZWJveTFcIjogZmxhbWVib3kxLFxyXG4gICAgXCJmbGFtZWJveTJcIjogZmxhbWVib3kyLFxyXG4gICAgXCJmbGFtZWJveTNcIjogZmxhbWVib3kzLFxyXG4gICAgXCJmbGFtZWJveTRcIjogZmxhbWVib3k0LFxyXG4gICAgXCJ3aW5nMVwiOiB3aW5nMSxcclxuICAgIFwic2hhZG93cHJlc2VuY2UxXCI6IHNoYWRvd3ByZXNlbmNlMSxcclxufTtcclxuXHJcbmV4cG9ydCBlbnVtIENoYXJhY3RlckFzc2V0IHtcclxuICAgIEZFTUFMRSwgTUFMRSwgUEFUSUVOVFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBWb2ljZUFzc2V0IHtcclxuICAgIEZFTUFMRSwgTUFMRVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FtcGFpZ24ge1xyXG4gICAgcHVibGljIG9uU3RhdGVzQ2hhbmdlZCA9IG5ldyBTaWduYWw8Q2FtcGFpZ25TdGF0ZVtdPigpO1xyXG4gICAgcHVibGljIHN0YXRlczogQ2FtcGFpZ25TdGF0ZVtdID0gW1wic3RhcnRcIl07XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcXVlc3RzID0gW1xyXG4gICAgICAgIG5ldyBRdWVzdEEodGhpcyksXHJcbiAgICAgICAgbmV3IFF1ZXN0Qih0aGlzKSxcclxuICAgICAgICBuZXcgUXVlc3RDKHRoaXMpLFxyXG4gICAgICAgIG5ldyBRdWVzdEQodGhpcyksXHJcbiAgICAgICAgbmV3IFF1ZXN0RSh0aGlzKVxyXG4gICAgXTtcclxuICAgIHB1YmxpYyBnYW1lU2NlbmU/OiBHYW1lU2NlbmUgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgcHVibGljIHNlbGVjdGVkQ2hhcmFjdGVyID0gQ2hhcmFjdGVyQXNzZXQuRkVNQUxFO1xyXG4gICAgcHVibGljIHNlbGVjdGVkVm9pY2UgPSBWb2ljZUFzc2V0LkZFTUFMRTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgZ2FtZTogR2FtZSkge31cclxuXHJcbiAgICBwdWJsaWMgZ2V0UXVlc3Qoa2V5OiBRdWVzdEtleSk6IFF1ZXN0IHtcclxuICAgICAgICBjb25zdCBlbmRpbmcgPSB0aGlzLnF1ZXN0cy5maW5kKGVuZGluZyA9PiBlbmRpbmcua2V5ID09PSBrZXkpO1xyXG4gICAgICAgIGlmICghZW5kaW5nKSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBmaW5kIHF1ZXN0IHdpdGgga2V5ICR7a2V5fWApO1xyXG4gICAgICAgIHJldHVybiBlbmRpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvZ2dsZUNoYXJhY3RlckFzc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaGFyYWN0ZXIgPSB0aGlzLnNlbGVjdGVkQ2hhcmFjdGVyID09PSBDaGFyYWN0ZXJBc3NldC5NQUxFID8gQ2hhcmFjdGVyQXNzZXQuRkVNQUxFIDogQ2hhcmFjdGVyQXNzZXQuTUFMRTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9nZ2xlVm9pY2VBc3NldCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkVm9pY2UgPSB0aGlzLnNlbGVjdGVkVm9pY2UgPT09IFZvaWNlQXNzZXQuTUFMRSA/IFZvaWNlQXNzZXQuRkVNQUxFIDogVm9pY2VBc3NldC5NQUxFO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdCBjYW1wYWlnbi4gQXNzaWduIEdhbWUgU2NlbmUgYW5kIGVuYWJsZSBhbGwgaW5pdGlhbCBkaWFsb2cgdHJlZXNcclxuICAgICAqIEBwYXJhbSBnYW1lU2NlbmUgR2FtZSBTY2VuZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYmVnaW4oZ2FtZVNjZW5lOiBHYW1lU2NlbmUpIHtcclxuICAgICAgICB0aGlzLmdhbWVTY2VuZSA9IGdhbWVTY2VuZTtcclxuXHJcbiAgICAgICAgLy8gUmVzdCBxdWVzdCBwcm9ncmVzc1xyXG4gICAgICAgIHRoaXMucXVlc3RzLmZvckVhY2gocSA9PiB7XHJcbiAgICAgICAgICAgIHEucmVzZXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuSlVTVF9BUlJJVkVEKTtcclxuXHJcbiAgICAgICAgLy8gU2V0dXAgaW5pdGlhbCBOUEMgZGlhbG9nc1xyXG4gICAgICAgIHRoaXMucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcImNhdmVtYW5cIiwgXCJjYXZlbWFuMVwiXSk7XHJcbiAgICAgICAgdGhpcy5ydW5BY3Rpb24oXCJlbmFibGVcIiwgbnVsbCwgW1wiZmlyZVwiLCBcImZpcmUwXCJdKTtcclxuICAgICAgICB0aGlzLnJ1bkFjdGlvbihcImVuYWJsZVwiLCBudWxsLCBbXCJ0cmVlXCIsIFwidHJlZTBcIl0pO1xyXG4gICAgICAgIHRoaXMucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcInN0b25lXCIsIFwic3RvbmUxXCJdKTtcclxuICAgICAgICB0aGlzLnJ1bkFjdGlvbihcImVuYWJsZVwiLCBudWxsLCBbXCJzdG9uZWRpc2NpcGxlXCIsIFwic3RvbmVkaXNjaXBsZTFcIl0pO1xyXG4gICAgICAgIHRoaXMucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcImZsYW1lYm95XCIsIFwiZmxhbWVib3kxXCJdKTtcclxuICAgICAgICB0aGlzLnJ1bkFjdGlvbihcImVuYWJsZVwiLCBudWxsLCBbXCJ3aW5nXCIsIFwid2luZzFcIl0pO1xyXG4gICAgICAgIHRoaXMucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcInNwaWRlclwiLCBcInNwaWRlcjFcIl0pO1xyXG4gICAgICAgIHRoaXMucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcInNoYWRvd3ByZXNlbmNlXCIsIFwic2hhZG93cHJlc2VuY2UxXCJdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFzU3RhdGUoc3RhdGU6IENhbXBhaWduU3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZXMuaW5jbHVkZXMoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRTdGF0ZXMoc3RhdGVzOiBDYW1wYWlnblN0YXRlW10pIHtcclxuICAgICAgICB0aGlzLnN0YXRlcyA9IHN0YXRlcztcclxuICAgICAgICB0aGlzLm9uU3RhdGVzQ2hhbmdlZC5lbWl0KHRoaXMuc3RhdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlU3RhdGUoc3RhdGU6IENhbXBhaWduU3RhdGUpIHtcclxuICAgICAgICBpZiAodGhpcy5oYXNTdGF0ZShzdGF0ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZXMuc3BsaWNlKHRoaXMuc3RhdGVzLmluZGV4T2Yoc3RhdGUpLCAxKTtcclxuICAgICAgICAgICAgdGhpcy5vblN0YXRlc0NoYW5nZWQuZW1pdCh0aGlzLnN0YXRlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRTdGF0ZShzdGF0ZTogQ2FtcGFpZ25TdGF0ZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5oYXNTdGF0ZShzdGF0ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZXMucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMub25TdGF0ZXNDaGFuZ2VkLmVtaXQodGhpcy5zdGF0ZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJ1biBhY3Rpb24gaXMgb25seSBhbGxvd2VkIHdoZW4gYWN0aXZlIHNjZW5lIGlzIEdhbWVTY2VuZVxyXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIGFjdGlvbiBzdHJpbmdcclxuICAgICAqIEBwYXJhbSBucGMgICAgLSB0YXJnZXRlZCBucGNcclxuICAgICAqIEBwYXJhbSBwYXJhbXMgLSBwYXJhbXMgY29uc2lzdGluZyBvZiBzdHJpbmcgYXJyYXlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJ1bkFjdGlvbihhY3Rpb246IHN0cmluZywgbnBjPzogTlBDIHwgbnVsbCwgcGFyYW1zOiBzdHJpbmdbXSA9IFtdKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZVNjZW5lKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiYW5ncnlcIjpcclxuICAgICAgICAgICAgICAgICAgICBucGM/LmZhY2U/LnNldE1vZGUoRmFjZU1vZGVzLkFOR1JZKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJuZXV0cmFsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgbnBjPy5mYWNlPy5zZXRNb2RlKEZhY2VNb2Rlcy5ORVVUUkFMKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJib3JlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIG5wYz8uZmFjZT8uc2V0TW9kZShGYWNlTW9kZXMuQk9SRUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImFtdXNlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIG5wYz8uZmFjZT8uc2V0TW9kZShGYWNlTW9kZXMuQU1VU0VEKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzYWRcIjpcclxuICAgICAgICAgICAgICAgICAgICBucGM/LmZhY2U/LnNldE1vZGUoRmFjZU1vZGVzLlNBRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiem9vbWluXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUuY2FtZXJhLnpvb20gKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ6b29tb3V0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUuY2FtZXJhLnpvb20gLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmVlem9vbVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcmVzdFBvaW50ZXIgPSB0aGlzLmdhbWVTY2VuZS5wb2ludHNPZkludGVyZXN0LmZpbmQocG9pID0+IHBvaS5uYW1lID09PSBcImZvcmVzdFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcmVzdFBvaW50ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUuY2FtZXJhLmZvY3VzT24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZXN0UG9pbnRlci54LCBmb3Jlc3RQb2ludGVyLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlQ3VydmVzLmNvcygwLjM1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibW91bnRhaW56b29tXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW91bnRhaW5Qb2ludGVyID0gdGhpcy5nYW1lU2NlbmUucG9pbnRzT2ZJbnRlcmVzdC5maW5kKHBvaSA9PiBwb2kubmFtZSA9PT0gXCJtb3VudGFpblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdW50YWluUG9pbnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5jYW1lcmEuZm9jdXNPbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3VudGFpblBvaW50ZXIueCwgbW91bnRhaW5Qb2ludGVyLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlQ3VydmVzLmNvcygwLjM1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicml2ZXJ6b29tXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcml2ZXJQb2ludGVyID0gdGhpcy5nYW1lU2NlbmUucG9pbnRzT2ZJbnRlcmVzdC5maW5kKHBvaSA9PiBwb2kubmFtZSA9PT0gXCJyaXZlclwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJpdmVyUG9pbnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5jYW1lcmEuZm9jdXNPbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaXZlclBvaW50ZXIueCwgcml2ZXJQb2ludGVyLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlQ3VydmVzLmNvcygwLjM1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3Jhenl6b29tXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuQVBPQ0FMWVBTRV9TVEFSVEVEKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IDEyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5jYW1lcmEuZm9jdXNPbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLmZpcmUueCwgdGhpcy5nYW1lU2NlbmUuZmlyZS55ICsgMTUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC0yICogTWF0aC5QSSwgdmFsdWVDdXJ2ZXMuY3ViaWNcclxuICAgICAgICAgICAgICAgICAgICApLnRoZW4oKCkgPT4gdGhpcy5nYW1lU2NlbmUhLmJlZ2luQXBvY2FseXBzZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUuZmlyZS5jb252ZXJzYXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLmZpcmVGdXJ5RW5kVGltZSA9IHRoaXMuZ2FtZVNjZW5lLmdhbWVUaW1lICsgZHVyYXRpb24gKyA4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImZyaWVuZHNoaXBFbmRpbmdcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5iZWdpbkZyaWVuZHNoaXBFbmRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RpdmF0ZWZpcmVwb3J0YWxcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5leGl0UG9ydGFsLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUuZmxhbWVib3kubmV4dFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidGFsa2VkdG9maXJlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuVEFMS0VEX1RPX0ZJUkUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImdpdmVXb29kVG9GbGFtZWJveVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIENvbnZlcnNhdGlvbi5zZXRHbG9iYWwoXCJnYXZlV29vZFRvRmxhbWVib3lcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnNldEdhdGVEaXNhYmxlZChcImV4aXRwb3J0YWxkb29yXzFcIiwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnBsYXllci5yZW1vdmVNdWx0aUp1bXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5yZW1vdmVHYW1lT2JqZWN0KHRoaXMuZ2FtZVNjZW5lLmZpcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnJlbW92ZUdhbWVPYmplY3QodGhpcy5nYW1lU2NlbmUuc2hpYmEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnJlbW92ZUdhbWVPYmplY3QodGhpcy5nYW1lU2NlbmUucG93ZXJTaGliYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUucmVtb3ZlR2FtZU9iamVjdCh0aGlzLmdhbWVTY2VuZS5iaXJkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5yZW1vdmVHYW1lT2JqZWN0KHRoaXMuZ2FtZVNjZW5lLnNoYWRvd1ByZXNlbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5yZW1vdmVHYW1lT2JqZWN0KHRoaXMuZ2FtZVNjZW5lLnRyZWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnJlbW92ZUdhbWVPYmplY3QodGhpcy5nYW1lU2NlbmUud2luZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUucmVtb3ZlR2FtZU9iamVjdCh0aGlzLmdhbWVTY2VuZS5taW1pYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUucmVtb3ZlR2FtZU9iamVjdCh0aGlzLmdhbWVTY2VuZS5zdG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUucmVtb3ZlR2FtZU9iamVjdCh0aGlzLmdhbWVTY2VuZS5zdG9uZURpc2NpcGxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ydW5BY3Rpb24oXCJlbmFibGVcIiwgbnVsbCwgW1wiZmxhbWVib3lcIiwgXCJmbGFtZWJveTNcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImdpdmVCb25lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgQ29udmVyc2F0aW9uLnNldEdsb2JhbChcImdhdmVCb25lVG9Qb3dlclNoaWJhXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bkFjdGlvbihcImVuYWJsZVwiLCBudWxsLCBbXCJzaGliYVwiLCBcInNoaWJhM1wiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ydW5BY3Rpb24oXCJlbmFibGVcIiwgbnVsbCwgW1wicG93ZXJzaGliYVwiLCBcInBvd2Vyc2hpYmEyXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzaGliYU5leHRTdGF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnNoaWJhLm5leHRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInRhbGtlZHRvdHJlZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UXVlc3QoUXVlc3RLZXkuQSkudHJpZ2dlcihRdWVzdEFUcmlnZ2VyLlRBTEtFRF9UT19UUkVFKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJnb3RGaXJlUXVlc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLnRyaWdnZXIoUXVlc3RBVHJpZ2dlci5HT1RfUVVFU1RfRlJPTV9GSVJFKTtcclxuICAgICAgICAgICAgICAgICAgICBDb252ZXJzYXRpb24uc2V0R2xvYmFsKFwiZ290RmlyZVF1ZXN0XCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bkFjdGlvbihcImVuYWJsZVwiLCBudWxsLCBbXCJ0cmVlXCIsIFwidHJlZTFcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImVuZGdhbWVBXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuQkVBVF9HQU1FKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmZpbmlzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLmZpcmUuY29udmVyc2F0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5nYW1lT3ZlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImVuZGdhbWVCXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRRdWVzdChRdWVzdEtleS5CKS5maW5pc2goKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5maXJlLmNvbnZlcnNhdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUuZ2FtZU92ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRnYW1lQ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UXVlc3QoUXVlc3RLZXkuQykuZmluaXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUuY2F2ZW1hbi5jb252ZXJzYXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLmdhbWVPdmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZ2FtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkU3RhdGUocGFyYW1zWzBdIGFzIGFueSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZW5hYmxlUnVubmluZ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnBsYXllci5lbmFibGVSdW5uaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZG91YmxlanVtcFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnBsYXllci5lbmFibGVEb3VibGVKdW1wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibXVsdGlqdW1wXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuR09UX01VTFRJSlVNUCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUucGxheWVyLmVuYWJsZU11bHRpSnVtcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImZyaWVuZHNoaXBcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5wbGF5ZXIuZW5hYmxlRnJpZW5kc2hpcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNwYXduc2VlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnRyZWUuc3Bhd25TZWVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic3Bhd253b29kXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuVFJFRV9EUk9QUEVEX1dPT0QpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnRyZWUuc3Bhd25Xb29kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidGFsa2VkVG9TdG9uZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA9PT0gUXVlc3RBVHJpZ2dlci5QTEFOVEVEX1NFRUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuVEFMS0VEX1RPX1NUT05FKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicGlja3Vwc3RvbmVcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5zdG9uZS5waWNrVXAoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJsZWFybnJhaW5kYW5jZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLnBsYXllci5lbmFibGVSYWluRGFuY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0YWxrZWRUb0ZpcmVXaXRoV29vZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA9PT0gUXVlc3RBVHJpZ2dlci5HT1RfV09PRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLnRyaWdnZXIoUXVlc3RBVHJpZ2dlci5UQUxLRURfVE9fRklSRV9XSVRIX1dPT0QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJkYW5jZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZSEucGxheWVyLnN0YXJ0RGFuY2UoK3BhcmFtc1swXSB8fCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ3YWtldXBjaGVzdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLm1pbWljLm5leHRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInBldERvZ2dvXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUuYmVnaW5QZXRFbmRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJsb29rVGhyb3VnaFdpbmRvd1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLmJlZ2luV2luZG93RW5kaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZW5hYmxlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHBhcmFtc1swXSwgZGlhbG9nTmFtZSA9IHBhcmFtc1sxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnBjTWFwOiBSZWNvcmQ8c3RyaW5nLCBOUEM+ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImZpcmVcIjogdGhpcy5nYW1lU2NlbmUuZmlyZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9uZVwiOiB0aGlzLmdhbWVTY2VuZS5zdG9uZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9uZWRpc2NpcGxlXCI6IHRoaXMuZ2FtZVNjZW5lLnN0b25lRGlzY2lwbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHJlZVwiOiB0aGlzLmdhbWVTY2VuZS50cmVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNlZWRcIjogdGhpcy5nYW1lU2NlbmUuc2VlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmbGFtZWJveVwiOiB0aGlzLmdhbWVTY2VuZS5mbGFtZWJveSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aW5nXCI6IHRoaXMuZ2FtZVNjZW5lLndpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2F2ZW1hblwiOiB0aGlzLmdhbWVTY2VuZS5jYXZlbWFuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNoYWRvd3ByZXNlbmNlXCI6IHRoaXMuZ2FtZVNjZW5lLnNoYWRvd1ByZXNlbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInNoaWJhXCI6IHRoaXMuZ2FtZVNjZW5lLnNoaWJhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInBvd2Vyc2hpYmFcIjogdGhpcy5nYW1lU2NlbmUucG93ZXJTaGliYVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldE5wYyA9IG5wY01hcFtjaGFyXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWFsb2cgPSBhbGxEaWFsb2dzW2RpYWxvZ05hbWVdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0TnBjICYmIGRpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROcGMuY29udmVyc2F0aW9uID0gbmV3IENvbnZlcnNhdGlvbihkaWFsb2csIHRhcmdldE5wYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJkaXNhYmxlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhcjEgPSBwYXJhbXNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5wY01hcDE6IFJlY29yZDxzdHJpbmcsIE5QQz4gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmlyZVwiOiB0aGlzLmdhbWVTY2VuZS5maXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b25lXCI6IHRoaXMuZ2FtZVNjZW5lLnN0b25lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b25lZGlzY2lwbGVcIjogdGhpcy5nYW1lU2NlbmUuc3RvbmVEaXNjaXBsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0cmVlXCI6IHRoaXMuZ2FtZVNjZW5lLnRyZWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2VlZFwiOiB0aGlzLmdhbWVTY2VuZS5zZWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImZsYW1lYm95XCI6IHRoaXMuZ2FtZVNjZW5lLmZsYW1lYm95LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndpbmdcIjogdGhpcy5nYW1lU2NlbmUud2luZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjYXZlbWFuXCI6IHRoaXMuZ2FtZVNjZW5lLmNhdmVtYW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2hhZG93cHJlc2VuY2VcIjogdGhpcy5nYW1lU2NlbmUuc2hhZG93UHJlc2VuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2hpYmFcIjogdGhpcy5nYW1lU2NlbmUuc2hpYmEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicG93ZXJzaGliYVwiOiB0aGlzLmdhbWVTY2VuZS5wb3dlclNoaWJhXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0TnBjMSA9IG5wY01hcDFbY2hhcjFdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0TnBjMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROcGMxLmNvbnZlcnNhdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFlQTtBQUFBO0FBZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNVQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/Campaign.js\n");
    
    /***/ }),
    
    /***/ "./lib/ColorGradient.js":
    /*!******************************!*\
      !*** ./lib/ColorGradient.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorGradient = void 0;\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\nconst graphics_1 = __webpack_require__(/*! ./graphics */ \"./lib/graphics.js\");\nclass ColorGradient {\n    constructor(mapping) {\n        this.mapping = mapping;\n    }\n    get(p) {\n        return this.mapping(util_1.clamp(p, 0, 0.9999999999));\n    }\n    getCss(p) {\n        const color = this.get(p);\n        return `rgba(${color[0]},${color[1]},${color[2]},${color[3]})`;\n    }\n    static fromTable(table) {\n        const items = table.length;\n        const grad = new ColorGradient((v) => {\n            const index = Math.floor(v * items);\n            return table[index];\n        });\n        return grad;\n    }\n    static fromImage(img) {\n        const data = graphics_1.getImageData(img);\n        const pixels = data.data;\n        const w = img.naturalWidth, h = img.naturalHeight;\n        let p = 0;\n        if (h === 1) {\n            // mapping each value to single unique color\n            const colors = [];\n            for (let x = 0; x < w; x++) {\n                colors.push([pixels[p++], pixels[p++], pixels[p++], pixels[p++]]);\n            }\n            return ColorGradient.fromTable(colors);\n        }\n        else {\n            // mapping each value to randomly selected color of given set\n            const colors = [];\n            for (let x = 0; x < w; x++) {\n                colors[x] = [];\n                for (let y = 0; y < h; y++) {\n                    const p = 4 * (x + w * y);\n                    colors[x].push([pixels[p], pixels[p + 1], pixels[p + 2], pixels[p + 3]]);\n                }\n            }\n            const items = w;\n            return new ColorGradient((v) => {\n                const index = Math.floor(v * items);\n                return util_1.rndItem(colors[index]);\n            });\n        }\n    }\n}\nexports.ColorGradient = ColorGradient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvQ29sb3JHcmFkaWVudC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9Db2xvckdyYWRpZW50LnRzPzY2MzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xhbXAsIHJuZEl0ZW0gfSBmcm9tIFwiLi91dGlsXCI7XHJcbmltcG9ydCB7IGdldEltYWdlRGF0YSB9IGZyb20gXCIuL2dyYXBoaWNzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29sb3JHcmFkaWVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1hcHBpbmc6IChwOiBudW1iZXIpID0+IG51bWJlcltdKSB7fVxyXG5cclxuICAgIHB1YmxpYyBnZXQocDogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcHBpbmcoY2xhbXAocCwgMCwgMC45OTk5OTk5OTk5KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENzcyhwOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5nZXQocCk7XHJcblxyXG4gICAgICAgIHJldHVybiBgcmdiYSgke2NvbG9yWzBdfSwke2NvbG9yWzFdfSwke2NvbG9yWzJdfSwke2NvbG9yWzNdfSlgO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbVRhYmxlKHRhYmxlOiBudW1iZXJbXVtdKTogQ29sb3JHcmFkaWVudCB7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0YWJsZS5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgZ3JhZCA9IG5ldyBDb2xvckdyYWRpZW50KCh2KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcih2ICogaXRlbXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFibGVbaW5kZXhdO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZ3JhZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb21JbWFnZShpbWc6IEhUTUxJbWFnZUVsZW1lbnQpOiBDb2xvckdyYWRpZW50IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gZ2V0SW1hZ2VEYXRhKGltZyk7XHJcbiAgICAgICAgY29uc3QgcGl4ZWxzID0gZGF0YS5kYXRhO1xyXG4gICAgICAgIGNvbnN0IHcgPSBpbWcubmF0dXJhbFdpZHRoLCBoID0gaW1nLm5hdHVyYWxIZWlnaHQ7XHJcbiAgICAgICAgbGV0IHAgPSAwO1xyXG5cclxuICAgICAgICBpZiAoaCA9PT0gMSkge1xyXG4gICAgICAgICAgICAvLyBtYXBwaW5nIGVhY2ggdmFsdWUgdG8gc2luZ2xlIHVuaXF1ZSBjb2xvclxyXG4gICAgICAgICAgICBjb25zdCBjb2xvcnM6IG51bWJlcltdW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdzsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcnMucHVzaChbcGl4ZWxzW3ArK10sIHBpeGVsc1twKytdLCBwaXhlbHNbcCsrXSwgcGl4ZWxzW3ArK11dKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbG9yR3JhZGllbnQuZnJvbVRhYmxlKGNvbG9ycyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbWFwcGluZyBlYWNoIHZhbHVlIHRvIHJhbmRvbWx5IHNlbGVjdGVkIGNvbG9yIG9mIGdpdmVuIHNldFxyXG4gICAgICAgICAgICBjb25zdCBjb2xvcnM6IG51bWJlcltdW11bXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3OyB4KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbG9yc1t4XSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaDsgeSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IDQgKiAoeCArIHcgKiB5KTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcnNbeF0ucHVzaChbcGl4ZWxzW3BdLCBwaXhlbHNbcCArIDFdLCBwaXhlbHNbcCArIDJdLCBwaXhlbHNbcCArIDNdXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gdztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3JHcmFkaWVudCgodikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKHYgKiBpdGVtcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm5kSXRlbShjb2xvcnNbaW5kZXhdKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzREE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/ColorGradient.js\n");
    
    /***/ }),
    
    /***/ "./lib/Conversation.js":
    /*!*****************************!*\
      !*** ./lib/Conversation.js ***!
      \*****************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConversationLine = exports.Conversation = void 0;\n// Actions that shall be executed before an NPC talks, not after\nconst earlyActions = [\n    \"angry\",\n    \"sad\",\n    \"amused\",\n    \"neutral\",\n    \"bored\"\n];\nclass Conversation {\n    constructor(json, npc) {\n        this.npc = npc;\n        this.stateIndex = 0;\n        this.endConversation = false;\n        this.localVariables = {};\n        this.skippedLines = 0; // help variable to make goBack() work with skipped dialog lines due to conditions\n        this.states = Object.keys(json);\n        this.data = {};\n        for (const state of this.states) {\n            this.data[state] = json[state].map(line => new ConversationLine(line, this));\n        }\n        this.setState(\"entry\");\n        this.endConversation = false;\n    }\n    setState(name = \"entry\") {\n        if (!this.states.includes(name)) {\n            throw new Error(\"State name \" + name + \" does not exist in conversation\");\n        }\n        this.state = name;\n        this.stateIndex = 0;\n    }\n    getNextInteraction() {\n        if (this.endConversation) {\n            this.endConversation = false;\n            return null;\n        }\n        this.skippedLines = 0;\n        const result = {\n            npcLine: null,\n            options: [],\n            spoiledOptions: []\n        };\n        // Does NPC speak?\n        const line = this.getNextLine();\n        if (line == null) {\n            // Conversation is over without changing state or anything\n            return null;\n        }\n        else {\n            if (line.isNpc) {\n                result.npcLine = line;\n            }\n            else {\n                this.goBack(1 + this.skippedLines);\n            }\n        }\n        // Does Player react?\n        this.skippedLines = 0;\n        let option = this.getNextLine();\n        while (option && !option.isNpc) {\n            // TODO: Identify spoiled options (that don't lead to anything new for the player) and\n            //       sort accordingly.\n            result.options.push(option);\n            this.skippedLines = 0;\n            option = this.getNextLine();\n        }\n        if (option && !option.isNpc) {\n            this.goBack();\n        }\n        else {\n            this.goBack(1 + this.skippedLines);\n        }\n        this.skippedLines = 0;\n        return result;\n    }\n    runAction(action) {\n        switch (action[0]) {\n            case \"end\":\n                this.endConversation = true;\n                break;\n            case \"set\":\n                this.setVariable(action[1], action[2]);\n                break;\n            default:\n                this.npc.scene.game.campaign.runAction(action[0], this.npc, action.slice(1));\n        }\n    }\n    setVariable(name = \"\", value = \"true\") {\n        if (name.startsWith(\"$\")) {\n            // Global variable\n            Conversation.globalVariables[name] = value;\n        }\n        else {\n            // Local variable\n            this.localVariables[name] = value;\n        }\n    }\n    static setGlobal(varname, value = \"true\") {\n        if (!varname.startsWith(\"$\")) {\n            varname = \"$\" + varname;\n        }\n        Conversation.globalVariables[varname] = value;\n    }\n    static getGlobals() {\n        return Conversation.globalVariables;\n    }\n    static resetGlobals() {\n        Conversation.globalVariables = {};\n    }\n    getVariable(name) {\n        if (name.startsWith(\"$\")) {\n            return Conversation.globalVariables[name];\n        }\n        else {\n            return this.localVariables[name];\n        }\n    }\n    goBack(steps = 1) {\n        if (steps <= 0) {\n            return;\n        }\n        this.stateIndex -= steps;\n        this.skippedLines = 0;\n    }\n    getNextLine(ignoreDisabled = false) {\n        if (this.stateIndex >= this.data[this.state].length) {\n            return null;\n        }\n        const line = this.data[this.state][this.stateIndex++];\n        // console.log(line.condition);\n        if (line.condition && (!ignoreDisabled && !this.testCondition(line.condition))) {\n            this.skippedLines++;\n            return this.getNextLine(ignoreDisabled);\n        }\n        return line;\n    }\n    testCondition(condition) {\n        const self = this;\n        const subconditions = condition.split(\",\");\n        const result = subconditions.some(evaluateFragment);\n        return result;\n        function evaluateFragment(s) {\n            if (s.startsWith(\"not \")) {\n                return !evaluateFragment(s.substr(4));\n            }\n            else {\n                if (s.includes(\"!=\")) {\n                    const values = s.split(\"!=\").map(s => s.trim());\n                    return self.getVariable(values[0]) !== values[1];\n                }\n                else if (s.includes(\"=\")) {\n                    const values = s.split(\"=\").map(s => s.trim());\n                    return self.getVariable(values[0]) === values[1];\n                }\n                else if (s.includes(\">\")) {\n                    const values = s.split(\">\").map(s => s.trim());\n                    return parseFloat(self.getVariable(values[0])) > parseFloat(values[1]);\n                }\n                else if (s.includes(\"<\")) {\n                    const values = s.split(\"<\").map(s => s.trim());\n                    return parseFloat(self.getVariable(values[0])) < parseFloat(values[1]);\n                }\n            }\n            // Variable name only\n            const v = self.getVariable(s.trim());\n            return v != null && v !== \"\" && v !== \"0\" && v !== \"false\";\n        }\n    }\n    hasEnded() {\n        return this.endConversation;\n    }\n}\nexports.Conversation = Conversation;\nConversation.globalVariables = {};\nconst MAX_CHARS_PER_LINE = 50;\nclass ConversationLine {\n    constructor(full, conversation) {\n        this.full = full;\n        this.conversation = conversation;\n        this.visited = false;\n        this.isNpc = !full.startsWith(\"►\");\n        this.line = ConversationLine.extractText(full, this.isNpc);\n        this.condition = ConversationLine.extractCondition(full);\n        this.targetState = ConversationLine.extractState(full);\n        this.actions = ConversationLine.extractActions(full);\n        this.visited = false;\n    }\n    executeBeforeLine() {\n        if (this.actions.length > 0) {\n            for (const action of this.actions) {\n                if (this.isEarlyAction(action[0])) {\n                    this.conversation.runAction(action);\n                }\n            }\n        }\n    }\n    execute() {\n        this.visited = true;\n        if (this.targetState != null) {\n            this.conversation.setState(this.targetState);\n        }\n        if (this.actions.length > 0) {\n            for (const action of this.actions) {\n                if (!this.isEarlyAction(action[0])) {\n                    this.conversation.runAction(action);\n                }\n            }\n        }\n    }\n    isEarlyAction(s) {\n        return earlyActions.includes(s);\n    }\n    wasVisited() {\n        return this.visited;\n    }\n    static extractText(line, autoWrap = false) {\n        // Remove player option sign\n        if (line.startsWith(ConversationLine.OPTION_MARKER)) {\n            line = line.substr(1);\n        }\n        // Remove conditions\n        if (line.trim().startsWith(\"[\") && line.includes(\"]\")) {\n            line = line.substr(line.indexOf(\"]\") + 1).trim();\n        }\n        // Remove actions and state changes\n        const atPos = line.indexOf(\"@\");\n        const exclPos = line.search(/\\![a-zA-Z]/);\n        if (atPos >= 0 || exclPos >= 0) {\n            const minPos = (atPos >= 0 && exclPos >= 0) ? Math.min(atPos, exclPos) : (atPos >= 0) ? atPos : exclPos;\n            line = line.substr(0, minPos).trim();\n        }\n        // Auto wrap to some character count\n        if (autoWrap) {\n            return ConversationLine.wrapString(line, MAX_CHARS_PER_LINE);\n        }\n        return line;\n    }\n    static extractCondition(line) {\n        const conditionString = line.match(/\\[[a-zA-Z0-9\\_\\<\\>\\!\\=\\$ ]+\\]/g);\n        if (conditionString && conditionString[0]) {\n            return conditionString[0].substr(1, conditionString[0].length - 2);\n        }\n        return null;\n    }\n    static extractState(line) {\n        const stateChanges = line.match(/(@[a-zA-Z0-9\\_]+)/g);\n        if (stateChanges && stateChanges.length > 0) {\n            const stateName = stateChanges[0].substr(1);\n            return stateName;\n        }\n        return null;\n    }\n    static extractActions(line) {\n        let actions = line.match(/(\\![a-zA-Z][a-zA-Z0-9\\_\\$ ]*)+/g);\n        const result = [];\n        if (actions) {\n            actions = actions.join(\" \").split(\"!\").map(action => action.trim()).filter(s => s.length > 0);\n            for (const action of actions) {\n                const segments = action.split(\" \");\n                result.push(segments);\n            }\n        }\n        return result;\n    }\n    static wrapString(s, charsPerLine) {\n        let currentLength = 0, lastSpace = -1;\n        for (let i = 0; i < s.length; i++) {\n            const char = s[i];\n            if (char === \"\\n\") {\n                // New line\n                currentLength = 0;\n            }\n            else {\n                if (char === \" \") {\n                    lastSpace = i;\n                }\n                currentLength++;\n                if (currentLength >= charsPerLine) {\n                    if (lastSpace >= 0) {\n                        // Add cut at last space\n                        s = s.substr(0, lastSpace) + \"\\n\" + s.substr(lastSpace + 1);\n                        currentLength = i - lastSpace;\n                        lastSpace = -1;\n                    }\n                    else {\n                        // Cut mid-word\n                        s = s.substr(0, i + 1) + \"\\n\" + s.substr(i + 1);\n                        currentLength = 0;\n                    }\n                }\n            }\n        }\n        return s;\n    }\n}\nexports.ConversationLine = ConversationLine;\nConversationLine.OPTION_MARKER = \"►\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvQ29udmVyc2F0aW9uLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnZlcnNhdGlvbi50cz85MTYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpYWxvZ0pTT04gfSBmcm9tIFwiKi5kaWFsb2cuanNvblwiO1xyXG5pbXBvcnQgeyBOUEMgfSBmcm9tIFwiLi9lbnRpdGllcy9OUENcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJhY3Rpb24ge1xyXG4gICAgbnBjTGluZTogQ29udmVyc2F0aW9uTGluZSB8IG51bGw7XHJcbiAgICBvcHRpb25zOiBDb252ZXJzYXRpb25MaW5lW107XHJcbiAgICBzcG9pbGVkT3B0aW9uczogQ29udmVyc2F0aW9uTGluZVtdO1xyXG59XHJcblxyXG4vLyBBY3Rpb25zIHRoYXQgc2hhbGwgYmUgZXhlY3V0ZWQgYmVmb3JlIGFuIE5QQyB0YWxrcywgbm90IGFmdGVyXHJcbmNvbnN0IGVhcmx5QWN0aW9ucyA9IFtcclxuICAgIFwiYW5ncnlcIixcclxuICAgIFwic2FkXCIsXHJcbiAgICBcImFtdXNlZFwiLFxyXG4gICAgXCJuZXV0cmFsXCIsXHJcbiAgICBcImJvcmVkXCJcclxuXTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb24ge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2xvYmFsVmFyaWFibGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcbiAgICBwcml2YXRlIHN0YXRlczogc3RyaW5nW107XHJcbiAgICBwcml2YXRlIGRhdGE6IHtba2V5OiBzdHJpbmddOiBDb252ZXJzYXRpb25MaW5lW119O1xyXG4gICAgcHJpdmF0ZSBzdGF0ZSE6IHN0cmluZztcclxuICAgIHByaXZhdGUgc3RhdGVJbmRleCA9IDA7XHJcbiAgICBwcml2YXRlIGVuZENvbnZlcnNhdGlvbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBsb2NhbFZhcmlhYmxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xyXG4gICAgcHJpdmF0ZSBza2lwcGVkTGluZXMgPSAwOyAvLyBoZWxwIHZhcmlhYmxlIHRvIG1ha2UgZ29CYWNrKCkgd29yayB3aXRoIHNraXBwZWQgZGlhbG9nIGxpbmVzIGR1ZSB0byBjb25kaXRpb25zXHJcblxyXG4gICAgY29uc3RydWN0b3IoanNvbjogRGlhbG9nSlNPTiwgcHJpdmF0ZSByZWFkb25seSBucGM6IE5QQykge1xyXG4gICAgICAgIHRoaXMuc3RhdGVzID0gT2JqZWN0LmtleXMoanNvbik7XHJcbiAgICAgICAgdGhpcy5kYXRhID0ge307XHJcblxyXG4gICAgICAgIGZvciAoY29uc3Qgc3RhdGUgb2YgdGhpcy5zdGF0ZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW3N0YXRlXSA9IGpzb25bc3RhdGVdLm1hcChsaW5lID0+IG5ldyBDb252ZXJzYXRpb25MaW5lKGxpbmUsIHRoaXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoXCJlbnRyeVwiKTtcclxuICAgICAgICB0aGlzLmVuZENvbnZlcnNhdGlvbiA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRTdGF0ZShuYW1lID0gXCJlbnRyeVwiKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlcy5pbmNsdWRlcyhuYW1lKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSBuYW1lIFwiICsgbmFtZSArIFwiIGRvZXMgbm90IGV4aXN0IGluIGNvbnZlcnNhdGlvblwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuc3RhdGVJbmRleCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE5leHRJbnRlcmFjdGlvbigpOiBJbnRlcmFjdGlvbiB8IG51bGwge1xyXG4gICAgICAgIGlmICh0aGlzLmVuZENvbnZlcnNhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmVuZENvbnZlcnNhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2tpcHBlZExpbmVzID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0OiBJbnRlcmFjdGlvbiA9IHtcclxuICAgICAgICAgICAgbnBjTGluZTogbnVsbCxcclxuICAgICAgICAgICAgb3B0aW9uczogW10sXHJcbiAgICAgICAgICAgIHNwb2lsZWRPcHRpb25zOiBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIERvZXMgTlBDIHNwZWFrP1xyXG4gICAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmdldE5leHRMaW5lKCk7XHJcblxyXG4gICAgICAgIGlmIChsaW5lID09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gQ29udmVyc2F0aW9uIGlzIG92ZXIgd2l0aG91dCBjaGFuZ2luZyBzdGF0ZSBvciBhbnl0aGluZ1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobGluZS5pc05wYykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0Lm5wY0xpbmUgPSBsaW5lO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nb0JhY2soMSArIHRoaXMuc2tpcHBlZExpbmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRG9lcyBQbGF5ZXIgcmVhY3Q/XHJcbiAgICAgICAgdGhpcy5za2lwcGVkTGluZXMgPSAwO1xyXG4gICAgICAgIGxldCBvcHRpb24gPSB0aGlzLmdldE5leHRMaW5lKCk7XHJcblxyXG4gICAgICAgIHdoaWxlIChvcHRpb24gJiYgIW9wdGlvbi5pc05wYykge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBJZGVudGlmeSBzcG9pbGVkIG9wdGlvbnMgKHRoYXQgZG9uJ3QgbGVhZCB0byBhbnl0aGluZyBuZXcgZm9yIHRoZSBwbGF5ZXIpIGFuZFxyXG4gICAgICAgICAgICAvLyAgICAgICBzb3J0IGFjY29yZGluZ2x5LlxyXG4gICAgICAgICAgICByZXN1bHQub3B0aW9ucy5wdXNoKG9wdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpcHBlZExpbmVzID0gMDtcclxuICAgICAgICAgICAgb3B0aW9uID0gdGhpcy5nZXROZXh0TGluZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbiAmJiAhb3B0aW9uLmlzTnBjKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5nb0JhY2soMSArIHRoaXMuc2tpcHBlZExpbmVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2tpcHBlZExpbmVzID0gMDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcnVuQWN0aW9uKGFjdGlvbjogc3RyaW5nW10pOiB2b2lkIHtcclxuICAgICAgICBzd2l0Y2ggKGFjdGlvblswXSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZENvbnZlcnNhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInNldFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYXJpYWJsZShhY3Rpb25bMV0sIGFjdGlvblsyXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMubnBjLnNjZW5lLmdhbWUuY2FtcGFpZ24ucnVuQWN0aW9uKGFjdGlvblswXSwgdGhpcy5ucGMsIGFjdGlvbi5zbGljZSgxKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0VmFyaWFibGUobmFtZSA9IFwiXCIsIHZhbHVlID0gXCJ0cnVlXCIpOiB2b2lkIHtcclxuICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKFwiJFwiKSkge1xyXG4gICAgICAgICAgICAvLyBHbG9iYWwgdmFyaWFibGVcclxuICAgICAgICAgICAgQ29udmVyc2F0aW9uLmdsb2JhbFZhcmlhYmxlc1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIExvY2FsIHZhcmlhYmxlXHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxWYXJpYWJsZXNbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzZXRHbG9iYWwodmFybmFtZTogc3RyaW5nLCB2YWx1ZSA9IFwidHJ1ZVwiKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF2YXJuYW1lLnN0YXJ0c1dpdGgoXCIkXCIpKSB7XHJcbiAgICAgICAgICAgIHZhcm5hbWUgPSBcIiRcIiArIHZhcm5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb252ZXJzYXRpb24uZ2xvYmFsVmFyaWFibGVzW3Zhcm5hbWVdID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRHbG9iYWxzKCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xyXG4gICAgICAgIHJldHVybiBDb252ZXJzYXRpb24uZ2xvYmFsVmFyaWFibGVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVzZXRHbG9iYWxzKCk6IHZvaWQge1xyXG4gICAgICAgIENvbnZlcnNhdGlvbi5nbG9iYWxWYXJpYWJsZXMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFZhcmlhYmxlKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aChcIiRcIikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnZlcnNhdGlvbi5nbG9iYWxWYXJpYWJsZXNbbmFtZV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxWYXJpYWJsZXNbbmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ29CYWNrKHN0ZXBzID0gMSk6IHZvaWQge1xyXG4gICAgICAgIGlmIChzdGVwcyA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGVJbmRleCAtPSBzdGVwcztcclxuICAgICAgICB0aGlzLnNraXBwZWRMaW5lcyA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXROZXh0TGluZShpZ25vcmVEaXNhYmxlZCA9IGZhbHNlKTogQ29udmVyc2F0aW9uTGluZSB8IG51bGwge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlSW5kZXggPj0gdGhpcy5kYXRhW3RoaXMuc3RhdGVdLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmRhdGFbdGhpcy5zdGF0ZV1bdGhpcy5zdGF0ZUluZGV4KytdO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhsaW5lLmNvbmRpdGlvbik7XHJcbiAgICAgICAgaWYgKGxpbmUuY29uZGl0aW9uICYmICghaWdub3JlRGlzYWJsZWQgJiYgIXRoaXMudGVzdENvbmRpdGlvbihsaW5lLmNvbmRpdGlvbikpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpcHBlZExpbmVzKys7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE5leHRMaW5lKGlnbm9yZURpc2FibGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsaW5lO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdGVzdENvbmRpdGlvbihjb25kaXRpb246IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IHN1YmNvbmRpdGlvbnMgPSBjb25kaXRpb24uc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHN1YmNvbmRpdGlvbnMuc29tZShldmFsdWF0ZUZyYWdtZW50KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXZhbHVhdGVGcmFnbWVudChzOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKHMuc3RhcnRzV2l0aChcIm5vdCBcIikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhZXZhbHVhdGVGcmFnbWVudChzLnN1YnN0cig0KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocy5pbmNsdWRlcyhcIiE9XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gcy5zcGxpdChcIiE9XCIpLm1hcChzID0+IHMudHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRWYXJpYWJsZSh2YWx1ZXNbMF0pICE9PSB2YWx1ZXNbMV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMuaW5jbHVkZXMoXCI9XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gcy5zcGxpdChcIj1cIikubWFwKHMgPT4gcy50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldFZhcmlhYmxlKHZhbHVlc1swXSkgPT09IHZhbHVlc1sxXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocy5pbmNsdWRlcyhcIj5cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBzLnNwbGl0KFwiPlwiKS5tYXAocyA9PiBzLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc2VsZi5nZXRWYXJpYWJsZSh2YWx1ZXNbMF0pKSA+IHBhcnNlRmxvYXQodmFsdWVzWzFdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocy5pbmNsdWRlcyhcIjxcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBzLnNwbGl0KFwiPFwiKS5tYXAocyA9PiBzLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc2VsZi5nZXRWYXJpYWJsZSh2YWx1ZXNbMF0pKSA8IHBhcnNlRmxvYXQodmFsdWVzWzFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVmFyaWFibGUgbmFtZSBvbmx5XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSBzZWxmLmdldFZhcmlhYmxlKHMudHJpbSgpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHYgIT0gbnVsbCAmJiB2ICE9PSBcIlwiICYmIHYgIT09IFwiMFwiICYmIHYgIT09IFwiZmFsc2VcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhc0VuZGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVuZENvbnZlcnNhdGlvbjtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgTUFYX0NIQVJTX1BFUl9MSU5FID0gNTA7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uTGluZSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIE9QVElPTl9NQVJLRVIgPSBcIuKWulwiO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGxpbmU6IHN0cmluZztcclxuICAgIHB1YmxpYyByZWFkb25seSBjb25kaXRpb246IHN0cmluZyB8IG51bGw7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgdGFyZ2V0U3RhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgYWN0aW9uczogc3RyaW5nW11bXTtcclxuICAgIHB1YmxpYyByZWFkb25seSBpc05wYzogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgdmlzaXRlZCA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBmdWxsOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGNvbnZlcnNhdGlvbjogQ29udmVyc2F0aW9uXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmlzTnBjID0gIWZ1bGwuc3RhcnRzV2l0aChcIuKWulwiKTtcclxuICAgICAgICB0aGlzLmxpbmUgPSBDb252ZXJzYXRpb25MaW5lLmV4dHJhY3RUZXh0KGZ1bGwsIHRoaXMuaXNOcGMpO1xyXG4gICAgICAgIHRoaXMuY29uZGl0aW9uID0gQ29udmVyc2F0aW9uTGluZS5leHRyYWN0Q29uZGl0aW9uKGZ1bGwpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0U3RhdGUgPSBDb252ZXJzYXRpb25MaW5lLmV4dHJhY3RTdGF0ZShmdWxsKTtcclxuICAgICAgICB0aGlzLmFjdGlvbnMgPSBDb252ZXJzYXRpb25MaW5lLmV4dHJhY3RBY3Rpb25zKGZ1bGwpO1xyXG4gICAgICAgIHRoaXMudmlzaXRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBleGVjdXRlQmVmb3JlTGluZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5hY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhY3Rpb24gb2YgdGhpcy5hY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0Vhcmx5QWN0aW9uKGFjdGlvblswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbi5ydW5BY3Rpb24oYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXhlY3V0ZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnZpc2l0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50YXJnZXRTdGF0ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udmVyc2F0aW9uLnNldFN0YXRlKHRoaXMudGFyZ2V0U3RhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIHRoaXMuYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRWFybHlBY3Rpb24oYWN0aW9uWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udmVyc2F0aW9uLnJ1bkFjdGlvbihhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0Vhcmx5QWN0aW9uKHM6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBlYXJseUFjdGlvbnMuaW5jbHVkZXMocyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHdhc1Zpc2l0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmlzaXRlZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBleHRyYWN0VGV4dChsaW5lOiBzdHJpbmcsIGF1dG9XcmFwID0gZmFsc2UpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIFJlbW92ZSBwbGF5ZXIgb3B0aW9uIHNpZ25cclxuICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKENvbnZlcnNhdGlvbkxpbmUuT1BUSU9OX01BUktFUikpIHsgbGluZSA9IGxpbmUuc3Vic3RyKDEpOyB9XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBjb25kaXRpb25zXHJcbiAgICAgICAgaWYgKGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoXCJbXCIpICYmIGxpbmUuaW5jbHVkZXMoXCJdXCIpKSB7XHJcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoXCJdXCIpICsgMSkudHJpbSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIGFjdGlvbnMgYW5kIHN0YXRlIGNoYW5nZXNcclxuICAgICAgICBjb25zdCBhdFBvcyA9IGxpbmUuaW5kZXhPZihcIkBcIik7XHJcbiAgICAgICAgY29uc3QgZXhjbFBvcyA9IGxpbmUuc2VhcmNoKC9cXCFbYS16QS1aXS8pO1xyXG5cclxuICAgICAgICBpZiAoYXRQb3MgPj0gMCB8fCBleGNsUG9zID49IDApIHtcclxuICAgICAgICAgICAgY29uc3QgbWluUG9zID0gKGF0UG9zID49IDAgJiYgZXhjbFBvcyA+PSAwKSA/IE1hdGgubWluKGF0UG9zLCBleGNsUG9zKSA6IChhdFBvcyA+PSAwKSA/IGF0UG9zIDogZXhjbFBvcztcclxuICAgICAgICAgICAgbGluZSA9IGxpbmUuc3Vic3RyKDAsIG1pblBvcykudHJpbSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXV0byB3cmFwIHRvIHNvbWUgY2hhcmFjdGVyIGNvdW50XHJcbiAgICAgICAgaWYgKGF1dG9XcmFwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb252ZXJzYXRpb25MaW5lLndyYXBTdHJpbmcobGluZSwgTUFYX0NIQVJTX1BFUl9MSU5FKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsaW5lO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGV4dHJhY3RDb25kaXRpb24obGluZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgY29uZGl0aW9uU3RyaW5nID0gbGluZS5tYXRjaCgvXFxbW2EtekEtWjAtOVxcX1xcPFxcPlxcIVxcPVxcJCBdK1xcXS9nKTtcclxuXHJcbiAgICAgICAgaWYgKGNvbmRpdGlvblN0cmluZyAmJiBjb25kaXRpb25TdHJpbmdbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbmRpdGlvblN0cmluZ1swXS5zdWJzdHIoMSwgY29uZGl0aW9uU3RyaW5nWzBdLmxlbmd0aCAtIDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZXh0cmFjdFN0YXRlKGxpbmU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IHN0YXRlQ2hhbmdlcyA9IGxpbmUubWF0Y2goLyhAW2EtekEtWjAtOVxcX10rKS9nKTtcclxuXHJcbiAgICAgICAgaWYgKHN0YXRlQ2hhbmdlcyAmJiBzdGF0ZUNoYW5nZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0ZU5hbWUgPSBzdGF0ZUNoYW5nZXNbMF0uc3Vic3RyKDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGVOYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZXh0cmFjdEFjdGlvbnMobGluZTogc3RyaW5nKTogc3RyaW5nW11bXSB7XHJcbiAgICAgICAgbGV0IGFjdGlvbnMgPSBsaW5lLm1hdGNoKC8oXFwhW2EtekEtWl1bYS16QS1aMC05XFxfXFwkIF0qKSsvZyk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XHJcblxyXG4gICAgICAgIGlmIChhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbnMgPSBhY3Rpb25zLmpvaW4oXCIgXCIpLnNwbGl0KFwiIVwiKS5tYXAoYWN0aW9uID0+IGFjdGlvbi50cmltKCkpLmZpbHRlcihzID0+IHMubGVuZ3RoID4gMCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWdtZW50cyA9IGFjdGlvbi5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChzZWdtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyB3cmFwU3RyaW5nKHM6IHN0cmluZywgY2hhcnNQZXJMaW5lOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBjdXJyZW50TGVuZ3RoID0gMCwgbGFzdFNwYWNlID0gLTE7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjaGFyID0gc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjaGFyID09PSBcIlxcblwiKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBOZXcgbGluZVxyXG4gICAgICAgICAgICAgICAgY3VycmVudExlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gXCIgXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0U3BhY2UgPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRMZW5ndGgrKztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudExlbmd0aCA+PSBjaGFyc1BlckxpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFNwYWNlID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGN1dCBhdCBsYXN0IHNwYWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBzLnN1YnN0cigwLCBsYXN0U3BhY2UpICsgXCJcXG5cIiArIHMuc3Vic3RyKGxhc3RTcGFjZSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TGVuZ3RoID0gaSAtIGxhc3RTcGFjZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFNwYWNlID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3V0IG1pZC13b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBzLnN1YnN0cigwLCBpICsgMSkgKyBcIlxcblwiICsgcy5zdWJzdHIoaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBVUE7QUFBQTtBQUxBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUE1TEE7QUFDQTtBQThMQTtBQUVBO0FBU0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBdEpBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/Conversation.js\n");
    
    /***/ }),
    
    /***/ "./lib/ConversationProxy.js":
    /*!**********************************!*\
      !*** ./lib/ConversationProxy.js ***!
      \**********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConversationProxy = void 0;\nconst Conversation_1 = __webpack_require__(/*! ./Conversation */ \"./lib/Conversation.js\");\nconst NPC_1 = __webpack_require__(/*! ./entities/NPC */ \"./lib/entities/NPC.js\");\nclass ConversationProxy extends NPC_1.NPC {\n    constructor(scene, x, y, properties) {\n        super(scene, x, y, 16, 16);\n        this.conversation = this.generateConversation(this.prepareContent(properties.content));\n        this.scene.addGameObject(this);\n    }\n    prepareContent(content) {\n        if (!content) {\n            return [\"Nothing…\"];\n        }\n        return content.split(\":::\");\n    }\n    generateConversation(lines) {\n        const json = { \"entry\": [] };\n        lines.forEach((line, index) => {\n            if (index === lines.length - 1) {\n                line += \" @entry !end\";\n            }\n            json.entry.push(line);\n        });\n        return new Conversation_1.Conversation(json, this);\n    }\n    draw(ctx) {\n        if (this.scene.showBounds)\n            this.drawBounds();\n        this.speechBubble.draw(ctx);\n    }\n    update() {\n        if (!this.hasActiveConversation()) {\n            this.scene.removeGameObject(this);\n        }\n    }\n}\nexports.ConversationProxy = ConversationProxy;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvQ29udmVyc2F0aW9uUHJveHkuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29udmVyc2F0aW9uUHJveHkudHM/YzhmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb252ZXJzYXRpb24gfSBmcm9tIFwiLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdFByb3BlcnRpZXMgfSBmcm9tIFwiLi9NYXBJbmZvXCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgTlBDIH0gZnJvbSBcIi4vZW50aXRpZXMvTlBDXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uUHJveHkgZXh0ZW5kcyBOUEMge1xyXG4gICAgcHVibGljIGNvbnZlcnNhdGlvbjogQ29udmVyc2F0aW9uO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlciwgcHJvcGVydGllczogR2FtZU9iamVjdFByb3BlcnRpZXMpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMTYsIDE2KTtcclxuXHJcbiAgICAgICAgdGhpcy5jb252ZXJzYXRpb24gPSB0aGlzLmdlbmVyYXRlQ29udmVyc2F0aW9uKHRoaXMucHJlcGFyZUNvbnRlbnQocHJvcGVydGllcy5jb250ZW50KSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGRHYW1lT2JqZWN0KHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHJlcGFyZUNvbnRlbnQoY29udGVudD86IHN0cmluZyApOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXCJOb3RoaW5n4oCmXCJdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQuc3BsaXQoXCI6OjpcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUNvbnZlcnNhdGlvbihsaW5lczogc3RyaW5nW10pOiBDb252ZXJzYXRpb24ge1xyXG4gICAgICAgIGNvbnN0IGpzb246IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHsgXCJlbnRyeVwiOiBbXSB9O1xyXG5cclxuICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IGxpbmVzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGxpbmUgKz0gXCIgQGVudHJ5ICFlbmRcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAganNvbi5lbnRyeS5wdXNoKGxpbmUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IENvbnZlcnNhdGlvbihqc29uLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnNob3dCb3VuZHMpIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgICAgIHRoaXMuc3BlZWNoQnViYmxlLmRyYXcoY3R4KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5oYXNBY3RpdmVDb252ZXJzYXRpb24oKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZUdhbWVPYmplY3QodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/ConversationProxy.js\n");
    
    /***/ }),
    
    /***/ "./lib/Dance.js":
    /*!**********************!*\
      !*** ./lib/Dance.js ***!
      \**********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Dance = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ./Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ./Assets */ \"./lib/Assets.js\");\nconst ControllerManager_1 = __webpack_require__(/*! ./input/ControllerManager */ \"./lib/input/ControllerManager.js\");\nconst GameScene_1 = __webpack_require__(/*! ./scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Renderer_1 = __webpack_require__(/*! ./Renderer */ \"./lib/Renderer.js\");\nconst Sound_1 = __webpack_require__(/*! ./Sound */ \"./lib/Sound.js\");\nconst Particles_1 = __webpack_require__(/*! ./Particles */ \"./lib/Particles.js\");\nclass Dance {\n    constructor(scene, x, y, bpm = 128, keys = \"\", // can contain \"1\" or \"2\" for single keys, or \"3\" for both at once\n    warmupBeats = 8, allowedMistakes = 3, timeTolerance = 0.75, withMusic = true, musicIndex = 1 // 0 tree-dance, 1 for raindance\n    ) {\n        this.scene = scene;\n        this.x = x;\n        this.y = y;\n        this.bpm = bpm;\n        this.warmupBeats = warmupBeats;\n        this.allowedMistakes = allowedMistakes;\n        this.timeTolerance = timeTolerance;\n        this.withMusic = withMusic;\n        this.musicIndex = musicIndex;\n        /** Progress time relative to startTime. So starts out negative during warmup. */\n        this.progress = 0;\n        this.currentKey = \"\";\n        this.currentDistanceToIdealTime = 0;\n        this.allKeys = [\"1\", \"2\"];\n        this.mistakes = 0;\n        this.lastMistake = 0;\n        this.lastSuccess = 0;\n        this.performance = [];\n        this.currentIndex = 0;\n        this.success = false;\n        this.duration = keys.length;\n        this.keys = [];\n        this.performance = [];\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            this.keys[i] = key === \" \" ? \"\" : key === \"3\" ? \"12\" : key;\n            this.performance[i] = {};\n        }\n        this.begin();\n        this.alphaCurve = Particles_1.valueCurves.cos(0.15);\n    }\n    wasSuccessful() {\n        return this.success;\n    }\n    hasStarted() {\n        return this.progress > 0;\n    }\n    getTimeSinceLastMistake() {\n        return this.progress - this.lastMistake;\n    }\n    getTimeSinceLastSuccess() {\n        return this.progress - this.lastSuccess;\n    }\n    begin() {\n        this.openTime = this.scene.gameTime;\n        this.startTime = this.openTime + this.warmupBeats / this.bpm * 60;\n        this.currentKey = \"\";\n        this.currentDistanceToIdealTime = 0;\n        this.mistakes = 0;\n        this.lastMistake = -Infinity;\n        this.lastSuccess = -Infinity;\n        this.currentIndex = 0;\n        this.performance = this.performance.map(() => ({}));\n        this.success = false;\n        Dance.raindance_music.stop();\n        Dance.raindance_music.setVolume(0);\n        Dance.treedance_music.stop();\n        Dance.treedance_music.setVolume(0);\n    }\n    setPosition(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    // Called by parent\n    handleButtonDown(e) {\n        if (!e.repeat && this.hasStarted()) {\n            const key = e.isPlayerDance1 ? \"1\" : \"2\";\n            if (this.allKeys.indexOf(key) >= 0) {\n                if (this.currentKey.includes(key)) {\n                    if (this.currentDistanceToIdealTime <= this.timeTolerance) {\n                        this.keySuccess(key);\n                        return;\n                    }\n                }\n                const nxt = this.currentIndex + 1;\n                if (this.keys[nxt] && this.keys[nxt].includes(key)) {\n                    if (this.progress - (nxt + 0.5) < this.timeTolerance) {\n                        this.keySuccess(key, nxt);\n                        return;\n                    }\n                }\n                this.keyFailure(key);\n            }\n        }\n    }\n    keySuccess(key, index = this.currentIndex) {\n        for (const char of key) {\n            if (index === this.currentIndex) {\n                this.currentKey = this.currentKey.replace(char, \"\");\n            }\n            this.performance[index][char] = true;\n        }\n        if (index === this.currentIndex && this.currentKey.length === 0 || this.keys[index].length === 0) {\n            this.lastSuccess = this.progress;\n            Dance.successSound.stop();\n        }\n    }\n    keyFailure(key) {\n        if (!this.currentKey.includes(key)) {\n            this.registerMistake();\n            Dance.failSound.play();\n        }\n    }\n    keyMissed(key) {\n        if (this.performance[this.currentIndex]) {\n            for (const char of key) {\n                this.performance[this.currentIndex][char] = false;\n            }\n        }\n        this.registerMistake();\n    }\n    registerMistake() {\n        this.mistakes++;\n        this.lastMistake = this.progress;\n        Dance.failSound.play();\n        if (this.mistakes > this.allowedMistakes) {\n            this.loseGame();\n        }\n    }\n    loseGame() {\n        // Simply reset for now\n        this.begin();\n    }\n    update() {\n        const time = this.scene.gameTime - this.startTime;\n        this.progress = time * this.bpm / 60;\n        const prevIndex = this.currentIndex;\n        this.currentIndex = Math.floor(this.progress);\n        this.updateMusic();\n        // Next key?\n        if (this.currentIndex > prevIndex) {\n            // Missed last one?\n            if (this.currentKey.length > 0) {\n                this.keyMissed(this.currentKey);\n                this.currentKey = \"\";\n                return false;\n            }\n            // Proceed\n            this.currentKey = this.keys[this.currentIndex] || \"\";\n            for (const char of this.currentKey) {\n                if (this.performance[this.currentIndex] && this.performance[this.currentIndex][char]) {\n                    this.currentKey = this.currentKey.replace(char, \"\");\n                }\n            }\n        }\n        if (this.progress >= this.duration) {\n            // Done! Success! Yeah!\n            this.success = true;\n            this.resetMusic();\n            return true;\n        }\n        if (this.currentKey) {\n            this.currentDistanceToIdealTime = Math.abs(this.progress - (this.currentIndex + 0.5));\n        }\n        else {\n            this.currentDistanceToIdealTime = 0;\n        }\n        return false;\n    }\n    updateMusic() {\n        if (!this.withMusic) {\n            return;\n        }\n        if (this.progress < 0 && !Dance.raindance_music.isPlaying()) {\n            const fade = -this.progress / this.warmupBeats;\n            this.scene.fadeActiveBackgroundTrack(fade);\n        }\n        else {\n            // own music paused\n            if (this.musicIndex === 0 && !Dance.treedance_music.isPlaying()) {\n                Dance.treedance_music.setVolume(0.8);\n                Dance.treedance_music.play();\n                GameScene_1.GameScene.bgm1.setVolume(0);\n                GameScene_1.GameScene.bgm2.setVolume(0);\n            }\n            if (this.musicIndex === 1 && !Dance.raindance_music.isPlaying()) {\n                Dance.raindance_music.setVolume(0.8);\n                Dance.raindance_music.play();\n                GameScene_1.GameScene.bgm1.setVolume(0);\n                GameScene_1.GameScene.bgm2.setVolume(0);\n            }\n        }\n    }\n    resetMusic() {\n        Dance.raindance_music.stop();\n        Dance.treedance_music.stop();\n        this.scene.resetMusicVolumes();\n    }\n    addDanceToRenderQueue() {\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.DANCE,\n            layer: Renderer_1.RenderingLayer.UI,\n            dance: this\n        });\n    }\n    draw(ctx) {\n        const controller = ControllerManager_1.ControllerManager.getInstance().controllerSprite;\n        ctx.save();\n        ctx.translate(this.x, -this.y);\n        // Key Bar\n        const w = 100;\n        const h = 18;\n        const w2 = w / 2;\n        const h2 = h / 2;\n        ctx.drawImage(Dance.bar, Dance.bar.width / -2, 1 + Dance.bar.height / -2);\n        // Feedback\n        if (this.progress - this.lastMistake < 1) {\n            ctx.fillStyle = \"red\";\n            ctx.globalAlpha = (1 - this.progress + this.lastMistake) * 0.6;\n            ctx.fillRect(-w2 + 2, -h2 + 1, w - 4, h);\n        }\n        if (this.progress - this.lastSuccess < 1) {\n            ctx.fillStyle = \"green\";\n            ctx.globalAlpha = (1 - this.progress + this.lastSuccess) * 0.1;\n            ctx.fillRect(-w2 + 2, -h2 + 1, w - 4, h);\n        }\n        // Upcoming keys\n        ctx.globalAlpha = 1;\n        ctx.textAlign = \"center\";\n        const sweetX = w2 - 16;\n        const y1 = -8;\n        const y2 = 1;\n        ctx.fillStyle = \"black\";\n        for (let i = Math.floor(this.progress) - 2; i < this.progress + 8; i++) {\n            const keys = this.keys[i];\n            if (keys) {\n                const diff = i - this.progress;\n                const x = sweetX - diff * 20 - 6;\n                const xp = (x - (-w2)) / w;\n                const alpha = this.alphaCurve.get(xp);\n                ctx.globalAlpha = alpha;\n                if (keys.includes(\"1\")) {\n                    ctx.strokeStyle = \"#ff8010\";\n                    if (this.performance[i][\"1\"] != null) {\n                        ctx.fillStyle = this.performance[i][\"1\"] ? \"#70F070\" : \"#F06060\";\n                        ctx.fillRect(x - 4, y1, 9, 9);\n                    }\n                    else {\n                        Dance.keys.drawTag(ctx, `${controller}-dance1`, x + Dance.keys.width / -2, y1);\n                    }\n                }\n                if (keys.includes(\"2\")) {\n                    ctx.strokeStyle = \"blue\";\n                    if (this.performance[i][\"2\"] != null) {\n                        ctx.fillStyle = this.performance[i][\"2\"] ? \"#70F070\" : \"#F06060\";\n                        ctx.fillRect(x - 4, y2, 9, 9);\n                    }\n                    else {\n                        Dance.keys.drawTag(ctx, `${controller}-dance2`, x + Dance.keys.width / -2, y2);\n                    }\n                }\n            }\n        }\n        // Sweet spot\n        ctx.globalAlpha = 1;\n        ctx.drawImage(Dance.indicator, sweetX - 8, 1 + Dance.indicator.height / -2);\n        ctx.drawImage(Dance.indicator, sweetX + 4, 1 + Dance.indicator.height / -2);\n        ctx.restore();\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/dancing/success.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Dance, \"successSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/dancing/fail.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Dance, \"failSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"music/raindance.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Dance, \"raindance_music\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"music/dancing_queen.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Dance, \"treedance_music\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/dancing_ui_bar.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], Dance, \"bar\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/dancing_ui_indicator.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], Dance, \"indicator\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/dancing_ui_keys.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Dance, \"keys\", void 0);\nexports.Dance = Dance;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvRGFuY2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvRGFuY2UudHM/NTBlZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IGFzc2V0IH0gZnJvbSBcIi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJFdmVudCB9IGZyb20gXCIuL2lucHV0L0NvbnRyb2xsZXJFdmVudFwiO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyTWFuYWdlciB9IGZyb20gXCIuL2lucHV0L0NvbnRyb2xsZXJNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJTcHJpdGVNYXAgfSBmcm9tIFwiLi9pbnB1dC9Db250cm9sbGVyRmFtaWx5XCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgUmVuZGVyaW5nTGF5ZXIsIFJlbmRlcmluZ1R5cGUgfSBmcm9tIFwiLi9SZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuL1NvdW5kXCI7XHJcbmltcG9ydCB7IFZhbHVlQ3VydmUsIHZhbHVlQ3VydmVzIH0gZnJvbSBcIi4vUGFydGljbGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRGFuY2Uge1xyXG4gICAgQGFzc2V0KFwic291bmRzL2RhbmNpbmcvc3VjY2Vzcy5tcDNcIilcclxuICAgIHByaXZhdGUgc3RhdGljIHN1Y2Nlc3NTb3VuZDogU291bmQ7XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL2RhbmNpbmcvZmFpbC5tcDNcIilcclxuICAgIHByaXZhdGUgc3RhdGljIGZhaWxTb3VuZDogU291bmQ7XHJcblxyXG4gICAgQGFzc2V0KFwibXVzaWMvcmFpbmRhbmNlLm9nZ1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmFpbmRhbmNlX211c2ljOiBTb3VuZDtcclxuXHJcbiAgICBAYXNzZXQoXCJtdXNpYy9kYW5jaW5nX3F1ZWVuLm9nZ1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdHJlZWRhbmNlX211c2ljOiBTb3VuZDtcclxuXHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL2RhbmNpbmdfdWlfYmFyLnBuZ1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYmFyOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuICAgIEBhc3NldChcInNwcml0ZXMvZGFuY2luZ191aV9pbmRpY2F0b3IucG5nXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbmRpY2F0b3I6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcblxyXG4gICAgQGFzc2V0KFwic3ByaXRlcy9kYW5jaW5nX3VpX2tleXMuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMga2V5czogQXNlcHJpdGU7XHJcblxyXG4gICAgLyoqIFdoZW4gdGhlIGRhbmNlIHdhcyBjcmVhdGVkIGFuZCB2aXNpYmxlIHRvIHRoZSBwbGF5ZXIgZm9yIHRoZSBmaXJzdCB0aW1lICovXHJcbiAgICBwcml2YXRlIG9wZW5UaW1lITogbnVtYmVyO1xyXG4gICAgLyoqIFRpbWUgb2YgdGhlIGZpcnN0IG5vdGUsIGRlcGVuZHMgb24gb3BlblRpbWUgYW5kIHdhcm11cEJlYXRzICovXHJcbiAgICBwcml2YXRlIHN0YXJ0VGltZSE6IG51bWJlcjtcclxuICAgIC8qKiBQcm9ncmVzcyB0aW1lIHJlbGF0aXZlIHRvIHN0YXJ0VGltZS4gU28gc3RhcnRzIG91dCBuZWdhdGl2ZSBkdXJpbmcgd2FybXVwLiAqL1xyXG4gICAgcHJpdmF0ZSBwcm9ncmVzcyA9IDA7XHJcbiAgICBwcml2YXRlIGR1cmF0aW9uOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRLZXkgPSBcIlwiO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50RGlzdGFuY2VUb0lkZWFsVGltZSA9IDA7XHJcbiAgICBwcml2YXRlIGFsbEtleXMgPSBbXCIxXCIsIFwiMlwiXTtcclxuICAgIHByaXZhdGUga2V5czogc3RyaW5nW107XHJcbiAgICBwcml2YXRlIGFscGhhQ3VydmU6IFZhbHVlQ3VydmU7XHJcbiAgICBwcml2YXRlIG1pc3Rha2VzID0gMDtcclxuICAgIHByaXZhdGUgbGFzdE1pc3Rha2UgPSAwO1xyXG4gICAgcHJpdmF0ZSBsYXN0U3VjY2VzcyA9IDA7XHJcbiAgICBwcml2YXRlIHBlcmZvcm1hbmNlOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPltdID0gW107XHJcbiAgICBwcml2YXRlIGN1cnJlbnRJbmRleCA9IDA7XHJcbiAgICBwcml2YXRlIHN1Y2Nlc3MgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHNjZW5lOiBHYW1lU2NlbmUsXHJcbiAgICAgICAgcHJpdmF0ZSB4OiBudW1iZXIsXHJcbiAgICAgICAgcHJpdmF0ZSB5OiBudW1iZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBicG0gPSAxMjgsXHJcbiAgICAgICAga2V5cyA9IFwiXCIsIC8vIGNhbiBjb250YWluIFwiMVwiIG9yIFwiMlwiIGZvciBzaW5nbGUga2V5cywgb3IgXCIzXCIgZm9yIGJvdGggYXQgb25jZVxyXG4gICAgICAgIHByaXZhdGUgd2FybXVwQmVhdHMgPSA4LFxyXG4gICAgICAgIHByaXZhdGUgYWxsb3dlZE1pc3Rha2VzID0gMyxcclxuICAgICAgICBwcml2YXRlIHRpbWVUb2xlcmFuY2UgPSAwLjc1LFxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgd2l0aE11c2ljID0gdHJ1ZSxcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IG11c2ljSW5kZXggPSAxIC8vIDAgdHJlZS1kYW5jZSwgMSBmb3IgcmFpbmRhbmNlXHJcbiAgICApe1xyXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBrZXlzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLmtleXMgPSBbXTtcclxuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xyXG4gICAgICAgICAgICB0aGlzLmtleXNbaV0gPSBrZXkgPT09IFwiIFwiID8gXCJcIiA6IGtleSA9PT0gXCIzXCIgPyBcIjEyXCIgOiBrZXk7XHJcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybWFuY2VbaV0gPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYmVnaW4oKTtcclxuICAgICAgICB0aGlzLmFscGhhQ3VydmUgPSB2YWx1ZUN1cnZlcy5jb3MoMC4xNSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHdhc1N1Y2Nlc3NmdWwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VjY2VzcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFzU3RhcnRlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcyA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRpbWVTaW5jZUxhc3RNaXN0YWtlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3MgLSB0aGlzLmxhc3RNaXN0YWtlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRUaW1lU2luY2VMYXN0U3VjY2VzcygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyZXNzIC0gdGhpcy5sYXN0U3VjY2VzcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJlZ2luKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMub3BlblRpbWUgPSB0aGlzLnNjZW5lLmdhbWVUaW1lO1xyXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdGhpcy5vcGVuVGltZSArIHRoaXMud2FybXVwQmVhdHMgLyB0aGlzLmJwbSAqIDYwO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEtleSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGlzdGFuY2VUb0lkZWFsVGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5taXN0YWtlcyA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0TWlzdGFrZSA9IC1JbmZpbml0eTtcclxuICAgICAgICB0aGlzLmxhc3RTdWNjZXNzID0gLUluZmluaXR5O1xyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLnBlcmZvcm1hbmNlID0gdGhpcy5wZXJmb3JtYW5jZS5tYXAoKCkgPT4gKHt9KSk7XHJcbiAgICAgICAgdGhpcy5zdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgICAgRGFuY2UucmFpbmRhbmNlX211c2ljLnN0b3AoKTtcclxuICAgICAgICBEYW5jZS5yYWluZGFuY2VfbXVzaWMuc2V0Vm9sdW1lKDApO1xyXG4gICAgICAgIERhbmNlLnRyZWVkYW5jZV9tdXNpYy5zdG9wKCk7XHJcbiAgICAgICAgRGFuY2UudHJlZWRhbmNlX211c2ljLnNldFZvbHVtZSgwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UG9zaXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsbGVkIGJ5IHBhcmVudFxyXG4gICAgcHVibGljIGhhbmRsZUJ1dHRvbkRvd24oZTogQ29udHJvbGxlckV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFlLnJlcGVhdCAmJiB0aGlzLmhhc1N0YXJ0ZWQoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBlLmlzUGxheWVyRGFuY2UxID8gXCIxXCIgOiBcIjJcIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsS2V5cy5pbmRleE9mKGtleSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEtleS5pbmNsdWRlcyhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudERpc3RhbmNlVG9JZGVhbFRpbWUgPD0gdGhpcy50aW1lVG9sZXJhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMua2V5U3VjY2VzcyhrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG54dCA9IHRoaXMuY3VycmVudEluZGV4ICsgMTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5rZXlzW254dF0gJiYgdGhpcy5rZXlzW254dF0uaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb2dyZXNzIC0gKG54dCArIDAuNSkgPCB0aGlzLnRpbWVUb2xlcmFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlTdWNjZXNzKGtleSwgbnh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmtleUZhaWx1cmUoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGtleVN1Y2Nlc3Moa2V5OiBzdHJpbmcsIGluZGV4ID0gdGhpcy5jdXJyZW50SW5kZXgpOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGNoYXIgb2Yga2V5KSB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5jdXJyZW50SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEtleSA9IHRoaXMuY3VycmVudEtleS5yZXBsYWNlKGNoYXIsIFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlW2luZGV4XVtjaGFyXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5jdXJyZW50SW5kZXggJiYgdGhpcy5jdXJyZW50S2V5Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmtleXNbaW5kZXhdLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RTdWNjZXNzID0gdGhpcy5wcm9ncmVzcztcclxuICAgICAgICAgICAgRGFuY2Uuc3VjY2Vzc1NvdW5kLnN0b3AoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBrZXlGYWlsdXJlKGtleTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRLZXkuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyTWlzdGFrZSgpO1xyXG4gICAgICAgICAgICBEYW5jZS5mYWlsU291bmQucGxheSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGtleU1pc3NlZChrZXk6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnBlcmZvcm1hbmNlW3RoaXMuY3VycmVudEluZGV4XSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoYXIgb2Yga2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlW3RoaXMuY3VycmVudEluZGV4XVtjaGFyXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyTWlzdGFrZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJNaXN0YWtlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubWlzdGFrZXMrKztcclxuICAgICAgICB0aGlzLmxhc3RNaXN0YWtlID0gdGhpcy5wcm9ncmVzcztcclxuICAgICAgICBEYW5jZS5mYWlsU291bmQucGxheSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5taXN0YWtlcyA+IHRoaXMuYWxsb3dlZE1pc3Rha2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9zZUdhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb3NlR2FtZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBTaW1wbHkgcmVzZXQgZm9yIG5vd1xyXG4gICAgICAgIHRoaXMuYmVnaW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSB0aGlzLnNjZW5lLmdhbWVUaW1lIC0gdGhpcy5zdGFydFRpbWU7XHJcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRpbWUgKiB0aGlzLmJwbSAvIDYwO1xyXG4gICAgICAgIGNvbnN0IHByZXZJbmRleCA9IHRoaXMuY3VycmVudEluZGV4O1xyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gTWF0aC5mbG9vcih0aGlzLnByb2dyZXNzKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZU11c2ljKCk7XHJcblxyXG4gICAgICAgIC8vIE5leHQga2V5P1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA+IHByZXZJbmRleCkge1xyXG4gICAgICAgICAgICAvLyBNaXNzZWQgbGFzdCBvbmU/XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRLZXkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlNaXNzZWQodGhpcy5jdXJyZW50S2V5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEtleSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFByb2NlZWRcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50S2V5ID0gdGhpcy5rZXlzW3RoaXMuY3VycmVudEluZGV4XSB8fCBcIlwiO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBjaGFyIG9mIHRoaXMuY3VycmVudEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyZm9ybWFuY2VbdGhpcy5jdXJyZW50SW5kZXhdICYmIHRoaXMucGVyZm9ybWFuY2VbdGhpcy5jdXJyZW50SW5kZXhdW2NoYXJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50S2V5ID0gdGhpcy5jdXJyZW50S2V5LnJlcGxhY2UoY2hhciwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb2dyZXNzID49IHRoaXMuZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgLy8gRG9uZSEgU3VjY2VzcyEgWWVhaCFcclxuICAgICAgICAgICAgdGhpcy5zdWNjZXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZXNldE11c2ljKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEtleSkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnREaXN0YW5jZVRvSWRlYWxUaW1lID0gTWF0aC5hYnModGhpcy5wcm9ncmVzcyAtICh0aGlzLmN1cnJlbnRJbmRleCArIDAuNSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudERpc3RhbmNlVG9JZGVhbFRpbWUgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlTXVzaWMoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLndpdGhNdXNpYykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9ncmVzcyA8IDAgJiYgIURhbmNlLnJhaW5kYW5jZV9tdXNpYy5pc1BsYXlpbmcoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBmYWRlID0gLXRoaXMucHJvZ3Jlc3MgLyB0aGlzLndhcm11cEJlYXRzO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmZhZGVBY3RpdmVCYWNrZ3JvdW5kVHJhY2soZmFkZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gb3duIG11c2ljIHBhdXNlZFxyXG4gICAgICAgICAgICBpZiAodGhpcy5tdXNpY0luZGV4ID09PSAwICYmICFEYW5jZS50cmVlZGFuY2VfbXVzaWMuaXNQbGF5aW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIERhbmNlLnRyZWVkYW5jZV9tdXNpYy5zZXRWb2x1bWUoMC44KTtcclxuICAgICAgICAgICAgICAgIERhbmNlLnRyZWVkYW5jZV9tdXNpYy5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBHYW1lU2NlbmUuYmdtMS5zZXRWb2x1bWUoMCk7XHJcbiAgICAgICAgICAgICAgICBHYW1lU2NlbmUuYmdtMi5zZXRWb2x1bWUoMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm11c2ljSW5kZXggPT09IDEgJiYgIURhbmNlLnJhaW5kYW5jZV9tdXNpYy5pc1BsYXlpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgRGFuY2UucmFpbmRhbmNlX211c2ljLnNldFZvbHVtZSgwLjgpO1xyXG4gICAgICAgICAgICAgICAgRGFuY2UucmFpbmRhbmNlX211c2ljLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIEdhbWVTY2VuZS5iZ20xLnNldFZvbHVtZSgwKTtcclxuICAgICAgICAgICAgICAgIEdhbWVTY2VuZS5iZ20yLnNldFZvbHVtZSgwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVzZXRNdXNpYygpOiB2b2lkIHtcclxuICAgICAgICBEYW5jZS5yYWluZGFuY2VfbXVzaWMuc3RvcCgpO1xyXG4gICAgICAgIERhbmNlLnRyZWVkYW5jZV9tdXNpYy5zdG9wKCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZXNldE11c2ljVm9sdW1lcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGREYW5jZVRvUmVuZGVyUXVldWUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGQoe1xyXG4gICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLkRBTkNFLFxyXG4gICAgICAgICAgICBsYXllcjogUmVuZGVyaW5nTGF5ZXIuVUksXHJcbiAgICAgICAgICAgIGRhbmNlOiB0aGlzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjb250cm9sbGVyOiBDb250cm9sbGVyU3ByaXRlTWFwID0gQ29udHJvbGxlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5jb250cm9sbGVyU3ByaXRlO1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLngsIC10aGlzLnkpO1xyXG5cclxuICAgICAgICAvLyBLZXkgQmFyXHJcbiAgICAgICAgY29uc3QgdyA9IDEwMDtcclxuICAgICAgICBjb25zdCBoID0gMTg7XHJcbiAgICAgICAgY29uc3QgdzIgPSB3IC8gMjtcclxuICAgICAgICBjb25zdCBoMiA9IGggLyAyO1xyXG5cclxuICAgICAgICBjdHguZHJhd0ltYWdlKERhbmNlLmJhciwgRGFuY2UuYmFyLndpZHRoIC8gLTIsIDEgKyBEYW5jZS5iYXIuaGVpZ2h0IC8gLTIpO1xyXG5cclxuICAgICAgICAvLyBGZWVkYmFja1xyXG4gICAgICAgIGlmICh0aGlzLnByb2dyZXNzIC0gdGhpcy5sYXN0TWlzdGFrZSA8IDEpIHtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9ICgxIC0gdGhpcy5wcm9ncmVzcyArIHRoaXMubGFzdE1pc3Rha2UpICogMC42O1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoLXcyICsgMiwgLWgyICsgMSwgdyAtIDQsIGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvZ3Jlc3MgLSB0aGlzLmxhc3RTdWNjZXNzIDwgMSkge1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJncmVlblwiO1xyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAoMSAtIHRoaXMucHJvZ3Jlc3MgKyB0aGlzLmxhc3RTdWNjZXNzKSAqIDAuMTtcclxuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KC13MiArIDIsIC1oMiArIDEsIHcgLSA0LCBoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwY29taW5nIGtleXNcclxuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxO1xyXG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgIGNvbnN0IHN3ZWV0WCA9IHcyIC0gMTY7XHJcbiAgICAgICAgY29uc3QgeTEgPSAtODtcclxuICAgICAgICBjb25zdCB5MiA9IDE7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IE1hdGguZmxvb3IodGhpcy5wcm9ncmVzcykgLSAyOyBpIDwgdGhpcy5wcm9ncmVzcyArIDg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBrZXlzID0gdGhpcy5rZXlzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKGtleXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBpIC0gdGhpcy5wcm9ncmVzcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBzd2VldFggLSBkaWZmICogMjAgLSA2O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeHAgPSAoeCAtICgtdzIpKSAvIHc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbHBoYSA9IHRoaXMuYWxwaGFDdXJ2ZS5nZXQoeHApO1xyXG4gICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gYWxwaGE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGtleXMuaW5jbHVkZXMoXCIxXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gXCIjZmY4MDEwXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlcmZvcm1hbmNlW2ldW1wiMVwiXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLnBlcmZvcm1hbmNlW2ldW1wiMVwiXSA/IFwiIzcwRjA3MFwiIDogXCIjRjA2MDYwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4IC0gNCwgeTEsIDksIDkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhbmNlLmtleXMuZHJhd1RhZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke2NvbnRyb2xsZXJ9LWRhbmNlMWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ICsgRGFuY2Uua2V5cy53aWR0aCAvIC0yLCB5MVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5cy5pbmNsdWRlcyhcIjJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcImJsdWVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyZm9ybWFuY2VbaV1bXCIyXCJdICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMucGVyZm9ybWFuY2VbaV1bXCIyXCJdID8gXCIjNzBGMDcwXCIgOiBcIiNGMDYwNjBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHggLSA0LCB5MiwgOSwgOSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGFuY2Uua2V5cy5kcmF3VGFnKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7Y29udHJvbGxlcn0tZGFuY2UyYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggKyBEYW5jZS5rZXlzLndpZHRoIC8gLTIsIHkyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTd2VldCBzcG90XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuICAgICAgICBjdHguZHJhd0ltYWdlKERhbmNlLmluZGljYXRvciwgc3dlZXRYIC0gOCwgMSArIERhbmNlLmluZGljYXRvci5oZWlnaHQgLyAtMik7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShEYW5jZS5pbmRpY2F0b3IsIHN3ZWV0WCArIDQsIDEgKyBEYW5jZS5pbmRpY2F0b3IuaGVpZ2h0IC8gLTIpO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQXlDQTtBQU1BOztBQUxBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpCQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBblZBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBcEJBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/Dance.js\n");
    
    /***/ }),
    
    /***/ "./lib/DialoguePrompt.js":
    /*!*******************************!*\
      !*** ./lib/DialoguePrompt.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DialoguePrompt = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ./Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ./Assets */ \"./lib/Assets.js\");\nconst Renderer_1 = __webpack_require__(/*! ./Renderer */ \"./lib/Renderer.js\");\nclass DialoguePrompt {\n    constructor(scene, x, y) {\n        this.timeAlive = 0;\n        this.floatAmount = 2;\n        this.floatSpeed = 5;\n        this.scene = scene;\n        this.x = x;\n        this.y = y;\n    }\n    draw() {\n        const floatOffsetY = Math.sin(this.timeAlive * this.floatSpeed) * this.floatAmount;\n        this.scene.renderer.addAseprite(DialoguePrompt.sprite, \"idle\", this.x, this.y - floatOffsetY, Renderer_1.RenderingLayer.ENTITIES);\n    }\n    update(dt, anchorX, anchorY) {\n        this.timeAlive += dt;\n        this.x = anchorX;\n        this.y = anchorY;\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/dialogue.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], DialoguePrompt, \"sprite\", void 0);\nexports.DialoguePrompt = DialoguePrompt;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvRGlhbG9ndWVQcm9tcHQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvRGlhbG9ndWVQcm9tcHQudHM/MTA3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IGFzc2V0IH0gZnJvbSBcIi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgUmVuZGVyaW5nTGF5ZXIgfSBmcm9tIFwiLi9SZW5kZXJlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIERpYWxvZ3VlUHJvbXB0IHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvZGlhbG9ndWUuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBwcml2YXRlIHNjZW5lOiBHYW1lU2NlbmU7XHJcbiAgICBwcml2YXRlIHg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgeTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0aW1lQWxpdmUgPSAwO1xyXG4gICAgcHJpdmF0ZSBmbG9hdEFtb3VudCA9IDI7XHJcbiAgICBwcml2YXRlIGZsb2F0U3BlZWQgPSA1O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZmxvYXRPZmZzZXRZID0gTWF0aC5zaW4odGhpcy50aW1lQWxpdmUgKiB0aGlzLmZsb2F0U3BlZWQpICogdGhpcy5mbG9hdEFtb3VudDtcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShcclxuICAgICAgICAgICAgRGlhbG9ndWVQcm9tcHQuc3ByaXRlLFxyXG4gICAgICAgICAgICBcImlkbGVcIixcclxuICAgICAgICAgICAgdGhpcy54LCB0aGlzLnkgLSBmbG9hdE9mZnNldFksXHJcbiAgICAgICAgICAgIFJlbmRlcmluZ0xheWVyLkVOVElUSUVTXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIsIGFuY2hvclg6IG51bWJlciwgYW5jaG9yWTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50aW1lQWxpdmUgKz0gZHQ7XHJcbiAgICAgICAgdGhpcy54ID0gYW5jaG9yWDtcclxuICAgICAgICB0aGlzLnkgPSBhbmNob3JZO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBV0E7QUFKQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL0JBO0FBREE7QUFDQTtBQUFBO0FBRkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/DialoguePrompt.js\n");
    
    /***/ }),
    
    /***/ "./lib/Entity.js":
    /*!***********************!*\
      !*** ./lib/Entity.js ***!
      \***********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Entity = exports.createEntity = exports.entity = void 0;\nconst Animator_1 = __webpack_require__(/*! ./Animator */ \"./lib/Animator.js\");\nconst Renderer_1 = __webpack_require__(/*! ./Renderer */ \"./lib/Renderer.js\");\nconst entities = new Map();\nfunction entity(name) {\n    return (type) => {\n        entities.set(name, type);\n    };\n}\nexports.entity = entity;\nfunction createEntity(name, scene, x, y, properties) {\n    const constructor = entities.get(name);\n    if (!constructor) {\n        throw new Error(\"Entity not found: \" + name);\n    }\n    return new constructor(scene, x, y, properties);\n}\nexports.createEntity = createEntity;\nclass Entity {\n    constructor(scene, x, y, width = 0, height = 0, isTrigger = true) {\n        this.scene = scene;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.isTrigger = isTrigger;\n        this.timeAlive = 0;\n        this.animator = new Animator_1.Animator(this);\n    }\n    update(dt) {\n        this.timeAlive += dt;\n    }\n    distanceTo(entity) {\n        const a = this.x - entity.x;\n        const b = this.y - entity.y;\n        return Math.sqrt(a * a + b * b);\n    }\n    get distanceToPlayer() {\n        return this.distanceTo(this.scene.player);\n    }\n    getClosestEntityInRange(range) {\n        const sortedEntityDistances = this.getEntitiesInRange(range).sort((a, b) => { return a.distance - b.distance; });\n        if (sortedEntityDistances[0]) {\n            return sortedEntityDistances[0].target;\n        }\n        else {\n            return null;\n        }\n    }\n    getEntitiesInRange(range) {\n        const entitiesInRange = [];\n        this.scene.gameObjects.forEach(gameObject => {\n            if (gameObject instanceof Entity && gameObject !== this) {\n                const distance = this.distanceTo(gameObject);\n                if (distance < range) {\n                    entitiesInRange.push({ source: this, target: gameObject, distance });\n                }\n            }\n        });\n        return entitiesInRange;\n    }\n    getClosestEntity() {\n        const entitiesInRange = [];\n        this.scene.gameObjects.forEach(gameObject => {\n            if (gameObject instanceof Entity && gameObject !== this) {\n                const distance = this.distanceTo(gameObject);\n                entitiesInRange.push({ source: this, target: gameObject, distance });\n            }\n        });\n        entitiesInRange.sort((a, b) => { return a.distance - b.distance; });\n        return entitiesInRange[0].target;\n    }\n    getBounds(margin = 0) {\n        const width = this.width + (margin * 2);\n        const height = this.height + (margin * 2);\n        const x = this.x - (this.width / 2) - margin;\n        const y = this.y - -this.height + margin;\n        return { x, y, width, height };\n    }\n    drawBounds() {\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.RECT,\n            layer: Renderer_1.RenderingLayer.DEBUG,\n            position: {\n                x: this.getBounds().x,\n                y: -this.getBounds().y\n            },\n            lineColor: \"red\",\n            dimension: {\n                width: this.getBounds().width,\n                height: this.getBounds().height\n            }\n        });\n    }\n    /**\n     * Checks wether this entity is currently colliding with the provided named trigger.\n     * @param triggerName the trigger name to check against.\n     */\n    isCollidingWithTrigger(triggerName) {\n        const collisions = this.scene.world.getTriggerCollisions(this);\n        if (collisions.length === 0) {\n            return false;\n        }\n        return collisions.findIndex(o => o.name === triggerName) > -1;\n    }\n    remove() {\n        this.scene.removeGameObject(this);\n    }\n}\nexports.Entity = Entity;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvRW50aXR5LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0VudGl0eS50cz9hYzY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFuaW1hdG9yIH0gZnJvbSBcIi4vQW5pbWF0b3JcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdCwgR2FtZVNjZW5lIH0gZnJvbSBcIi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBHYW1lT2JqZWN0UHJvcGVydGllcyB9IGZyb20gXCIuL01hcEluZm9cIjtcclxuaW1wb3J0IHsgUmVuZGVyaW5nTGF5ZXIsIFJlbmRlcmluZ1R5cGUgfSBmcm9tIFwiLi9SZW5kZXJlclwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbnRpdHlEaXN0YW5jZSB7XHJcbiAgICBzb3VyY2U6IEVudGl0eTtcclxuICAgIHRhcmdldDogRW50aXR5O1xyXG4gICAgZGlzdGFuY2U6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQm91bmRzID0ge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG59O1xyXG5cclxudHlwZSBFbnRpdHlDb25zdHJ1Y3RvciA9IG5ldyAoc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHByb3BlcnRpZXM6IEdhbWVPYmplY3RQcm9wZXJ0aWVzKSA9PiBFbnRpdHk7XHJcblxyXG5jb25zdCBlbnRpdGllcyA9IG5ldyBNYXA8c3RyaW5nLCBFbnRpdHlDb25zdHJ1Y3Rvcj4oKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbnRpdHkobmFtZTogc3RyaW5nKTogKHRhcmdldDogRW50aXR5Q29uc3RydWN0b3IpID0+IHZvaWQge1xyXG4gICAgcmV0dXJuICh0eXBlOiBFbnRpdHlDb25zdHJ1Y3RvcikgPT4ge1xyXG4gICAgICAgIGVudGl0aWVzLnNldChuYW1lLCB0eXBlKTtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbnRpdHkoXHJcbiAgICBuYW1lOiBzdHJpbmcsIHNjZW5lOiBHYW1lU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyLCBwcm9wZXJ0aWVzOiBHYW1lT2JqZWN0UHJvcGVydGllc1xyXG4pOiBFbnRpdHkge1xyXG4gICAgY29uc3QgY29uc3RydWN0b3IgPSBlbnRpdGllcy5nZXQobmFtZSk7XHJcblxyXG4gICAgaWYgKCFjb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVudGl0eSBub3QgZm91bmQ6IFwiICsgbmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBjb25zdHJ1Y3RvcihzY2VuZSwgeCwgeSwgcHJvcGVydGllcyk7XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBFbnRpdHkgaW1wbGVtZW50cyBHYW1lT2JqZWN0IHtcclxuICAgIHByb3RlY3RlZCB0aW1lQWxpdmUgPSAwO1xyXG4gICAgcHJvdGVjdGVkIGFuaW1hdG9yID0gbmV3IEFuaW1hdG9yKHRoaXMpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBzY2VuZTogR2FtZVNjZW5lLFxyXG4gICAgICAgIHB1YmxpYyB4OiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgd2lkdGggPSAwLFxyXG4gICAgICAgIHB1YmxpYyBoZWlnaHQgPSAwLFxyXG4gICAgICAgIHB1YmxpYyBpc1RyaWdnZXIgPSB0cnVlXHJcbiAgICApIHt9XHJcblxyXG4gICAgYWJzdHJhY3QgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50aW1lQWxpdmUgKz0gZHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3RhbmNlVG8oZW50aXR5OiBFbnRpdHkpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGEgPSB0aGlzLnggLSBlbnRpdHkueDtcclxuICAgICAgICBjb25zdCBiID0gdGhpcy55IC0gZW50aXR5Lnk7XHJcblxyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoYSAqIGEgKyBiICogYik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBkaXN0YW5jZVRvUGxheWVyKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2VUbyh0aGlzLnNjZW5lLnBsYXllcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldENsb3Nlc3RFbnRpdHlJblJhbmdlKHJhbmdlOiBudW1iZXIpOiBFbnRpdHkgfCBudWxsIHtcclxuICAgICAgICBjb25zdCBzb3J0ZWRFbnRpdHlEaXN0YW5jZXMgPSB0aGlzLmdldEVudGl0aWVzSW5SYW5nZShyYW5nZSkuc29ydChcclxuICAgICAgICAgICAgKGEsIGIgKSA9PiB7IHJldHVybiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZTsgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChzb3J0ZWRFbnRpdHlEaXN0YW5jZXNbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNvcnRlZEVudGl0eURpc3RhbmNlc1swXS50YXJnZXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRFbnRpdGllc0luUmFuZ2UocmFuZ2U6IG51bWJlcik6IEVudGl0eURpc3RhbmNlW10ge1xyXG4gICAgICAgIGNvbnN0IGVudGl0aWVzSW5SYW5nZTogRW50aXR5RGlzdGFuY2VbXSA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLmdhbWVPYmplY3RzLmZvckVhY2goZ2FtZU9iamVjdCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChnYW1lT2JqZWN0IGluc3RhbmNlb2YgRW50aXR5ICYmIGdhbWVPYmplY3QgIT09IHRoaXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gdGhpcy5kaXN0YW5jZVRvKGdhbWVPYmplY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXRpZXNJblJhbmdlLnB1c2goe3NvdXJjZTogdGhpcywgdGFyZ2V0OiBnYW1lT2JqZWN0LCBkaXN0YW5jZX0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBlbnRpdGllc0luUmFuZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldENsb3Nlc3RFbnRpdHkoKTogRW50aXR5IHtcclxuICAgICAgICBjb25zdCBlbnRpdGllc0luUmFuZ2U6IEVudGl0eURpc3RhbmNlW10gPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZS5nYW1lT2JqZWN0cy5mb3JFYWNoKGdhbWVPYmplY3QgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZ2FtZU9iamVjdCBpbnN0YW5jZW9mIEVudGl0eSAmJiBnYW1lT2JqZWN0ICE9PSB0aGlzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHRoaXMuZGlzdGFuY2VUbyhnYW1lT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIGVudGl0aWVzSW5SYW5nZS5wdXNoKHtzb3VyY2U6IHRoaXMsIHRhcmdldDogZ2FtZU9iamVjdCwgZGlzdGFuY2V9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBlbnRpdGllc0luUmFuZ2Uuc29ydCgoYSwgYiApID0+IHsgcmV0dXJuIGEuZGlzdGFuY2UgLSBiLmRpc3RhbmNlOyB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGVudGl0aWVzSW5SYW5nZVswXS50YXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEJvdW5kcyhtYXJnaW4gPSAwKTogQm91bmRzIHtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMud2lkdGggKyAobWFyZ2luICogMik7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyAobWFyZ2luICogMik7XHJcbiAgICAgICAgY29uc3QgeCA9IHRoaXMueCAtICh0aGlzLndpZHRoIC8gMikgLSBtYXJnaW47XHJcbiAgICAgICAgY29uc3QgeSA9IHRoaXMueSAtIC10aGlzLmhlaWdodCArIG1hcmdpbjtcclxuICAgICAgICByZXR1cm4geyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGRyYXdCb3VuZHMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGQoe1xyXG4gICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLlJFQ1QsXHJcbiAgICAgICAgICAgIGxheWVyOiBSZW5kZXJpbmdMYXllci5ERUJVRyxcclxuICAgICAgICAgICAgcG9zaXRpb246IHtcclxuICAgICAgICAgICAgICAgIHg6IHRoaXMuZ2V0Qm91bmRzKCkueCxcclxuICAgICAgICAgICAgICAgIHk6IC10aGlzLmdldEJvdW5kcygpLnlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluZUNvbG9yOiBcInJlZFwiLFxyXG4gICAgICAgICAgICBkaW1lbnNpb246IHtcclxuICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuZ2V0Qm91bmRzKCkud2lkdGgsXHJcbiAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5nZXRCb3VuZHMoKS5oZWlnaHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIHdldGhlciB0aGlzIGVudGl0eSBpcyBjdXJyZW50bHkgY29sbGlkaW5nIHdpdGggdGhlIHByb3ZpZGVkIG5hbWVkIHRyaWdnZXIuXHJcbiAgICAgKiBAcGFyYW0gdHJpZ2dlck5hbWUgdGhlIHRyaWdnZXIgbmFtZSB0byBjaGVjayBhZ2FpbnN0LlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaXNDb2xsaWRpbmdXaXRoVHJpZ2dlcih0cmlnZ2VyTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgY29sbGlzaW9ucyA9IHRoaXMuc2NlbmUud29ybGQuZ2V0VHJpZ2dlckNvbGxpc2lvbnModGhpcyk7XHJcblxyXG4gICAgICAgIGlmIChjb2xsaXNpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29sbGlzaW9ucy5maW5kSW5kZXgobyA9PiBvLm5hbWUgPT09IHRyaWdnZXJOYW1lKSA+IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmVHYW1lT2JqZWN0KHRoaXMpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFHQTtBQWlCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBVkE7QUFZQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFsSEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/Entity.js\n");
    
    /***/ }),
    
    /***/ "./lib/Face.js":
    /*!*********************!*\
      !*** ./lib/Face.js ***!
      \*********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Face = exports.EyeType = exports.FaceModes = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ./Assets */ \"./lib/Assets.js\");\nconst Renderer_1 = __webpack_require__(/*! ./Renderer */ \"./lib/Renderer.js\");\nvar FaceModes;\n(function (FaceModes) {\n    FaceModes[\"BLINK\"] = \"blink\";\n    FaceModes[\"NEUTRAL\"] = \"neutral\";\n    FaceModes[\"ANGRY\"] = \"angry\";\n    FaceModes[\"BORED\"] = \"bored\";\n    FaceModes[\"AMUSED\"] = \"amused\";\n    FaceModes[\"SAD\"] = \"sad\";\n    FaceModes[\"DISGUSTED\"] = \"disgusted\";\n})(FaceModes = exports.FaceModes || (exports.FaceModes = {}));\nvar EyeType;\n(function (EyeType) {\n    EyeType[EyeType[\"STANDARD\"] = 0] = \"STANDARD\";\n    EyeType[EyeType[\"TREE\"] = 1] = \"TREE\";\n    EyeType[EyeType[\"STONE\"] = 2] = \"STONE\";\n    EyeType[EyeType[\"FLAMEBOY\"] = 3] = \"FLAMEBOY\";\n    EyeType[EyeType[\"STONEDISCIPLE\"] = 4] = \"STONEDISCIPLE\";\n    EyeType[EyeType[\"FLAMEBOY2\"] = 5] = \"FLAMEBOY2\";\n})(EyeType = exports.EyeType || (exports.EyeType = {}));\nclass Face {\n    constructor(scene, owner, eyeType, offX = 0, offY = 20) {\n        this.scene = scene;\n        this.owner = owner;\n        this.eyeType = eyeType;\n        this.offX = offX;\n        this.offY = offY;\n        this.mode = FaceModes.NEUTRAL;\n        this.direction = 1; // 1 = right, -1 = left\n    }\n    setMode(mode) {\n        this.mode = mode;\n    }\n    setOffY(offY) {\n        this.offY = offY;\n    }\n    draw(ctx) {\n        const sprite = Face.sprites[this.eyeType];\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.ASEPRITE,\n            layer: Renderer_1.RenderingLayer.ENTITIES,\n            asset: sprite,\n            scale: {\n                x: this.direction,\n                y: 1\n            },\n            translation: {\n                x: this.owner.x + this.offX,\n                y: -this.owner.y - this.offY\n            },\n            position: {\n                x: -sprite.width >> 1,\n                y: -sprite.height\n            },\n            animationTag: this.mode,\n            time: this.scene.gameTime * 1000\n        });\n    }\n    toggleDirection(direction = this.direction > 0 ? -1 : 1) {\n        if (direction !== this.direction) {\n            this.direction = direction;\n        }\n    }\n    setDirection(direction) {\n        this.direction = direction;\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"sprites/eyes/standard.aseprite.json\",\n        \"sprites/eyes/tree.aseprite.json\",\n        \"sprites/eyes/stone.aseprite.json\",\n        \"sprites/eyes/flameboy.aseprite.json\",\n        \"sprites/eyes/stonedisciple.aseprite.json\",\n        \"sprites/eyes/flameboy2.aseprite.json\",\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], Face, \"sprites\", void 0);\nexports.Face = Face;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvRmFjZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9GYWNlLnRzP2U0YWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuL0Fzc2V0c1wiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IE5QQyB9IGZyb20gXCIuL2VudGl0aWVzL05QQ1wiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciwgUmVuZGVyaW5nVHlwZSB9IGZyb20gXCIuL1JlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgZW51bSBGYWNlTW9kZXMge1xyXG4gICAgQkxJTksgPSBcImJsaW5rXCIsXHJcbiAgICBORVVUUkFMID0gXCJuZXV0cmFsXCIsXHJcbiAgICBBTkdSWSA9IFwiYW5ncnlcIixcclxuICAgIEJPUkVEID0gXCJib3JlZFwiLFxyXG4gICAgQU1VU0VEID0gXCJhbXVzZWRcIixcclxuICAgIFNBRCA9IFwic2FkXCIsXHJcbiAgICBESVNHVVNURUQgPSBcImRpc2d1c3RlZFwiXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEV5ZVR5cGUge1xyXG4gICAgU1RBTkRBUkQgPSAwLFxyXG4gICAgVFJFRSA9IDEsXHJcbiAgICBTVE9ORSA9IDIsXHJcbiAgICBGTEFNRUJPWSA9IDMsXHJcbiAgICBTVE9ORURJU0NJUExFID0gNCxcclxuICAgIEZMQU1FQk9ZMiA9IDUsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGYWNlIHtcclxuICAgIEBhc3NldChbXHJcbiAgICAgICAgXCJzcHJpdGVzL2V5ZXMvc3RhbmRhcmQuYXNlcHJpdGUuanNvblwiLFxyXG4gICAgICAgIFwic3ByaXRlcy9leWVzL3RyZWUuYXNlcHJpdGUuanNvblwiLFxyXG4gICAgICAgIFwic3ByaXRlcy9leWVzL3N0b25lLmFzZXByaXRlLmpzb25cIixcclxuICAgICAgICBcInNwcml0ZXMvZXllcy9mbGFtZWJveS5hc2Vwcml0ZS5qc29uXCIsXHJcbiAgICAgICAgXCJzcHJpdGVzL2V5ZXMvc3RvbmVkaXNjaXBsZS5hc2Vwcml0ZS5qc29uXCIsXHJcbiAgICAgICAgXCJzcHJpdGVzL2V5ZXMvZmxhbWVib3kyLmFzZXByaXRlLmpzb25cIixcclxuICAgIF0pXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzcHJpdGVzOiBBc2Vwcml0ZVtdO1xyXG5cclxuICAgIHByaXZhdGUgbW9kZSA9IEZhY2VNb2Rlcy5ORVVUUkFMO1xyXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb24gPSAxOyAvLyAxID0gcmlnaHQsIC0xID0gbGVmdFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgc2NlbmU6IEdhbWVTY2VuZSxcclxuICAgICAgICBwcml2YXRlIG93bmVyOiBOUEMsXHJcbiAgICAgICAgcHJpdmF0ZSBleWVUeXBlOiBFeWVUeXBlLFxyXG4gICAgICAgIHByaXZhdGUgb2ZmWCA9IDAsXHJcbiAgICAgICAgcHJpdmF0ZSBvZmZZID0gMjBcclxuICAgICkge31cclxuXHJcbiAgICBwdWJsaWMgc2V0TW9kZShtb2RlOiBGYWNlTW9kZXMpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRPZmZZIChvZmZZOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9mZlkgPSBvZmZZO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgc3ByaXRlID0gRmFjZS5zcHJpdGVzW3RoaXMuZXllVHlwZV07XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkKHtcclxuICAgICAgICAgICAgdHlwZTogUmVuZGVyaW5nVHlwZS5BU0VQUklURSxcclxuICAgICAgICAgICAgbGF5ZXI6IFJlbmRlcmluZ0xheWVyLkVOVElUSUVTLFxyXG4gICAgICAgICAgICBhc3NldDogc3ByaXRlLFxyXG4gICAgICAgICAgICBzY2FsZToge1xyXG4gICAgICAgICAgICAgICAgeDogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICB5OiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICB4OiB0aGlzLm93bmVyLnggKyB0aGlzLm9mZlgsXHJcbiAgICAgICAgICAgICAgICB5OiAtdGhpcy5vd25lci55IC0gdGhpcy5vZmZZXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICB4OiAtc3ByaXRlLndpZHRoID4+IDEsXHJcbiAgICAgICAgICAgICAgICB5OiAtc3ByaXRlLmhlaWdodFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhbmltYXRpb25UYWc6IHRoaXMubW9kZSxcclxuICAgICAgICAgICAgdGltZTogdGhpcy5zY2VuZS5nYW1lVGltZSAqIDEwMDBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9nZ2xlRGlyZWN0aW9uKGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uID4gMCA/IC0xIDogMSk6IHZvaWQge1xyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gIT09IHRoaXMuZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXREaXJlY3Rpb24oZGlyZWN0aW9uOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBckRBO0FBUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQVRBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/Face.js\n");
    
    /***/ }),
    
    /***/ "./lib/FireGfx.js":
    /*!************************!*\
      !*** ./lib/FireGfx.js ***!
      \************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FireGfx = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ./Assets */ \"./lib/Assets.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\nconst ColorGradient_1 = __webpack_require__(/*! ./ColorGradient */ \"./lib/ColorGradient.js\");\nclass FireGfx {\n    constructor(w = 48, h = 64, coneShaped = true, updateMs = 33) {\n        this.w = w;\n        this.h = h;\n        this.coneShaped = coneShaped;\n        this.updateMs = updateMs;\n        this.returnColor = [0, 0, 0, 255];\n        this.bottomLine = [];\n        this.nextUpdate = -Infinity;\n        this.age = 0;\n        this.startTime = 0;\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.width = this.w;\n        this.canvas.height = this.h;\n        this.context = this.canvas.getContext(\"2d\");\n        this.imageData = this.context.getImageData(0, 0, this.w, this.h);\n        this.data = [];\n        this.decayData = [];\n        this.init();\n    }\n    init() {\n        this.age = 0;\n        this.nextUpdate = -Infinity;\n        this.startTime = Date.now();\n        const decay = this.decayData;\n        const data = this.data;\n        for (let y = 0; y < this.h; y++) {\n            const row = data[y] = [];\n            const decayRow = decay[y] = [];\n            const yrel = y / (this.h - 1);\n            for (let x = 0; x < this.w; x++) {\n                row[x] = 0;\n                decayRow[x] = this.getDecay(x / (this.w - 1), yrel);\n            }\n        }\n        const bottom = data[this.h - 1];\n        for (let x = 0; x < this.w; x++) {\n            const xrel = x / (this.w - 1);\n            const stuffedXrel = this.coneShaped ? util_1.clamp(2 * xrel - 0.5, 0, 1) : xrel;\n            const smooth = 0.5 - 0.5 * Math.cos(2 * Math.PI * stuffedXrel);\n            bottom[x] = 1.25 * Math.pow(smooth, 0.5);\n        }\n        this.bottomLine = bottom.slice();\n    }\n    getDecay(xrel, yrel) {\n        if (xrel > 0.5) {\n            xrel = 1 - xrel;\n        }\n        if (this.coneShaped) {\n            yrel = 1.2 * yrel;\n            if (yrel > 1) {\n                return 0.02;\n            }\n        }\n        return 0.02 + (0.5 - xrel) * 0.1 + Math.pow(1 - yrel, 8);\n    }\n    update() {\n        const t = Date.now();\n        this.age = t - this.startTime;\n        if (t >= this.nextUpdate) {\n            this.nextUpdate = t + this.updateMs;\n            this.updateStep();\n            this.render();\n        }\n    }\n    updateStep() {\n        const data = this.data;\n        let fromRow = data[0];\n        let fromX = 0, toCenter = 0;\n        let toCenter1 = 1;\n        const midX = (this.w - 1) * 0.5;\n        const yThreshold = this.coneShaped ? this.h * 0.8 : Infinity;\n        // Let all fire rows move upward, so update rows from top to bottom\n        for (let y = 0; y < this.h - 1; y++) {\n            const row = fromRow, decayRow = this.decayData[y];\n            fromRow = data[y + 1];\n            if (y > yThreshold) {\n                const yp = (y - yThreshold) / (this.h - yThreshold);\n                toCenter = 0.15 * yp * yp;\n                toCenter1 = 1 - toCenter;\n            }\n            for (let x = 0; x < this.w; x++) {\n                fromX = util_1.clamp(x + util_1.rnd(-1, 1) * util_1.rnd(), 0.3, this.w - 1.3);\n                if (toCenter) {\n                    fromX = toCenter * midX + toCenter1 * fromX;\n                }\n                const fromX1 = Math.floor(fromX), fx = fromX - fromX1;\n                const v = fx * fromRow[fromX1 + 1] + (1 - fx) * fromRow[fromX1] - decayRow[x] + util_1.rnd(-0.03, 0.02);\n                row[x] = util_1.clamp(v, 0, Infinity);\n            }\n        }\n        // Bottom line always stays mostly the same, only minor variations\n        const row = data[this.h - 1];\n        const t = this.age * 6 / 1000;\n        const skew = 0.5 * util_1.orientPow(Math.sin(t) * Math.sin(t * 0.353) * Math.sin(t * 0.764)\n            * Math.sin(t * 0.5433) * Math.sin(t * 1.634) * Math.sin(t * 1.342), 1.5);\n        const exponent = (skew > 0) ? 1 + skew : 1 / (1 - skew);\n        for (let x = 0; x < this.w; x++) {\n            const f = 1.2 + Math.pow((0.8 * Math.sin(t) * Math.sin(0.1 * x * t) * Math.sin(-0.07 * x * t)), 2);\n            const baseX = Math.floor((this.w - 1) * Math.pow((x / (this.w - 1)), exponent));\n            row[x] = this.bottomLine[baseX] * f;\n        }\n    }\n    render() {\n        const pixels = this.imageData.data;\n        const data = this.data;\n        let p = 0, col = [0];\n        for (let y = 0; y < this.h; y++) {\n            const row = data[y];\n            for (let x = 0; x < this.w; x++) {\n                col = this.valueToColor(row[x]);\n                pixels[p++] = col[0];\n                pixels[p++] = col[1];\n                pixels[p++] = col[2];\n                pixels[p++] = col[3];\n            }\n        }\n        this.context.putImageData(this.imageData, 0, 0);\n    }\n    valueToColor(v) {\n        return FireGfx.gradient.get(util_1.clamp(v, 0, 1));\n    }\n    oldValueToColor(v) {\n        v = util_1.clamp(v, 0, 1);\n        const v255 = 255 * v;\n        this.returnColor[0] = 255;\n        this.returnColor[1] = v255;\n        this.returnColor[2] = v255 * v;\n        this.returnColor[3] = v255;\n        return this.returnColor;\n    }\n    getImage() {\n        return this.canvas;\n    }\n    draw(ctx, x = 0, y = 0) {\n        const img = this.getImage();\n        ctx.drawImage(img, x - img.width / 2, -y - img.height);\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(\"gradients/fire.png\", { map: (image) => ColorGradient_1.ColorGradient.fromImage(image) }),\n    tslib_1.__metadata(\"design:type\", ColorGradient_1.ColorGradient)\n], FireGfx, \"gradient\", void 0);\nexports.FireGfx = FireGfx;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvRmlyZUdmeC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9GaXJlR2Z4LnRzPzZiZTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgY2xhbXAsIG9yaWVudFBvdywgcm5kIH0gZnJvbSBcIi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBDb2xvckdyYWRpZW50IH0gZnJvbSBcIi4vQ29sb3JHcmFkaWVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpcmVHZngge1xyXG4gICAgQGFzc2V0KFwiZ3JhZGllbnRzL2ZpcmUucG5nXCIsIHsgbWFwOiAoaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQpID0+IENvbG9yR3JhZGllbnQuZnJvbUltYWdlKGltYWdlKSB9KVxyXG4gICAgcHVibGljIHN0YXRpYyBncmFkaWVudDogQ29sb3JHcmFkaWVudDtcclxuXHJcbiAgICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgZGF0YTogbnVtYmVyW11bXTtcclxuICAgIHByaXZhdGUgZGVjYXlEYXRhOiBudW1iZXJbXVtdO1xyXG4gICAgcHJpdmF0ZSBpbWFnZURhdGE6IEltYWdlRGF0YTtcclxuICAgIHByaXZhdGUgcmV0dXJuQ29sb3I6IG51bWJlcltdID0gWzAsIDAsIDAsIDI1NV07XHJcbiAgICBwcml2YXRlIGJvdHRvbUxpbmU6IG51bWJlcltdID0gW107XHJcbiAgICBwcml2YXRlIG5leHRVcGRhdGUgPSAtSW5maW5pdHk7XHJcbiAgICBwcml2YXRlIGFnZSA9IDA7XHJcbiAgICBwcml2YXRlIHN0YXJ0VGltZSA9IDA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSB3ID0gNDgsXHJcbiAgICAgICAgcHJpdmF0ZSBoID0gNjQsXHJcbiAgICAgICAgcHJpdmF0ZSBjb25lU2hhcGVkID0gdHJ1ZSxcclxuICAgICAgICBwcml2YXRlIHVwZGF0ZU1zID0gMzNcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMudztcclxuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmg7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgICAgICB0aGlzLmltYWdlRGF0YSA9IHRoaXMuY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy53LCB0aGlzLmgpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMuZGVjYXlEYXRhID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFnZSA9IDA7XHJcbiAgICAgICAgdGhpcy5uZXh0VXBkYXRlID0gLUluZmluaXR5O1xyXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGVjYXkgPSB0aGlzLmRlY2F5RGF0YTtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuaDsgeSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdzogbnVtYmVyW10gPSBkYXRhW3ldID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGRlY2F5Um93OiBudW1iZXJbXSA9IGRlY2F5W3ldID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IHlyZWwgPSB5IC8gKHRoaXMuaCAtIDEpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnc7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgcm93W3hdID0gMDtcclxuICAgICAgICAgICAgICAgIGRlY2F5Um93W3hdID0gdGhpcy5nZXREZWNheSh4IC8gKHRoaXMudyAtIDEpLCB5cmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm90dG9tID0gZGF0YVt0aGlzLmggLSAxXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnc7IHgrKykge1xyXG4gICAgICAgICAgICBjb25zdCB4cmVsID0geCAvICh0aGlzLncgLSAxKTtcclxuICAgICAgICAgICAgY29uc3Qgc3R1ZmZlZFhyZWwgPSB0aGlzLmNvbmVTaGFwZWQgPyBjbGFtcCgyICogeHJlbCAtIDAuNSwgMCwgMSkgOiB4cmVsO1xyXG4gICAgICAgICAgICBjb25zdCBzbW9vdGggPSAwLjUgLSAwLjUgKiBNYXRoLmNvcygyICogTWF0aC5QSSAqIHN0dWZmZWRYcmVsKTtcclxuICAgICAgICAgICAgYm90dG9tW3hdID0gMS4yNSAqIE1hdGgucG93KHNtb290aCwgMC41KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYm90dG9tTGluZSA9IGJvdHRvbS5zbGljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGVjYXkoeHJlbDogbnVtYmVyLCB5cmVsOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh4cmVsID4gMC41KSB7XHJcbiAgICAgICAgICAgIHhyZWwgPSAxIC0geHJlbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbmVTaGFwZWQpIHtcclxuICAgICAgICAgICAgeXJlbCA9IDEuMiAqIHlyZWw7XHJcblxyXG4gICAgICAgICAgICBpZiAoeXJlbCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwLjAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gMC4wMiArICgwLjUgLSB4cmVsKSAqIDAuMSArIE1hdGgucG93KDEgLSB5cmVsLCA4KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHQgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuYWdlID0gdCAtIHRoaXMuc3RhcnRUaW1lO1xyXG5cclxuICAgICAgICBpZiAodCA+PSB0aGlzLm5leHRVcGRhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5uZXh0VXBkYXRlID0gdCArIHRoaXMudXBkYXRlTXM7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RlcCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVN0ZXAoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICBsZXQgZnJvbVJvdyA9IGRhdGFbMF07XHJcbiAgICAgICAgbGV0IGZyb21YID0gMCwgdG9DZW50ZXIgPSAwO1xyXG4gICAgICAgIGxldCAgdG9DZW50ZXIxID0gMTtcclxuICAgICAgICBjb25zdCBtaWRYID0gKHRoaXMudyAtIDEpICogMC41O1xyXG4gICAgICAgIGNvbnN0IHlUaHJlc2hvbGQgPSB0aGlzLmNvbmVTaGFwZWQgPyB0aGlzLmggKiAwLjggOiBJbmZpbml0eTtcclxuXHJcbiAgICAgICAgLy8gTGV0IGFsbCBmaXJlIHJvd3MgbW92ZSB1cHdhcmQsIHNvIHVwZGF0ZSByb3dzIGZyb20gdG9wIHRvIGJvdHRvbVxyXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5oIC0gMTsgeSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGZyb21Sb3csIGRlY2F5Um93ID0gdGhpcy5kZWNheURhdGFbeV07XHJcbiAgICAgICAgICAgIGZyb21Sb3cgPSBkYXRhW3kgKyAxXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh5ID4geVRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeXAgPSAoeSAtIHlUaHJlc2hvbGQpIC8gKHRoaXMuaCAtIHlUaHJlc2hvbGQpO1xyXG4gICAgICAgICAgICAgICAgdG9DZW50ZXIgPSAwLjE1ICogeXAgKiB5cDtcclxuICAgICAgICAgICAgICAgIHRvQ2VudGVyMSA9IDEgLSB0b0NlbnRlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnc7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgZnJvbVggPSBjbGFtcCh4ICsgcm5kKC0xLCAxKSAqIHJuZCgpLCAwLjMsIHRoaXMudyAtIDEuMyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRvQ2VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbVggPSB0b0NlbnRlciAqIG1pZFggKyB0b0NlbnRlcjEgKiBmcm9tWDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcm9tWDEgPSBNYXRoLmZsb29yKGZyb21YKSwgZnggPSBmcm9tWCAtIGZyb21YMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBmeCAqIGZyb21Sb3dbZnJvbVgxICsgMV0gKyAoMSAtIGZ4KSAqIGZyb21Sb3dbZnJvbVgxXSAtIGRlY2F5Um93W3hdICsgcm5kKC0wLjAzLCAwLjAyKTtcclxuICAgICAgICAgICAgICAgIHJvd1t4XSA9IGNsYW1wKHYsIDAsIEluZmluaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQm90dG9tIGxpbmUgYWx3YXlzIHN0YXlzIG1vc3RseSB0aGUgc2FtZSwgb25seSBtaW5vciB2YXJpYXRpb25zXHJcbiAgICAgICAgY29uc3Qgcm93ID0gZGF0YVt0aGlzLmggLSAxXTtcclxuICAgICAgICBjb25zdCB0ID0gdGhpcy5hZ2UgKiA2IC8gMTAwMDtcclxuICAgICAgICBjb25zdCBza2V3ID0gMC41ICogb3JpZW50UG93KE1hdGguc2luKHQpICogTWF0aC5zaW4odCAqIDAuMzUzKSAqIE1hdGguc2luKHQgKiAwLjc2NClcclxuICAgICAgICAgICAgKiBNYXRoLnNpbih0ICogMC41NDMzKSAqIE1hdGguc2luKHQgKiAxLjYzNCkgKiBNYXRoLnNpbih0ICogMS4zNDIpLCAxLjUpO1xyXG4gICAgICAgIGNvbnN0IGV4cG9uZW50ID0gKHNrZXcgPiAwKSA/IDEgKyBza2V3IDogMSAvICgxIC0gc2tldyk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy53OyB4KyspIHtcclxuICAgICAgICAgICAgY29uc3QgZiA9IDEuMiArICgwLjggKiBNYXRoLnNpbih0KSAqIE1hdGguc2luKDAuMSAqIHggKiB0KSAqIE1hdGguc2luKC0wLjA3ICogeCAqIHQpKSAqKiAyO1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlWCA9IE1hdGguZmxvb3IoKHRoaXMudyAtIDEpICogKHggLyAodGhpcy53IC0gMSkpICoqIGV4cG9uZW50KTtcclxuICAgICAgICAgICAgcm93W3hdID0gdGhpcy5ib3R0b21MaW5lW2Jhc2VYXSAqIGY7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHBpeGVscyA9IHRoaXMuaW1hZ2VEYXRhLmRhdGE7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICBsZXQgcCA9IDAsIGNvbCA9IFswXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLmg7IHkrKykge1xyXG4gICAgICAgICAgICBjb25zdCByb3cgPSBkYXRhW3ldO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnc7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgY29sID0gdGhpcy52YWx1ZVRvQ29sb3Iocm93W3hdKTtcclxuICAgICAgICAgICAgICAgIHBpeGVsc1twKytdID0gY29sWzBdO1xyXG4gICAgICAgICAgICAgICAgcGl4ZWxzW3ArK10gPSBjb2xbMV07XHJcbiAgICAgICAgICAgICAgICBwaXhlbHNbcCsrXSA9IGNvbFsyXTtcclxuICAgICAgICAgICAgICAgIHBpeGVsc1twKytdID0gY29sWzNdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbnRleHQucHV0SW1hZ2VEYXRhKHRoaXMuaW1hZ2VEYXRhLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdmFsdWVUb0NvbG9yKHY6IG51bWJlcik6IG51bWJlcltdIHtcclxuICAgICAgICByZXR1cm4gRmlyZUdmeC5ncmFkaWVudC5nZXQoY2xhbXAodiwgMCwgMSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbGRWYWx1ZVRvQ29sb3IodjogbnVtYmVyKTogbnVtYmVyW10ge1xyXG4gICAgICAgIHYgPSBjbGFtcCh2LCAwLCAxKTtcclxuICAgICAgICBjb25zdCB2MjU1ID0gMjU1ICogdjtcclxuICAgICAgICB0aGlzLnJldHVybkNvbG9yWzBdID0gMjU1O1xyXG4gICAgICAgIHRoaXMucmV0dXJuQ29sb3JbMV0gPSB2MjU1O1xyXG4gICAgICAgIHRoaXMucmV0dXJuQ29sb3JbMl0gPSB2MjU1ICogdjtcclxuICAgICAgICB0aGlzLnJldHVybkNvbG9yWzNdID0gdjI1NTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuQ29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEltYWdlKCk6IEhUTUxDYW52YXNFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHggPSAwLCB5ID0gMCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGltZyA9IHRoaXMuZ2V0SW1hZ2UoKTtcclxuICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgeCAtIGltZy53aWR0aCAvIDIsIC15IC0gaW1nLmhlaWdodCk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqTEE7QUFEQTtBQUNBO0FBQUE7QUFGQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/FireGfx.js\n");
    
    /***/ }),
    
    /***/ "./lib/FriendlyFire.js":
    /*!*****************************!*\
      !*** ./lib/FriendlyFire.js ***!
      \*****************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FriendlyFire = void 0;\nconst Game_1 = __webpack_require__(/*! ./Game */ \"./lib/Game.js\");\nconst LoadingScene_1 = __webpack_require__(/*! ./scenes/LoadingScene */ \"./lib/scenes/LoadingScene.js\");\nclass FriendlyFire extends Game_1.Game {\n    constructor() {\n        super();\n    }\n}\nexports.FriendlyFire = FriendlyFire;\nconst game = new FriendlyFire();\ngame.scenes.setScene(LoadingScene_1.LoadingScene);\nwindow.game = game;\ngame.start();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvRnJpZW5kbHlGaXJlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0ZyaWVuZGx5RmlyZS50cz83M2Q4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi9HYW1lXCI7XHJcbmltcG9ydCB7IExvYWRpbmdTY2VuZSB9IGZyb20gXCIuL3NjZW5lcy9Mb2FkaW5nU2NlbmVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGcmllbmRseUZpcmUgZXh0ZW5kcyBHYW1lIHtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBnYW1lID0gbmV3IEZyaWVuZGx5RmlyZSgpO1xyXG5nYW1lLnNjZW5lcy5zZXRTY2VuZShMb2FkaW5nU2NlbmUpO1xyXG4od2luZG93IGFzIGFueSkuZ2FtZSA9IGdhbWU7XHJcbmdhbWUuc3RhcnQoKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/FriendlyFire.js\n");
    
    /***/ }),
    
    /***/ "./lib/Game.js":
    /*!*********************!*\
      !*** ./lib/Game.js ***!
      \*********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Game = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ./Assets */ \"./lib/Assets.js\");\nconst Campaign_1 = __webpack_require__(/*! ./Campaign */ \"./lib/Campaign.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\nconst ControllerManager_1 = __webpack_require__(/*! ./input/ControllerManager */ \"./lib/input/ControllerManager.js\");\nconst graphics_1 = __webpack_require__(/*! ./graphics */ \"./lib/graphics.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"./lib/constants.js\");\nconst GamepadInput_1 = __webpack_require__(/*! ./input/GamepadInput */ \"./lib/input/GamepadInput.js\");\nconst Keyboard_1 = __webpack_require__(/*! ./input/Keyboard */ \"./lib/input/Keyboard.js\");\nconst Scenes_1 = __webpack_require__(/*! ./Scenes */ \"./lib/Scenes.js\");\n/**\n * Max time delta (in s). If game freezes for a few seconds for whatever reason, we don't want\n * updates to jump too much.\n */\nconst MAX_DT = 0.1;\n/** Number of seconds the mouse is visible after moving it */\nconst MOUSE_TIMEOUT = 2.0;\nclass Game {\n    constructor(width = constants_1.GAME_CANVAS_WIDTH, height = constants_1.GAME_CANVAS_HEIGHT) {\n        this.width = width;\n        this.height = height;\n        this.controllerManager = ControllerManager_1.ControllerManager.getInstance();\n        this.keyboard = new Keyboard_1.Keyboard();\n        this.gamepad = new GamepadInput_1.GamepadInput();\n        this.scenes = new Scenes_1.Scenes(this);\n        this.assets = new Assets_1.Assets();\n        this.campaign = new Campaign_1.Campaign(this);\n        this.backgroundColor = \"black\";\n        this.gameLoopCallback = this.gameLoop.bind(this);\n        this.gameLoopId = null;\n        this.lastUpdateTime = performance.now();\n        this.mouseTimeout = MOUSE_TIMEOUT;\n        const canvas = this.canvas = graphics_1.createCanvas(width, height);\n        // Desynchronized sounds like a good idea but unfortunately it prevents pixelated graphics\n        // on some systems (Chrome+Windows+NVidia for example which forces bilinear filtering). So\n        // it is deactivated here.\n        this.ctx = graphics_1.getRenderingContext(canvas, \"2d\", { alpha: false, desynchronized: false });\n        const style = canvas.style;\n        style.position = \"absolute\";\n        style.margin = \"auto\";\n        style.left = style.top = style.right = style.bottom = \"0\";\n        style.imageRendering = \"pixelated\";\n        style.imageRendering = \"crisp-edges\";\n        document.body.appendChild(this.canvas);\n        this.updateCanvasSize();\n        window.addEventListener(\"resize\", () => this.updateCanvasSize());\n        window.addEventListener(\"pointermove\", () => this.mouseMoved());\n        // Use Alt+Enter to toggle fullscreen mode.\n        window.addEventListener(\"keydown\", (event) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (event.altKey && event.key === \"Enter\") {\n                const lockingEnabled = \"keyboard\" in navigator && \"lock\" in navigator.keyboard && typeof navigator.keyboard.lock === \"function\";\n                // If the browser is in full screen mode AND fullscreen has been triggered by our own keyboard shortcut...\n                if (window.matchMedia(\"(display-mode: fullscreen)\").matches && document.fullscreenElement != null) {\n                    if (lockingEnabled) {\n                        navigator.keyboard.unlock();\n                    }\n                    yield document.exitFullscreen();\n                }\n                else {\n                    if (lockingEnabled) {\n                        yield navigator.keyboard.lock([\"Escape\"]);\n                    }\n                    yield document.body.requestFullscreen();\n                }\n            }\n        }));\n    }\n    mouseMoved() {\n        this.canvas.style.cursor = \"default\";\n        this.mouseTimeout = MOUSE_TIMEOUT;\n    }\n    updateMouse(dt) {\n        if (this.mouseTimeout > 0) {\n            this.mouseTimeout = Math.max(0, this.mouseTimeout - dt);\n            if (this.mouseTimeout === 0) {\n                this.canvas.style.cursor = \"none\";\n            }\n        }\n    }\n    updateCanvasSize() {\n        const { width, height } = this;\n        const scale = Math.max(1, Math.floor(Math.min(window.innerWidth / width, window.innerHeight / height)));\n        const style = this.canvas.style;\n        style.width = width * scale + \"px\";\n        style.height = height * scale + \"px\";\n    }\n    gameLoop() {\n        const currentUpdateTime = performance.now();\n        const dt = util_1.clamp((currentUpdateTime - this.lastUpdateTime) / 1000, 0, MAX_DT);\n        this.update(dt);\n        this.lastUpdateTime = currentUpdateTime;\n        const { ctx, width, height } = this;\n        ctx.save();\n        ctx.imageSmoothingEnabled = false;\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fillRect(0, 0, width, height);\n        this.draw(ctx, width, height);\n        ctx.restore();\n        this.nextFrame();\n    }\n    nextFrame() {\n        this.gameLoopId = requestAnimationFrame(this.gameLoopCallback);\n    }\n    update(dt) {\n        this.gamepad.update();\n        this.updateMouse(dt);\n        this.scenes.update(dt);\n    }\n    draw(ctx, width, height) {\n        this.scenes.draw(ctx, width, height);\n    }\n    start() {\n        if (this.gameLoopId == null) {\n            this.lastUpdateTime = performance.now();\n            this.nextFrame();\n        }\n    }\n    stop() {\n        if (this.gameLoopId != null) {\n            cancelAnimationFrame(this.gameLoopId);\n            this.gameLoopId = null;\n        }\n    }\n}\nexports.Game = Game;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvR2FtZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9HYW1lLnRzPzZkNDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNzZXRzIH0gZnJvbSBcIi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IENhbXBhaWduIH0gZnJvbSBcIi4vQ2FtcGFpZ25cIjtcclxuaW1wb3J0IHsgY2xhbXAgfSBmcm9tIFwiLi91dGlsXCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJNYW5hZ2VyIH0gZnJvbSBcIi4vaW5wdXQvQ29udHJvbGxlck1hbmFnZXJcIjtcclxuaW1wb3J0IHsgY3JlYXRlQ2FudmFzLCBnZXRSZW5kZXJpbmdDb250ZXh0IH0gZnJvbSBcIi4vZ3JhcGhpY3NcIjtcclxuaW1wb3J0IHsgR0FNRV9DQU5WQVNfSEVJR0hULCBHQU1FX0NBTlZBU19XSURUSCB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBHYW1lcGFkSW5wdXQgfSBmcm9tIFwiLi9pbnB1dC9HYW1lcGFkSW5wdXRcIjtcclxuaW1wb3J0IHsgS2V5Ym9hcmQgfSBmcm9tIFwiLi9pbnB1dC9LZXlib2FyZFwiO1xyXG5pbXBvcnQgeyBTY2VuZXMgfSBmcm9tIFwiLi9TY2VuZXNcIjtcclxuXHJcbi8qKlxyXG4gKiBNYXggdGltZSBkZWx0YSAoaW4gcykuIElmIGdhbWUgZnJlZXplcyBmb3IgYSBmZXcgc2Vjb25kcyBmb3Igd2hhdGV2ZXIgcmVhc29uLCB3ZSBkb24ndCB3YW50XHJcbiAqIHVwZGF0ZXMgdG8ganVtcCB0b28gbXVjaC5cclxuICovXHJcbmNvbnN0IE1BWF9EVCA9IDAuMTtcclxuXHJcbi8qKiBOdW1iZXIgb2Ygc2Vjb25kcyB0aGUgbW91c2UgaXMgdmlzaWJsZSBhZnRlciBtb3ZpbmcgaXQgKi9cclxuY29uc3QgTU9VU0VfVElNRU9VVCA9IDIuMDtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBHYW1lIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBjb250cm9sbGVyTWFuYWdlciA9IENvbnRyb2xsZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkga2V5Ym9hcmQgPSBuZXcgS2V5Ym9hcmQoKTtcclxuICAgIHB1YmxpYyByZWFkb25seSBnYW1lcGFkID0gbmV3IEdhbWVwYWRJbnB1dCgpO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHNjZW5lcyA9IG5ldyBTY2VuZXModGhpcyk7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgYXNzZXRzID0gbmV3IEFzc2V0cygpO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGNhbXBhaWduID0gbmV3IENhbXBhaWduKHRoaXMpO1xyXG5cclxuICAgIHB1YmxpYyBiYWNrZ3JvdW5kQ29sb3I6IHN0cmluZyA9IFwiYmxhY2tcIjtcclxuXHJcbiAgICBwdWJsaWMgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGdhbWVMb29wQ2FsbGJhY2sgPSB0aGlzLmdhbWVMb29wLmJpbmQodGhpcyk7XHJcbiAgICBwcml2YXRlIGdhbWVMb29wSWQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBsYXN0VXBkYXRlVGltZTogbnVtYmVyID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBwcml2YXRlIG1vdXNlVGltZW91dDogbnVtYmVyID0gTU9VU0VfVElNRU9VVDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IHdpZHRoOiBudW1iZXIgPSBHQU1FX0NBTlZBU19XSURUSCwgcHVibGljIHJlYWRvbmx5IGhlaWdodDogbnVtYmVyID0gR0FNRV9DQU5WQVNfSEVJR0hUKSB7XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5jYW52YXMgPSBjcmVhdGVDYW52YXMod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgLy8gRGVzeW5jaHJvbml6ZWQgc291bmRzIGxpa2UgYSBnb29kIGlkZWEgYnV0IHVuZm9ydHVuYXRlbHkgaXQgcHJldmVudHMgcGl4ZWxhdGVkIGdyYXBoaWNzXHJcbiAgICAgICAgLy8gb24gc29tZSBzeXN0ZW1zIChDaHJvbWUrV2luZG93cytOVmlkaWEgZm9yIGV4YW1wbGUgd2hpY2ggZm9yY2VzIGJpbGluZWFyIGZpbHRlcmluZykuIFNvXHJcbiAgICAgICAgLy8gaXQgaXMgZGVhY3RpdmF0ZWQgaGVyZS5cclxuICAgICAgICB0aGlzLmN0eCA9IGdldFJlbmRlcmluZ0NvbnRleHQoY2FudmFzLCBcIjJkXCIsIHsgYWxwaGE6IGZhbHNlLCBkZXN5bmNocm9uaXplZDogZmFsc2UgfSk7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBjYW52YXMuc3R5bGU7XHJcbiAgICAgICAgc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgc3R5bGUubWFyZ2luID0gXCJhdXRvXCI7XHJcbiAgICAgICAgc3R5bGUubGVmdCA9IHN0eWxlLnRvcCA9IHN0eWxlLnJpZ2h0ID0gc3R5bGUuYm90dG9tID0gXCIwXCI7XHJcbiAgICAgICAgc3R5bGUuaW1hZ2VSZW5kZXJpbmcgPSBcInBpeGVsYXRlZFwiO1xyXG4gICAgICAgIHN0eWxlLmltYWdlUmVuZGVyaW5nID0gXCJjcmlzcC1lZGdlc1wiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ2FudmFzU2l6ZSgpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHRoaXMudXBkYXRlQ2FudmFzU2l6ZSgpKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsICgpID0+IHRoaXMubW91c2VNb3ZlZCgpKTtcclxuXHJcbiAgICAgICAgLy8gVXNlIEFsdCtFbnRlciB0byB0b2dnbGUgZnVsbHNjcmVlbiBtb2RlLlxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9ja2luZ0VuYWJsZWQgPSBcImtleWJvYXJkXCIgaW4gbmF2aWdhdG9yICYmIFwibG9ja1wiIGluIG5hdmlnYXRvci5rZXlib2FyZCAmJiB0eXBlb2YgbmF2aWdhdG9yLmtleWJvYXJkLmxvY2sgPT09IFwiZnVuY3Rpb25cIjtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBicm93c2VyIGlzIGluIGZ1bGwgc2NyZWVuIG1vZGUgQU5EIGZ1bGxzY3JlZW4gaGFzIGJlZW4gdHJpZ2dlcmVkIGJ5IG91ciBvd24ga2V5Ym9hcmQgc2hvcnRjdXQuLi5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihkaXNwbGF5LW1vZGU6IGZ1bGxzY3JlZW4pXCIpLm1hdGNoZXMgJiYgZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NraW5nRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iua2V5Ym9hcmQudW5sb2NrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NraW5nRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3Iua2V5Ym9hcmQubG9jayhbXCJFc2NhcGVcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBkb2N1bWVudC5ib2R5LnJlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtb3VzZU1vdmVkKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgIHRoaXMubW91c2VUaW1lb3V0ID0gTU9VU0VfVElNRU9VVDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU1vdXNlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZVRpbWVvdXQgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VUaW1lb3V0ID0gTWF0aC5tYXgoMCwgdGhpcy5tb3VzZVRpbWVvdXQgLSBkdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5tb3VzZVRpbWVvdXQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmN1cnNvciA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ2FudmFzU2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5taW4od2luZG93LmlubmVyV2lkdGggLyB3aWR0aCwgd2luZG93LmlubmVySGVpZ2h0IC8gaGVpZ2h0KSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMuY2FudmFzLnN0eWxlO1xyXG4gICAgICAgIHN0eWxlLndpZHRoID0gd2lkdGggKiBzY2FsZSArIFwicHhcIjtcclxuICAgICAgICBzdHlsZS5oZWlnaHQgPSBoZWlnaHQgKiBzY2FsZSArIFwicHhcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdhbWVMb29wKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVcGRhdGVUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgY29uc3QgZHQgPSBjbGFtcCgoY3VycmVudFVwZGF0ZVRpbWUgLSB0aGlzLmxhc3RVcGRhdGVUaW1lKSAvIDEwMDAsIDAsIE1BWF9EVCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoZHQpO1xyXG4gICAgICAgIHRoaXMubGFzdFVwZGF0ZVRpbWUgPSBjdXJyZW50VXBkYXRlVGltZTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBjdHgsIHdpZHRoLCBoZWlnaHQgfSA9IHRoaXM7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmRyYXcoY3R4LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG5cclxuICAgICAgICB0aGlzLm5leHRGcmFtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbmV4dEZyYW1lKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZUxvb3BJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmdhbWVMb29wQ2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZXBhZC51cGRhdGUoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZU1vdXNlKGR0KTtcclxuICAgICAgICB0aGlzLnNjZW5lcy51cGRhdGUoZHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmVzLmRyYXcoY3R4LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZUxvb3BJZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFVwZGF0ZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RnJhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0b3AoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZUxvb3BJZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZ2FtZUxvb3BJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZUxvb3BJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBaUJBO0FBQUE7QUFBQTtBQWhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9IQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/Game.js\n");
    
    /***/ }),
    
    /***/ "./lib/GlobalState.js":
    /*!****************************!*\
      !*** ./lib/GlobalState.js ***!
      \****************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GlobalState = void 0;\nvar GlobalStateKey;\n(function (GlobalStateKey) {\n    GlobalStateKey[\"BEAT_GAME_ONCE\"] = \"beatGame\";\n    GlobalStateKey[\"ACHIEVED_ENDINGS\"] = \"achievedEndings\";\n})(GlobalStateKey || (GlobalStateKey = {}));\nclass GlobalState {\n    static getParsedValueByKey(key, fallback) {\n        const serialized = localStorage.getItem(key);\n        if (serialized) {\n            try {\n                const parsed = JSON.parse(serialized);\n                return parsed || fallback;\n            }\n            catch (e) {\n                console.error(e);\n                return fallback;\n            }\n        }\n        else {\n            return fallback;\n        }\n    }\n    static setKeyValuePair(key, value) {\n        try {\n            const serialized = JSON.stringify(value);\n            localStorage.setItem(key, serialized);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    static getHasBeatenGame() {\n        return GlobalState.getParsedValueByKey(GlobalStateKey.BEAT_GAME_ONCE, false);\n    }\n    static setHasBeatenGame() {\n        GlobalState.setKeyValuePair(GlobalStateKey.BEAT_GAME_ONCE, true);\n    }\n    static getAchievedEndings() {\n        return GlobalState.getParsedValueByKey(GlobalStateKey.ACHIEVED_ENDINGS, []);\n    }\n    static setAchievedEnding(questKey) {\n        const achievedEndings = GlobalState.getParsedValueByKey(GlobalStateKey.ACHIEVED_ENDINGS, []);\n        if (!achievedEndings.includes(questKey)) {\n            achievedEndings.push(questKey);\n            GlobalState.setKeyValuePair(GlobalStateKey.ACHIEVED_ENDINGS, achievedEndings);\n        }\n    }\n}\nexports.GlobalState = GlobalState;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvR2xvYmFsU3RhdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvR2xvYmFsU3RhdGUudHM/YjQwMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBRdWVzdEtleSB9IGZyb20gXCIuL1F1ZXN0c1wiO1xyXG5cclxuZW51bSBHbG9iYWxTdGF0ZUtleSB7XHJcbiAgQkVBVF9HQU1FX09OQ0UgPSBcImJlYXRHYW1lXCIsXHJcbiAgQUNISUVWRURfRU5ESU5HUyA9IFwiYWNoaWV2ZWRFbmRpbmdzXCJcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdsb2JhbFN0YXRlIHtcclxuICBwcml2YXRlIHN0YXRpYyBnZXRQYXJzZWRWYWx1ZUJ5S2V5PFQ+IChrZXk6IEdsb2JhbFN0YXRlS2V5LCBmYWxsYmFjazogVCk6IFQge1xyXG4gICAgY29uc3Qgc2VyaWFsaXplZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICBpZiAoc2VyaWFsaXplZCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2VyaWFsaXplZCkgYXMgVDtcclxuICAgICAgICByZXR1cm4gcGFyc2VkIHx8IGZhbGxiYWNrO1xyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICByZXR1cm4gZmFsbGJhY2s7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHNldEtleVZhbHVlUGFpcjxUPiAoa2V5OiBHbG9iYWxTdGF0ZUtleSwgdmFsdWU6IFQpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgc2VyaWFsaXplZCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldEhhc0JlYXRlbkdhbWUgKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIEdsb2JhbFN0YXRlLmdldFBhcnNlZFZhbHVlQnlLZXk8Ym9vbGVhbj4oR2xvYmFsU3RhdGVLZXkuQkVBVF9HQU1FX09OQ0UsIGZhbHNlKTtcclxuICB9XHJcbiAgcHVibGljIHN0YXRpYyBzZXRIYXNCZWF0ZW5HYW1lICgpOiB2b2lkIHtcclxuICAgIEdsb2JhbFN0YXRlLnNldEtleVZhbHVlUGFpcjxib29sZWFuPihHbG9iYWxTdGF0ZUtleS5CRUFUX0dBTUVfT05DRSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldEFjaGlldmVkRW5kaW5ncyAoKTogUXVlc3RLZXlbXSB7XHJcbiAgICByZXR1cm4gR2xvYmFsU3RhdGUuZ2V0UGFyc2VkVmFsdWVCeUtleTxRdWVzdEtleVtdPihHbG9iYWxTdGF0ZUtleS5BQ0hJRVZFRF9FTkRJTkdTLCBbXSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIHNldEFjaGlldmVkRW5kaW5nIChxdWVzdEtleTogUXVlc3RLZXkpOiB2b2lkIHtcclxuICAgIGNvbnN0IGFjaGlldmVkRW5kaW5ncyA9IEdsb2JhbFN0YXRlLmdldFBhcnNlZFZhbHVlQnlLZXk8UXVlc3RLZXlbXT4oR2xvYmFsU3RhdGVLZXkuQUNISUVWRURfRU5ESU5HUywgW10pO1xyXG4gICAgaWYgKCFhY2hpZXZlZEVuZGluZ3MuaW5jbHVkZXMocXVlc3RLZXkpKSB7XHJcbiAgICAgIGFjaGlldmVkRW5kaW5ncy5wdXNoKHF1ZXN0S2V5KTtcclxuICAgICAgR2xvYmFsU3RhdGUuc2V0S2V5VmFsdWVQYWlyPFF1ZXN0S2V5W10+KEdsb2JhbFN0YXRlS2V5LkFDSElFVkVEX0VORElOR1MsIGFjaGlldmVkRW5kaW5ncyk7XHJcbiAgICB9XHJcbiAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/GlobalState.js\n");
    
    /***/ }),
    
    /***/ "./lib/MapInfo.js":
    /*!************************!*\
      !*** ./lib/MapInfo.js ***!
      \************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapInfo = exports.MapObjectType = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst level_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../assets/maps/level.json */ \"./assets/maps/level.json\"));\nvar MapObjectType;\n(function (MapObjectType) {\n    MapObjectType[\"ENTITY\"] = \"entity\";\n    MapObjectType[\"TRIGGER\"] = \"trigger\";\n    MapObjectType[\"POINTER\"] = \"pointer\";\n    MapObjectType[\"GATE\"] = \"gate\";\n    MapObjectType[\"BOUNDS\"] = \"bounds\";\n    MapObjectType[\"SOUND\"] = \"sound\";\n})(MapObjectType = exports.MapObjectType || (exports.MapObjectType = {}));\nclass MapInfo {\n    getLayer(type, name) {\n        var _a;\n        return (_a = level_json_1.default.layers.find(layer => layer.type === type && layer.name === name)) !== null && _a !== void 0 ? _a : null;\n    }\n    getObject(name) {\n        var _a, _b;\n        return (_b = (_a = this.getLayer(\"objectgroup\", \"objects\")) === null || _a === void 0 ? void 0 : _a.objects.find(object => object.name === name)) !== null && _b !== void 0 ? _b : null;\n    }\n    getObjects(type) {\n        var _a, _b;\n        return (_b = (_a = this.getLayer(\"objectgroup\", \"objects\")) === null || _a === void 0 ? void 0 : _a.objects.filter(object => !type || object.type === type)) !== null && _b !== void 0 ? _b : [];\n    }\n    getPlayerStart() {\n        const mapHeight = MapInfo.getMapSize().height;\n        const object = this.getObject(\"player\");\n        if (object) {\n            return { x: object.x, y: mapHeight - object.y };\n        }\n        else {\n            return { x: 0, y: 0 };\n        }\n    }\n    getGameObjectInfos(type) {\n        const mapHeight = MapInfo.getMapSize().height;\n        return this.getObjects(type).map(object => {\n            var _a;\n            return ({\n                name: object.name,\n                x: object.x,\n                y: mapHeight - object.y,\n                type: object.type,\n                width: object.width,\n                height: object.height,\n                properties: ((_a = object.properties) !== null && _a !== void 0 ? _a : []).reduce((props, property) => {\n                    props[property.name] = property.value;\n                    return props;\n                }, {})\n            });\n        });\n    }\n    getEntities() {\n        return this.getGameObjectInfos(MapObjectType.ENTITY);\n    }\n    getSounds() {\n        return this.getGameObjectInfos(MapObjectType.SOUND);\n    }\n    getPointers() {\n        return this.getGameObjectInfos(MapObjectType.POINTER);\n    }\n    getTriggerObjects() {\n        return this.getGameObjectInfos(MapObjectType.TRIGGER);\n    }\n    getBoundObjects() {\n        return this.getGameObjectInfos(MapObjectType.BOUNDS);\n    }\n    getGateObjects() {\n        return this.getGameObjectInfos(MapObjectType.GATE);\n    }\n    static normalizeCoordinates(objects) {\n        const mapHeight = MapInfo.getMapSize().height;\n        objects.forEach(o => { o.y = mapHeight - o.y; });\n        return objects;\n    }\n    static getMapSize() {\n        return {\n            width: level_json_1.default.width * level_json_1.default.tilewidth,\n            height: level_json_1.default.height * level_json_1.default.tileheight\n        };\n    }\n}\nexports.MapInfo = MapInfo;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvTWFwSW5mby5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9NYXBJbmZvLnRzPzQxYTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGpzb24sIHsgTWFwTGF5ZXJKU09OVHlwZSwgTWFwT2JqZWN0SlNPTiB9IGZyb20gXCIuLi9hc3NldHMvbWFwcy9sZXZlbC5qc29uXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJMaWtlIH0gZnJvbSBcIi4vZ3JhcGhpY3MvVmVjdG9yMlwiO1xyXG5cclxuZXhwb3J0IGVudW0gTWFwT2JqZWN0VHlwZSB7XHJcbiAgICBFTlRJVFkgPSBcImVudGl0eVwiLFxyXG4gICAgVFJJR0dFUiA9IFwidHJpZ2dlclwiLFxyXG4gICAgUE9JTlRFUiA9IFwicG9pbnRlclwiLFxyXG4gICAgR0FURSA9IFwiZ2F0ZVwiLFxyXG4gICAgQk9VTkRTID0gXCJib3VuZHNcIixcclxuICAgIFNPVU5EID0gXCJzb3VuZFwiXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR2FtZU9iamVjdFByb3BlcnRpZXMge1xyXG4gICAgZGlyZWN0aW9uPzogXCJ1cFwiIHwgXCJkb3duXCIgfCBcImxlZnRcIiB8IFwicmlnaHRcIjtcclxuICAgIGRpc3RhbmNlOiBudW1iZXI7XHJcbiAgICB2ZWxvY2l0eTogbnVtYmVyO1xyXG4gICAgdGFyZ2V0Pzogc3RyaW5nO1xyXG4gICAgZHVyYXRpb24/OiBudW1iZXI7XHJcbiAgICB0ZWxlcG9ydFk/OiBudW1iZXI7XHJcbiAgICBkaXNhYmxlUGFydGljbGVzPzogYm9vbGVhbjtcclxuICAgIHNldEdsb2JhbEtleT86IHN0cmluZztcclxuICAgIHNldEdsb2JhbFZhbD86IHN0cmluZztcclxuICAgIHNldERpYWxvZ0VudGl0eT86IHN0cmluZztcclxuICAgIHNldERpYWxvZ1ZhbHVlPzogc3RyaW5nO1xyXG4gICAgY29udGVudD86IHN0cmluZztcclxuICAgIGVudGVyRmFkZVRpbWU/OiBudW1iZXI7XHJcbiAgICBlbnRlclNsZWVwVGltZT86IG51bWJlcjtcclxuICAgIGVudGVyU291bmQ/OiBzdHJpbmc7XHJcbiAgICBleGl0RmFkZVRpbWU/OiBudW1iZXI7XHJcbiAgICBleGl0U2xlZXBUaW1lPzogbnVtYmVyO1xyXG4gICAgZXhpdFNvdW5kPzogc3RyaW5nO1xyXG4gICAgYmdtPzogc3RyaW5nO1xyXG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xyXG4gICAgaWRlbnRpZmllcj86IHN0cmluZztcclxuICAgIGludGVuc2l0eT86IG51bWJlcjtcclxuICAgIHZvbHVtZT86IG51bWJlcjtcclxuICAgIHNvdW5kPzogc3RyaW5nO1xyXG4gICAgY29sPzogbnVtYmVyO1xyXG4gICAgcm93PzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEdhbWVPYmplY3RJbmZvIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHR5cGU6IHN0cmluZztcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxuICAgIHByb3BlcnRpZXM6IEdhbWVPYmplY3RQcm9wZXJ0aWVzO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTWFwSW5mbyB7XHJcbiAgICBwcml2YXRlIGdldExheWVyPFQgZXh0ZW5kcyBzdHJpbmc+KHR5cGU6IFQsIG5hbWU6IHN0cmluZyk6IE1hcExheWVySlNPTlR5cGU8VD4gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gPE1hcExheWVySlNPTlR5cGU8VD4+anNvbi5sYXllcnMuZmluZChsYXllciA9PiBsYXllci50eXBlID09PSB0eXBlICYmIGxheWVyLm5hbWUgPT09IG5hbWUpID8/IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRPYmplY3QobmFtZTogc3RyaW5nKTogTWFwT2JqZWN0SlNPTiB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldExheWVyKFwib2JqZWN0Z3JvdXBcIiwgXCJvYmplY3RzXCIpPy5vYmplY3RzLmZpbmQob2JqZWN0ID0+IG9iamVjdC5uYW1lID09PSBuYW1lKSA/PyBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0T2JqZWN0cyh0eXBlPzogc3RyaW5nKTogTWFwT2JqZWN0SlNPTltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXllcihcIm9iamVjdGdyb3VwXCIsIFwib2JqZWN0c1wiKT8ub2JqZWN0cy5maWx0ZXIob2JqZWN0ID0+ICF0eXBlIHx8IG9iamVjdC50eXBlID09PSB0eXBlKSA/PyBbXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGxheWVyU3RhcnQoKTogVmVjdG9yMkxpa2Uge1xyXG4gICAgICAgIGNvbnN0IG1hcEhlaWdodCA9IE1hcEluZm8uZ2V0TWFwU2l6ZSgpLmhlaWdodDtcclxuICAgICAgICBjb25zdCBvYmplY3QgPSB0aGlzLmdldE9iamVjdChcInBsYXllclwiKTtcclxuXHJcbiAgICAgICAgaWYgKG9iamVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyB4OiBvYmplY3QueCwgeTogbWFwSGVpZ2h0IC0gb2JqZWN0LnkgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4geyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRHYW1lT2JqZWN0SW5mb3ModHlwZTogTWFwT2JqZWN0VHlwZSk6IEdhbWVPYmplY3RJbmZvW10ge1xyXG4gICAgICAgIGNvbnN0IG1hcEhlaWdodCA9IE1hcEluZm8uZ2V0TWFwU2l6ZSgpLmhlaWdodDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T2JqZWN0cyh0eXBlKS5tYXAob2JqZWN0ID0+ICh7XHJcbiAgICAgICAgICAgIG5hbWU6IG9iamVjdC5uYW1lLFxyXG4gICAgICAgICAgICB4OiBvYmplY3QueCxcclxuICAgICAgICAgICAgeTogbWFwSGVpZ2h0IC0gb2JqZWN0LnksXHJcbiAgICAgICAgICAgIHR5cGU6IG9iamVjdC50eXBlLFxyXG4gICAgICAgICAgICB3aWR0aDogb2JqZWN0LndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IG9iamVjdC5oZWlnaHQsXHJcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IChvYmplY3QucHJvcGVydGllcyA/PyBbXSkucmVkdWNlKChwcm9wcywgcHJvcGVydHkpID0+IHtcclxuICAgICAgICAgICAgICAgIHByb3BzW3Byb3BlcnR5Lm5hbWVdID0gcHJvcGVydHkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcHM7XHJcbiAgICAgICAgICAgIH0sIHt9KVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RW50aXRpZXMoKTogR2FtZU9iamVjdEluZm9bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R2FtZU9iamVjdEluZm9zKE1hcE9iamVjdFR5cGUuRU5USVRZKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U291bmRzKCk6IEdhbWVPYmplY3RJbmZvW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEdhbWVPYmplY3RJbmZvcyhNYXBPYmplY3RUeXBlLlNPVU5EKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UG9pbnRlcnMoKTogR2FtZU9iamVjdEluZm9bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R2FtZU9iamVjdEluZm9zKE1hcE9iamVjdFR5cGUuUE9JTlRFUik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRyaWdnZXJPYmplY3RzKCk6IEdhbWVPYmplY3RJbmZvW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEdhbWVPYmplY3RJbmZvcyhNYXBPYmplY3RUeXBlLlRSSUdHRVIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRCb3VuZE9iamVjdHMoKTogR2FtZU9iamVjdEluZm9bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R2FtZU9iamVjdEluZm9zKE1hcE9iamVjdFR5cGUuQk9VTkRTKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0R2F0ZU9iamVjdHMoKTogR2FtZU9iamVjdEluZm9bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R2FtZU9iamVjdEluZm9zKE1hcE9iamVjdFR5cGUuR0FURSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBub3JtYWxpemVDb29yZGluYXRlcyhvYmplY3RzOiBNYXBPYmplY3RKU09OW10pOiBNYXBPYmplY3RKU09OW10ge1xyXG4gICAgICAgIGNvbnN0IG1hcEhlaWdodCA9IE1hcEluZm8uZ2V0TWFwU2l6ZSgpLmhlaWdodDtcclxuICAgICAgICBvYmplY3RzLmZvckVhY2gobyA9PiB7IG8ueSA9IG1hcEhlaWdodCAtIG8ueTsgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvYmplY3RzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TWFwU2l6ZSgpOiB7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBqc29uLndpZHRoICoganNvbi50aWxld2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDoganNvbi5oZWlnaHQgKiBqc29uLnRpbGVoZWlnaHRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/MapInfo.js\n");
    
    /***/ }),
    
    /***/ "./lib/Menu.js":
    /*!*********************!*\
      !*** ./lib/Menu.js ***!
      \*********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MenuList = exports.MenuItem = exports.MenuAlignment = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ./Assets */ \"./lib/Assets.js\");\nconst Signal_1 = __webpack_require__(/*! ./Signal */ \"./lib/Signal.js\");\nconst Sound_1 = __webpack_require__(/*! ./Sound */ \"./lib/Sound.js\");\nconst SceneNode_1 = __webpack_require__(/*! ./scene/SceneNode */ \"./lib/scene/SceneNode.js\");\nvar MenuAlignment;\n(function (MenuAlignment) {\n    MenuAlignment[MenuAlignment[\"LEFT\"] = 0] = \"LEFT\";\n    MenuAlignment[MenuAlignment[\"CENTER\"] = 1] = \"CENTER\";\n    MenuAlignment[MenuAlignment[\"RIGHT\"] = 2] = \"RIGHT\";\n})(MenuAlignment = exports.MenuAlignment || (exports.MenuAlignment = {}));\n/**\n * Simple MenuItem Class for usage in a MenuList.\n * Currently, each item is only rendered as simple text. The focused state is visualized via an\n * additional `►` character as prefix. The item instances don't need to be manually drawn, since the\n * MenuList class' draw method will take care of it.\n */\nclass MenuItem {\n    constructor(id, label, font, color, x, y, enabled = true) {\n        this.id = id;\n        this.label = label;\n        this.font = font;\n        this.color = color;\n        this.x = x;\n        this.y = y;\n        this.enabled = enabled;\n        this.focused = false;\n    }\n    /**\n     * Draw method for a single ListItem. Is automatically called when the parent\n     * MenuList's draw method is called.\n     *\n     * @param ctx CanvasRenderingContext2D\n     */\n    draw(ctx, align) {\n        ctx.save();\n        const alpha = this.enabled ? 1 : 0.35;\n        let x = this.x;\n        const y = this.y;\n        const text = this.label;\n        const width = this.font.measureText(text).width;\n        if (align === MenuAlignment.CENTER) {\n            x -= Math.round(width / 2);\n        }\n        this.font.drawText(ctx, text, x, y, this.color, 0, alpha);\n        if (this.focused) {\n            ctx.drawImage(MenuItem.selectorImage, x - 13, y + 2);\n        }\n        ctx.restore();\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/menu_selector.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], MenuItem, \"selectorImage\", void 0);\nexports.MenuItem = MenuItem;\n/**\n * A simple MenuList that can hold MenuItems and navigate them in two directions via methods. On\n * each navigational change, the new MenuItem is focused. When calling the `executeAction` method a\n * signal is emitted containing the focused MenuItem's ID. Disabled MenuItems will be skipped\n * automatically when navigating. The draw method of the list instance has to be called to have all\n * containing buttons be drawn automatically.\n */\nclass MenuList extends SceneNode_1.SceneNode {\n    constructor(_a = {}) {\n        var { align = MenuAlignment.LEFT } = _a, args = tslib_1.__rest(_a, [\"align\"]);\n        super(args);\n        this.items = [];\n        this.onActivated = new Signal_1.Signal();\n        this.align = align;\n    }\n    /**\n     * Adds an arbitrary number of menu items to the menu list\n     * The first available menu item will be focused automatically\n     * @param items\n     */\n    addItems(...items) {\n        this.items.push(...items);\n        this.focusFirstItem();\n    }\n    /**\n     * Clears all menu items from the menu instance\n     */\n    reset() {\n        this.items = [];\n    }\n    /**\n     * Sets an arbitrary number of menu items to the menu list and overrides any previously added\n     * items. The first available menu item will be focused automatically.\n     */\n    setItems(...items) {\n        this.items = [...items];\n        this.focusFirstItem();\n        return this;\n    }\n    /**\n     * Finds and focuses the first available item if no item was focused before.\n     */\n    focusFirstItem() {\n        if (!this.getFocusedItem()) {\n            const index = this.items.findIndex(item => item.enabled);\n            if (index > -1) {\n                this.items[index].focused = true;\n            }\n        }\n    }\n    getFocusedItem() {\n        return this.items.find(item => item.focused);\n    }\n    getFocusedItemIndex() {\n        return this.items.findIndex(item => item.focused);\n    }\n    unfocusAllItems() {\n        this.items.forEach(item => { item.focused = false; });\n    }\n    focusItem(item) {\n        this.unfocusAllItems();\n        item.focused = true;\n    }\n    /**\n     * Recursive method to focus the next item in the direction provided in the argument.\n     * @param currentIndex - The index of the currently focused item in the items array\n     * @param direction    - Direction in which the next item should be searched for.\n     *                       Either 1 (forwards) or -1 (backwards)\n     */\n    findAndFocusNextItem(currentIndex, direction) {\n        const min = direction > 0 ? 0 : (this.items.length - 1);\n        const max = direction > 0 ? (this.items.length - 1) : 0;\n        const nextIndex = (currentIndex === max) ? min : currentIndex + direction;\n        const nextItem = this.items[nextIndex];\n        if (nextItem.enabled) {\n            this.focusItem(this.items[nextIndex]);\n        }\n        else {\n            this.findAndFocusNextItem(nextIndex, direction);\n        }\n        MenuList.click.stop();\n        MenuList.click.play();\n    }\n    /**\n     * Method to navigate the focus of the menu list to the next item\n     */\n    next() {\n        this.findAndFocusNextItem(this.getFocusedItemIndex(), 1);\n    }\n    /**\n     * Method to navigate the focus of the menu list to the previous item\n     */\n    prev() {\n        this.findAndFocusNextItem(this.getFocusedItemIndex(), -1);\n    }\n    executeAction(sound = MenuList.confirm) {\n        const focusedButton = this.getFocusedItem();\n        if (focusedButton && focusedButton.enabled) {\n            sound.stop();\n            sound.play();\n            this.onActivated.emit(focusedButton.id);\n        }\n    }\n    draw(ctx) {\n        this.items.forEach(item => {\n            item.draw(ctx, this.align);\n        });\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/interface/click.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], MenuList, \"click\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/interface/confirm.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], MenuList, \"confirm\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/interface/select.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], MenuList, \"select\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/interface/bass.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], MenuList, \"pause\", void 0);\nexports.MenuList = MenuList;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvTWVudS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9NZW51LnRzP2YwMTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgQml0bWFwRm9udCB9IGZyb20gXCIuL0JpdG1hcEZvbnRcIjtcclxuaW1wb3J0IHsgU2lnbmFsIH0gZnJvbSBcIi4vU2lnbmFsXCI7XHJcbmltcG9ydCB7IFNvdW5kIH0gZnJvbSBcIi4vU291bmRcIjtcclxuaW1wb3J0IHsgU2NlbmVOb2RlLCBTY2VuZU5vZGVBcmdzIH0gZnJvbSBcIi4vc2NlbmUvU2NlbmVOb2RlXCI7XHJcbmltcG9ydCB7IEZyaWVuZGx5RmlyZSB9IGZyb20gXCIuL0ZyaWVuZGx5RmlyZVwiO1xyXG5cclxuZXhwb3J0IGVudW0gTWVudUFsaWdubWVudCB7IExFRlQsIENFTlRFUiwgUklHSFQgfVxyXG5cclxuLyoqXHJcbiAqIFNpbXBsZSBNZW51SXRlbSBDbGFzcyBmb3IgdXNhZ2UgaW4gYSBNZW51TGlzdC5cclxuICogQ3VycmVudGx5LCBlYWNoIGl0ZW0gaXMgb25seSByZW5kZXJlZCBhcyBzaW1wbGUgdGV4dC4gVGhlIGZvY3VzZWQgc3RhdGUgaXMgdmlzdWFsaXplZCB2aWEgYW5cclxuICogYWRkaXRpb25hbCBg4pa6YCBjaGFyYWN0ZXIgYXMgcHJlZml4LiBUaGUgaXRlbSBpbnN0YW5jZXMgZG9uJ3QgbmVlZCB0byBiZSBtYW51YWxseSBkcmF3biwgc2luY2UgdGhlXHJcbiAqIE1lbnVMaXN0IGNsYXNzJyBkcmF3IG1ldGhvZCB3aWxsIHRha2UgY2FyZSBvZiBpdC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNZW51SXRlbSB7XHJcbiAgICBwdWJsaWMgaWQ6IHN0cmluZztcclxuICAgIHB1YmxpYyBsYWJlbDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBmb250OiBCaXRtYXBGb250O1xyXG4gICAgcHJpdmF0ZSBjb2xvcjogXCJibGFja1wiIHwgXCJ3aGl0ZVwiO1xyXG4gICAgcHVibGljIHg6IG51bWJlcjtcclxuICAgIHB1YmxpYyB5OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZW5hYmxlZDogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBmb2N1c2VkOiBib29sZWFuO1xyXG5cclxuICAgIEBhc3NldChcInNwcml0ZXMvbWVudV9zZWxlY3Rvci5wbmdcIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNlbGVjdG9ySW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIGlkOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcsIGZvbnQ6IEJpdG1hcEZvbnQsIGNvbG9yOiBcImJsYWNrXCIgfCBcIndoaXRlXCIsIHg6IG51bWJlciwgeTogbnVtYmVyLFxyXG4gICAgICAgIGVuYWJsZWQgPSB0cnVlXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xyXG4gICAgICAgIHRoaXMuZm9udCA9IGZvbnQ7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLmVuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhdyBtZXRob2QgZm9yIGEgc2luZ2xlIExpc3RJdGVtLiBJcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCB3aGVuIHRoZSBwYXJlbnRcclxuICAgICAqIE1lbnVMaXN0J3MgZHJhdyBtZXRob2QgaXMgY2FsbGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjdHggQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBhbGlnbjogTWVudUFsaWdubWVudCkge1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY29uc3QgYWxwaGEgPSB0aGlzLmVuYWJsZWQgPyAxIDogMC4zNTtcclxuXHJcbiAgICAgICAgbGV0IHggPSB0aGlzLng7XHJcbiAgICAgICAgY29uc3QgeSA9IHRoaXMueTtcclxuXHJcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMubGFiZWw7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLmZvbnQubWVhc3VyZVRleHQodGV4dCkud2lkdGg7XHJcblxyXG5cclxuICAgICAgICBpZiAoYWxpZ24gPT09IE1lbnVBbGlnbm1lbnQuQ0VOVEVSKSB7XHJcbiAgICAgICAgICAgIHggLT0gTWF0aC5yb3VuZCh3aWR0aCAvIDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5mb250LmRyYXdUZXh0KGN0eCwgdGV4dCwgeCwgeSwgdGhpcy5jb2xvciwgMCwgYWxwaGEpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mb2N1c2VkKSB7XHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoTWVudUl0ZW0uc2VsZWN0b3JJbWFnZSwgeCAtIDEzLCB5ICsgMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1lbnVMaXN0QXJncyBleHRlbmRzIFNjZW5lTm9kZUFyZ3Mge1xyXG4gICAgYWxpZ24/OiBNZW51QWxpZ25tZW50O1xyXG59XHJcblxyXG4vKipcclxuICogQSBzaW1wbGUgTWVudUxpc3QgdGhhdCBjYW4gaG9sZCBNZW51SXRlbXMgYW5kIG5hdmlnYXRlIHRoZW0gaW4gdHdvIGRpcmVjdGlvbnMgdmlhIG1ldGhvZHMuIE9uXHJcbiAqIGVhY2ggbmF2aWdhdGlvbmFsIGNoYW5nZSwgdGhlIG5ldyBNZW51SXRlbSBpcyBmb2N1c2VkLiBXaGVuIGNhbGxpbmcgdGhlIGBleGVjdXRlQWN0aW9uYCBtZXRob2QgYVxyXG4gKiBzaWduYWwgaXMgZW1pdHRlZCBjb250YWluaW5nIHRoZSBmb2N1c2VkIE1lbnVJdGVtJ3MgSUQuIERpc2FibGVkIE1lbnVJdGVtcyB3aWxsIGJlIHNraXBwZWRcclxuICogYXV0b21hdGljYWxseSB3aGVuIG5hdmlnYXRpbmcuIFRoZSBkcmF3IG1ldGhvZCBvZiB0aGUgbGlzdCBpbnN0YW5jZSBoYXMgdG8gYmUgY2FsbGVkIHRvIGhhdmUgYWxsXHJcbiAqIGNvbnRhaW5pbmcgYnV0dG9ucyBiZSBkcmF3biBhdXRvbWF0aWNhbGx5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lbnVMaXN0IGV4dGVuZHMgU2NlbmVOb2RlPEZyaWVuZGx5RmlyZT4ge1xyXG4gICAgQGFzc2V0KFwic291bmRzL2ludGVyZmFjZS9jbGljay5tcDNcIilcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xpY2s6IFNvdW5kO1xyXG4gICAgQGFzc2V0KFwic291bmRzL2ludGVyZmFjZS9jb25maXJtLm1wM1wiKVxyXG4gICAgcHVibGljIHN0YXRpYyBjb25maXJtOiBTb3VuZDtcclxuICAgIEBhc3NldChcInNvdW5kcy9pbnRlcmZhY2Uvc2VsZWN0Lm1wM1wiKVxyXG4gICAgcHVibGljIHN0YXRpYyBzZWxlY3Q6IFNvdW5kO1xyXG4gICAgQGFzc2V0KFwic291bmRzL2ludGVyZmFjZS9iYXNzLm1wM1wiKVxyXG4gICAgcHVibGljIHN0YXRpYyBwYXVzZTogU291bmQ7XHJcblxyXG4gICAgcHJpdmF0ZSBhbGlnbjogTWVudUFsaWdubWVudDtcclxuICAgIHByaXZhdGUgaXRlbXM6IE1lbnVJdGVtW10gPSBbXTtcclxuICAgIHB1YmxpYyBvbkFjdGl2YXRlZCA9IG5ldyBTaWduYWw8c3RyaW5nPigpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih7IGFsaWduID0gTWVudUFsaWdubWVudC5MRUZULCAuLi5hcmdzIH06IE1lbnVMaXN0QXJncyA9IHt9KSB7XHJcbiAgICAgICAgc3VwZXIoYXJncyk7XHJcbiAgICAgICAgdGhpcy5hbGlnbiA9IGFsaWduO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhbiBhcmJpdHJhcnkgbnVtYmVyIG9mIG1lbnUgaXRlbXMgdG8gdGhlIG1lbnUgbGlzdFxyXG4gICAgICogVGhlIGZpcnN0IGF2YWlsYWJsZSBtZW51IGl0ZW0gd2lsbCBiZSBmb2N1c2VkIGF1dG9tYXRpY2FsbHlcclxuICAgICAqIEBwYXJhbSBpdGVtc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkSXRlbXMoLi4uaXRlbXM6IE1lbnVJdGVtW10pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLml0ZW1zLnB1c2goLi4uaXRlbXMpO1xyXG4gICAgICAgIHRoaXMuZm9jdXNGaXJzdEl0ZW0oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyBhbGwgbWVudSBpdGVtcyBmcm9tIHRoZSBtZW51IGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLml0ZW1zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIGFuIGFyYml0cmFyeSBudW1iZXIgb2YgbWVudSBpdGVtcyB0byB0aGUgbWVudSBsaXN0IGFuZCBvdmVycmlkZXMgYW55IHByZXZpb3VzbHkgYWRkZWRcclxuICAgICAqIGl0ZW1zLiBUaGUgZmlyc3QgYXZhaWxhYmxlIG1lbnUgaXRlbSB3aWxsIGJlIGZvY3VzZWQgYXV0b21hdGljYWxseS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEl0ZW1zKC4uLml0ZW1zOiBNZW51SXRlbVtdKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IFsuLi5pdGVtc107XHJcbiAgICAgICAgdGhpcy5mb2N1c0ZpcnN0SXRlbSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmluZHMgYW5kIGZvY3VzZXMgdGhlIGZpcnN0IGF2YWlsYWJsZSBpdGVtIGlmIG5vIGl0ZW0gd2FzIGZvY3VzZWQgYmVmb3JlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZvY3VzRmlyc3RJdGVtKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5nZXRGb2N1c2VkSXRlbSgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmVuYWJsZWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLmZvY3VzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Rm9jdXNlZEl0ZW0oKTogTWVudUl0ZW0gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmZvY3VzZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Rm9jdXNlZEl0ZW1JbmRleCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uZm9jdXNlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1bmZvY3VzQWxsSXRlbXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4geyBpdGVtLmZvY3VzZWQgPSBmYWxzZTsgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmb2N1c0l0ZW0oaXRlbTogTWVudUl0ZW0pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnVuZm9jdXNBbGxJdGVtcygpO1xyXG4gICAgICAgIGl0ZW0uZm9jdXNlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWN1cnNpdmUgbWV0aG9kIHRvIGZvY3VzIHRoZSBuZXh0IGl0ZW0gaW4gdGhlIGRpcmVjdGlvbiBwcm92aWRlZCBpbiB0aGUgYXJndW1lbnQuXHJcbiAgICAgKiBAcGFyYW0gY3VycmVudEluZGV4IC0gVGhlIGluZGV4IG9mIHRoZSBjdXJyZW50bHkgZm9jdXNlZCBpdGVtIGluIHRoZSBpdGVtcyBhcnJheVxyXG4gICAgICogQHBhcmFtIGRpcmVjdGlvbiAgICAtIERpcmVjdGlvbiBpbiB3aGljaCB0aGUgbmV4dCBpdGVtIHNob3VsZCBiZSBzZWFyY2hlZCBmb3IuXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgRWl0aGVyIDEgKGZvcndhcmRzKSBvciAtMSAoYmFja3dhcmRzKVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZpbmRBbmRGb2N1c05leHRJdGVtKGN1cnJlbnRJbmRleDogbnVtYmVyLCBkaXJlY3Rpb246IC0xIHwgMSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IGRpcmVjdGlvbiA+IDAgPyAwIDogKHRoaXMuaXRlbXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gZGlyZWN0aW9uID4gMCA/ICh0aGlzLml0ZW1zLmxlbmd0aCAtIDEpIDogMDtcclxuICAgICAgICBjb25zdCBuZXh0SW5kZXggPSAoY3VycmVudEluZGV4ID09PSBtYXgpID8gbWluIDogY3VycmVudEluZGV4ICsgZGlyZWN0aW9uO1xyXG5cclxuICAgICAgICBjb25zdCBuZXh0SXRlbSA9IHRoaXMuaXRlbXNbbmV4dEluZGV4XTtcclxuXHJcbiAgICAgICAgaWYgKG5leHRJdGVtLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5mb2N1c0l0ZW0odGhpcy5pdGVtc1tuZXh0SW5kZXhdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRBbmRGb2N1c05leHRJdGVtKG5leHRJbmRleCwgZGlyZWN0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE1lbnVMaXN0LmNsaWNrLnN0b3AoKTtcclxuICAgICAgICBNZW51TGlzdC5jbGljay5wbGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2QgdG8gbmF2aWdhdGUgdGhlIGZvY3VzIG9mIHRoZSBtZW51IGxpc3QgdG8gdGhlIG5leHQgaXRlbVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbmV4dCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZpbmRBbmRGb2N1c05leHRJdGVtKHRoaXMuZ2V0Rm9jdXNlZEl0ZW1JbmRleCgpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCB0byBuYXZpZ2F0ZSB0aGUgZm9jdXMgb2YgdGhlIG1lbnUgbGlzdCB0byB0aGUgcHJldmlvdXMgaXRlbVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHJldigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZpbmRBbmRGb2N1c05leHRJdGVtKHRoaXMuZ2V0Rm9jdXNlZEl0ZW1JbmRleCgpLCAtMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGV4ZWN1dGVBY3Rpb24oc291bmQ6IFNvdW5kID0gTWVudUxpc3QuY29uZmlybSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGZvY3VzZWRCdXR0b24gPSB0aGlzLmdldEZvY3VzZWRJdGVtKCk7XHJcblxyXG4gICAgICAgIGlmIChmb2N1c2VkQnV0dG9uICYmIGZvY3VzZWRCdXR0b24uZW5hYmxlZCkge1xyXG4gICAgICAgICAgICBzb3VuZC5zdG9wKCk7XHJcbiAgICAgICAgICAgIHNvdW5kLnBsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5vbkFjdGl2YXRlZC5lbWl0KGZvY3VzZWRCdXR0b24uaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaXRlbS5kcmF3KGN0eCwgdGhpcy5hbGlnbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBYUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUE3Q0E7QUFEQTtBQUNBO0FBQUE7QUFYQTtBQThEQTs7Ozs7O0FBTUE7QUFDQTtBQWNBO0FBQUE7QUFDQTtBQUpBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlIQTtBQURBO0FBQ0E7QUFBQTtBQUVBO0FBREE7QUFDQTtBQUFBO0FBRUE7QUFEQTtBQUNBO0FBQUE7QUFFQTtBQURBO0FBQ0E7QUFBQTtBQVJBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/Menu.js\n");
    
    /***/ }),
    
    /***/ "./lib/MountainRiddle.js":
    /*!*******************************!*\
      !*** ./lib/MountainRiddle.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MountainRiddle = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Conversation_1 = __webpack_require__(/*! ./Conversation */ \"./lib/Conversation.js\");\nconst GameScene_1 = __webpack_require__(/*! ./scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Sound_1 = __webpack_require__(/*! ./Sound */ \"./lib/Sound.js\");\nconst Assets_1 = __webpack_require__(/*! ./Assets */ \"./lib/Assets.js\");\nconst AMOUNT_GATE_COLS = 3;\nconst AMOUNT_GATE_ROWS = 5;\nclass MountainRiddle {\n    constructor() {\n        this.attemptCount = 0;\n        this.failed = false;\n        this.cleared = false;\n        this.solution = this.getRandomizedSolution();\n    }\n    getRandomizedSolution() {\n        const solution = [];\n        for (let index = 0; index < AMOUNT_GATE_ROWS; index++) {\n            solution.push(Math.floor(Math.random() * Math.floor(AMOUNT_GATE_COLS)));\n        }\n        return solution;\n    }\n    isCorrectGate(col, row) {\n        return this.solution[row] === col;\n    }\n    checkGate(col, row) {\n        if (!this.failed && !this.cleared && !this.isCorrectGate(col, row)) {\n            this.failRiddle();\n        }\n    }\n    wasAttempted() {\n        return this.attemptCount > 0;\n    }\n    registerAttempt() {\n        this.attemptCount++;\n    }\n    failRiddle() {\n        Conversation_1.Conversation.setGlobal(\"gotTeleported\", \"true\");\n        this.failed = true;\n        this.registerAttempt();\n        GameScene_1.GameScene.wrong.play();\n    }\n    isFailed() {\n        return this.failed;\n    }\n    resetRiddle() {\n        if (this.failed && !this.cleared) {\n            this.solution = this.getRandomizedSolution();\n            this.failed = false;\n        }\n    }\n    isCleared() {\n        return this.cleared;\n    }\n    clearRiddle() {\n        if (!this.cleared) {\n            MountainRiddle.sound.play();\n            this.failed = false;\n            this.cleared = true;\n        }\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/item/fanfare.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], MountainRiddle, \"sound\", void 0);\nexports.MountainRiddle = MountainRiddle;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvTW91bnRhaW5SaWRkbGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvTW91bnRhaW5SaWRkbGUudHM/N2IwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb252ZXJzYXRpb24gfSBmcm9tIFwiLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuL1NvdW5kXCI7XHJcbmltcG9ydCB7IGFzc2V0IH0gZnJvbSBcIi4vQXNzZXRzXCI7XHJcblxyXG5jb25zdCBBTU9VTlRfR0FURV9DT0xTID0gMztcclxuY29uc3QgQU1PVU5UX0dBVEVfUk9XUyA9IDU7XHJcblxyXG5leHBvcnQgY2xhc3MgTW91bnRhaW5SaWRkbGUge1xyXG4gICAgcHJpdmF0ZSBhdHRlbXB0Q291bnQgPSAwO1xyXG4gICAgcHJpdmF0ZSBmYWlsZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgY2xlYXJlZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBzb2x1dGlvbjogbnVtYmVyW107XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL2l0ZW0vZmFuZmFyZS5tcDNcIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNvdW5kOiBTb3VuZDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zb2x1dGlvbiA9IHRoaXMuZ2V0UmFuZG9taXplZFNvbHV0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRSYW5kb21pemVkU29sdXRpb24oKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGNvbnN0IHNvbHV0aW9uOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgQU1PVU5UX0dBVEVfUk9XUzsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBzb2x1dGlvbi5wdXNoKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1hdGguZmxvb3IoQU1PVU5UX0dBVEVfQ09MUykpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzb2x1dGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNDb3JyZWN0R2F0ZShjb2w6IG51bWJlciwgcm93OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zb2x1dGlvbltyb3ddID09PSBjb2w7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoZWNrR2F0ZShjb2w6IG51bWJlciwgcm93OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuZmFpbGVkICYmICF0aGlzLmNsZWFyZWQgJiYgIXRoaXMuaXNDb3JyZWN0R2F0ZShjb2wsIHJvdykpIHtcclxuICAgICAgICAgICAgdGhpcy5mYWlsUmlkZGxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB3YXNBdHRlbXB0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0ZW1wdENvdW50ID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVnaXN0ZXJBdHRlbXB0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYXR0ZW1wdENvdW50Kys7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZhaWxSaWRkbGUoKTogdm9pZCB7XHJcbiAgICAgICAgQ29udmVyc2F0aW9uLnNldEdsb2JhbChcImdvdFRlbGVwb3J0ZWRcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIHRoaXMuZmFpbGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQXR0ZW1wdCgpO1xyXG4gICAgICAgIEdhbWVTY2VuZS53cm9uZy5wbGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzRmFpbGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZhaWxlZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVzZXRSaWRkbGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmFpbGVkICYmICF0aGlzLmNsZWFyZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zb2x1dGlvbiA9IHRoaXMuZ2V0UmFuZG9taXplZFNvbHV0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0NsZWFyZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xlYXJlZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYXJSaWRkbGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNsZWFyZWQpIHtcclxuICAgICAgICAgICAgTW91bnRhaW5SaWRkbGUuc291bmQucGxheSgpO1xyXG4gICAgICAgICAgICB0aGlzLmZhaWxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQVNBO0FBUkE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvREE7QUFEQTtBQUNBO0FBQUE7QUFQQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/MountainRiddle.js\n");
    
    /***/ }),
    
    /***/ "./lib/Particles.js":
    /*!**************************!*\
      !*** ./lib/Particles.js ***!
      \**************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.valueCurves = exports.ValueCurve = exports.Particle = exports.ParticleEmitter = exports.Particles = void 0;\nconst constants_1 = __webpack_require__(/*! ./constants */ \"./lib/constants.js\");\nconst Renderer_1 = __webpack_require__(/*! ./Renderer */ \"./lib/Renderer.js\");\nclass Particles {\n    constructor(scene) {\n        this.emitters = [];\n        this.scene = scene;\n    }\n    update(dt) {\n        this.emitters.forEach(emitter => emitter.update(dt));\n    }\n    addEmittersToRenderingQueue() {\n        this.emitters.forEach(emitter => {\n            this.scene.renderer.add({\n                type: Renderer_1.RenderingType.PARTICLE_EMITTER,\n                layer: emitter.renderingLayer,\n                zIndex: emitter.zIndex,\n                emitter\n            });\n        });\n    }\n    // Direct drawing of particles is deactivated since it's handled via rendering engine\n    draw(ctx) { }\n    addEmitter(emitter) {\n        this.emitters.push(emitter);\n    }\n    dropEmitter(emitter) {\n        const index = this.emitters.indexOf(emitter);\n        if (index >= 0) {\n            this.emitters.splice(index, 1);\n            return true;\n        }\n        return false;\n    }\n    createEmitter(args) {\n        const emitter = new ParticleEmitter(args);\n        this.addEmitter(emitter);\n        return emitter;\n    }\n}\nexports.Particles = Particles;\nclass ParticleEmitter {\n    constructor(args) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        this.particles = [];\n        this.x = args.position.x;\n        this.y = args.position.y;\n        this.offsetGenerator = toGenerator((_a = args.offset) !== null && _a !== void 0 ? _a : ({ x: 0, y: 0 }));\n        this.velocityGenerator = toGenerator((_b = args.velocity) !== null && _b !== void 0 ? _b : ({ x: 0, y: 0 }));\n        this.colorGenerator = toGenerator((_c = args.color) !== null && _c !== void 0 ? _c : \"white\");\n        this.alphaGenerator = toGenerator((_d = args.alpha) !== null && _d !== void 0 ? _d : 1);\n        this.sizeGenerator = toGenerator((_e = args.size) !== null && _e !== void 0 ? _e : 4);\n        this.gravityGenerator = toGenerator((_f = args.gravity) !== null && _f !== void 0 ? _f : { x: 0, y: constants_1.GRAVITY });\n        this.lifetimeGenerator = toGenerator((_g = args.lifetime) !== null && _g !== void 0 ? _g : 5);\n        this.angleGenerator = toGenerator((_h = args.angle) !== null && _h !== void 0 ? _h : 0);\n        this.angleSpeedGenerator = toGenerator((_j = args.angleSpeed) !== null && _j !== void 0 ? _j : 0);\n        this.gravity = this.gravityGenerator();\n        this.breakFactor = args.breakFactor || 1;\n        this.blendMode = args.blendMode || \"source-over\";\n        this.alphaCurve = args.alphaCurve || exports.valueCurves.constant;\n        this.sizeCurve = args.sizeCurve || exports.valueCurves.constant;\n        this.renderingLayer = args.renderingLayer || Renderer_1.RenderingLayer.PARTICLES;\n        this.zIndex = args.zIndex !== undefined ? args.zIndex : 0;\n        this.updateMethod = args.update;\n        function toGenerator(obj) {\n            if (obj instanceof Function) {\n                return obj;\n            }\n            else {\n                return () => obj;\n            }\n        }\n    }\n    setPosition(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    clear() {\n        this.particles = [];\n    }\n    emit(count = 1) {\n        for (let i = 0; i < count; i++) {\n            this.emitSingle();\n        }\n    }\n    emitSingle() {\n        const v = this.velocityGenerator();\n        const off = this.offsetGenerator();\n        const particle = new Particle(this, this.x + off.x, this.y + off.y, v.x, v.y, this.angleGenerator(), this.angleSpeedGenerator(), this.colorGenerator(), this.sizeGenerator(), this.lifetimeGenerator(), this.alphaGenerator());\n        this.particles.push(particle);\n        return particle;\n    }\n    update(dt) {\n        this.gravity = this.gravityGenerator();\n        for (let i = this.particles.length - 1; i >= 0; i--) {\n            if (this.particles[i].update(dt)) {\n                this.particles.splice(i, 1);\n            }\n        }\n        if (this.updateMethod) {\n            for (const p of this.particles) {\n                this.updateMethod(p);\n            }\n        }\n    }\n    draw(ctx) {\n        ctx.save();\n        ctx.globalCompositeOperation = this.blendMode;\n        this.particles.forEach(p => p.draw(ctx));\n        ctx.restore();\n    }\n}\nexports.ParticleEmitter = ParticleEmitter;\nclass Particle {\n    constructor(emitter, x, y, vx = 0, vy = 0, angle = 0, angleSpeed = 0, imageOrColor = \"white\", size = 4, lifetime = 1, alpha = 1) {\n        this.emitter = emitter;\n        this.x = x;\n        this.y = y;\n        this.vx = vx;\n        this.vy = vy;\n        this.angle = angle;\n        this.angleSpeed = angleSpeed;\n        this.imageOrColor = imageOrColor;\n        this.size = size;\n        this.lifetime = lifetime;\n        this.alpha = alpha;\n        this.progress = 0;\n        this.halfSize = this.size / 2;\n        this.originalLifetime = this.lifetime;\n        this.progress = 0;\n    }\n    update(dt) {\n        // Life\n        this.lifetime -= dt;\n        if (this.lifetime <= 0) {\n            // Tell parent that it may eliminate this particle\n            return true;\n        }\n        else {\n            this.progress = 1 - (this.lifetime / this.originalLifetime);\n        }\n        // Gravity\n        this.vx += this.emitter.gravity.x * dt;\n        this.vy += this.emitter.gravity.y * dt;\n        if (this.emitter.breakFactor !== 1) {\n            const factor = Math.pow(this.emitter.breakFactor, dt);\n            this.vx *= factor;\n            this.vy *= factor;\n        }\n        // Movement\n        this.x += this.vx * dt;\n        this.y += this.vy * dt;\n        this.angle += this.angleSpeed * dt;\n        return false;\n    }\n    draw(ctx) {\n        ctx.save();\n        ctx.globalAlpha = this.alpha * this.emitter.alphaCurve.get(this.progress);\n        ctx.translate(this.x, -this.y);\n        if (this.angle) {\n            ctx.rotate(this.angle);\n        }\n        if (this.imageOrColor instanceof Object) {\n            // Image\n            const img = this.imageOrColor;\n            const w = (img.naturalWidth || img.width), h = (img.naturalHeight || img.height);\n            const sz = Math.max(w, h);\n            ctx.drawImage(img, -this.halfSize, -this.halfSize, this.size * w / sz, this.size * h / sz);\n        }\n        else {\n            // Color\n            ctx.fillStyle = this.imageOrColor;\n            ctx.fillRect(-this.halfSize, -this.halfSize, this.size, this.size);\n        }\n        ctx.restore();\n    }\n}\nexports.Particle = Particle;\nclass ValueCurve {\n    constructor(func, steps = 1023) {\n        this.func = func;\n        this.steps = steps;\n        this.mapping = [];\n        for (let i = 0; i <= steps; i++) {\n            this.mapping[i] = func(i / steps);\n        }\n    }\n    get(p) {\n        const i = Math.round(p * this.steps);\n        return this.mapping[i < 0 ? 0 : i > this.steps ? this.steps : i];\n    }\n    getExact(p) {\n        return this.func(p);\n    }\n    invert() {\n        return new ValueCurve((p) => this.getExact(1 - p), this.steps);\n    }\n    append(otherCurve, relativeLength = 1) {\n        const total = 1 + relativeLength;\n        const mid = (total - relativeLength) / total;\n        return new ValueCurve((p) => p < mid ? this.getExact(p / mid) :\n            otherCurve.getExact((p - mid) / relativeLength), Math.max(this.steps, otherCurve.steps));\n    }\n}\nexports.ValueCurve = ValueCurve;\nfunction trapezeFunction(v, v1 = v) {\n    return (p) => p < v ? p / v : p > 1 - v1 ? (1 - p) / v1 : 1;\n}\nexports.valueCurves = {\n    constant: new ValueCurve((p) => 1, 1),\n    linear: new ValueCurve((p) => p),\n    trapeze: (v = 0.1, v1 = v) => new ValueCurve(trapezeFunction(v, v1)),\n    cos: (v = 0.1, v1 = v) => // smooth 0 to 1 to 0\n     new ValueCurve((p) => 0.5 - 0.5 * Math.cos(Math.PI * trapezeFunction(v, v1)(p))),\n    cubic: new ValueCurve((p) => 3 * p * p - 2 * p * p * p) // smooth 0 to 1\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvUGFydGljbGVzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1BhcnRpY2xlcy50cz84YTEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgR1JBVklUWSB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciwgUmVuZGVyaW5nVHlwZSB9IGZyb20gXCIuL1JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJMaWtlIH0gZnJvbSBcIi4vZ3JhcGhpY3MvVmVjdG9yMlwiO1xyXG5cclxudHlwZSBQYXJ0aWNsZUFwcGVhcmFuY2UgPSBzdHJpbmcgfCBIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTENhbnZhc0VsZW1lbnQ7XHJcblxyXG50eXBlIE51bWJlckdlbmVyYXRvciA9ICgpID0+IG51bWJlcjtcclxuXHJcbnR5cGUgVmVjdG9yR2VuZXJhdG9yID0gKCkgPT4gVmVjdG9yMkxpa2U7XHJcblxyXG50eXBlIFBhcnRpY2xlQXBwZWFyYW5jZUdlbmVyYXRvciA9ICgpID0+IFBhcnRpY2xlQXBwZWFyYW5jZTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGFydGljbGVFbWl0dGVyQXJndW1lbnRzIHtcclxuICAgIHBvc2l0aW9uOiBWZWN0b3IyTGlrZTtcclxuICAgIG9mZnNldD86IFZlY3RvcjJMaWtlIHwgVmVjdG9yR2VuZXJhdG9yO1xyXG4gICAgdmVsb2NpdHk/OiBWZWN0b3IyTGlrZSB8IFZlY3RvckdlbmVyYXRvcjtcclxuICAgIGNvbG9yPzogUGFydGljbGVBcHBlYXJhbmNlIHwgUGFydGljbGVBcHBlYXJhbmNlR2VuZXJhdG9yO1xyXG4gICAgYWxwaGE/OiBudW1iZXIgfCBOdW1iZXJHZW5lcmF0b3I7XHJcbiAgICBzaXplPzogbnVtYmVyIHwgTnVtYmVyR2VuZXJhdG9yO1xyXG4gICAgZ3Jhdml0eT86IFZlY3RvcjJMaWtlIHwgVmVjdG9yR2VuZXJhdG9yO1xyXG4gICAgbGlmZXRpbWU/OiBudW1iZXIgfCBOdW1iZXJHZW5lcmF0b3I7XHJcbiAgICBicmVha0ZhY3Rvcj86IG51bWJlcjtcclxuICAgIGJsZW5kTW9kZT86IHN0cmluZztcclxuICAgIGFscGhhQ3VydmU/OiBWYWx1ZUN1cnZlO1xyXG4gICAgc2l6ZUN1cnZlPzogVmFsdWVDdXJ2ZTtcclxuICAgIGFuZ2xlPzogbnVtYmVyIHwgTnVtYmVyR2VuZXJhdG9yO1xyXG4gICAgYW5nbGVTcGVlZD86IG51bWJlciB8IE51bWJlckdlbmVyYXRvcjtcclxuICAgIHJlbmRlcmluZ0xheWVyPzogUmVuZGVyaW5nTGF5ZXI7XHJcbiAgICB6SW5kZXg/OiBudW1iZXI7XHJcbiAgICB1cGRhdGU/OiAocDogUGFydGljbGUpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYXJ0aWNsZXMge1xyXG4gICAgcHJpdmF0ZSBzY2VuZTogR2FtZVNjZW5lO1xyXG4gICAgcHJpdmF0ZSBlbWl0dGVyczogUGFydGljbGVFbWl0dGVyW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSkge1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVtaXR0ZXJzLmZvckVhY2goZW1pdHRlciA9PiBlbWl0dGVyLnVwZGF0ZShkdCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRFbWl0dGVyc1RvUmVuZGVyaW5nUXVldWUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lbWl0dGVycy5mb3JFYWNoKGVtaXR0ZXIgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLlBBUlRJQ0xFX0VNSVRURVIsXHJcbiAgICAgICAgICAgICAgICBsYXllcjogZW1pdHRlci5yZW5kZXJpbmdMYXllcixcclxuICAgICAgICAgICAgICAgIHpJbmRleDogZW1pdHRlci56SW5kZXgsXHJcbiAgICAgICAgICAgICAgICBlbWl0dGVyXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERpcmVjdCBkcmF3aW5nIG9mIHBhcnRpY2xlcyBpcyBkZWFjdGl2YXRlZCBzaW5jZSBpdCdzIGhhbmRsZWQgdmlhIHJlbmRlcmluZyBlbmdpbmVcclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7fVxyXG5cclxuICAgIHB1YmxpYyBhZGRFbWl0dGVyKGVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZW1pdHRlcnMucHVzaChlbWl0dGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJvcEVtaXR0ZXIoZW1pdHRlcjogUGFydGljbGVFbWl0dGVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVtaXR0ZXJzLmluZGV4T2YoZW1pdHRlcik7XHJcblxyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZUVtaXR0ZXIoYXJnczogUGFydGljbGVFbWl0dGVyQXJndW1lbnRzKSB7XHJcbiAgICAgICAgY29uc3QgZW1pdHRlciA9IG5ldyBQYXJ0aWNsZUVtaXR0ZXIoYXJncyk7XHJcbiAgICAgICAgdGhpcy5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gZW1pdHRlcjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcnRpY2xlRW1pdHRlciB7XHJcbiAgICBwcml2YXRlIHBhcnRpY2xlczogUGFydGljbGVbXTtcclxuICAgIHByaXZhdGUgeDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB5OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG9mZnNldEdlbmVyYXRvcjogVmVjdG9yR2VuZXJhdG9yO1xyXG4gICAgcHJpdmF0ZSB2ZWxvY2l0eUdlbmVyYXRvcjogVmVjdG9yR2VuZXJhdG9yO1xyXG4gICAgcHJpdmF0ZSBjb2xvckdlbmVyYXRvcjogUGFydGljbGVBcHBlYXJhbmNlR2VuZXJhdG9yO1xyXG4gICAgcHJpdmF0ZSBzaXplR2VuZXJhdG9yOiBOdW1iZXJHZW5lcmF0b3I7XHJcbiAgICBwcml2YXRlIGdyYXZpdHlHZW5lcmF0b3I6IFZlY3RvckdlbmVyYXRvcjtcclxuICAgIHByaXZhdGUgbGlmZXRpbWVHZW5lcmF0b3I6IE51bWJlckdlbmVyYXRvcjtcclxuICAgIHByaXZhdGUgYWxwaGFHZW5lcmF0b3I6IE51bWJlckdlbmVyYXRvcjtcclxuICAgIHByaXZhdGUgYW5nbGVHZW5lcmF0b3I6IE51bWJlckdlbmVyYXRvcjtcclxuICAgIHByaXZhdGUgYW5nbGVTcGVlZEdlbmVyYXRvcjogTnVtYmVyR2VuZXJhdG9yO1xyXG4gICAgcHVibGljIGdyYXZpdHk6IFZlY3RvcjJMaWtlO1xyXG4gICAgcHVibGljIGJyZWFrRmFjdG9yOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGJsZW5kTW9kZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGFscGhhQ3VydmU6IFZhbHVlQ3VydmU7XHJcbiAgICBwdWJsaWMgc2l6ZUN1cnZlOiBWYWx1ZUN1cnZlO1xyXG4gICAgcHVibGljIHJlbmRlcmluZ0xheWVyOiBSZW5kZXJpbmdMYXllcjtcclxuICAgIHB1YmxpYyB6SW5kZXg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdXBkYXRlTWV0aG9kOiAoKHA6IFBhcnRpY2xlKSA9PiB2b2lkKSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcmdzOiBQYXJ0aWNsZUVtaXR0ZXJBcmd1bWVudHMpIHtcclxuICAgICAgICB0aGlzLnBhcnRpY2xlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMueCA9IGFyZ3MucG9zaXRpb24ueDtcclxuICAgICAgICB0aGlzLnkgPSBhcmdzLnBvc2l0aW9uLnk7XHJcbiAgICAgICAgdGhpcy5vZmZzZXRHZW5lcmF0b3IgPSB0b0dlbmVyYXRvcihhcmdzLm9mZnNldCA/PyAoe3g6IDAsIHk6IDB9KSk7XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eUdlbmVyYXRvciA9IHRvR2VuZXJhdG9yKGFyZ3MudmVsb2NpdHkgPz8gKHt4OiAwLCB5OiAwfSkpO1xyXG4gICAgICAgIHRoaXMuY29sb3JHZW5lcmF0b3IgPSB0b0dlbmVyYXRvcihhcmdzLmNvbG9yID8/IFwid2hpdGVcIik7XHJcbiAgICAgICAgdGhpcy5hbHBoYUdlbmVyYXRvciA9IHRvR2VuZXJhdG9yKGFyZ3MuYWxwaGEgPz8gMSk7XHJcbiAgICAgICAgdGhpcy5zaXplR2VuZXJhdG9yID0gdG9HZW5lcmF0b3IoYXJncy5zaXplID8/IDQpO1xyXG4gICAgICAgIHRoaXMuZ3Jhdml0eUdlbmVyYXRvciA9IHRvR2VuZXJhdG9yKGFyZ3MuZ3Jhdml0eSA/PyB7eDogMCwgeTogR1JBVklUWX0pO1xyXG4gICAgICAgIHRoaXMubGlmZXRpbWVHZW5lcmF0b3IgPSB0b0dlbmVyYXRvcihhcmdzLmxpZmV0aW1lID8/IDUpO1xyXG4gICAgICAgIHRoaXMuYW5nbGVHZW5lcmF0b3IgPSB0b0dlbmVyYXRvcihhcmdzLmFuZ2xlID8/IDApO1xyXG4gICAgICAgIHRoaXMuYW5nbGVTcGVlZEdlbmVyYXRvciA9IHRvR2VuZXJhdG9yKGFyZ3MuYW5nbGVTcGVlZCA/PyAwKTtcclxuICAgICAgICB0aGlzLmdyYXZpdHkgPSB0aGlzLmdyYXZpdHlHZW5lcmF0b3IoKTtcclxuICAgICAgICB0aGlzLmJyZWFrRmFjdG9yID0gYXJncy5icmVha0ZhY3RvciB8fCAxO1xyXG4gICAgICAgIHRoaXMuYmxlbmRNb2RlID0gYXJncy5ibGVuZE1vZGUgfHwgXCJzb3VyY2Utb3ZlclwiO1xyXG4gICAgICAgIHRoaXMuYWxwaGFDdXJ2ZSA9IGFyZ3MuYWxwaGFDdXJ2ZSB8fCB2YWx1ZUN1cnZlcy5jb25zdGFudDtcclxuICAgICAgICB0aGlzLnNpemVDdXJ2ZSA9IGFyZ3Muc2l6ZUN1cnZlIHx8IHZhbHVlQ3VydmVzLmNvbnN0YW50O1xyXG4gICAgICAgIHRoaXMucmVuZGVyaW5nTGF5ZXIgPSBhcmdzLnJlbmRlcmluZ0xheWVyIHx8IFJlbmRlcmluZ0xheWVyLlBBUlRJQ0xFUztcclxuICAgICAgICB0aGlzLnpJbmRleCA9IGFyZ3MuekluZGV4ICE9PSB1bmRlZmluZWQgPyBhcmdzLnpJbmRleCA6IDA7XHJcbiAgICAgICAgdGhpcy51cGRhdGVNZXRob2QgPSBhcmdzLnVwZGF0ZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdG9HZW5lcmF0b3I8dHA+KG9iajogdHAgfCAoKCkgPT4gdHApKTogKCgpID0+IHRwKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiBvYmo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFBvc2l0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBhcnRpY2xlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbWl0KGNvdW50ID0gMSk6IHZvaWQge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRTaW5nbGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVtaXRTaW5nbGUoKTogUGFydGljbGUge1xyXG4gICAgICAgIGNvbnN0IHYgPSB0aGlzLnZlbG9jaXR5R2VuZXJhdG9yKCk7XHJcbiAgICAgICAgY29uc3Qgb2ZmID0gdGhpcy5vZmZzZXRHZW5lcmF0b3IoKTtcclxuXHJcbiAgICAgICAgY29uc3QgcGFydGljbGUgPSBuZXcgUGFydGljbGUoXHJcbiAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgIHRoaXMueCArIG9mZi54LFxyXG4gICAgICAgICAgICB0aGlzLnkgKyBvZmYueSxcclxuICAgICAgICAgICAgdi54LFxyXG4gICAgICAgICAgICB2LnksXHJcbiAgICAgICAgICAgIHRoaXMuYW5nbGVHZW5lcmF0b3IoKSxcclxuICAgICAgICAgICAgdGhpcy5hbmdsZVNwZWVkR2VuZXJhdG9yKCksXHJcbiAgICAgICAgICAgIHRoaXMuY29sb3JHZW5lcmF0b3IoKSxcclxuICAgICAgICAgICAgdGhpcy5zaXplR2VuZXJhdG9yKCksXHJcbiAgICAgICAgICAgIHRoaXMubGlmZXRpbWVHZW5lcmF0b3IoKSxcclxuICAgICAgICAgICAgdGhpcy5hbHBoYUdlbmVyYXRvcigpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZXMucHVzaChwYXJ0aWNsZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBwYXJ0aWNsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdyYXZpdHkgPSB0aGlzLmdyYXZpdHlHZW5lcmF0b3IoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMucGFydGljbGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnRpY2xlc1tpXS51cGRhdGUoZHQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnRpY2xlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZU1ldGhvZCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHAgb2YgdGhpcy5wYXJ0aWNsZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWV0aG9kKHApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gdGhpcy5ibGVuZE1vZGU7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZXMuZm9yRWFjaChwID0+IHAuZHJhdyhjdHgpKTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGFydGljbGUge1xyXG4gICAgcHJpdmF0ZSBoYWxmU2l6ZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBvcmlnaW5hbExpZmV0aW1lOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHByb2dyZXNzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgZW1pdHRlcjogUGFydGljbGVFbWl0dGVyLFxyXG4gICAgICAgIHB1YmxpYyB4OiBudW1iZXIsXHJcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgdnggPSAwLFxyXG4gICAgICAgIHB1YmxpYyB2eSA9IDAsXHJcbiAgICAgICAgcHJpdmF0ZSBhbmdsZSA9IDAsXHJcbiAgICAgICAgcHJpdmF0ZSBhbmdsZVNwZWVkID0gMCxcclxuICAgICAgICBwcml2YXRlIGltYWdlT3JDb2xvcjogUGFydGljbGVBcHBlYXJhbmNlID0gXCJ3aGl0ZVwiLFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBzaXplID0gNCxcclxuICAgICAgICBwcml2YXRlIGxpZmV0aW1lID0gMSxcclxuICAgICAgICBwcml2YXRlIGFscGhhID0gMVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5oYWxmU2l6ZSA9IHRoaXMuc2l6ZSAvIDI7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbExpZmV0aW1lID0gdGhpcy5saWZldGltZTtcclxuICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBMaWZlXHJcbiAgICAgICAgdGhpcy5saWZldGltZSAtPSBkdDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubGlmZXRpbWUgPD0gMCkge1xyXG4gICAgICAgICAgICAvLyBUZWxsIHBhcmVudCB0aGF0IGl0IG1heSBlbGltaW5hdGUgdGhpcyBwYXJ0aWNsZVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMSAtICh0aGlzLmxpZmV0aW1lIC8gdGhpcy5vcmlnaW5hbExpZmV0aW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdyYXZpdHlcclxuICAgICAgICB0aGlzLnZ4ICs9IHRoaXMuZW1pdHRlci5ncmF2aXR5LnggKiBkdDtcclxuICAgICAgICB0aGlzLnZ5ICs9IHRoaXMuZW1pdHRlci5ncmF2aXR5LnkgKiBkdDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZW1pdHRlci5icmVha0ZhY3RvciAhPT0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBmYWN0b3IgPSB0aGlzLmVtaXR0ZXIuYnJlYWtGYWN0b3IgKiogZHQ7XHJcbiAgICAgICAgICAgIHRoaXMudnggKj0gZmFjdG9yO1xyXG4gICAgICAgICAgICB0aGlzLnZ5ICo9IGZhY3RvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE1vdmVtZW50XHJcbiAgICAgICAgdGhpcy54ICs9IHRoaXMudnggKiBkdDtcclxuICAgICAgICB0aGlzLnkgKz0gdGhpcy52eSAqIGR0O1xyXG4gICAgICAgIHRoaXMuYW5nbGUgKz0gdGhpcy5hbmdsZVNwZWVkICogZHQ7XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gdGhpcy5hbHBoYSAqIHRoaXMuZW1pdHRlci5hbHBoYUN1cnZlLmdldCh0aGlzLnByb2dyZXNzKTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMueCwgLXRoaXMueSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFuZ2xlKSB7XHJcbiAgICAgICAgICAgIGN0eC5yb3RhdGUodGhpcy5hbmdsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pbWFnZU9yQ29sb3IgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgLy8gSW1hZ2VcclxuICAgICAgICAgICAgY29uc3QgaW1nID0gdGhpcy5pbWFnZU9yQ29sb3I7XHJcbiAgICAgICAgICAgIGNvbnN0IHcgPSAoKDxhbnk+aW1nKS5uYXR1cmFsV2lkdGggfHwgaW1nLndpZHRoKSwgaCA9ICgoPGFueT5pbWcpLm5hdHVyYWxIZWlnaHQgfHwgaW1nLmhlaWdodCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN6ID0gTWF0aC5tYXgodywgaCk7XHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAtdGhpcy5oYWxmU2l6ZSwgLXRoaXMuaGFsZlNpemUsIHRoaXMuc2l6ZSAqIHcgLyBzeiwgdGhpcy5zaXplICogaCAvIHN6KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDb2xvclxyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gKHRoaXMuaW1hZ2VPckNvbG9yIGFzIHN0cmluZyk7XHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgtdGhpcy5oYWxmU2l6ZSwgLXRoaXMuaGFsZlNpemUsIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWYWx1ZUN1cnZlIHtcclxuICAgIHByaXZhdGUgbWFwcGluZzogbnVtYmVyW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGZ1bmM6IChwOiBudW1iZXIpID0+IG51bWJlciwgcHJpdmF0ZSByZWFkb25seSBzdGVwcyA9IDEwMjMpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzdGVwczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwcGluZ1tpXSA9IGZ1bmMoaSAvIHN0ZXBzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldChwOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGkgPSBNYXRoLnJvdW5kKHAgKiB0aGlzLnN0ZXBzKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXBwaW5nW2kgPCAwID8gMCA6IGkgPiB0aGlzLnN0ZXBzID8gdGhpcy5zdGVwcyA6IGldO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFeGFjdChwOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZ1bmMocCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGludmVydCgpOiBWYWx1ZUN1cnZlIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlQ3VydmUoKHApID0+IHRoaXMuZ2V0RXhhY3QoMSAtIHApLCB0aGlzLnN0ZXBzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXBwZW5kKG90aGVyQ3VydmU6IFZhbHVlQ3VydmUsIHJlbGF0aXZlTGVuZ3RoID0gMSk6IFZhbHVlQ3VydmUge1xyXG4gICAgICAgIGNvbnN0IHRvdGFsID0gMSArIHJlbGF0aXZlTGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IG1pZCA9ICh0b3RhbCAtIHJlbGF0aXZlTGVuZ3RoKSAvIHRvdGFsO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmFsdWVDdXJ2ZSgocCkgPT4gcCA8IG1pZCA/IHRoaXMuZ2V0RXhhY3QocCAvIG1pZCkgOlxyXG4gICAgICAgICAgICAgICAgb3RoZXJDdXJ2ZS5nZXRFeGFjdCgocCAtIG1pZCkgLyByZWxhdGl2ZUxlbmd0aCksXHJcbiAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLnN0ZXBzLCBvdGhlckN1cnZlLnN0ZXBzKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyYXBlemVGdW5jdGlvbih2OiBudW1iZXIsIHYxOiBudW1iZXIgPSB2KTogKChwOiBudW1iZXIpID0+IG51bWJlcikge1xyXG4gICAgcmV0dXJuIChwOiBudW1iZXIpID0+IHAgPCB2ID8gcCAvIHYgOiBwID4gMSAtIHYxID8gKDEgLSBwKSAvIHYxIDogMTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHZhbHVlQ3VydmVzID0ge1xyXG4gICAgY29uc3RhbnQ6IG5ldyBWYWx1ZUN1cnZlKChwKSA9PiAxLCAxKSwgLy8gYWx3YXlzIDFcclxuICAgIGxpbmVhcjogbmV3IFZhbHVlQ3VydmUoKHApID0+IHApLCAvLyBsaW5lYXIgMCB0byAxXHJcbiAgICB0cmFwZXplOiAodjogbnVtYmVyID0gMC4xLCB2MTogbnVtYmVyID0gdikgPT4gbmV3IFZhbHVlQ3VydmUodHJhcGV6ZUZ1bmN0aW9uKHYsIHYxKSksIC8vIGJsb2NreSAwIHRvIDEgdG8gMFxyXG4gICAgY29zOiAodjogbnVtYmVyID0gMC4xLCB2MTogbnVtYmVyID0gdikgPT4gLy8gc21vb3RoIDAgdG8gMSB0byAwXHJcbiAgICAgICAgICAgIG5ldyBWYWx1ZUN1cnZlKChwKSA9PiAwLjUgLSAwLjUgKiBNYXRoLmNvcyhNYXRoLlBJICogdHJhcGV6ZUZ1bmN0aW9uKHYsIHYxKShwKSkpLFxyXG4gICAgY3ViaWM6IG5ldyBWYWx1ZUN1cnZlKChwKSA9PiAzICogcCAqIHAgLSAyICogcCAqIHAgKiBwKSAvLyBzbW9vdGggMCB0byAxXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQ0E7QUFDQTtBQStCQTtBQUlBO0FBRkE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQS9DQTtBQWlEQTtBQXNCQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFjQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakhBO0FBbUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBM0VBO0FBNkVBO0FBR0E7QUFBQTtBQUFBO0FBRkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUE3QkE7QUErQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/Particles.js\n");
    
    /***/ }),
    
    /***/ "./lib/PlayerConversation.js":
    /*!***********************************!*\
      !*** ./lib/PlayerConversation.js ***!
      \***********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PlayerConversation = void 0;\nconst Menu_1 = __webpack_require__(/*! ./Menu */ \"./lib/Menu.js\");\nclass PlayerConversation {\n    constructor(player, npc, conversation, autoMove = true) {\n        var _a, _b;\n        this.player = player;\n        this.npc = npc;\n        this.conversation = conversation;\n        this.autoMove = autoMove;\n        this.interaction = null;\n        this.selectedOption = -1;\n        this.interaction = this.conversation.getNextInteraction();\n        this.setSelectedOption(0);\n        this.setBubblesContent();\n        (_b = (_a = this.interaction) === null || _a === void 0 ? void 0 : _a.npcLine) === null || _b === void 0 ? void 0 : _b.executeBeforeLine();\n        npc.meet();\n        // Ensure safe distance to NPC\n        if (this.autoMove) {\n            const minDis = 20;\n            if (Math.abs(player.x - npc.x) < minDis) {\n                if (player.x < npc.x) {\n                    player.startAutoMove(npc.x - minDis, true);\n                }\n                else {\n                    player.startAutoMove(npc.x + minDis, true);\n                }\n            }\n        }\n    }\n    /**\n     * Returns true if conversation has been terminated (one way or the other)\n     */\n    update() {\n        if (!this.interaction || this.conversation.hasEnded()) {\n            if (this.player.playerConversation != null) {\n                this.endConversation();\n            }\n            return true;\n        }\n        this.player.scene.camera.setCinematicBar(1);\n        return false;\n    }\n    setBubblesContent() {\n        if (this.interaction) {\n            const optionsTexts = this.interaction.options.map(options => options.line);\n            if (this.interaction.npcLine) {\n                this.npc.speechBubble.setMessage(this.interaction.npcLine.line);\n                this.npc.speechBubble.show();\n            }\n            if (optionsTexts.length > 0) {\n                this.setSelectedOption(0);\n                this.player.speechBubble.setOptions(optionsTexts, this.npc.speechBubble);\n                this.player.speechBubble.show();\n            }\n        }\n    }\n    setSelectedOption(num = 0) {\n        if (this.interaction && this.interaction.options && this.interaction.options.length > 0) {\n            let sel = num % this.interaction.options.length;\n            if (sel < 0) {\n                sel += this.interaction.options.length;\n            }\n            this.selectedOption = sel;\n        }\n        else {\n            this.selectedOption = -1;\n        }\n        this.player.speechBubble.selectedOptionIndex = this.selectedOption;\n        return this.selectedOption;\n    }\n    handleButton(e) {\n        if (e.isAbort && !e.isPause) {\n            this.endConversation();\n        }\n        else if (!e.repeat) {\n            // Enter to proceed\n            if (e.isConfirm) {\n                this.proceed();\n            }\n            const upDown = (e.isMenuDown ? 1 : 0) - (e.isMenuUp ? 1 : 0);\n            if (upDown !== 0) {\n                Menu_1.MenuList.click.stop();\n                Menu_1.MenuList.click.play();\n                this.setSelectedOption(this.selectedOption + upDown);\n            }\n        }\n    }\n    proceed() {\n        var _a;\n        if (this.interaction) {\n            if (this.npc.speechBubble.isCurrentlyWriting || this.npc.speechBubble.preventUnwantedSelection) {\n                this.npc.speechBubble.isCurrentlyWriting = false;\n                return;\n            }\n            const options = this.interaction.options;\n            if (options && options.length > 0) {\n                // Player could choose between options, confirmed with Enter\n                const index = (options.length === 1) ? 0 : this.selectedOption;\n                const option = options[index];\n                if (option) {\n                    Menu_1.MenuList.select.play();\n                    option.execute();\n                }\n                else {\n                    console.error(\"Tried to execute invalid option at index \" + index\n                        + \" in interaction around line: \" + this.interaction.npcLine);\n                }\n            }\n            if (this.interaction.npcLine) {\n                Menu_1.MenuList.click.stop();\n                Menu_1.MenuList.click.play();\n                // NPC said something, player proceeds without any options\n                this.interaction.npcLine.execute();\n            }\n            this.interaction = this.conversation.getNextInteraction();\n            this.setSelectedOption(-1);\n            this.setBubblesContent();\n        }\n        if (!this.interaction) {\n            this.endConversation();\n        }\n        else {\n            if (this.interaction.npcLine) {\n                // Mostly NPCs execute actions at the beginning of their line, not afterwards\n                (_a = this.npc.face) === null || _a === void 0 ? void 0 : _a.setMode(this.npc.defaultFaceMode);\n                this.interaction.npcLine.executeBeforeLine();\n            }\n        }\n    }\n    endConversation() {\n        this.player.playerConversation = null;\n        this.player.speechBubble.hide();\n        this.npc.speechBubble.hide();\n        this.npc.registerEndedConversation();\n    }\n}\nexports.PlayerConversation = PlayerConversation;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvUGxheWVyQ29udmVyc2F0aW9uLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1BsYXllckNvbnZlcnNhdGlvbi50cz8wOWIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRyb2xsZXJFdmVudCB9IGZyb20gXCIuL2lucHV0L0NvbnRyb2xsZXJFdmVudFwiO1xyXG5pbXBvcnQgeyBDb252ZXJzYXRpb24sIEludGVyYWN0aW9uIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uXCI7XHJcbmltcG9ydCB7IE1lbnVMaXN0IH0gZnJvbSBcIi4vTWVudVwiO1xyXG5pbXBvcnQgeyBOUEMgfSBmcm9tIFwiLi9lbnRpdGllcy9OUENcIjtcclxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vZW50aXRpZXMvUGxheWVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheWVyQ29udmVyc2F0aW9uIHtcclxuICAgIHByaXZhdGUgaW50ZXJhY3Rpb246IEludGVyYWN0aW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkT3B0aW9uID0gLTE7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBwbGF5ZXI6IFBsYXllcixcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgbnBjOiBOUEMsXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjb252ZXJzYXRpb246IENvbnZlcnNhdGlvbixcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGF1dG9Nb3ZlID0gdHJ1ZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcmFjdGlvbiA9IHRoaXMuY29udmVyc2F0aW9uLmdldE5leHRJbnRlcmFjdGlvbigpO1xyXG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRPcHRpb24oMCk7XHJcbiAgICAgICAgdGhpcy5zZXRCdWJibGVzQ29udGVudCgpO1xyXG4gICAgICAgIHRoaXMuaW50ZXJhY3Rpb24/Lm5wY0xpbmU/LmV4ZWN1dGVCZWZvcmVMaW5lKCk7XHJcbiAgICAgICAgbnBjLm1lZXQoKTtcclxuXHJcbiAgICAgICAgLy8gRW5zdXJlIHNhZmUgZGlzdGFuY2UgdG8gTlBDXHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b01vdmUpIHtcclxuICAgICAgICAgICAgY29uc3QgbWluRGlzID0gMjA7XHJcblxyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMocGxheWVyLnggLSBucGMueCkgPCBtaW5EaXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIueCA8IG5wYy54KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnN0YXJ0QXV0b01vdmUobnBjLnggLSBtaW5EaXMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuc3RhcnRBdXRvTW92ZShucGMueCArIG1pbkRpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgY29udmVyc2F0aW9uIGhhcyBiZWVuIHRlcm1pbmF0ZWQgKG9uZSB3YXkgb3IgdGhlIG90aGVyKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5pbnRlcmFjdGlvbiB8fCB0aGlzLmNvbnZlcnNhdGlvbi5oYXNFbmRlZCgpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXllci5wbGF5ZXJDb252ZXJzYXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRDb252ZXJzYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBsYXllci5zY2VuZS5jYW1lcmEuc2V0Q2luZW1hdGljQmFyKDEpO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRCdWJibGVzQ29udGVudCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pbnRlcmFjdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zVGV4dHMgPSB0aGlzLmludGVyYWN0aW9uLm9wdGlvbnMubWFwKG9wdGlvbnMgPT4gb3B0aW9ucy5saW5lKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmludGVyYWN0aW9uLm5wY0xpbmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubnBjLnNwZWVjaEJ1YmJsZS5zZXRNZXNzYWdlKHRoaXMuaW50ZXJhY3Rpb24ubnBjTGluZS5saW5lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubnBjLnNwZWVjaEJ1YmJsZS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zVGV4dHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZE9wdGlvbigwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnNwZWVjaEJ1YmJsZS5zZXRPcHRpb25zKG9wdGlvbnNUZXh0cywgdGhpcy5ucGMuc3BlZWNoQnViYmxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnNwZWVjaEJ1YmJsZS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTZWxlY3RlZE9wdGlvbihudW0gPSAwKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAodGhpcy5pbnRlcmFjdGlvbiAmJiB0aGlzLmludGVyYWN0aW9uLm9wdGlvbnMgJiYgdGhpcy5pbnRlcmFjdGlvbi5vcHRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IHNlbCA9IG51bSAlIHRoaXMuaW50ZXJhY3Rpb24ub3B0aW9ucy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VsIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgc2VsICs9IHRoaXMuaW50ZXJhY3Rpb24ub3B0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSBzZWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wbGF5ZXIuc3BlZWNoQnViYmxlLnNlbGVjdGVkT3B0aW9uSW5kZXggPSB0aGlzLnNlbGVjdGVkT3B0aW9uO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZE9wdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFuZGxlQnV0dG9uKGU6IENvbnRyb2xsZXJFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChlLmlzQWJvcnQgJiYgIWUuaXNQYXVzZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVuZENvbnZlcnNhdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIWUucmVwZWF0KSB7XHJcbiAgICAgICAgICAgIC8vIEVudGVyIHRvIHByb2NlZWRcclxuICAgICAgICAgICAgaWYgKGUuaXNDb25maXJtKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2NlZWQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBEb3duID0gKGUuaXNNZW51RG93biA/IDEgOiAwKSAtIChlLmlzTWVudVVwID8gMSA6IDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHVwRG93biAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgTWVudUxpc3QuY2xpY2suc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgTWVudUxpc3QuY2xpY2sucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZE9wdGlvbih0aGlzLnNlbGVjdGVkT3B0aW9uICsgdXBEb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHByb2NlZWQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJhY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubnBjLnNwZWVjaEJ1YmJsZS5pc0N1cnJlbnRseVdyaXRpbmcgfHwgdGhpcy5ucGMuc3BlZWNoQnViYmxlLnByZXZlbnRVbndhbnRlZFNlbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ucGMuc3BlZWNoQnViYmxlLmlzQ3VycmVudGx5V3JpdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5pbnRlcmFjdGlvbi5vcHRpb25zO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQbGF5ZXIgY291bGQgY2hvb3NlIGJldHdlZW4gb3B0aW9ucywgY29uZmlybWVkIHdpdGggRW50ZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gKG9wdGlvbnMubGVuZ3RoID09PSAxKSA/IDAgOiB0aGlzLnNlbGVjdGVkT3B0aW9uO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gb3B0aW9uc1tpbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIE1lbnVMaXN0LnNlbGVjdC5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJUcmllZCB0byBleGVjdXRlIGludmFsaWQgb3B0aW9uIGF0IGluZGV4IFwiICsgaW5kZXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIiBpbiBpbnRlcmFjdGlvbiBhcm91bmQgbGluZTogXCIgKyB0aGlzLmludGVyYWN0aW9uLm5wY0xpbmVcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlcmFjdGlvbi5ucGNMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICBNZW51TGlzdC5jbGljay5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICBNZW51TGlzdC5jbGljay5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAvLyBOUEMgc2FpZCBzb21ldGhpbmcsIHBsYXllciBwcm9jZWVkcyB3aXRob3V0IGFueSBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICB0aGlzLmludGVyYWN0aW9uLm5wY0xpbmUuZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmludGVyYWN0aW9uID0gdGhpcy5jb252ZXJzYXRpb24uZ2V0TmV4dEludGVyYWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRPcHRpb24oLTEpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJ1YmJsZXNDb250ZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaW50ZXJhY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5lbmRDb252ZXJzYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlcmFjdGlvbi5ucGNMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNb3N0bHkgTlBDcyBleGVjdXRlIGFjdGlvbnMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGVpciBsaW5lLCBub3QgYWZ0ZXJ3YXJkc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ucGMuZmFjZT8uc2V0TW9kZSh0aGlzLm5wYy5kZWZhdWx0RmFjZU1vZGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvbi5ucGNMaW5lLmV4ZWN1dGVCZWZvcmVMaW5lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmRDb252ZXJzYXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIucGxheWVyQ29udmVyc2F0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBsYXllci5zcGVlY2hCdWJibGUuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMubnBjLnNwZWVjaEJ1YmJsZS5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5ucGMucmVnaXN0ZXJFbmRlZENvbnZlcnNhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBRUE7QUFJQTtBQUlBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0pBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/PlayerConversation.js\n");
    
    /***/ }),
    
    /***/ "./lib/Quests.js":
    /*!***********************!*\
      !*** ./lib/Quests.js ***!
      \***********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QuestE = exports.QuestD = exports.QuestC = exports.QuestB = exports.QuestA = exports.Quest = exports.QuestETrigger = exports.QuestDTrigger = exports.QuestCTrigger = exports.QuestBTrigger = exports.QuestATrigger = exports.QuestKey = void 0;\nvar QuestKey;\n(function (QuestKey) {\n    QuestKey[\"A\"] = \"questA\";\n    QuestKey[\"B\"] = \"questB\";\n    QuestKey[\"C\"] = \"questC\";\n    QuestKey[\"D\"] = \"questD\";\n    QuestKey[\"E\"] = \"questE\";\n})(QuestKey = exports.QuestKey || (exports.QuestKey = {}));\nvar QuestATrigger;\n(function (QuestATrigger) {\n    QuestATrigger[QuestATrigger[\"JUST_ARRIVED\"] = 0] = \"JUST_ARRIVED\";\n    QuestATrigger[QuestATrigger[\"TALKED_TO_FIRE\"] = 1] = \"TALKED_TO_FIRE\";\n    QuestATrigger[QuestATrigger[\"GOT_QUEST_FROM_FIRE\"] = 2] = \"GOT_QUEST_FROM_FIRE\";\n    QuestATrigger[QuestATrigger[\"GOT_RUNNING_ABILITY\"] = 3] = \"GOT_RUNNING_ABILITY\";\n    QuestATrigger[QuestATrigger[\"TALKED_TO_TREE\"] = 4] = \"TALKED_TO_TREE\";\n    QuestATrigger[QuestATrigger[\"GOT_QUEST_FROM_TREE\"] = 5] = \"GOT_QUEST_FROM_TREE\";\n    QuestATrigger[QuestATrigger[\"GOT_SEED\"] = 6] = \"GOT_SEED\";\n    QuestATrigger[QuestATrigger[\"PLANTED_SEED\"] = 7] = \"PLANTED_SEED\";\n    QuestATrigger[QuestATrigger[\"TALKED_TO_STONE\"] = 8] = \"TALKED_TO_STONE\";\n    QuestATrigger[QuestATrigger[\"GOT_STONE\"] = 9] = \"GOT_STONE\";\n    QuestATrigger[QuestATrigger[\"THROWN_STONE_INTO_WATER\"] = 10] = \"THROWN_STONE_INTO_WATER\";\n    QuestATrigger[QuestATrigger[\"GOT_MULTIJUMP\"] = 11] = \"GOT_MULTIJUMP\";\n    QuestATrigger[QuestATrigger[\"LEARNED_RAIN_DANCE\"] = 12] = \"LEARNED_RAIN_DANCE\";\n    QuestATrigger[QuestATrigger[\"MADE_RAIN\"] = 13] = \"MADE_RAIN\";\n    QuestATrigger[QuestATrigger[\"TREE_DROPPED_WOOD\"] = 14] = \"TREE_DROPPED_WOOD\";\n    QuestATrigger[QuestATrigger[\"GOT_WOOD\"] = 15] = \"GOT_WOOD\";\n    QuestATrigger[QuestATrigger[\"TALKED_TO_FIRE_WITH_WOOD\"] = 16] = \"TALKED_TO_FIRE_WITH_WOOD\";\n    QuestATrigger[QuestATrigger[\"THROWN_WOOD_INTO_FIRE\"] = 17] = \"THROWN_WOOD_INTO_FIRE\";\n    QuestATrigger[QuestATrigger[\"APOCALYPSE_STARTED\"] = 18] = \"APOCALYPSE_STARTED\";\n    QuestATrigger[QuestATrigger[\"BEAT_FIRE\"] = 19] = \"BEAT_FIRE\";\n    QuestATrigger[QuestATrigger[\"BEAT_GAME\"] = 20] = \"BEAT_GAME\";\n})(QuestATrigger = exports.QuestATrigger || (exports.QuestATrigger = {}));\nvar QuestBTrigger;\n(function (QuestBTrigger) {\n    QuestBTrigger[QuestBTrigger[\"ENDING_TRIGGERED\"] = 0] = \"ENDING_TRIGGERED\";\n})(QuestBTrigger = exports.QuestBTrigger || (exports.QuestBTrigger = {}));\nvar QuestCTrigger;\n(function (QuestCTrigger) {\n    QuestCTrigger[QuestCTrigger[\"ENDING_TRIGGERED\"] = 0] = \"ENDING_TRIGGERED\";\n})(QuestCTrigger = exports.QuestCTrigger || (exports.QuestCTrigger = {}));\nvar QuestDTrigger;\n(function (QuestDTrigger) {\n    QuestDTrigger[QuestDTrigger[\"ENDING_TRIGGERED\"] = 0] = \"ENDING_TRIGGERED\";\n})(QuestDTrigger = exports.QuestDTrigger || (exports.QuestDTrigger = {}));\nvar QuestETrigger;\n(function (QuestETrigger) {\n    QuestETrigger[QuestETrigger[\"ENDING_TRIGGERED\"] = 0] = \"ENDING_TRIGGERED\";\n})(QuestETrigger = exports.QuestETrigger || (exports.QuestETrigger = {}));\nclass Quest {\n    constructor(key, campaign, title, triggerIndices) {\n        this.triggers = [];\n        this.finished = false;\n        this.key = key;\n        this.campaign = campaign;\n        this.title = title;\n        this.triggers = triggerIndices.map(index => ({\n            index,\n            isTriggered: false\n        }));\n    }\n    reset() {\n        this.finished = false;\n        this.triggers.forEach((t, i) => { this.untrigger(i); });\n    }\n    trigger(index) {\n        if (this.triggers[index]) {\n            this.triggers[index].isTriggered = true;\n        }\n    }\n    untrigger(index) {\n        if (this.triggers[index]) {\n            this.triggers[index].isTriggered = false;\n        }\n    }\n    getTriggers() {\n        return this.triggers;\n    }\n    isTriggered(index) {\n        return this.triggers[index].isTriggered || false;\n    }\n    allTriggered() {\n        return this.triggers.every(trigger => trigger.isTriggered);\n    }\n    getHighestTriggerIndex() {\n        return Math.max(...this.triggers.filter(t => t.isTriggered).map(t => t.index), -1);\n    }\n    finish() {\n        this.finished = true;\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\nexports.Quest = Quest;\n/**\n * Standard Ending A. Follow the questline and beat the fire at the end\n */\nclass QuestA extends Quest {\n    constructor(campaign) {\n        super(QuestKey.A, campaign, \"[A]POCALYPSE NOT NOW\", Object.values(QuestATrigger).filter((i) => typeof i === \"number\"));\n    }\n}\nexports.QuestA = QuestA;\n/**\n * Ending B. Helped Dog and Beat fire\n */\nclass QuestB extends Quest {\n    constructor(campaign) {\n        super(QuestKey.B, campaign, \"GOOD [B]OY\", Object.values(QuestBTrigger).filter((i) => typeof i === \"number\"));\n    }\n}\nexports.QuestB = QuestB;\n/**\n * Ending C. Sequence broken and soft locked in cave\n */\nclass QuestC extends Quest {\n    constructor(campaign) {\n        super(QuestKey.C, campaign, \"SOFT LO[C]KED\", Object.values(QuestCTrigger).filter((i) => typeof i === \"number\"));\n    }\n}\nexports.QuestC = QuestC;\n/**\n * Ending D. Petted the dog for quite some time and transcended\n */\nclass QuestD extends Quest {\n    constructor(campaign) {\n        super(QuestKey.D, campaign, \"[D]ROWNED IN ECSTASY\", Object.values(QuestDTrigger).filter((i) => typeof i === \"number\"));\n    }\n}\nexports.QuestD = QuestD;\n/**\n * Ending E. Petted the dog for quite some time and transcended\n */\nclass QuestE extends Quest {\n    constructor(campaign) {\n        super(QuestKey.E, campaign, \"AWAK[E]\", Object.values(QuestETrigger).filter((i) => typeof i === \"number\"));\n    }\n}\nexports.QuestE = QuestE;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvUXVlc3RzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1F1ZXN0cy50cz8yODI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhbXBhaWduIH0gZnJvbSBcIi4vQ2FtcGFpZ25cIjtcclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0S2V5IHtcclxuICAgIEEgPSBcInF1ZXN0QVwiLFxyXG4gICAgQiA9IFwicXVlc3RCXCIsXHJcbiAgICBDID0gXCJxdWVzdENcIixcclxuICAgIEQgPSBcInF1ZXN0RFwiLFxyXG4gICAgRSA9IFwicXVlc3RFXCJcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUXVlc3RBVHJpZ2dlciB7XHJcbiAgICBKVVNUX0FSUklWRUQsXHJcbiAgICBUQUxLRURfVE9fRklSRSxcclxuICAgIEdPVF9RVUVTVF9GUk9NX0ZJUkUsXHJcbiAgICBHT1RfUlVOTklOR19BQklMSVRZLFxyXG4gICAgVEFMS0VEX1RPX1RSRUUsXHJcbiAgICBHT1RfUVVFU1RfRlJPTV9UUkVFLFxyXG4gICAgR09UX1NFRUQsXHJcbiAgICBQTEFOVEVEX1NFRUQsXHJcbiAgICBUQUxLRURfVE9fU1RPTkUsXHJcbiAgICBHT1RfU1RPTkUsXHJcbiAgICBUSFJPV05fU1RPTkVfSU5UT19XQVRFUixcclxuICAgIEdPVF9NVUxUSUpVTVAsXHJcbiAgICBMRUFSTkVEX1JBSU5fREFOQ0UsXHJcbiAgICBNQURFX1JBSU4sXHJcbiAgICBUUkVFX0RST1BQRURfV09PRCxcclxuICAgIEdPVF9XT09ELFxyXG4gICAgVEFMS0VEX1RPX0ZJUkVfV0lUSF9XT09ELFxyXG4gICAgVEhST1dOX1dPT0RfSU5UT19GSVJFLFxyXG4gICAgQVBPQ0FMWVBTRV9TVEFSVEVELFxyXG4gICAgQkVBVF9GSVJFLFxyXG4gICAgQkVBVF9HQU1FXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0QlRyaWdnZXIge1xyXG4gICAgRU5ESU5HX1RSSUdHRVJFRFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBRdWVzdENUcmlnZ2VyIHtcclxuICAgIEVORElOR19UUklHR0VSRURcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUXVlc3REVHJpZ2dlciB7XHJcbiAgICBFTkRJTkdfVFJJR0dFUkVEXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFF1ZXN0RVRyaWdnZXIge1xyXG4gICAgRU5ESU5HX1RSSUdHRVJFRFxyXG59XHJcblxyXG50eXBlIFRyaWdnZXJEZWZpbml0aW9uID0ge1xyXG4gICAgaW5kZXg6IG51bWJlcjtcclxuICAgIGlzVHJpZ2dlcmVkOiBib29sZWFuO1xyXG59O1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFF1ZXN0IHtcclxuICAgIHB1YmxpYyByZWFkb25seSBrZXk6IFF1ZXN0S2V5O1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGNhbXBhaWduOiBDYW1wYWlnbjtcclxuICAgIHByb3RlY3RlZCByZWFkb25seSB0cmlnZ2VyczogVHJpZ2dlckRlZmluaXRpb25bXSA9IFtdO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHRpdGxlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGZpbmlzaGVkID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGtleTogUXVlc3RLZXksIGNhbXBhaWduOiBDYW1wYWlnbiwgdGl0bGU6IHN0cmluZywgdHJpZ2dlckluZGljZXM6IG51bWJlcltdKSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy5jYW1wYWlnbiA9IGNhbXBhaWduO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuXHJcbiAgICAgICAgdGhpcy50cmlnZ2VycyA9IHRyaWdnZXJJbmRpY2VzLm1hcChpbmRleCA9PiAoe1xyXG4gICAgICAgICAgICBpbmRleCxcclxuICAgICAgICAgICAgaXNUcmlnZ2VyZWQ6IGZhbHNlXHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50cmlnZ2Vycy5mb3JFYWNoKCh0LCBpKSA9PiB7IHRoaXMudW50cmlnZ2VyKGkpOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdHJpZ2dlcihpbmRleDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMudHJpZ2dlcnNbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcnNbaW5kZXhdLmlzVHJpZ2dlcmVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVudHJpZ2dlcihpbmRleDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMudHJpZ2dlcnNbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcnNbaW5kZXhdLmlzVHJpZ2dlcmVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRUcmlnZ2VycygpOiBUcmlnZ2VyRGVmaW5pdGlvbltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VycztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNUcmlnZ2VyZWQoaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyaWdnZXJzW2luZGV4XS5pc1RyaWdnZXJlZCB8fCBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWxsVHJpZ2dlcmVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyaWdnZXJzLmV2ZXJ5KHRyaWdnZXIgPT4gdHJpZ2dlci5pc1RyaWdnZXJlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoLi4udGhpcy50cmlnZ2Vycy5maWx0ZXIodCA9PiB0LmlzVHJpZ2dlcmVkKS5tYXAodCA9PiB0LmluZGV4KSwgLTEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmaW5pc2goKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGFuZGFyZCBFbmRpbmcgQS4gRm9sbG93IHRoZSBxdWVzdGxpbmUgYW5kIGJlYXQgdGhlIGZpcmUgYXQgdGhlIGVuZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFF1ZXN0QSBleHRlbmRzIFF1ZXN0IHtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvciAoY2FtcGFpZ246IENhbXBhaWduKSB7XHJcbiAgICAgICAgc3VwZXIoXHJcbiAgICAgICAgICAgIFF1ZXN0S2V5LkEsXHJcbiAgICAgICAgICAgIGNhbXBhaWduLFxyXG4gICAgICAgICAgICBcIltBXVBPQ0FMWVBTRSBOT1QgTk9XXCIsXHJcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoUXVlc3RBVHJpZ2dlcikuZmlsdGVyKChpKTogaSBpcyBudW1iZXIgPT4gdHlwZW9mIGkgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEVuZGluZyBCLiBIZWxwZWQgRG9nIGFuZCBCZWF0IGZpcmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBRdWVzdEIgZXh0ZW5kcyBRdWVzdCB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IgKGNhbXBhaWduOiBDYW1wYWlnbikge1xyXG4gICAgICAgIHN1cGVyKFxyXG4gICAgICAgICAgICBRdWVzdEtleS5CLFxyXG4gICAgICAgICAgICBjYW1wYWlnbixcclxuICAgICAgICAgICAgXCJHT09EIFtCXU9ZXCIsXHJcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoUXVlc3RCVHJpZ2dlcikuZmlsdGVyKChpKTogaSBpcyBudW1iZXIgPT4gdHlwZW9mIGkgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEVuZGluZyBDLiBTZXF1ZW5jZSBicm9rZW4gYW5kIHNvZnQgbG9ja2VkIGluIGNhdmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBRdWVzdEMgZXh0ZW5kcyBRdWVzdCB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IgKGNhbXBhaWduOiBDYW1wYWlnbikge1xyXG4gICAgICAgIHN1cGVyKFxyXG4gICAgICAgICAgICBRdWVzdEtleS5DLFxyXG4gICAgICAgICAgICBjYW1wYWlnbixcclxuICAgICAgICAgICAgXCJTT0ZUIExPW0NdS0VEXCIsXHJcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoUXVlc3RDVHJpZ2dlcikuZmlsdGVyKChpKTogaSBpcyBudW1iZXIgPT4gdHlwZW9mIGkgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBFbmRpbmcgRC4gUGV0dGVkIHRoZSBkb2cgZm9yIHF1aXRlIHNvbWUgdGltZSBhbmQgdHJhbnNjZW5kZWRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBRdWVzdEQgZXh0ZW5kcyBRdWVzdCB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IgKGNhbXBhaWduOiBDYW1wYWlnbikge1xyXG4gICAgICAgIHN1cGVyKFxyXG4gICAgICAgICAgICBRdWVzdEtleS5ELFxyXG4gICAgICAgICAgICBjYW1wYWlnbixcclxuICAgICAgICAgICAgXCJbRF1ST1dORUQgSU4gRUNTVEFTWVwiLFxyXG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKFF1ZXN0RFRyaWdnZXIpLmZpbHRlcigoaSk6IGkgaXMgbnVtYmVyID0+IHR5cGVvZiBpID09PSBcIm51bWJlclwiKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFbmRpbmcgRS4gUGV0dGVkIHRoZSBkb2cgZm9yIHF1aXRlIHNvbWUgdGltZSBhbmQgdHJhbnNjZW5kZWRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBRdWVzdEUgZXh0ZW5kcyBRdWVzdCB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IgKGNhbXBhaWduOiBDYW1wYWlnbikge1xyXG4gICAgICAgIHN1cGVyKFxyXG4gICAgICAgICAgICBRdWVzdEtleS5FLFxyXG4gICAgICAgICAgICBjYW1wYWlnbixcclxuICAgICAgICAgICAgXCJBV0FLW0VdXCIsXHJcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoUXVlc3RFVHJpZ2dlcikuZmlsdGVyKChpKTogaSBpcyBudW1iZXIgPT4gdHlwZW9mIGkgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFPQTtBQU9BO0FBSkE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUExREE7QUE0REE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBVEE7QUFXQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFUQTtBQVdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQVRBO0FBWUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBVEE7QUFXQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFUQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/Quests.js\n");
    
    /***/ }),
    
    /***/ "./lib/Renderer.js":
    /*!*************************!*\
      !*** ./lib/Renderer.js ***!
      \*************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Renderer = exports.LAYER_ORDER = exports.RenderingLayer = exports.RenderingType = void 0;\nconst SpeechBubble_1 = __webpack_require__(/*! ./SpeechBubble */ \"./lib/SpeechBubble.js\");\nvar RenderingType;\n(function (RenderingType) {\n    RenderingType[RenderingType[\"PARTICLE_EMITTER\"] = 0] = \"PARTICLE_EMITTER\";\n    RenderingType[RenderingType[\"FIRE\"] = 1] = \"FIRE\";\n    RenderingType[RenderingType[\"DANCE\"] = 2] = \"DANCE\";\n    RenderingType[RenderingType[\"BLACK_BARS\"] = 3] = \"BLACK_BARS\";\n    RenderingType[RenderingType[\"DRAW_IMAGE\"] = 4] = \"DRAW_IMAGE\";\n    RenderingType[RenderingType[\"ASEPRITE\"] = 5] = \"ASEPRITE\";\n    RenderingType[RenderingType[\"RECT\"] = 6] = \"RECT\";\n    RenderingType[RenderingType[\"SPEECH_BUBBLE\"] = 7] = \"SPEECH_BUBBLE\";\n    RenderingType[RenderingType[\"TEXT\"] = 8] = \"TEXT\";\n})(RenderingType = exports.RenderingType || (exports.RenderingType = {}));\nvar RenderingLayer;\n(function (RenderingLayer) {\n    RenderingLayer[\"DEBUG\"] = \"debug\";\n    RenderingLayer[\"FULLSCREEN_FX\"] = \"fullscreenFX\";\n    RenderingLayer[\"UI\"] = \"ui\";\n    RenderingLayer[\"BLACK_BARS\"] = \"blackBars\";\n    RenderingLayer[\"TILEMAP_FOREGROUND\"] = \"tilemapForeground\";\n    RenderingLayer[\"PLAYER\"] = \"player\";\n    RenderingLayer[\"ENTITIES\"] = \"entities\";\n    RenderingLayer[\"PLATFORMS\"] = \"platforms\";\n    RenderingLayer[\"TILEMAP_MAP\"] = \"tilemapMap\";\n    RenderingLayer[\"TILEMAP_BACKGROUND\"] = \"tilemapBackground\";\n    RenderingLayer[\"PARTICLES\"] = \"particles\";\n})(RenderingLayer = exports.RenderingLayer || (exports.RenderingLayer = {}));\nexports.LAYER_ORDER = [\n    RenderingLayer.DEBUG,\n    RenderingLayer.FULLSCREEN_FX,\n    RenderingLayer.UI,\n    RenderingLayer.BLACK_BARS,\n    RenderingLayer.TILEMAP_FOREGROUND,\n    RenderingLayer.PLAYER,\n    RenderingLayer.ENTITIES,\n    RenderingLayer.PARTICLES,\n    RenderingLayer.PLATFORMS,\n    RenderingLayer.TILEMAP_MAP,\n    RenderingLayer.TILEMAP_BACKGROUND,\n];\nclass Renderer {\n    constructor(scene) {\n        this.layers = exports.LAYER_ORDER;\n        this.queue = [];\n        this.scene = scene;\n    }\n    draw(ctx) {\n        [...this.layers].reverse().forEach(layer => {\n            const itemsInLayer = this.queue.filter(item => item.layer === layer);\n            itemsInLayer.forEach(item => {\n                if (item.type === RenderingType.BLACK_BARS) {\n                    this.scene.camera.drawBars(ctx);\n                }\n                else if (item.type === RenderingType.PARTICLE_EMITTER) {\n                    item.emitter.draw(ctx);\n                }\n                else if (item.type === RenderingType.FIRE) {\n                    item.entity.drawToCanvas(ctx);\n                }\n                else if (item.type === RenderingType.DANCE) {\n                    item.dance.draw(ctx);\n                }\n                else {\n                    ctx.save();\n                    if (item.translation)\n                        ctx.translate(item.translation.x, item.translation.y);\n                    if (item.scale)\n                        ctx.scale(item.scale.x, item.scale.y);\n                    if (item.relativeToScreen)\n                        ctx.setTransform(1, 0, 0, 1, 0, 0);\n                    if (item.globalCompositeOperation)\n                        ctx.globalCompositeOperation = item.globalCompositeOperation;\n                    if (item.alpha !== undefined)\n                        ctx.globalAlpha = item.alpha;\n                    switch (item.type) {\n                        case RenderingType.DRAW_IMAGE:\n                            ctx.drawImage(item.asset, item.position.x, item.position.y);\n                            break;\n                        case RenderingType.ASEPRITE:\n                            item.asset.drawTag(ctx, item.animationTag, item.position.x, item.position.y, item.time);\n                            break;\n                        case RenderingType.RECT:\n                            if (item.lineColor) {\n                                ctx.strokeStyle = item.lineColor;\n                                ctx.lineWidth = item.lineWidth || 1;\n                                ctx.strokeRect(item.position.x, item.position.y, item.dimension.width, item.dimension.height);\n                            }\n                            else if (item.fillColor) {\n                                ctx.fillStyle = item.fillColor;\n                                ctx.fillRect(item.position.x, item.position.y, item.dimension.width, item.dimension.height);\n                            }\n                            break;\n                        case RenderingType.SPEECH_BUBBLE:\n                            ctx.beginPath();\n                            ctx = SpeechBubble_1.roundRect(ctx, Math.round(item.position.x), Math.round(item.position.y), Math.round(item.dimension.width), Math.round(item.dimension.height), item.radius, item.relativeToScreen, Math.round(item.offsetX));\n                            ctx.fillStyle = item.fillColor;\n                            ctx.fill();\n                            ctx.closePath();\n                            break;\n                        case RenderingType.TEXT:\n                            if (item.outlineColor) {\n                                item.asset.drawTextWithOutline(ctx, item.text, item.position.x, item.position.y, item.textColor, item.outlineColor);\n                            }\n                            else {\n                                item.asset.drawText(ctx, item.text, item.position.x, item.position.y, item.textColor);\n                            }\n                            break;\n                    }\n                    ctx.restore();\n                }\n            });\n        });\n        this.queue = [];\n    }\n    add(item) {\n        this.queue.push(item);\n    }\n    addAseprite(sprite, animationTag, x, y, layer, direction = 1, time, alpha) {\n        const scale = direction < 0 ? { x: -1, y: 1 } : undefined;\n        this.add({\n            type: RenderingType.ASEPRITE,\n            layer,\n            translation: {\n                x: x,\n                y: -y\n            },\n            position: {\n                x: -sprite.width >> 1,\n                y: -sprite.height\n            },\n            scale,\n            alpha,\n            asset: sprite,\n            animationTag,\n            time: time || this.scene.gameTime * 1000\n        });\n    }\n}\nexports.Renderer = Renderer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvUmVuZGVyZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvUmVuZGVyZXIudHM/MDRmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IEJpdG1hcEZvbnQgfSBmcm9tIFwiLi9CaXRtYXBGb250XCI7XHJcbmltcG9ydCB7IERhbmNlIH0gZnJvbSBcIi4vRGFuY2VcIjtcclxuaW1wb3J0IHsgRmlyZSB9IGZyb20gXCIuL2VudGl0aWVzL0ZpcmVcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBQYXJ0aWNsZUVtaXR0ZXIgfSBmcm9tIFwiLi9QYXJ0aWNsZXNcIjtcclxuaW1wb3J0IHsgcm91bmRSZWN0IH0gZnJvbSBcIi4vU3BlZWNoQnViYmxlXCI7XHJcblxyXG5leHBvcnQgZW51bSBSZW5kZXJpbmdUeXBlIHtcclxuICAgIFBBUlRJQ0xFX0VNSVRURVIsXHJcbiAgICBGSVJFLFxyXG4gICAgREFOQ0UsXHJcbiAgICBCTEFDS19CQVJTLFxyXG4gICAgRFJBV19JTUFHRSxcclxuICAgIEFTRVBSSVRFLFxyXG4gICAgUkVDVCxcclxuICAgIFNQRUVDSF9CVUJCTEUsXHJcbiAgICBURVhUXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFJlbmRlcmluZ0xheWVyIHtcclxuICAgIERFQlVHID0gXCJkZWJ1Z1wiLFxyXG4gICAgRlVMTFNDUkVFTl9GWCA9IFwiZnVsbHNjcmVlbkZYXCIsXHJcbiAgICBVSSA9IFwidWlcIixcclxuICAgIEJMQUNLX0JBUlMgPSBcImJsYWNrQmFyc1wiLFxyXG4gICAgVElMRU1BUF9GT1JFR1JPVU5EID0gXCJ0aWxlbWFwRm9yZWdyb3VuZFwiLFxyXG4gICAgUExBWUVSID0gXCJwbGF5ZXJcIixcclxuICAgIEVOVElUSUVTID0gXCJlbnRpdGllc1wiLFxyXG4gICAgUExBVEZPUk1TID0gXCJwbGF0Zm9ybXNcIixcclxuICAgIFRJTEVNQVBfTUFQID0gXCJ0aWxlbWFwTWFwXCIsXHJcbiAgICBUSUxFTUFQX0JBQ0tHUk9VTkQgPSBcInRpbGVtYXBCYWNrZ3JvdW5kXCIsXHJcbiAgICBQQVJUSUNMRVMgPSBcInBhcnRpY2xlc1wiXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBMQVlFUl9PUkRFUjogUmVuZGVyaW5nTGF5ZXJbXSA9IFtcclxuICAgIFJlbmRlcmluZ0xheWVyLkRFQlVHLFxyXG4gICAgUmVuZGVyaW5nTGF5ZXIuRlVMTFNDUkVFTl9GWCxcclxuICAgIFJlbmRlcmluZ0xheWVyLlVJLFxyXG4gICAgUmVuZGVyaW5nTGF5ZXIuQkxBQ0tfQkFSUyxcclxuICAgIFJlbmRlcmluZ0xheWVyLlRJTEVNQVBfRk9SRUdST1VORCxcclxuICAgIFJlbmRlcmluZ0xheWVyLlBMQVlFUixcclxuICAgIFJlbmRlcmluZ0xheWVyLkVOVElUSUVTLFxyXG4gICAgUmVuZGVyaW5nTGF5ZXIuUEFSVElDTEVTLFxyXG4gICAgUmVuZGVyaW5nTGF5ZXIuUExBVEZPUk1TLFxyXG4gICAgUmVuZGVyaW5nTGF5ZXIuVElMRU1BUF9NQVAsXHJcbiAgICBSZW5kZXJpbmdMYXllci5USUxFTUFQX0JBQ0tHUk9VTkQsXHJcbl07XHJcblxyXG5leHBvcnQgdHlwZSBDb29yZGluYXRlcyA9IHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIERpbWVuc2lvbiA9IHtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBoZWlnaHQ6IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEJhc2VSZW5kZXJpbmdJdGVtID0ge1xyXG4gICAgdHlwZTogUmVuZGVyaW5nVHlwZTtcclxuICAgIGxheWVyOiBSZW5kZXJpbmdMYXllcjtcclxuICAgIHpJbmRleD86IG51bWJlcjtcclxuICAgIHRyYW5zbGF0aW9uPzogQ29vcmRpbmF0ZXM7XHJcbiAgICBwb3NpdGlvbjogQ29vcmRpbmF0ZXM7XHJcbiAgICBzY2FsZT86IENvb3JkaW5hdGVzO1xyXG4gICAgYWxwaGE/OiBudW1iZXI7XHJcbiAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24/OiBzdHJpbmc7XHJcbiAgICByZWxhdGl2ZVRvU2NyZWVuPzogYm9vbGVhbixcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFBhcnRpY2xlRW1pdHRlclJlbmRlcmluZ0l0ZW0gPSB7XHJcbiAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLlBBUlRJQ0xFX0VNSVRURVI7XHJcbiAgICBsYXllcjogUmVuZGVyaW5nTGF5ZXI7XHJcbiAgICB6SW5kZXg6IG51bWJlcjtcclxuICAgIGVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEZpcmVSZW5kZXJpbmdJdGVtID0ge1xyXG4gICAgdHlwZTogUmVuZGVyaW5nVHlwZS5GSVJFO1xyXG4gICAgbGF5ZXI6IFJlbmRlcmluZ0xheWVyO1xyXG4gICAgZW50aXR5OiBGaXJlO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgRGFuY2VSZW5kZXJpbmdJdGVtID0ge1xyXG4gICAgdHlwZTogUmVuZGVyaW5nVHlwZS5EQU5DRTtcclxuICAgIGxheWVyOiBSZW5kZXJpbmdMYXllcjtcclxuICAgIGRhbmNlOiBEYW5jZTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEJsYWNrQmFyc1JlbmRlcmluZ0l0ZW0gPSB7XHJcbiAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLkJMQUNLX0JBUlM7XHJcbiAgICBsYXllcjogUmVuZGVyaW5nTGF5ZXI7XHJcbiAgICBmb3JjZTogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICBjb2xvcjogc3RyaW5nO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgUmVjdFJlbmRlcmluZ0l0ZW0gPSBCYXNlUmVuZGVyaW5nSXRlbSAmIHtcclxuICAgIHR5cGU6IFJlbmRlcmluZ1R5cGUuUkVDVDtcclxuICAgIGZpbGxDb2xvcj86IHN0cmluZyxcclxuICAgIGxpbmVDb2xvcj86IHN0cmluZyxcclxuICAgIGxpbmVXaWR0aD86IG51bWJlcjtcclxuICAgIGRpbWVuc2lvbjogRGltZW5zaW9uO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgU3BlZWNoQnViYmxlUmVuZGVyaW5nSXRlbSA9IEJhc2VSZW5kZXJpbmdJdGVtICYge1xyXG4gICAgdHlwZTogUmVuZGVyaW5nVHlwZS5TUEVFQ0hfQlVCQkxFO1xyXG4gICAgZmlsbENvbG9yOiBzdHJpbmcsXHJcbiAgICByYWRpdXM6IG51bWJlcjtcclxuICAgIG9mZnNldFg6IG51bWJlcjtcclxuICAgIGRpbWVuc2lvbjogRGltZW5zaW9uO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgVGV4dFJlbmRlcmluZ0l0ZW0gPSBCYXNlUmVuZGVyaW5nSXRlbSAmIHtcclxuICAgIHR5cGU6IFJlbmRlcmluZ1R5cGUuVEVYVDtcclxuICAgIGFzc2V0OiBCaXRtYXBGb250O1xyXG4gICAgdGV4dDogc3RyaW5nLFxyXG4gICAgdGV4dENvbG9yOiBzdHJpbmcsXHJcbiAgICBvdXRsaW5lQ29sb3I/OiBzdHJpbmcsXHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBEcmF3SW1hZ2VSZW5kZXJpbmdJdGVtID0gQmFzZVJlbmRlcmluZ0l0ZW0gJiB7XHJcbiAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLkRSQVdfSU1BR0U7XHJcbiAgICBhc3NldDogSFRNTEltYWdlRWxlbWVudDtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEFzZXByaXRlUmVuZGVyaW5nSXRlbSA9IEJhc2VSZW5kZXJpbmdJdGVtICYge1xyXG4gICAgdHlwZTogUmVuZGVyaW5nVHlwZS5BU0VQUklURTtcclxuICAgIGFzc2V0OiBBc2Vwcml0ZTtcclxuICAgIGFuaW1hdGlvblRhZzogc3RyaW5nO1xyXG4gICAgdGltZT86IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFJlbmRlcmluZ0l0ZW0gPSBCbGFja0JhcnNSZW5kZXJpbmdJdGVtIHwgRHJhd0ltYWdlUmVuZGVyaW5nSXRlbSB8IEFzZXByaXRlUmVuZGVyaW5nSXRlbSB8IFJlY3RSZW5kZXJpbmdJdGVtIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHRSZW5kZXJpbmdJdGVtIHwgU3BlZWNoQnViYmxlUmVuZGVyaW5nSXRlbSB8IFBhcnRpY2xlRW1pdHRlclJlbmRlcmluZ0l0ZW0gfCBGaXJlUmVuZGVyaW5nSXRlbSB8IERhbmNlUmVuZGVyaW5nSXRlbTtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJlciB7XHJcbiAgICBwcml2YXRlIHNjZW5lOiBHYW1lU2NlbmU7XHJcbiAgICBwcml2YXRlIGxheWVycyA9IExBWUVSX09SREVSO1xyXG4gICAgcHJpdmF0ZSBxdWV1ZTogUmVuZGVyaW5nSXRlbVtdID0gW107XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNjZW5lOiBHYW1lU2NlbmUpIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgICAgICBbLi4udGhpcy5sYXllcnNdLnJldmVyc2UoKS5mb3JFYWNoKGxheWVyID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbXNJbkxheWVyID0gdGhpcy5xdWV1ZS5maWx0ZXIoaXRlbSA9PiBpdGVtLmxheWVyID09PSBsYXllcik7XHJcblxyXG4gICAgICAgICAgICBpdGVtc0luTGF5ZXIuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09IFJlbmRlcmluZ1R5cGUuQkxBQ0tfQkFSUykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuY2FtZXJhLmRyYXdCYXJzKGN0eCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gUmVuZGVyaW5nVHlwZS5QQVJUSUNMRV9FTUlUVEVSKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5lbWl0dGVyLmRyYXcoY3R4KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSBSZW5kZXJpbmdUeXBlLkZJUkUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmVudGl0eS5kcmF3VG9DYW52YXMoY3R4KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSBSZW5kZXJpbmdUeXBlLkRBTkNFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5kYW5jZS5kcmF3KGN0eCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udHJhbnNsYXRpb24pIGN0eC50cmFuc2xhdGUoaXRlbS50cmFuc2xhdGlvbi54LCBpdGVtLnRyYW5zbGF0aW9uLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnNjYWxlKSBjdHguc2NhbGUoaXRlbS5zY2FsZS54LCBpdGVtLnNjYWxlLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnJlbGF0aXZlVG9TY3JlZW4pIGN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKSBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gaXRlbS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uYWxwaGEgIT09IHVuZGVmaW5lZCkgY3R4Lmdsb2JhbEFscGhhID0gaXRlbS5hbHBoYTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChpdGVtLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSZW5kZXJpbmdUeXBlLkRSQVdfSU1BR0U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGl0ZW0uYXNzZXQsIGl0ZW0ucG9zaXRpb24ueCwgaXRlbS5wb3NpdGlvbi55KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJlbmRlcmluZ1R5cGUuQVNFUFJJVEU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFzc2V0LmRyYXdUYWcoY3R4LCBpdGVtLmFuaW1hdGlvblRhZywgaXRlbS5wb3NpdGlvbi54LCBpdGVtLnBvc2l0aW9uLnksIGl0ZW0udGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSZW5kZXJpbmdUeXBlLlJFQ1Q6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5saW5lQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBpdGVtLmxpbmVDb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gaXRlbS5saW5lV2lkdGggfHwgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdChpdGVtLnBvc2l0aW9uLngsIGl0ZW0ucG9zaXRpb24ueSwgaXRlbS5kaW1lbnNpb24ud2lkdGgsIGl0ZW0uZGltZW5zaW9uLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uZmlsbENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGl0ZW0uZmlsbENvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChpdGVtLnBvc2l0aW9uLngsIGl0ZW0ucG9zaXRpb24ueSwgaXRlbS5kaW1lbnNpb24ud2lkdGgsIGl0ZW0uZGltZW5zaW9uLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSZW5kZXJpbmdUeXBlLlNQRUVDSF9CVUJCTEU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHggPSByb3VuZFJlY3QoY3R4LCBNYXRoLnJvdW5kKGl0ZW0ucG9zaXRpb24ueCksIE1hdGgucm91bmQoaXRlbS5wb3NpdGlvbi55KSwgTWF0aC5yb3VuZChpdGVtLmRpbWVuc2lvbi53aWR0aCksIE1hdGgucm91bmQoaXRlbS5kaW1lbnNpb24uaGVpZ2h0KSwgaXRlbS5yYWRpdXMsIGl0ZW0ucmVsYXRpdmVUb1NjcmVlbiwgTWF0aC5yb3VuZChpdGVtLm9mZnNldFgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBpdGVtLmZpbGxDb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSZW5kZXJpbmdUeXBlLlRFWFQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5vdXRsaW5lQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFzc2V0LmRyYXdUZXh0V2l0aE91dGxpbmUoY3R4LCBpdGVtLnRleHQsIGl0ZW0ucG9zaXRpb24ueCwgaXRlbS5wb3NpdGlvbi55LCBpdGVtLnRleHRDb2xvciwgaXRlbS5vdXRsaW5lQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFzc2V0LmRyYXdUZXh0KGN0eCwgaXRlbS50ZXh0LCBpdGVtLnBvc2l0aW9uLngsIGl0ZW0ucG9zaXRpb24ueSwgaXRlbS50ZXh0Q29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGQoaXRlbTogUmVuZGVyaW5nSXRlbSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucXVldWUucHVzaChpdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQXNlcHJpdGUgKFxyXG4gICAgICAgIHNwcml0ZTogQXNlcHJpdGUsIGFuaW1hdGlvblRhZzogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgbGF5ZXI6IFJlbmRlcmluZ0xheWVyLFxyXG4gICAgICAgIGRpcmVjdGlvbiA9IDEsIHRpbWU/OiBudW1iZXIsIGFscGhhPzogbnVtYmVyXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IGRpcmVjdGlvbiA8IDAgPyB7IHg6IC0xLCB5OiAxIH0gOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkKHtcclxuICAgICAgICAgICAgdHlwZTogUmVuZGVyaW5nVHlwZS5BU0VQUklURSxcclxuICAgICAgICAgICAgbGF5ZXIsXHJcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICB4OiB4LFxyXG4gICAgICAgICAgICAgICAgeTogLXlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcG9zaXRpb246IHtcclxuICAgICAgICAgICAgICAgIHg6IC1zcHJpdGUud2lkdGggPj4gMSxcclxuICAgICAgICAgICAgICAgIHk6IC1zcHJpdGUuaGVpZ2h0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNjYWxlLFxyXG4gICAgICAgICAgICBhbHBoYSxcclxuICAgICAgICAgICAgYXNzZXQ6IHNwcml0ZSxcclxuICAgICAgICAgICAgYW5pbWF0aW9uVGFnLFxyXG4gICAgICAgICAgICB0aW1lOiB0aW1lIHx8IHRoaXMuc2NlbmUuZ2FtZVRpbWUgKiAxMDAwXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFNQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTBGQTtBQUtBO0FBSEE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkdBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/Renderer.js\n");
    
    /***/ }),
    
    /***/ "./lib/Scene.js":
    /*!**********************!*\
      !*** ./lib/Scene.js ***!
      \**********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Scene = void 0;\nconst ControllerManager_1 = __webpack_require__(/*! ./input/ControllerManager */ \"./lib/input/ControllerManager.js\");\nconst RootNode_1 = __webpack_require__(/*! ./scene/RootNode */ \"./lib/scene/RootNode.js\");\n/**\n * Abstract base class of a scene.\n *\n * @param T - The game type.\n * @param A - Optional scene argument type. A value of this type must be specified when setting or pushing a scene.\n *            Defaults to no argument (void type)\n */\nclass Scene {\n    constructor(game) {\n        this.game = game;\n        this.zIndex = 0;\n        this.currentTransition = null;\n        this.inTransition = null;\n        this.outTransition = null;\n        this.usedLayers = 0;\n        this.hiddenLayers = 0;\n        this.backgroundStyle = null;\n        this.rootNode = new RootNode_1.RootNode(this, (update, draw) => {\n            this.updateRootNode = update;\n            this.drawRootNode = draw;\n        });\n        this.rootNode.resizeTo(this.game.width, this.game.height);\n    }\n    get keyboard() {\n        return this.game.keyboard;\n    }\n    get input() {\n        return ControllerManager_1.ControllerManager.getInstance();\n    }\n    get scenes() {\n        return this.game.scenes;\n    }\n    /**\n     * Shows the given layer when it was previously hidden.\n     *\n     * @param layer - The layer to show (0-31).\n     */\n    showLayer(layer) {\n        this.hiddenLayers &= ~(1 << layer);\n        return this;\n    }\n    /**\n     * Hides the given layer when it was previously shown.\n     *\n     * @param layer - The layer to hide (0-31).\n     */\n    hideLayer(layer) {\n        this.hiddenLayers |= 1 << layer;\n        return this;\n    }\n    /**\n     * Checks if given layer is hidden.\n     *\n     * @param layer - The layer to check (0-31).\n     * @return True if layer is hidden, false if not.\n     */\n    isLayerHidden(layer) {\n        return (this.hiddenLayers & (1 << layer)) !== 0;\n    }\n    /**\n     * Checks if given layer is shown.\n     *\n     * @param layer - The layer to check (0-31).\n     * @return True if layer is shown, false if not.\n     */\n    isLayerShown(layer) {\n        return (this.hiddenLayers & (1 << layer)) === 0;\n    }\n    /**\n     * Returns the scene node with the given id.\n     *\n     * @param id - The ID to look for.\n     * @return The matching scene node or null if none.\n     */\n    getNodeById(id) {\n        return this.rootNode.getDescendantById(id);\n    }\n    /**\n     * Returns the background style of this scene. This style is used to fill the background of the scene when set.\n     *\n     * @return The scene background style.\n     */\n    getBackgroundStyle() {\n        return this.backgroundStyle;\n    }\n    /**\n     * Sets the background style of this scene. This style is used to fill the background of the scene when set.\n     *\n     * @param backgroundStyle - The background style to set.\n     */\n    setBackgroundStyle(backgroundStyle) {\n        this.backgroundStyle = backgroundStyle;\n        return this;\n    }\n    /**\n     * Checks if this scene is active.\n     *\n     * @return True if scene is active, false it not.\n     */\n    isActive() {\n        return this.scenes.activeScene === this;\n    }\n    /**\n     * Called when the scene is pushed onto the stack and before any transitions.\n     *\n     * @param args - The scene arguments (if any).\n     */\n    setup(args) { }\n    /**\n     * Called when the scene becomes the top scene on the stack and after the on-stage transition is complete.\n     */\n    activate() { }\n    /**\n     * Called when the scene is no longer the top scene on the stack and before the off-stage transition begins.\n     */\n    deactivate() { }\n    /**\n     * Called when the scene is popped from the scene stack, after any transitions are complete.\n     */\n    cleanup() { }\n    /**\n     * Updates the scene. Scenes can overwrite this method to do its own drawing but when you are going to use the\n     * scene graph then make sure to call the super method in your overwritten method or the scene graph will not be\n     * updated.\n     */\n    update(dt) {\n        this.usedLayers = this.updateRootNode(dt);\n    }\n    /**\n     * Draws the scene. Scenes can overwrite this method to do its own drawing but when you are going to use the\n     * scene graph then make sure to call the super method in your overwritten method or the scene graph will not be\n     * rendered.\n     *\n     * @param ctx    - The rendering context.\n     * @param width  - The scene width.\n     * @param height - The scene height.\n     */\n    draw(ctx, width, height) {\n        if (this.backgroundStyle != null) {\n            ctx.save();\n            ctx.fillStyle = this.backgroundStyle;\n            ctx.fillRect(0, 0, width, height);\n        }\n        let layer = 1;\n        let usedLayers = this.usedLayers & ~this.hiddenLayers;\n        while (usedLayers !== 0) {\n            if ((usedLayers & 1) === 1) {\n                this.drawRootNode(ctx, layer, width, height);\n            }\n            usedLayers >>>= 1;\n            layer <<= 1;\n        }\n    }\n}\nexports.Scene = Scene;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvU2NlbmUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU2NlbmUudHM/NDMwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb250cm9sbGVyTWFuYWdlciB9IGZyb20gXCIuL2lucHV0L0NvbnRyb2xsZXJNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi9HYW1lXCI7XHJcbmltcG9ydCB7IEtleWJvYXJkIH0gZnJvbSBcIi4vaW5wdXQvS2V5Ym9hcmRcIjtcclxuaW1wb3J0IHsgU2NlbmVzIH0gZnJvbSBcIi4vU2NlbmVzXCI7XHJcbmltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tIFwiLi9UcmFuc2l0aW9uXCI7XHJcbmltcG9ydCB7IFJvb3ROb2RlLCBVcGRhdGVSb290Tm9kZSwgRHJhd1Jvb3ROb2RlIH0gZnJvbSBcIi4vc2NlbmUvUm9vdE5vZGVcIjtcclxuaW1wb3J0IHsgU2NlbmVOb2RlIH0gZnJvbSBcIi4vc2NlbmUvU2NlbmVOb2RlXCI7XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0b3IgdHlwZSBvZiBhIHNjZW5lLlxyXG4gKlxyXG4gKiBAcGFyYW0gVCAtIFRoZSBnYW1lIHR5cGUuXHJcbiAqIEBwYXJhbSBBIC0gT3B0aW9uYWwgc2NlbmUgYXJndW1lbnQgdHlwZS4gQSB2YWx1ZSBvZiB0aGlzIHR5cGUgbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiBzZXR0aW5nIG9yIHB1c2hpbmcgYSBzY2VuZS5cclxuICogICAgICAgICAgICBEZWZhdWx0cyB0byBubyBhcmd1bWVudCAodm9pZCB0eXBlKVxyXG4gKi9cclxuZXhwb3J0IHR5cGUgU2NlbmVDb25zdHJ1Y3RvcjxUIGV4dGVuZHMgR2FtZSwgQSA9IHZvaWQ+ID0gbmV3IChnYW1lOiBUKSA9PiBTY2VuZTxULCBBPjtcclxuXHJcbi8qKlxyXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIG9mIGEgc2NlbmUuXHJcbiAqXHJcbiAqIEBwYXJhbSBUIC0gVGhlIGdhbWUgdHlwZS5cclxuICogQHBhcmFtIEEgLSBPcHRpb25hbCBzY2VuZSBhcmd1bWVudCB0eXBlLiBBIHZhbHVlIG9mIHRoaXMgdHlwZSBtdXN0IGJlIHNwZWNpZmllZCB3aGVuIHNldHRpbmcgb3IgcHVzaGluZyBhIHNjZW5lLlxyXG4gKiAgICAgICAgICAgIERlZmF1bHRzIHRvIG5vIGFyZ3VtZW50ICh2b2lkIHR5cGUpXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU2NlbmU8VCBleHRlbmRzIEdhbWUsIEEgPSB2b2lkPiB7XHJcbiAgICBwdWJsaWMgekluZGV4OiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIGN1cnJlbnRUcmFuc2l0aW9uOiBUcmFuc2l0aW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwdWJsaWMgaW5UcmFuc2l0aW9uOiBUcmFuc2l0aW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwdWJsaWMgb3V0VHJhbnNpdGlvbjogVHJhbnNpdGlvbiB8IG51bGwgPSBudWxsO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHJvb3ROb2RlOiBSb290Tm9kZTxUPjtcclxuICAgIHByaXZhdGUgdXBkYXRlUm9vdE5vZGUhOiBVcGRhdGVSb290Tm9kZTtcclxuICAgIHByaXZhdGUgZHJhd1Jvb3ROb2RlITogRHJhd1Jvb3ROb2RlO1xyXG4gICAgcHJpdmF0ZSB1c2VkTGF5ZXJzOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBoaWRkZW5MYXllcnM6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGJhY2tncm91bmRTdHlsZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBnYW1lOiBUKSB7XHJcbiAgICAgICAgdGhpcy5yb290Tm9kZSA9IG5ldyBSb290Tm9kZSh0aGlzLCAodXBkYXRlLCBkcmF3KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUm9vdE5vZGUgPSB1cGRhdGU7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1Jvb3ROb2RlID0gZHJhdztcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJvb3ROb2RlLnJlc2l6ZVRvKHRoaXMuZ2FtZS53aWR0aCwgdGhpcy5nYW1lLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBrZXlib2FyZCgpOiBLZXlib2FyZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZS5rZXlib2FyZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlucHV0KCk6IENvbnRyb2xsZXJNYW5hZ2VyIHtcclxuICAgICAgICByZXR1cm4gQ29udHJvbGxlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHNjZW5lcygpOiBTY2VuZXM8VD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdhbWUuc2NlbmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvd3MgdGhlIGdpdmVuIGxheWVyIHdoZW4gaXQgd2FzIHByZXZpb3VzbHkgaGlkZGVuLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsYXllciAtIFRoZSBsYXllciB0byBzaG93ICgwLTMxKS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNob3dMYXllcihsYXllcjogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5oaWRkZW5MYXllcnMgJj0gfigxIDw8IGxheWVyKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhpZGVzIHRoZSBnaXZlbiBsYXllciB3aGVuIGl0IHdhcyBwcmV2aW91c2x5IHNob3duLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsYXllciAtIFRoZSBsYXllciB0byBoaWRlICgwLTMxKS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGhpZGVMYXllcihsYXllcjogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5oaWRkZW5MYXllcnMgfD0gMSA8PCBsYXllcjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiBnaXZlbiBsYXllciBpcyBoaWRkZW4uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxheWVyIC0gVGhlIGxheWVyIHRvIGNoZWNrICgwLTMxKS5cclxuICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBsYXllciBpcyBoaWRkZW4sIGZhbHNlIGlmIG5vdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzTGF5ZXJIaWRkZW4obGF5ZXI6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5oaWRkZW5MYXllcnMgJiAoMSA8PCBsYXllcikpICE9PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIGdpdmVuIGxheWVyIGlzIHNob3duLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsYXllciAtIFRoZSBsYXllciB0byBjaGVjayAoMC0zMSkuXHJcbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgbGF5ZXIgaXMgc2hvd24sIGZhbHNlIGlmIG5vdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzTGF5ZXJTaG93bihsYXllcjogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmhpZGRlbkxheWVycyAmICgxIDw8IGxheWVyKSkgPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBzY2VuZSBub2RlIHdpdGggdGhlIGdpdmVuIGlkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZCAtIFRoZSBJRCB0byBsb29rIGZvci5cclxuICAgICAqIEByZXR1cm4gVGhlIG1hdGNoaW5nIHNjZW5lIG5vZGUgb3IgbnVsbCBpZiBub25lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Tm9kZUJ5SWQoaWQ6IHN0cmluZyk6IFNjZW5lTm9kZTxUPiB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3ROb2RlLmdldERlc2NlbmRhbnRCeUlkKGlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGJhY2tncm91bmQgc3R5bGUgb2YgdGhpcyBzY2VuZS4gVGhpcyBzdHlsZSBpcyB1c2VkIHRvIGZpbGwgdGhlIGJhY2tncm91bmQgb2YgdGhlIHNjZW5lIHdoZW4gc2V0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIHNjZW5lIGJhY2tncm91bmQgc3R5bGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRCYWNrZ3JvdW5kU3R5bGUoKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZFN0eWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgYmFja2dyb3VuZCBzdHlsZSBvZiB0aGlzIHNjZW5lLiBUaGlzIHN0eWxlIGlzIHVzZWQgdG8gZmlsbCB0aGUgYmFja2dyb3VuZCBvZiB0aGUgc2NlbmUgd2hlbiBzZXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGJhY2tncm91bmRTdHlsZSAtIFRoZSBiYWNrZ3JvdW5kIHN0eWxlIHRvIHNldC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEJhY2tncm91bmRTdHlsZShiYWNrZ3JvdW5kU3R5bGU6IHN0cmluZyB8IG51bGwpOiB0aGlzIHtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTdHlsZSA9IGJhY2tncm91bmRTdHlsZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGlzIHNjZW5lIGlzIGFjdGl2ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgc2NlbmUgaXMgYWN0aXZlLCBmYWxzZSBpdCBub3QuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0FjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZXMuYWN0aXZlU2NlbmUgPT09IHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgc2NlbmUgaXMgcHVzaGVkIG9udG8gdGhlIHN0YWNrIGFuZCBiZWZvcmUgYW55IHRyYW5zaXRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhcmdzIC0gVGhlIHNjZW5lIGFyZ3VtZW50cyAoaWYgYW55KS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldHVwKGFyZ3M6IEEpOiBQcm9taXNlPHZvaWQ+IHwgdm9pZCB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHNjZW5lIGJlY29tZXMgdGhlIHRvcCBzY2VuZSBvbiB0aGUgc3RhY2sgYW5kIGFmdGVyIHRoZSBvbi1zdGFnZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWN0aXZhdGUoKTogUHJvbWlzZTx2b2lkPiB8IHZvaWQge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB3aGVuIHRoZSBzY2VuZSBpcyBubyBsb25nZXIgdGhlIHRvcCBzY2VuZSBvbiB0aGUgc3RhY2sgYW5kIGJlZm9yZSB0aGUgb2ZmLXN0YWdlIHRyYW5zaXRpb24gYmVnaW5zLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVhY3RpdmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHwgdm9pZCB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHNjZW5lIGlzIHBvcHBlZCBmcm9tIHRoZSBzY2VuZSBzdGFjaywgYWZ0ZXIgYW55IHRyYW5zaXRpb25zIGFyZSBjb21wbGV0ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNsZWFudXAoKTogUHJvbWlzZTx2b2lkPiB8IHZvaWQge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIHNjZW5lLiBTY2VuZXMgY2FuIG92ZXJ3cml0ZSB0aGlzIG1ldGhvZCB0byBkbyBpdHMgb3duIGRyYXdpbmcgYnV0IHdoZW4geW91IGFyZSBnb2luZyB0byB1c2UgdGhlXHJcbiAgICAgKiBzY2VuZSBncmFwaCB0aGVuIG1ha2Ugc3VyZSB0byBjYWxsIHRoZSBzdXBlciBtZXRob2QgaW4geW91ciBvdmVyd3JpdHRlbiBtZXRob2Qgb3IgdGhlIHNjZW5lIGdyYXBoIHdpbGwgbm90IGJlXHJcbiAgICAgKiB1cGRhdGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnVzZWRMYXllcnMgPSB0aGlzLnVwZGF0ZVJvb3ROb2RlKGR0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSBzY2VuZS4gU2NlbmVzIGNhbiBvdmVyd3JpdGUgdGhpcyBtZXRob2QgdG8gZG8gaXRzIG93biBkcmF3aW5nIGJ1dCB3aGVuIHlvdSBhcmUgZ29pbmcgdG8gdXNlIHRoZVxyXG4gICAgICogc2NlbmUgZ3JhcGggdGhlbiBtYWtlIHN1cmUgdG8gY2FsbCB0aGUgc3VwZXIgbWV0aG9kIGluIHlvdXIgb3ZlcndyaXR0ZW4gbWV0aG9kIG9yIHRoZSBzY2VuZSBncmFwaCB3aWxsIG5vdCBiZVxyXG4gICAgICogcmVuZGVyZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGN0eCAgICAtIFRoZSByZW5kZXJpbmcgY29udGV4dC5cclxuICAgICAqIEBwYXJhbSB3aWR0aCAgLSBUaGUgc2NlbmUgd2lkdGguXHJcbiAgICAgKiBAcGFyYW0gaGVpZ2h0IC0gVGhlIHNjZW5lIGhlaWdodC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZFN0eWxlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuYmFja2dyb3VuZFN0eWxlO1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBsYXllciA9IDE7XHJcbiAgICAgICAgbGV0IHVzZWRMYXllcnMgPSB0aGlzLnVzZWRMYXllcnMgJiB+dGhpcy5oaWRkZW5MYXllcnM7XHJcbiAgICAgICAgd2hpbGUgKHVzZWRMYXllcnMgIT09IDApIHtcclxuICAgICAgICAgICAgaWYgKCh1c2VkTGF5ZXJzICYgMSkgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1Jvb3ROb2RlKGN0eCwgbGF5ZXIsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVzZWRMYXllcnMgPj4+PSAxO1xyXG4gICAgICAgICAgICBsYXllciA8PD0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUtBO0FBWUE7Ozs7OztBQU1BO0FBQ0E7QUFZQTtBQUFBO0FBWEE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0S0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/Scene.js\n");
    
    /***/ }),
    
    /***/ "./lib/Scenes.js":
    /*!***********************!*\
      !*** ./lib/Scenes.js ***!
      \***********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Scenes = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nclass Scenes {\n    constructor(game) {\n        this.game = game;\n        this.activeScene = null;\n        this.sceneCache = new WeakMap();\n        this.scenes = [];\n        this.sortedScenes = [];\n    }\n    createScene(sceneClass) {\n        let scene = this.sceneCache.get(sceneClass);\n        if (scene == null) {\n            scene = new sceneClass(this.game);\n            this.sceneCache.set(sceneClass, scene);\n        }\n        return scene;\n    }\n    pushScene(sceneClass, args) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (this.activeScene != null) {\n                yield this.activeScene.deactivate();\n            }\n            const scene = this.createScene(sceneClass);\n            yield scene.setup(args);\n            this.scenes.push(scene);\n            this.updateSortedScenes();\n            if (scene.inTransition != null) {\n                scene.currentTransition = scene.inTransition;\n                yield scene.currentTransition.start(\"in\");\n                scene.currentTransition = null;\n            }\n            yield scene.activate();\n            this.activeScene = scene;\n        });\n    }\n    getPreviousScene() {\n        var _a;\n        return (_a = this.scenes[this.scenes.length - 2]) !== null && _a !== void 0 ? _a : null;\n    }\n    popScene({ noTransition = false } = {}) {\n        var _a;\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const activeScene = this.activeScene;\n            if (activeScene != null) {\n                yield activeScene.deactivate();\n                if (!noTransition && activeScene.outTransition != null) {\n                    activeScene.currentTransition = activeScene.outTransition;\n                    yield activeScene.currentTransition.start(\"out\");\n                    activeScene.currentTransition = null;\n                }\n                this.scenes.pop();\n                this.updateSortedScenes();\n                yield activeScene.cleanup();\n                this.activeScene = (_a = this.scenes[this.scenes.length - 1]) !== null && _a !== void 0 ? _a : null;\n                if (this.activeScene != null) {\n                    yield this.activeScene.activate();\n                }\n            }\n            return activeScene;\n        });\n    }\n    setScene(newSceneClass, args) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const currentScene = this.activeScene;\n            if (currentScene == null) {\n                return this.pushScene(newSceneClass, args);\n            }\n            yield currentScene.deactivate();\n            let outTransitionPromise = null;\n            if (currentScene.outTransition) {\n                currentScene.currentTransition = currentScene.outTransition;\n                outTransitionPromise = currentScene.currentTransition.start(\"out\");\n            }\n            const currentSceneIndex = this.scenes.length - 1;\n            const newScene = this.createScene(newSceneClass);\n            yield newScene.setup(args);\n            this.scenes.push(newScene);\n            this.updateSortedScenes();\n            if (newScene.inTransition != null) {\n                newScene.currentTransition = newScene.inTransition;\n                yield newScene.currentTransition.start(\"in\");\n                newScene.currentTransition = null;\n            }\n            yield newScene.activate();\n            this.activeScene = newScene;\n            if (outTransitionPromise != null) {\n                yield outTransitionPromise;\n                currentScene.currentTransition = null;\n            }\n            this.scenes.splice(currentSceneIndex, 1);\n            this.updateSortedScenes();\n            currentScene.cleanup();\n        });\n    }\n    updateSortedScenes() {\n        this.sortedScenes = this.scenes.slice().sort((a, b) => {\n            if (a.zIndex === b.zIndex) {\n                return this.scenes.indexOf(a) - this.scenes.indexOf(b);\n            }\n            else {\n                return a.zIndex - b.zIndex;\n            }\n        });\n    }\n    update(dt) {\n        this.sortedScenes.forEach(scene => {\n            var _a;\n            (_a = scene.currentTransition) === null || _a === void 0 ? void 0 : _a.update(dt);\n            scene.update(dt);\n        });\n    }\n    draw(ctx, width, height) {\n        this.sortedScenes.forEach(scene => {\n            ctx.save();\n            if (scene.currentTransition != null) {\n                scene.currentTransition.draw(ctx, () => scene.draw(ctx, width, height), width, height);\n            }\n            else {\n                scene.draw(ctx, width, height);\n            }\n            ctx.restore();\n        });\n    }\n}\nexports.Scenes = Scenes;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvU2NlbmVzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1NjZW5lcy50cz9mNWM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi9HYW1lXCI7XHJcbmltcG9ydCB7IFNjZW5lLCBTY2VuZUNvbnN0cnVjdG9yIH0gZnJvbSBcIi4vU2NlbmVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTY2VuZXM8VCBleHRlbmRzIEdhbWU+IHtcclxuICAgIHB1YmxpYyBhY3RpdmVTY2VuZTogU2NlbmU8VCwgdW5rbm93bj4gfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgc2NlbmVDYWNoZSA9IG5ldyBXZWFrTWFwPFNjZW5lQ29uc3RydWN0b3I8VCwgdW5rbm93bj4sIFNjZW5lPFQsIHVua25vd24+PigpO1xyXG4gICAgcHJpdmF0ZSBzY2VuZXM6IFNjZW5lPFQsIHVua25vd24+W10gPSBbXTtcclxuICAgIHByaXZhdGUgc29ydGVkU2NlbmVzOiBTY2VuZTxULCB1bmtub3duPltdID0gW107XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBnYW1lOiBUKSB7fVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlU2NlbmU8QT4oc2NlbmVDbGFzczogU2NlbmVDb25zdHJ1Y3RvcjxULCBBPik6IFNjZW5lPFQsIEE+IHtcclxuICAgICAgICBsZXQgc2NlbmUgPSB0aGlzLnNjZW5lQ2FjaGUuZ2V0KHNjZW5lQ2xhc3MpO1xyXG5cclxuICAgICAgICBpZiAoc2NlbmUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzY2VuZSA9IG5ldyBzY2VuZUNsYXNzKHRoaXMuZ2FtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVDYWNoZS5zZXQoc2NlbmVDbGFzcywgc2NlbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNjZW5lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBwdXNoU2NlbmU8QT4oc2NlbmVDbGFzczogU2NlbmVDb25zdHJ1Y3RvcjxULCB2b2lkPiwgYXJnczogdm9pZCk6IFByb21pc2U8dm9pZD47XHJcbiAgICBwdWJsaWMgYXN5bmMgcHVzaFNjZW5lPEE+KHNjZW5lQ2xhc3M6IFNjZW5lQ29uc3RydWN0b3I8VCwgQT4sIGFyZ3M6IEEpOiBQcm9taXNlPHZvaWQ+O1xyXG4gICAgcHVibGljIGFzeW5jIHB1c2hTY2VuZTxBPihzY2VuZUNsYXNzOiBTY2VuZUNvbnN0cnVjdG9yPFQsIEE+LCBhcmdzOiBBKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlU2NlbmUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdGl2ZVNjZW5lLmRlYWN0aXZhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5jcmVhdGVTY2VuZShzY2VuZUNsYXNzKTtcclxuXHJcbiAgICAgICAgYXdhaXQgc2NlbmUuc2V0dXAoYXJncyk7XHJcbiAgICAgICAgdGhpcy5zY2VuZXMucHVzaChzY2VuZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTb3J0ZWRTY2VuZXMoKTtcclxuXHJcbiAgICAgICAgaWYgKHNjZW5lLmluVHJhbnNpdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNjZW5lLmN1cnJlbnRUcmFuc2l0aW9uID0gc2NlbmUuaW5UcmFuc2l0aW9uO1xyXG4gICAgICAgICAgICBhd2FpdCBzY2VuZS5jdXJyZW50VHJhbnNpdGlvbi5zdGFydChcImluXCIpO1xyXG4gICAgICAgICAgICBzY2VuZS5jdXJyZW50VHJhbnNpdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCBzY2VuZS5hY3RpdmF0ZSgpO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlU2NlbmUgPSBzY2VuZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UHJldmlvdXNTY2VuZSgpOiBTY2VuZTxUPiB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjZW5lc1t0aGlzLnNjZW5lcy5sZW5ndGggLSAyXSA/PyBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBwb3BTY2VuZSh7IG5vVHJhbnNpdGlvbiA9IGZhbHNlIH06IHsgbm9UcmFuc2l0aW9uPzogYm9vbGVhbn0gPSB7fSk6IFByb21pc2U8U2NlbmU8VD4gfCBudWxsPiB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlU2NlbmUgPSB0aGlzLmFjdGl2ZVNjZW5lO1xyXG5cclxuICAgICAgICBpZiAoYWN0aXZlU2NlbmUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCBhY3RpdmVTY2VuZS5kZWFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW5vVHJhbnNpdGlvbiAmJiBhY3RpdmVTY2VuZS5vdXRUcmFuc2l0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVNjZW5lLmN1cnJlbnRUcmFuc2l0aW9uID0gYWN0aXZlU2NlbmUub3V0VHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGFjdGl2ZVNjZW5lLmN1cnJlbnRUcmFuc2l0aW9uLnN0YXJ0KFwib3V0XCIpO1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlU2NlbmUuY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lcy5wb3AoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTb3J0ZWRTY2VuZXMoKTtcclxuICAgICAgICAgICAgYXdhaXQgYWN0aXZlU2NlbmUuY2xlYW51cCgpO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVNjZW5lID0gdGhpcy5zY2VuZXNbdGhpcy5zY2VuZXMubGVuZ3RoIC0gMV0gPz8gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVNjZW5lICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0aXZlU2NlbmUuYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGFjdGl2ZVNjZW5lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzZXRTY2VuZTxBPihuZXdTY2VuZUNsYXNzOiBTY2VuZUNvbnN0cnVjdG9yPFQsIHZvaWQ+LCBhcmdzOiB2b2lkKTogUHJvbWlzZTx2b2lkPjtcclxuICAgIHB1YmxpYyBhc3luYyBzZXRTY2VuZTxBPihuZXdTY2VuZUNsYXNzOiBTY2VuZUNvbnN0cnVjdG9yPFQsIEE+LCBhcmdzOiBBKTogUHJvbWlzZTx2b2lkPjtcclxuICAgIHB1YmxpYyBhc3luYyBzZXRTY2VuZTxBPihuZXdTY2VuZUNsYXNzOiBTY2VuZUNvbnN0cnVjdG9yPFQsIEE+LCBhcmdzOiBBKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFNjZW5lID0gdGhpcy5hY3RpdmVTY2VuZTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRTY2VuZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hTY2VuZShuZXdTY2VuZUNsYXNzLCBhcmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF3YWl0IGN1cnJlbnRTY2VuZS5kZWFjdGl2YXRlKCk7XHJcbiAgICAgICAgbGV0IG91dFRyYW5zaXRpb25Qcm9taXNlOiBQcm9taXNlPHZvaWQ+IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50U2NlbmUub3V0VHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICBjdXJyZW50U2NlbmUuY3VycmVudFRyYW5zaXRpb24gPSBjdXJyZW50U2NlbmUub3V0VHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgb3V0VHJhbnNpdGlvblByb21pc2UgPSBjdXJyZW50U2NlbmUuY3VycmVudFRyYW5zaXRpb24uc3RhcnQoXCJvdXRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50U2NlbmVJbmRleCA9IHRoaXMuc2NlbmVzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgY29uc3QgbmV3U2NlbmUgPSB0aGlzLmNyZWF0ZVNjZW5lKG5ld1NjZW5lQ2xhc3MpO1xyXG4gICAgICAgIGF3YWl0IG5ld1NjZW5lLnNldHVwKGFyZ3MpO1xyXG4gICAgICAgIHRoaXMuc2NlbmVzLnB1c2gobmV3U2NlbmUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU29ydGVkU2NlbmVzKCk7XHJcblxyXG4gICAgICAgIGlmIChuZXdTY2VuZS5pblRyYW5zaXRpb24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBuZXdTY2VuZS5jdXJyZW50VHJhbnNpdGlvbiA9IG5ld1NjZW5lLmluVHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgYXdhaXQgbmV3U2NlbmUuY3VycmVudFRyYW5zaXRpb24uc3RhcnQoXCJpblwiKTtcclxuICAgICAgICAgICAgbmV3U2NlbmUuY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgbmV3U2NlbmUuYWN0aXZhdGUoKTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVNjZW5lID0gbmV3U2NlbmU7XHJcblxyXG4gICAgICAgIGlmIChvdXRUcmFuc2l0aW9uUHJvbWlzZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IG91dFRyYW5zaXRpb25Qcm9taXNlO1xyXG4gICAgICAgICAgICBjdXJyZW50U2NlbmUuY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZXMuc3BsaWNlKGN1cnJlbnRTY2VuZUluZGV4LCAxKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNvcnRlZFNjZW5lcygpO1xyXG4gICAgICAgIGN1cnJlbnRTY2VuZS5jbGVhbnVwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVTb3J0ZWRTY2VuZXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zb3J0ZWRTY2VuZXMgPSB0aGlzLnNjZW5lcy5zbGljZSgpLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEuekluZGV4ID09PSBiLnpJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmVzLmluZGV4T2YoYSkgLSB0aGlzLnNjZW5lcy5pbmRleE9mKGIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuekluZGV4IC0gYi56SW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNvcnRlZFNjZW5lcy5mb3JFYWNoKHNjZW5lID0+IHtcclxuICAgICAgICAgICAgc2NlbmUuY3VycmVudFRyYW5zaXRpb24/LnVwZGF0ZShkdCk7XHJcbiAgICAgICAgICAgIHNjZW5lLnVwZGF0ZShkdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zb3J0ZWRTY2VuZXMuZm9yRWFjaChzY2VuZSA9PiB7XHJcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgIGlmIChzY2VuZS5jdXJyZW50VHJhbnNpdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzY2VuZS5jdXJyZW50VHJhbnNpdGlvbi5kcmF3KGN0eCwgKCkgPT4gc2NlbmUuZHJhdyhjdHgsIHdpZHRoLCBoZWlnaHQpLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNjZW5lLmRyYXcoY3R4LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUdBO0FBTUE7QUFBQTtBQUxBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTs7QUFDQTtBQUNBO0FBRUE7OztBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFJQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN0lBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/Scenes.js\n");
    
    /***/ }),
    
    /***/ "./lib/Signal.js":
    /*!***********************!*\
      !*** ./lib/Signal.js ***!
      \***********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Signal = void 0;\n/**\n * Internally used container for a slot (A callback function with a calling context).\n */\nclass Slot {\n    constructor(callback, context) {\n        this.callback = callback;\n        this.context = context;\n    }\n    call(value) {\n        this.callback.call(this.context, value);\n    }\n}\n/**\n * Light-weight and very fast signal/slot based event system. Just create a signal instance, connect slots\n * (event listeners) to it and then let the signal emit values which are then send to all connected slots.\n * Slots can be methods and it's easy to disconnect them again using the disconnect() method or calling the function\n * returned by connect().\n */\nclass Signal {\n    /**\n     * Creates a new signal with the given optional initialization function.\n     *\n     * @param onInit - Optional initialization function which is called when the first slot is connected to the signal.\n     *                 This function can return an optional deinitialization function which is called after the last\n     *                 slot has been disconnected.\n     */\n    constructor(onInit) {\n        this.slots = [];\n        this.onDone = null;\n        this.onInit = onInit !== null && onInit !== void 0 ? onInit : null;\n    }\n    /**\n     * Connects a slot to this signal.\n     *\n     * @param callback - The slot callback function to call when signal emits a value.\n     * @param context  - Optional context to call the slot callback function on. This is useful for connecting methods.\n     * @return A function which can be called to disconnect the slot from the signal again.\n     */\n    connect(callback, context) {\n        if (this.onInit != null && this.slots.length === 0) {\n            this.onDone = this.onInit(this) || null;\n        }\n        this.slots.push(new Slot(callback, context));\n        return () => this.disconnect(callback, context);\n    }\n    /**\n     * Disconnects a slot from this signal.\n     *\n     * @param callback - The slot callback function to disconnect from the signal.\n     * @param context  - Optional context. Needed to disconnect methods.\n     */\n    disconnect(callback, context) {\n        const index = this.slots.findIndex(slot => slot.callback === callback && slot.context === context);\n        if (index >= 0) {\n            this.slots.splice(index, 1);\n        }\n        if (this.onDone != null && this.slots.length === 0) {\n            this.onDone(this);\n            this.onDone = null;\n        }\n    }\n    /**\n     * Emits the given value to all connected slots.\n     *\n     * @param value - The value to emit.\n     */\n    emit(value) {\n        this.slots.forEach(slot => slot.call(value));\n    }\n    /**\n     * Returns a new signal which only emits the values matching the giving predicate.\n     *\n     * @parm predicate - The function which decides if the value is emitted or not.\n     * @return The new signal.\n     */\n    filter(predicate) {\n        return new Signal(signal => this.connect(value => {\n            if (predicate(value)) {\n                signal.emit(value);\n            }\n        }));\n    }\n    /**\n     * Returns a new signal which maps all emitted values to something else.\n     *\n     * @param mapper - The function which maps the original value to something new.\n     * @return The new signal.\n     */\n    map(mapper) {\n        return new Signal(signal => this.connect(value => {\n            return signal.emit(mapper(value));\n        }));\n    }\n}\nexports.Signal = Signal;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvU2lnbmFsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1NpZ25hbC50cz81NmY4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBJbnRlcm5hbGx5IHVzZWQgY29udGFpbmVyIGZvciBhIHNsb3QgKEEgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aCBhIGNhbGxpbmcgY29udGV4dCkuXHJcbiAqL1xyXG5jbGFzcyBTbG90PFQgPSB1bmtub3duPiB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIGNhbGxiYWNrOiAodmFsdWU6IFQpID0+IHZvaWQsIHB1YmxpYyBjb250ZXh0Pzogb2JqZWN0KSB7fVxyXG4gICAgcHVibGljIGNhbGwodmFsdWU6IFQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrLmNhbGwodGhpcy5jb250ZXh0LCB2YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaWdodC13ZWlnaHQgYW5kIHZlcnkgZmFzdCBzaWduYWwvc2xvdCBiYXNlZCBldmVudCBzeXN0ZW0uIEp1c3QgY3JlYXRlIGEgc2lnbmFsIGluc3RhbmNlLCBjb25uZWN0IHNsb3RzXHJcbiAqIChldmVudCBsaXN0ZW5lcnMpIHRvIGl0IGFuZCB0aGVuIGxldCB0aGUgc2lnbmFsIGVtaXQgdmFsdWVzIHdoaWNoIGFyZSB0aGVuIHNlbmQgdG8gYWxsIGNvbm5lY3RlZCBzbG90cy5cclxuICogU2xvdHMgY2FuIGJlIG1ldGhvZHMgYW5kIGl0J3MgZWFzeSB0byBkaXNjb25uZWN0IHRoZW0gYWdhaW4gdXNpbmcgdGhlIGRpc2Nvbm5lY3QoKSBtZXRob2Qgb3IgY2FsbGluZyB0aGUgZnVuY3Rpb25cclxuICogcmV0dXJuZWQgYnkgY29ubmVjdCgpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNpZ25hbDxUID0gdm9pZD4ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBzbG90czogU2xvdDxUPltdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG9uSW5pdDogKChzaWduYWw6IFNpZ25hbDxUPikgPT4gKCgpID0+IHZvaWQpIHwgdm9pZCkgfCBudWxsO1xyXG4gICAgcHJpdmF0ZSBvbkRvbmU6ICgoc2lnbmFsOiBTaWduYWw8VD4pID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHNpZ25hbCB3aXRoIHRoZSBnaXZlbiBvcHRpb25hbCBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb25Jbml0IC0gT3B0aW9uYWwgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIHdoZW4gdGhlIGZpcnN0IHNsb3QgaXMgY29ubmVjdGVkIHRvIHRoZSBzaWduYWwuXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgVGhpcyBmdW5jdGlvbiBjYW4gcmV0dXJuIGFuIG9wdGlvbmFsIGRlaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGFmdGVyIHRoZSBsYXN0XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgc2xvdCBoYXMgYmVlbiBkaXNjb25uZWN0ZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihvbkluaXQ/OiAoc2lnbmFsOiBTaWduYWw8VD4pID0+ICgoKSA9PiB2b2lkKSB8IHZvaWQpIHtcclxuICAgICAgICB0aGlzLm9uSW5pdCA9IG9uSW5pdCA/PyBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29ubmVjdHMgYSBzbG90IHRvIHRoaXMgc2lnbmFsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBzbG90IGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBzaWduYWwgZW1pdHMgYSB2YWx1ZS5cclxuICAgICAqIEBwYXJhbSBjb250ZXh0ICAtIE9wdGlvbmFsIGNvbnRleHQgdG8gY2FsbCB0aGUgc2xvdCBjYWxsYmFjayBmdW5jdGlvbiBvbi4gVGhpcyBpcyB1c2VmdWwgZm9yIGNvbm5lY3RpbmcgbWV0aG9kcy5cclxuICAgICAqIEByZXR1cm4gQSBmdW5jdGlvbiB3aGljaCBjYW4gYmUgY2FsbGVkIHRvIGRpc2Nvbm5lY3QgdGhlIHNsb3QgZnJvbSB0aGUgc2lnbmFsIGFnYWluLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29ubmVjdChjYWxsYmFjazogKHZhbHVlOiBUKSA9PiB2b2lkLCBjb250ZXh0Pzogb2JqZWN0KTogKCkgPT4gdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMub25Jbml0ICE9IG51bGwgJiYgdGhpcy5zbG90cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRvbmUgPSB0aGlzLm9uSW5pdCh0aGlzKSB8fCBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNsb3RzLnB1c2gobmV3IFNsb3QoY2FsbGJhY2ssIGNvbnRleHQpKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4gdGhpcy5kaXNjb25uZWN0KGNhbGxiYWNrLCBjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc2Nvbm5lY3RzIGEgc2xvdCBmcm9tIHRoaXMgc2lnbmFsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBzbG90IGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGRpc2Nvbm5lY3QgZnJvbSB0aGUgc2lnbmFsLlxyXG4gICAgICogQHBhcmFtIGNvbnRleHQgIC0gT3B0aW9uYWwgY29udGV4dC4gTmVlZGVkIHRvIGRpc2Nvbm5lY3QgbWV0aG9kcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRpc2Nvbm5lY3QoY2FsbGJhY2s6ICh2YWx1ZTogVCkgPT4gdm9pZCwgY29udGV4dD86IG9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zbG90cy5maW5kSW5kZXgoc2xvdCA9PiBzbG90LmNhbGxiYWNrID09PSBjYWxsYmFjayAmJiBzbG90LmNvbnRleHQgPT09IGNvbnRleHQpO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2xvdHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMub25Eb25lICE9IG51bGwgJiYgdGhpcy5zbG90cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRvbmUodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMub25Eb25lID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbWl0cyB0aGUgZ2l2ZW4gdmFsdWUgdG8gYWxsIGNvbm5lY3RlZCBzbG90cy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gZW1pdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGVtaXQodmFsdWU6IFQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNsb3RzLmZvckVhY2goc2xvdCA9PiBzbG90LmNhbGwodmFsdWUpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBuZXcgc2lnbmFsIHdoaWNoIG9ubHkgZW1pdHMgdGhlIHZhbHVlcyBtYXRjaGluZyB0aGUgZ2l2aW5nIHByZWRpY2F0ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFybSBwcmVkaWNhdGUgLSBUaGUgZnVuY3Rpb24gd2hpY2ggZGVjaWRlcyBpZiB0aGUgdmFsdWUgaXMgZW1pdHRlZCBvciBub3QuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBuZXcgc2lnbmFsLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZmlsdGVyKHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiBib29sZWFuKTogU2lnbmFsPFQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFNpZ25hbChzaWduYWwgPT4gdGhpcy5jb25uZWN0KHZhbHVlID0+IHtcclxuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHNpZ25hbC5lbWl0KHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBuZXcgc2lnbmFsIHdoaWNoIG1hcHMgYWxsIGVtaXR0ZWQgdmFsdWVzIHRvIHNvbWV0aGluZyBlbHNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtYXBwZXIgLSBUaGUgZnVuY3Rpb24gd2hpY2ggbWFwcyB0aGUgb3JpZ2luYWwgdmFsdWUgdG8gc29tZXRoaW5nIG5ldy5cclxuICAgICAqIEByZXR1cm4gVGhlIG5ldyBzaWduYWwuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtYXA8Uj4obWFwcGVyOiAodmFsdWU6IFQpID0+IFIpOiBTaWduYWw8Uj4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgU2lnbmFsPFI+KHNpZ25hbCA9PiB0aGlzLmNvbm5lY3QodmFsdWUgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc2lnbmFsLmVtaXQobWFwcGVyKHZhbHVlKSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBS0E7Ozs7OztBQU1BO0FBQ0E7QUFYQTtBQUVBO0FBVUE7QUFDQTtBQUVBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsRkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/Signal.js\n");
    
    /***/ }),
    
    /***/ "./lib/Sound.js":
    /*!**********************!*\
      !*** ./lib/Sound.js ***!
      \**********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sound = exports.getGlobalGainNode = exports.getAudioContext = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\nconst ControllerManager_1 = __webpack_require__(/*! ./input/ControllerManager */ \"./lib/input/ControllerManager.js\");\n// Get cross-browser AudioContext (Safari still uses webkitAudioContext…)\nconst AudioContext = (_a = window.AudioContext) !== null && _a !== void 0 ? _a : window.webkitAudioContext;\nlet audioContext = null;\nlet globalGainNode = null;\nfunction getAudioContext() {\n    const controllerManager = ControllerManager_1.ControllerManager.getInstance();\n    if (audioContext == null) {\n        audioContext = new AudioContext();\n        // When audio context is suspended then try to wake it up on next key or pointer press\n        if (audioContext.state === \"suspended\") {\n            const resume = () => {\n                audioContext === null || audioContext === void 0 ? void 0 : audioContext.resume();\n            };\n            controllerManager.onButtonDown.connect(resume);\n            document.addEventListener(\"pointerdown\", resume);\n            audioContext.addEventListener(\"statechange\", () => {\n                if ((audioContext === null || audioContext === void 0 ? void 0 : audioContext.state) === \"running\") {\n                    controllerManager.onButtonDown.disconnect(resume);\n                    document.removeEventListener(\"pointerdown\", resume);\n                }\n            });\n        }\n    }\n    return audioContext;\n}\nexports.getAudioContext = getAudioContext;\nfunction getGlobalGainNode() {\n    if (globalGainNode == null) {\n        const audioContext = getAudioContext();\n        globalGainNode = audioContext.createGain();\n        globalGainNode.connect(audioContext.destination);\n    }\n    return globalGainNode;\n}\nexports.getGlobalGainNode = getGlobalGainNode;\nclass Sound {\n    constructor(buffer) {\n        this.buffer = buffer;\n        this.source = null;\n        this.loop = false;\n        this.gainNode = getAudioContext().createGain();\n        this.gainNode.connect(getGlobalGainNode());\n    }\n    static load(url) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const arrayBuffer = yield (yield fetch(url)).arrayBuffer();\n            return new Promise((resolve, reject) => {\n                getAudioContext().decodeAudioData(arrayBuffer, buffer => resolve(new Sound(buffer)), error => reject(error));\n            });\n        });\n    }\n    isPlaying() {\n        return this.source != null;\n    }\n    play() {\n        if (!this.isPlaying()) {\n            const source = getAudioContext().createBufferSource();\n            source.buffer = this.buffer;\n            source.loop = this.loop;\n            source.connect(this.gainNode);\n            source.addEventListener(\"ended\", () => {\n                if (this.source === source) {\n                    this.source = null;\n                }\n            });\n            this.source = source;\n            source.start();\n        }\n    }\n    stop() {\n        if (this.source) {\n            try {\n                this.source.stop();\n            }\n            catch (e) {\n                // Ignored. Happens on Safari sometimes. Can't stop a sound which may not be really playing?\n            }\n            this.source = null;\n        }\n    }\n    setLoop(loop) {\n        this.loop = loop;\n        if (this.source) {\n            this.source.loop = loop;\n        }\n    }\n    setVolume(volume) {\n        const gain = this.gainNode.gain;\n        gain.value = util_1.clamp(volume, gain.minValue, gain.maxValue);\n    }\n}\nexports.Sound = Sound;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvU291bmQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvU291bmQudHM/MTFkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjbGFtcCB9IGZyb20gXCIuL3V0aWxcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlck1hbmFnZXIgfSBmcm9tIFwiLi9pbnB1dC9Db250cm9sbGVyTWFuYWdlclwiO1xyXG5cclxuLy8gR2V0IGNyb3NzLWJyb3dzZXIgQXVkaW9Db250ZXh0IChTYWZhcmkgc3RpbGwgdXNlcyB3ZWJraXRBdWRpb0NvbnRleHTigKYpXHJcbmNvbnN0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgPz8gKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dCBhcyBBdWRpb0NvbnRleHQ7XHJcblxyXG5sZXQgYXVkaW9Db250ZXh0OiBBdWRpb0NvbnRleHQgfCBudWxsID0gbnVsbDtcclxubGV0IGdsb2JhbEdhaW5Ob2RlOiBHYWluTm9kZSB8IG51bGwgPSBudWxsO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEF1ZGlvQ29udGV4dCgpOiBBdWRpb0NvbnRleHQge1xyXG4gICAgY29uc3QgY29udHJvbGxlck1hbmFnZXIgPSBDb250cm9sbGVyTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgIGlmIChhdWRpb0NvbnRleHQgPT0gbnVsbCkge1xyXG4gICAgICAgIGF1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcclxuXHJcbiAgICAgICAgLy8gV2hlbiBhdWRpbyBjb250ZXh0IGlzIHN1c3BlbmRlZCB0aGVuIHRyeSB0byB3YWtlIGl0IHVwIG9uIG5leHQga2V5IG9yIHBvaW50ZXIgcHJlc3NcclxuICAgICAgICBpZiAoYXVkaW9Db250ZXh0LnN0YXRlID09PSBcInN1c3BlbmRlZFwiKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VtZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGF1ZGlvQ29udGV4dD8ucmVzdW1lKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb250cm9sbGVyTWFuYWdlci5vbkJ1dHRvbkRvd24uY29ubmVjdChyZXN1bWUpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgcmVzdW1lKTtcclxuXHJcbiAgICAgICAgICAgIGF1ZGlvQ29udGV4dC5hZGRFdmVudExpc3RlbmVyKFwic3RhdGVjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGF1ZGlvQ29udGV4dD8uc3RhdGUgPT09IFwicnVubmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlck1hbmFnZXIub25CdXR0b25Eb3duLmRpc2Nvbm5lY3QocmVzdW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgcmVzdW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhdWRpb0NvbnRleHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxHYWluTm9kZSgpOiBHYWluTm9kZSB7XHJcbiAgICBpZiAoZ2xvYmFsR2Fpbk5vZGUgPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvQ29udGV4dCA9IGdldEF1ZGlvQ29udGV4dCgpO1xyXG4gICAgICAgIGdsb2JhbEdhaW5Ob2RlID0gYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcclxuICAgICAgICBnbG9iYWxHYWluTm9kZS5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGdsb2JhbEdhaW5Ob2RlO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU291bmQge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBnYWluTm9kZTogR2Fpbk5vZGU7XHJcbiAgICBwcml2YXRlIHNvdXJjZTogQXVkaW9CdWZmZXJTb3VyY2VOb2RlIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGxvb3A6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgYnVmZmVyOiBBdWRpb0J1ZmZlcikge1xyXG4gICAgICAgIHRoaXMuZ2Fpbk5vZGUgPSBnZXRBdWRpb0NvbnRleHQoKS5jcmVhdGVHYWluKCk7XHJcbiAgICAgICAgdGhpcy5nYWluTm9kZS5jb25uZWN0KGdldEdsb2JhbEdhaW5Ob2RlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZCh1cmw6IHN0cmluZyk6IFByb21pc2U8U291bmQ+IHtcclxuICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IChhd2FpdCBmZXRjaCh1cmwpKS5hcnJheUJ1ZmZlcigpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBnZXRBdWRpb0NvbnRleHQoKS5kZWNvZGVBdWRpb0RhdGEoYXJyYXlCdWZmZXIsXHJcbiAgICAgICAgICAgICAgICBidWZmZXIgPT4gcmVzb2x2ZShuZXcgU291bmQoYnVmZmVyKSksXHJcbiAgICAgICAgICAgICAgICBlcnJvciA9PiByZWplY3QoZXJyb3IpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzUGxheWluZygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2UgIT0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNQbGF5aW5nKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgc291cmNlID0gZ2V0QXVkaW9Db250ZXh0KCkuY3JlYXRlQnVmZmVyU291cmNlKCk7XHJcbiAgICAgICAgICAgIHNvdXJjZS5idWZmZXIgPSB0aGlzLmJ1ZmZlcjtcclxuICAgICAgICAgICAgc291cmNlLmxvb3AgPSB0aGlzLmxvb3A7XHJcbiAgICAgICAgICAgIHNvdXJjZS5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpO1xyXG5cclxuICAgICAgICAgICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3VyY2UgPT09IHNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgc291cmNlLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdG9wKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnNvdXJjZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2Uuc3RvcCgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmVkLiBIYXBwZW5zIG9uIFNhZmFyaSBzb21ldGltZXMuIENhbid0IHN0b3AgYSBzb3VuZCB3aGljaCBtYXkgbm90IGJlIHJlYWxseSBwbGF5aW5nP1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNvdXJjZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRMb29wKGxvb3A6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmxvb3AgPSBsb29wO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zb3VyY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zb3VyY2UubG9vcCA9IGxvb3A7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRWb2x1bWUodm9sdW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBnYWluID0gdGhpcy5nYWluTm9kZS5nYWluO1xyXG4gICAgICAgIGdhaW4udmFsdWUgPSBjbGFtcCh2b2x1bWUsIGdhaW4ubWluVmFsdWUsIGdhaW4ubWF4VmFsdWUpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUF6QkE7QUEyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVJBO0FBVUE7QUFLQTtBQUFBO0FBSEE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/Sound.js\n");
    
    /***/ }),
    
    /***/ "./lib/SoundEmitter.js":
    /*!*****************************!*\
      !*** ./lib/SoundEmitter.js ***!
      \*****************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SoundEmitter = void 0;\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\nconst Entity_1 = __webpack_require__(/*! ./Entity */ \"./lib/Entity.js\");\n/**\n * Sound emitters are invisible entities that emit a sound in relation to the player distance.\n * Might be better to set the volume according to the camera center in the future.\n */\nclass SoundEmitter extends Entity_1.Entity {\n    constructor(scene, x, y, sound, maxVolume, intensity) {\n        super(scene, x, y, 1, 1);\n        this.sound = sound;\n        this.maxVolume = maxVolume;\n        this.intensity = intensity;\n    }\n    draw() { }\n    update() {\n        const vol = this.scene.paused ? 0 : util_1.calculateVolume(this.distanceToPlayer, this.maxVolume, this.intensity);\n        if (vol) {\n            this.sound.setVolume(vol);\n            if (!this.sound.isPlaying())\n                this.sound.play();\n        }\n        else {\n            this.sound.stop();\n        }\n    }\n    static fromGameObjectInfo(scene, gameObjectInfo) {\n        const soundId = gameObjectInfo.properties.sound;\n        const volume = gameObjectInfo.properties.volume || 1;\n        const intensity = gameObjectInfo.properties.intensity || 1;\n        if (soundId) {\n            const sound = scene.ambientSounds[soundId];\n            if (sound) {\n                return new SoundEmitter(scene, gameObjectInfo.x, gameObjectInfo.y, sound, volume, intensity);\n            }\n            else {\n                throw new Error(`Cannot create sound emitter because '${soundId}' is not a valid ambient sound ID.`);\n            }\n        }\n        else {\n            throw new Error(\"Cannot create sound emitter because 'sound' property is empty.\");\n        }\n    }\n}\nexports.SoundEmitter = SoundEmitter;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvU291bmRFbWl0dGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1NvdW5kRW1pdHRlci50cz80YzlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFtYmllbnRTb3VuZElkLCBHYW1lU2NlbmUgfSBmcm9tIFwiLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IGNhbGN1bGF0ZVZvbHVtZSB9IGZyb20gXCIuL3V0aWxcIjtcclxuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4vRW50aXR5XCI7XHJcbmltcG9ydCB7IEdhbWVPYmplY3RJbmZvIH0gZnJvbSBcIi4vTWFwSW5mb1wiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuL1NvdW5kXCI7XHJcblxyXG4vKipcclxuICogU291bmQgZW1pdHRlcnMgYXJlIGludmlzaWJsZSBlbnRpdGllcyB0aGF0IGVtaXQgYSBzb3VuZCBpbiByZWxhdGlvbiB0byB0aGUgcGxheWVyIGRpc3RhbmNlLlxyXG4gKiBNaWdodCBiZSBiZXR0ZXIgdG8gc2V0IHRoZSB2b2x1bWUgYWNjb3JkaW5nIHRvIHRoZSBjYW1lcmEgY2VudGVyIGluIHRoZSBmdXR1cmUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU291bmRFbWl0dGVyIGV4dGVuZHMgRW50aXR5IHtcclxuICAgIHByaXZhdGUgc291bmQ6IFNvdW5kO1xyXG4gICAgcHJpdmF0ZSBtYXhWb2x1bWU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaW50ZW5zaXR5OiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHNjZW5lOiBHYW1lU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyLCBzb3VuZDogU291bmQsIG1heFZvbHVtZTogbnVtYmVyLCBpbnRlbnNpdHk6IG51bWJlclxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHksIDEsIDEpO1xyXG5cclxuICAgICAgICB0aGlzLnNvdW5kID0gc291bmQ7XHJcbiAgICAgICAgdGhpcy5tYXhWb2x1bWUgPSBtYXhWb2x1bWU7XHJcbiAgICAgICAgdGhpcy5pbnRlbnNpdHkgPSBpbnRlbnNpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7fVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgdm9sID0gdGhpcy5zY2VuZS5wYXVzZWQgPyAwIDogY2FsY3VsYXRlVm9sdW1lKFxyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlVG9QbGF5ZXIsIHRoaXMubWF4Vm9sdW1lLCB0aGlzLmludGVuc2l0eVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICh2b2wpIHtcclxuICAgICAgICAgICAgdGhpcy5zb3VuZC5zZXRWb2x1bWUodm9sKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zb3VuZC5pc1BsYXlpbmcoKSkgdGhpcy5zb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zb3VuZC5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbUdhbWVPYmplY3RJbmZvKFxyXG4gICAgICAgIHNjZW5lOiBHYW1lU2NlbmUsIGdhbWVPYmplY3RJbmZvOiBHYW1lT2JqZWN0SW5mb1xyXG4gICAgKTogU291bmRFbWl0dGVyIHtcclxuICAgICAgICBjb25zdCBzb3VuZElkID0gZ2FtZU9iamVjdEluZm8ucHJvcGVydGllcy5zb3VuZDtcclxuICAgICAgICBjb25zdCB2b2x1bWUgPSBnYW1lT2JqZWN0SW5mby5wcm9wZXJ0aWVzLnZvbHVtZSB8fCAxO1xyXG4gICAgICAgIGNvbnN0IGludGVuc2l0eSA9IGdhbWVPYmplY3RJbmZvLnByb3BlcnRpZXMuaW50ZW5zaXR5IHx8IDE7XHJcblxyXG4gICAgICAgIGlmIChzb3VuZElkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvdW5kID0gc2NlbmUuYW1iaWVudFNvdW5kc1tzb3VuZElkIGFzIEFtYmllbnRTb3VuZElkXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTb3VuZEVtaXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUsIGdhbWVPYmplY3RJbmZvLngsIGdhbWVPYmplY3RJbmZvLnksIHNvdW5kLCB2b2x1bWUsIGludGVuc2l0eVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgQ2Fubm90IGNyZWF0ZSBzb3VuZCBlbWl0dGVyIGJlY2F1c2UgJyR7c291bmRJZH0nIGlzIG5vdCBhIHZhbGlkIGFtYmllbnQgc291bmQgSUQuYFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjcmVhdGUgc291bmQgZW1pdHRlciBiZWNhdXNlICdzb3VuZCcgcHJvcGVydHkgaXMgZW1wdHkuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7OztBQUNBO0FBQ0E7QUFJQTs7O0FBR0E7QUFDQTtBQUtBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXREQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/SoundEmitter.js\n");
    
    /***/ }),
    
    /***/ "./lib/SpeechBubble.js":
    /*!*****************************!*\
      !*** ./lib/SpeechBubble.js ***!
      \*****************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SpeechBubble = exports.roundRect = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ./Assets */ \"./lib/Assets.js\");\nconst BitmapFont_1 = __webpack_require__(/*! ./BitmapFont */ \"./lib/BitmapFont.js\");\nconst Conversation_1 = __webpack_require__(/*! ./Conversation */ \"./lib/Conversation.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"./lib/constants.js\");\nconst Renderer_1 = __webpack_require__(/*! ./Renderer */ \"./lib/Renderer.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\nfunction roundRect(ctx, x, y, w, h, r, up = false, tipOffset = 0) {\n    const halfWidth = w / 2;\n    const halfHeight = h / 2;\n    const middlePos = x + halfWidth;\n    const rightPos = x + w;\n    const bottomPos = y + h;\n    if (w < 2 * r) {\n        r = halfWidth;\n    }\n    if (h < 2 * r) {\n        r = halfHeight;\n    }\n    ctx.beginPath();\n    ctx.moveTo(x + r, y);\n    if (up) {\n        ctx.lineTo(middlePos - 4, y);\n        ctx.lineTo(middlePos, y - 4);\n        ctx.lineTo(middlePos + 4, y);\n    }\n    ctx.arcTo(rightPos, y, rightPos, bottomPos, r);\n    ctx.arcTo(rightPos, bottomPos, x, bottomPos, r);\n    if (!up) {\n        ctx.lineTo(middlePos - 4 + tipOffset, bottomPos);\n        ctx.lineTo(middlePos + tipOffset, bottomPos + 4);\n        ctx.lineTo(middlePos + 4 + tipOffset, bottomPos);\n    }\n    ctx.arcTo(x, bottomPos, x, y, r);\n    ctx.arcTo(x, y, rightPos, y, r);\n    ctx.closePath();\n    return ctx;\n}\nexports.roundRect = roundRect;\nclass SpeechBubble {\n    constructor(scene, anchorX, anchorY, lineHeightFactor = 1, paddingTop = 3, paddingBottom = 4, paddingLeft = 7, paddingRight = 7, color = \"white\", relativeToScreen = false) {\n        this.scene = scene;\n        this.anchorX = anchorX;\n        this.anchorY = anchorY;\n        this.lineHeightFactor = lineHeightFactor;\n        this.paddingTop = paddingTop;\n        this.paddingBottom = paddingBottom;\n        this.paddingLeft = paddingLeft;\n        this.paddingRight = paddingRight;\n        this.color = color;\n        this.relativeToScreen = relativeToScreen;\n        this.messageLines = [];\n        this.options = [];\n        this.selectedOptionIndex = -1;\n        this.fontSize = SpeechBubble.font.charHeight;\n        this.lineHeight = this.fontSize;\n        this.height = 0;\n        this.offset = { x: 0, y: 40 };\n        this.messageVelocity = 20;\n        this.isCurrentlyWriting = false;\n        this.preventUnwantedSelection = false;\n        this.isVisible = false;\n        this.content = [];\n        this.longestLine = 0;\n        this.partnersBubble = null;\n        this.x = Math.round(anchorX + this.offset.x);\n        this.y = Math.round(anchorY + this.offset.y);\n        this.lineHeight = Math.round(this.fontSize * this.lineHeightFactor);\n        this.paddingHorizontal = this.paddingLeft + this.paddingRight;\n        this.paddingVertical = this.paddingTop + this.paddingBottom;\n    }\n    show() {\n        this.isVisible = true;\n    }\n    hide() {\n        this.isVisible = false;\n    }\n    hasContent() {\n        return this.content.length > 0 &&\n            (!this.partnersBubble || !this.partnersBubble.isCurrentlyWriting && this.selectedOptionIndex > -1);\n    }\n    setMessage(message) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            this.messageLines = [\"\"];\n            this.isCurrentlyWriting = true;\n            this.longestLine = this.determineMaxLineLength(message.split(\"\\n\"));\n            let index = 0;\n            for (const char of message) {\n                if (!char) {\n                    index++;\n                    continue;\n                }\n                if (char === \"\\n\") {\n                    index++;\n                    this.messageLines.push(\"\");\n                    continue;\n                }\n                this.messageLines[index] += char;\n                if (this.isCurrentlyWriting) {\n                    yield util_1.sleep(this.messageVelocity);\n                }\n                this.updateContent();\n            }\n            this.preventUnwantedSelection = true;\n            this.updateContent();\n            this.isCurrentlyWriting = false;\n            setTimeout(() => {\n                this.preventUnwantedSelection = false;\n            }, 300);\n        });\n    }\n    setOptions(options, partnersBubble) {\n        this.partnersBubble = partnersBubble;\n        this.options = options;\n        this.selectedOptionIndex = this.options.length > 0 ? 0 : -1;\n        this.updateContent();\n        this.longestLine = this.determineMaxLineLength(this.messageLines);\n    }\n    updateContent() {\n        this.content = this.messageLines.concat(this.options);\n        this.height = (this.content.length - 1) * this.lineHeight + this.fontSize + this.paddingVertical;\n    }\n    draw(ctx) {\n        if (!this.isVisible\n            || !this.hasContent()\n            || !this.scene.camera.isOnTarget()\n            || !this.scene.isActive()) {\n            return;\n        }\n        let posX = this.x;\n        let posY = this.y;\n        let offsetX = 0;\n        if (this.relativeToScreen) {\n            posX = Math.round(ctx.canvas.width / 2);\n            posY = Math.round(-ctx.canvas.height * 0.63 - this.height);\n        }\n        else {\n            // Check if Speech Bubble clips the viewport and correct position\n            const visibleRect = this.scene.camera.getVisibleRect();\n            const relativeX = posX - visibleRect.x;\n            const clipAmount = Math.max((this.longestLine / 2) + relativeX - constants_1.GAME_CANVAS_WIDTH, 0)\n                || Math.min(relativeX - (this.longestLine / 2), 0);\n            if (clipAmount !== 0) {\n                offsetX = clipAmount + (10 * Math.sign(clipAmount));\n            }\n        }\n        posX -= offsetX;\n        const bubbleXPos = posX - Math.round(this.longestLine / 2) - this.paddingLeft;\n        const bubbleYPos = -posY - this.height;\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.SPEECH_BUBBLE,\n            layer: Renderer_1.RenderingLayer.UI,\n            fillColor: this.color,\n            position: {\n                x: bubbleXPos,\n                y: bubbleYPos\n            },\n            dimension: {\n                width: this.longestLine + this.paddingHorizontal,\n                height: this.height\n            },\n            radius: 5,\n            relativeToScreen: this.relativeToScreen,\n            offsetX\n        });\n        const textXPos = bubbleXPos + this.paddingLeft;\n        const textColor = \"black\";\n        for (let i = 0; i < this.messageLines.length; i++) {\n            const textYPos = Math.round(bubbleYPos + this.paddingTop + i * this.lineHeight);\n            this.scene.renderer.add({\n                type: Renderer_1.RenderingType.TEXT,\n                layer: Renderer_1.RenderingLayer.UI,\n                text: this.messageLines[i],\n                textColor: textColor,\n                relativeToScreen: this.relativeToScreen,\n                position: {\n                    x: textXPos,\n                    y: textYPos\n                },\n                asset: SpeechBubble.font,\n            });\n        }\n        for (let i = 0; i < this.options.length; i++) {\n            const isSelected = this.selectedOptionIndex === i;\n            const textYPos = Math.round(bubbleYPos + this.paddingTop + i * this.lineHeight);\n            if (isSelected) {\n                this.scene.renderer.add({\n                    type: Renderer_1.RenderingType.TEXT,\n                    layer: Renderer_1.RenderingLayer.UI,\n                    text: Conversation_1.ConversationLine.OPTION_MARKER,\n                    textColor: textColor,\n                    relativeToScreen: this.relativeToScreen,\n                    position: {\n                        x: textXPos,\n                        y: textYPos\n                    },\n                    asset: SpeechBubble.font\n                });\n            }\n            this.scene.renderer.add({\n                type: Renderer_1.RenderingType.TEXT,\n                layer: Renderer_1.RenderingLayer.UI,\n                text: this.options[i],\n                textColor: textColor,\n                relativeToScreen: this.relativeToScreen,\n                position: {\n                    x: textXPos + SpeechBubble.OPTION_BUBBLE_INDENTATION,\n                    y: textYPos\n                },\n                asset: SpeechBubble.font\n            });\n        }\n    }\n    update(anchorX, anchorY) {\n        this.x = Math.round(anchorX + this.offset.x);\n        this.y = Math.round(anchorY + this.offset.y);\n    }\n    determineMaxLineLength(message) {\n        let lineLengths = message.map(line => SpeechBubble.font.measureText(line).width);\n        lineLengths = lineLengths.concat(this.options.map(line => SpeechBubble.font.measureText(line).width + SpeechBubble.OPTION_BUBBLE_INDENTATION));\n        return Math.max(...lineLengths);\n    }\n}\nSpeechBubble.OPTION_BUBBLE_INDENTATION = 11;\ntslib_1.__decorate([\n    Assets_1.asset(constants_1.DIALOG_FONT),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], SpeechBubble, \"font\", void 0);\nexports.SpeechBubble = SpeechBubble;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvU3BlZWNoQnViYmxlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1NwZWVjaEJ1YmJsZS50cz81ZDkwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2V0IH0gZnJvbSBcIi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IEJpdG1hcEZvbnQgfSBmcm9tIFwiLi9CaXRtYXBGb250XCI7XHJcbmltcG9ydCB7IENvbnZlcnNhdGlvbkxpbmUgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgRElBTE9HX0ZPTlQsIEdBTUVfQ0FOVkFTX1dJRFRIIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgUmVuZGVyaW5nTGF5ZXIsIFJlbmRlcmluZ1R5cGUgfSBmcm9tIFwiLi9SZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gXCIuL3V0aWxcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3VuZFJlY3QoXHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyLCByOiBudW1iZXIsXHJcbiAgICB1cCA9IGZhbHNlLCB0aXBPZmZzZXQgPSAwXHJcbik6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICBjb25zdCBoYWxmV2lkdGggPSB3IC8gMjtcclxuICAgIGNvbnN0IGhhbGZIZWlnaHQgPSBoIC8gMjtcclxuICAgIGNvbnN0IG1pZGRsZVBvcyA9IHggKyBoYWxmV2lkdGg7XHJcbiAgICBjb25zdCByaWdodFBvcyA9IHggKyB3O1xyXG4gICAgY29uc3QgYm90dG9tUG9zID0geSArIGg7XHJcblxyXG4gICAgaWYgKHcgPCAyICogcikgeyByID0gaGFsZldpZHRoOyB9XHJcbiAgICBpZiAoaCA8IDIgKiByKSB7IHIgPSBoYWxmSGVpZ2h0OyB9XHJcblxyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4Lm1vdmVUbyh4ICsgciwgeSk7XHJcblxyXG4gICAgaWYgKHVwKSB7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhtaWRkbGVQb3MgLSA0LCB5KTtcclxuICAgICAgICBjdHgubGluZVRvKG1pZGRsZVBvcywgeSAtIDQpO1xyXG4gICAgICAgIGN0eC5saW5lVG8obWlkZGxlUG9zICsgNCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3R4LmFyY1RvKHJpZ2h0UG9zLCB5LCByaWdodFBvcywgYm90dG9tUG9zLCByKTtcclxuICAgIGN0eC5hcmNUbyhyaWdodFBvcywgYm90dG9tUG9zLCB4LCBib3R0b21Qb3MsIHIpO1xyXG5cclxuICAgIGlmICghdXApIHtcclxuICAgICAgICBjdHgubGluZVRvKG1pZGRsZVBvcyAtIDQgKyB0aXBPZmZzZXQsIGJvdHRvbVBvcyk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhtaWRkbGVQb3MgKyB0aXBPZmZzZXQsIGJvdHRvbVBvcyArIDQpO1xyXG4gICAgICAgIGN0eC5saW5lVG8obWlkZGxlUG9zICsgNCArIHRpcE9mZnNldCwgYm90dG9tUG9zKTtcclxuICAgIH1cclxuXHJcbiAgICBjdHguYXJjVG8oeCwgYm90dG9tUG9zLCB4LCB5LCByKTtcclxuICAgIGN0eC5hcmNUbyh4LCB5LCByaWdodFBvcywgeSwgcik7XHJcbiAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgcmV0dXJuIGN0eDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNwZWVjaEJ1YmJsZSB7XHJcbiAgICBAYXNzZXQoRElBTE9HX0ZPTlQpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBmb250OiBCaXRtYXBGb250O1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgT1BUSU9OX0JVQkJMRV9JTkRFTlRBVElPTiA9IDExO1xyXG5cclxuICAgIHByaXZhdGUgbWVzc2FnZUxpbmVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBvcHRpb25zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgcHVibGljIHNlbGVjdGVkT3B0aW9uSW5kZXggPSAtMTtcclxuICAgIHByaXZhdGUgZm9udFNpemUgPSBTcGVlY2hCdWJibGUuZm9udC5jaGFySGVpZ2h0O1xyXG4gICAgcHJpdmF0ZSBsaW5lSGVpZ2h0ID0gdGhpcy5mb250U2l6ZTtcclxuICAgIHByaXZhdGUgaGVpZ2h0ID0gMDtcclxuICAgIHByaXZhdGUgb2Zmc2V0ID0geyB4OiAwLCB5OiA0MCB9O1xyXG4gICAgcHJpdmF0ZSBtZXNzYWdlVmVsb2NpdHkgPSAyMDtcclxuXHJcbiAgICBwcml2YXRlIHg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgeTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBwYWRkaW5nSG9yaXpvbnRhbDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBwYWRkaW5nVmVydGljYWw6IG51bWJlcjtcclxuICAgIHB1YmxpYyBpc0N1cnJlbnRseVdyaXRpbmcgPSBmYWxzZTtcclxuICAgIHB1YmxpYyBwcmV2ZW50VW53YW50ZWRTZWxlY3Rpb24gPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGlzVmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgY29udGVudDogc3RyaW5nIFtdID0gW107XHJcbiAgICBwcml2YXRlIGxvbmdlc3RMaW5lOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByaXZhdGUgcGFydG5lcnNCdWJibGU6IFNwZWVjaEJ1YmJsZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgc2NlbmU6IEdhbWVTY2VuZSxcclxuICAgICAgICBwdWJsaWMgYW5jaG9yWDogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyBhbmNob3JZOiBudW1iZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBsaW5lSGVpZ2h0RmFjdG9yID0gMSxcclxuICAgICAgICBwcml2YXRlIHBhZGRpbmdUb3AgPSAzLFxyXG4gICAgICAgIHByaXZhdGUgcGFkZGluZ0JvdHRvbSA9IDQsXHJcbiAgICAgICAgcHJpdmF0ZSBwYWRkaW5nTGVmdCA9IDcsXHJcbiAgICAgICAgcHJpdmF0ZSBwYWRkaW5nUmlnaHQgPSA3LFxyXG4gICAgICAgIHByaXZhdGUgY29sb3IgPSBcIndoaXRlXCIsXHJcbiAgICAgICAgcHJpdmF0ZSByZWxhdGl2ZVRvU2NyZWVuID0gZmFsc2VcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMueCA9IE1hdGgucm91bmQoYW5jaG9yWCArIHRoaXMub2Zmc2V0LngpO1xyXG4gICAgICAgIHRoaXMueSA9IE1hdGgucm91bmQoYW5jaG9yWSArIHRoaXMub2Zmc2V0LnkpO1xyXG4gICAgICAgIHRoaXMubGluZUhlaWdodCA9IE1hdGgucm91bmQodGhpcy5mb250U2l6ZSAqIHRoaXMubGluZUhlaWdodEZhY3Rvcik7XHJcbiAgICAgICAgdGhpcy5wYWRkaW5nSG9yaXpvbnRhbCA9IHRoaXMucGFkZGluZ0xlZnQgKyB0aGlzLnBhZGRpbmdSaWdodDtcclxuICAgICAgICB0aGlzLnBhZGRpbmdWZXJ0aWNhbCA9IHRoaXMucGFkZGluZ1RvcCArIHRoaXMucGFkZGluZ0JvdHRvbTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvdygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhpZGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFzQ29udGVudCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgICAgKCF0aGlzLnBhcnRuZXJzQnViYmxlIHx8ICF0aGlzLnBhcnRuZXJzQnViYmxlLmlzQ3VycmVudGx5V3JpdGluZyAmJiB0aGlzLnNlbGVjdGVkT3B0aW9uSW5kZXggPiAtMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNldE1lc3NhZ2UobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTGluZXMgPSBbXCJcIl07XHJcbiAgICAgICAgdGhpcy5pc0N1cnJlbnRseVdyaXRpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubG9uZ2VzdExpbmUgPSB0aGlzLmRldGVybWluZU1heExpbmVMZW5ndGgobWVzc2FnZS5zcGxpdChcIlxcblwiKSk7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBjaGFyIG9mIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKCFjaGFyKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09IFwiXFxuXCIpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VMaW5lcy5wdXNoKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlTGluZXNbaW5kZXhdICs9IGNoYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ3VycmVudGx5V3JpdGluZykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2xlZXAodGhpcy5tZXNzYWdlVmVsb2NpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcmV2ZW50VW53YW50ZWRTZWxlY3Rpb24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudCgpO1xyXG4gICAgICAgIHRoaXMuaXNDdXJyZW50bHlXcml0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZlbnRVbndhbnRlZFNlbGVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIH0sIDMwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldE9wdGlvbnMob3B0aW9uczogc3RyaW5nW10sIHBhcnRuZXJzQnViYmxlOiBTcGVlY2hCdWJibGUpIHtcclxuICAgICAgICB0aGlzLnBhcnRuZXJzQnViYmxlID0gcGFydG5lcnNCdWJibGU7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uSW5kZXggPSB0aGlzLm9wdGlvbnMubGVuZ3RoID4gMCA/IDAgOiAtMTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnQoKTtcclxuICAgICAgICB0aGlzLmxvbmdlc3RMaW5lID0gdGhpcy5kZXRlcm1pbmVNYXhMaW5lTGVuZ3RoKHRoaXMubWVzc2FnZUxpbmVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNvbnRlbnQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5tZXNzYWdlTGluZXMuY29uY2F0KHRoaXMub3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAodGhpcy5jb250ZW50Lmxlbmd0aCAtIDEpICogdGhpcy5saW5lSGVpZ2h0ICsgdGhpcy5mb250U2l6ZSArIHRoaXMucGFkZGluZ1ZlcnRpY2FsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhdGhpcy5pc1Zpc2libGVcclxuICAgICAgICAgICAgfHwgIXRoaXMuaGFzQ29udGVudCgpXHJcbiAgICAgICAgICAgIHx8ICF0aGlzLnNjZW5lLmNhbWVyYS5pc09uVGFyZ2V0KClcclxuICAgICAgICAgICAgfHwgIXRoaXMuc2NlbmUuaXNBY3RpdmUoKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcG9zWCA9IHRoaXMueDtcclxuICAgICAgICBsZXQgcG9zWSA9IHRoaXMueTtcclxuICAgICAgICBsZXQgb2Zmc2V0WCA9IDA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJlbGF0aXZlVG9TY3JlZW4pIHtcclxuICAgICAgICAgICAgcG9zWCA9IE1hdGgucm91bmQoY3R4LmNhbnZhcy53aWR0aCAvIDIpO1xyXG4gICAgICAgICAgICBwb3NZID0gTWF0aC5yb3VuZCgtY3R4LmNhbnZhcy5oZWlnaHQgKiAwLjYzIC0gdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIFNwZWVjaCBCdWJibGUgY2xpcHMgdGhlIHZpZXdwb3J0IGFuZCBjb3JyZWN0IHBvc2l0aW9uXHJcbiAgICAgICAgICAgIGNvbnN0IHZpc2libGVSZWN0ID0gdGhpcy5zY2VuZS5jYW1lcmEuZ2V0VmlzaWJsZVJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVYID0gcG9zWCAtIHZpc2libGVSZWN0Lng7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjbGlwQW1vdW50ID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICAodGhpcy5sb25nZXN0TGluZSAvIDIpICsgcmVsYXRpdmVYIC0gR0FNRV9DQU5WQVNfV0lEVEgsIDApXHJcbiAgICAgICAgICAgICAgICB8fCBNYXRoLm1pbihyZWxhdGl2ZVggLSAodGhpcy5sb25nZXN0TGluZSAvIDIpLFxyXG4gICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNsaXBBbW91bnQgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldFggPSBjbGlwQW1vdW50ICsgKDEwICogTWF0aC5zaWduKGNsaXBBbW91bnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcG9zWCAtPSBvZmZzZXRYO1xyXG5cclxuICAgICAgICBjb25zdCBidWJibGVYUG9zID0gcG9zWCAtIE1hdGgucm91bmQodGhpcy5sb25nZXN0TGluZSAvIDIpIC0gdGhpcy5wYWRkaW5nTGVmdDtcclxuICAgICAgICBjb25zdCBidWJibGVZUG9zID0gLXBvc1kgLSB0aGlzLmhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGQoe1xyXG4gICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLlNQRUVDSF9CVUJCTEUsXHJcbiAgICAgICAgICAgIGxheWVyOiBSZW5kZXJpbmdMYXllci5VSSxcclxuICAgICAgICAgICAgZmlsbENvbG9yOiB0aGlzLmNvbG9yLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgeDogYnViYmxlWFBvcyxcclxuICAgICAgICAgICAgICAgIHk6IGJ1YmJsZVlQb3NcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGltZW5zaW9uOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5sb25nZXN0TGluZSArIHRoaXMucGFkZGluZ0hvcml6b250YWwsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJhZGl1czogNSxcclxuICAgICAgICAgICAgcmVsYXRpdmVUb1NjcmVlbjogdGhpcy5yZWxhdGl2ZVRvU2NyZWVuLFxyXG4gICAgICAgICAgICBvZmZzZXRYXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHRYUG9zID0gYnViYmxlWFBvcyArIHRoaXMucGFkZGluZ0xlZnQ7XHJcbiAgICAgICAgY29uc3QgdGV4dENvbG9yID0gXCJibGFja1wiO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVzc2FnZUxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHRZUG9zID0gTWF0aC5yb3VuZChidWJibGVZUG9zICsgdGhpcy5wYWRkaW5nVG9wICsgaSAqIHRoaXMubGluZUhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLlRFWFQsXHJcbiAgICAgICAgICAgICAgICBsYXllcjogUmVuZGVyaW5nTGF5ZXIuVUksXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLm1lc3NhZ2VMaW5lc1tpXSxcclxuICAgICAgICAgICAgICAgIHRleHRDb2xvcjogdGV4dENvbG9yLFxyXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVUb1NjcmVlbjogdGhpcy5yZWxhdGl2ZVRvU2NyZWVuLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB4OiB0ZXh0WFBvcyxcclxuICAgICAgICAgICAgICAgICAgICB5OiB0ZXh0WVBvc1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFzc2V0OiBTcGVlY2hCdWJibGUuZm9udCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZE9wdGlvbkluZGV4ID09PSBpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0WVBvcyA9IE1hdGgucm91bmQoYnViYmxlWVBvcyArIHRoaXMucGFkZGluZ1RvcCArIGkgKiB0aGlzLmxpbmVIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLlRFWFQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXI6IFJlbmRlcmluZ0xheWVyLlVJLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IENvbnZlcnNhdGlvbkxpbmUuT1BUSU9OX01BUktFUixcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IHRleHRDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVRvU2NyZWVuOiB0aGlzLnJlbGF0aXZlVG9TY3JlZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogdGV4dFhQb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRleHRZUG9zXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldDogU3BlZWNoQnViYmxlLmZvbnRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLlRFWFQsXHJcbiAgICAgICAgICAgICAgICBsYXllcjogUmVuZGVyaW5nTGF5ZXIuVUksXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLm9wdGlvbnNbaV0sXHJcbiAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IHRleHRDb2xvcixcclxuICAgICAgICAgICAgICAgIHJlbGF0aXZlVG9TY3JlZW46IHRoaXMucmVsYXRpdmVUb1NjcmVlbixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogdGV4dFhQb3MgKyBTcGVlY2hCdWJibGUuT1BUSU9OX0JVQkJMRV9JTkRFTlRBVElPTixcclxuICAgICAgICAgICAgICAgICAgICB5OiB0ZXh0WVBvc1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFzc2V0OiBTcGVlY2hCdWJibGUuZm9udFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShhbmNob3JYOiBudW1iZXIsIGFuY2hvclk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMueCA9IE1hdGgucm91bmQoYW5jaG9yWCArIHRoaXMub2Zmc2V0LngpO1xyXG4gICAgICAgIHRoaXMueSA9IE1hdGgucm91bmQoYW5jaG9yWSArIHRoaXMub2Zmc2V0LnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGV0ZXJtaW5lTWF4TGluZUxlbmd0aChtZXNzYWdlOiBzdHJpbmdbXSk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IGxpbmVMZW5ndGhzID0gbWVzc2FnZS5tYXAoXHJcbiAgICAgICAgICAgIGxpbmUgPT4gU3BlZWNoQnViYmxlLmZvbnQubWVhc3VyZVRleHQobGluZSkud2lkdGhcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsaW5lTGVuZ3RocyA9IGxpbmVMZW5ndGhzLmNvbmNhdChcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1hcChcclxuICAgICAgICAgICAgICAgIGxpbmUgPT4gU3BlZWNoQnViYmxlLmZvbnQubWVhc3VyZVRleHQobGluZSkud2lkdGggKyBTcGVlY2hCdWJibGUuT1BUSU9OX0JVQkJMRV9JTkRFTlRBVElPTlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KC4uLmxpbmVMZW5ndGhzKTtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQXBDQTtBQXNDQTtBQTRCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFNQTtBQUNBOztBQXBPQTtBQURBO0FBREE7QUFDQTtBQUFBO0FBRkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/SpeechBubble.js\n");
    
    /***/ }),
    
    /***/ "./lib/Transition.js":
    /*!***************************!*\
      !*** ./lib/Transition.js ***!
      \***************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transition = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\nconst easings_1 = __webpack_require__(/*! ./easings */ \"./lib/easings.js\");\nclass Transition {\n    constructor({ duration = 0.5, easing = easings_1.linear } = {}) {\n        this.type = \"out\";\n        this.elapsed = 0;\n        this.resolve = null;\n        this.promise = null;\n        this.duration = duration;\n        this.easing = easing;\n    }\n    valueOf() {\n        const value = this.easing(util_1.clamp(this.elapsed / this.duration, 0, 1));\n        return this.type === \"out\" ? value : (1 - value);\n    }\n    update(dt) {\n        if (this.promise != null) {\n            this.elapsed += dt;\n            if (this.elapsed >= this.duration) {\n                this.stop();\n            }\n        }\n    }\n    draw(ctx, draw, width, height) { }\n    start(type) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (this.promise == null) {\n                this.type = type;\n                this.elapsed = 0;\n                this.promise = new Promise(resolve => { this.resolve = resolve; });\n            }\n            return this.promise;\n        });\n    }\n    stop() {\n        if (this.resolve != null) {\n            this.resolve();\n            this.resolve = null;\n            this.promise = null;\n        }\n    }\n}\nexports.Transition = Transition;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvVHJhbnNpdGlvbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9UcmFuc2l0aW9uLnRzPzAwYzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xhbXAgfSBmcm9tIFwiLi91dGlsXCI7XHJcbmltcG9ydCB7IEVhc2luZywgbGluZWFyIH0gZnJvbSBcIi4vZWFzaW5nc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgVHJhbnNpdGlvblR5cGUgPSBcImluXCIgfCBcIm91dFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2l0aW9uT3B0aW9ucyB7XHJcbiAgICBkdXJhdGlvbj86IG51bWJlcjtcclxuICAgIHJldmVyc2U/OiBib29sZWFuO1xyXG4gICAgZWFzaW5nPzogRWFzaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVHJhbnNpdGlvbiB7XHJcbiAgICBwcml2YXRlIHR5cGU6IFRyYW5zaXRpb25UeXBlID0gXCJvdXRcIjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZHVyYXRpb246IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWFzaW5nOiBFYXNpbmc7XHJcbiAgICBwcml2YXRlIGVsYXBzZWQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHJlc29sdmU6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBwcm9taXNlOiBQcm9taXNlPHZvaWQ+IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHsgZHVyYXRpb24gPSAwLjUsIGVhc2luZyA9IGxpbmVhciB9OiBUcmFuc2l0aW9uT3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG4gICAgICAgIHRoaXMuZWFzaW5nID0gZWFzaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB2YWx1ZU9mKCk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmVhc2luZyhjbGFtcCh0aGlzLmVsYXBzZWQgLyB0aGlzLmR1cmF0aW9uLCAwLCAxKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gXCJvdXRcIiA/IHZhbHVlIDogICgxIC0gdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnByb21pc2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsYXBzZWQgKz0gZHQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVsYXBzZWQgPj0gdGhpcy5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGRyYXc6ICgpID0+IHZvaWQsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7fVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzdGFydCh0eXBlOiBUcmFuc2l0aW9uVHlwZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICh0aGlzLnByb21pc2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICB0aGlzLmVsYXBzZWQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0b3AoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzb2x2ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBVUE7QUFRQTtBQVBBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/Transition.js\n");
    
    /***/ }),
    
    /***/ "./lib/World.js":
    /*!**********************!*\
      !*** ./lib/World.js ***!
      \**********************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.World = exports.validEnvironments = exports.Environment = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ./Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ./Entity */ \"./lib/Entity.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"./lib/util.js\");\nconst GameScene_1 = __webpack_require__(/*! ./scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst graphics_1 = __webpack_require__(/*! ./graphics */ \"./lib/graphics.js\");\nconst Particles_1 = __webpack_require__(/*! ./Particles */ \"./lib/Particles.js\");\nconst Renderer_1 = __webpack_require__(/*! ./Renderer */ \"./lib/Renderer.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"./lib/constants.js\");\nvar Environment;\n(function (Environment) {\n    Environment[Environment[\"AIR\"] = 0] = \"AIR\";\n    Environment[Environment[\"SOLID\"] = 4278190080] = \"SOLID\";\n    Environment[Environment[\"PLATFORM\"] = 4286545791] = \"PLATFORM\";\n    Environment[Environment[\"BOUNCE\"] = 4294901760] = \"BOUNCE\";\n    Environment[Environment[\"WATER\"] = 4278190335] = \"WATER\";\n    Environment[Environment[\"SOIL\"] = 4294967040] = \"SOIL\";\n    Environment[Environment[\"RAINCLOUD\"] = 4278255360] = \"RAINCLOUD\";\n})(Environment = exports.Environment || (exports.Environment = {}));\nexports.validEnvironments = Object.values(Environment);\nclass World {\n    constructor(scene) {\n        this.raining = false;\n        this.scene = scene;\n        const rainSpawnPosition = this.scene.pointsOfInterest.find(o => o.name === \"rain_spawn_position\");\n        if (!rainSpawnPosition) {\n            throw new Error(\"Missing 'rain_spawn_position' point in map data to place rain emitter\");\n        }\n        this.rainEmitter = this.scene.particles.createEmitter({\n            position: { x: rainSpawnPosition.x, y: rainSpawnPosition.y },\n            offset: () => ({ x: util_1.rnd(-1, 1) * 26, y: util_1.rnd(-1, 1) * 5 }),\n            velocity: () => ({ x: util_1.rnd(-1, 1) * 5, y: -util_1.rnd(50, 80) }),\n            color: () => World.raindrop,\n            size: 4,\n            gravity: { x: 0, y: -100 },\n            lifetime: () => 3,\n            alpha: 0.6,\n            alphaCurve: Particles_1.valueCurves.linear.invert()\n        });\n    }\n    getWidth() {\n        return World.foreground.width;\n    }\n    getHeight() {\n        return World.foreground.height;\n    }\n    update() {\n        if (this.raining) {\n            this.rainEmitter.emit(util_1.rndInt(1, 4));\n        }\n    }\n    draw(ctx, width, height) {\n        const camX = this.scene.camera.x;\n        const camY = this.scene.camera.y;\n        const posXMultiplier = 1 - (camX / this.getWidth() * 2);\n        let alpha = 1;\n        if (this.scene.pettingCutscene) {\n            alpha = Math.max(0, 1 - (this.scene.pettingCutsceneTime / constants_1.PETTING_ENDING_CUTSCENE_DURATION));\n        }\n        if (this.scene.windowCutscene) {\n            alpha = Math.max(0, 1 - (this.scene.windowCutsceneTime / (constants_1.WINDOW_ENDING_CUTSCENE_DURATION / 1.5)));\n        }\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.DRAW_IMAGE,\n            layer: Renderer_1.RenderingLayer.TILEMAP_MAP,\n            translation: { x: camX, y: -camY },\n            position: { x: -camX, y: -this.getHeight() + camY },\n            asset: World.foreground,\n            alpha: alpha\n        });\n        for (const background of World.backgrounds) {\n            const bgX = this.getWidth() / background.width;\n            const bgY = this.getHeight() / background.height;\n            this.scene.renderer.add({\n                type: Renderer_1.RenderingType.DRAW_IMAGE,\n                layer: Renderer_1.RenderingLayer.TILEMAP_BACKGROUND,\n                translation: { x: camX, y: -camY },\n                position: {\n                    x: (-camX / bgX) + (-posXMultiplier * (width / 2)),\n                    y: (-this.getHeight() + camY) / bgY\n                },\n                asset: background,\n                alpha: alpha\n            });\n        }\n    }\n    getEnvironment(x, y) {\n        const index = (this.getHeight() - 1 - Math.round(y)) * this.getWidth() + Math.round(x);\n        if (index < 0 || index >= World.collisionMap.length) {\n            return Environment.AIR;\n        }\n        return World.collisionMap[index];\n    }\n    /**\n     * Checks if the given position collides with the world.\n     *\n     * @param x - X position within the world.\n     * @param y - Y position within the world.\n     * @return 0 if no collision. Anything else is a specific collision type (actually an RGBA color\n     *         which has specific meaning which isn't defined yet).\n     */\n    collidesWith(x, y, ignoreObjects = [], ignore = []) {\n        for (const gameObject of this.scene.gameObjects) {\n            if (gameObject !== this\n                && !ignoreObjects.includes(gameObject)\n                && GameScene_1.isCollidableGameObject(gameObject)) {\n                const environment = gameObject.collidesWith(x, y);\n                if (environment !== Environment.AIR && !ignore.includes(environment)) {\n                    return environment;\n                }\n            }\n        }\n        const index = (this.getHeight() - 1 - Math.round(y)) * this.getWidth() + Math.round(x);\n        if (index < 0 || index >= World.collisionMap.length) {\n            return 0;\n        }\n        const environment = this.getEnvironment(x, y);\n        if (!exports.validEnvironments.includes(environment)\n            || (ignore && ignore.includes(environment))) {\n            return Environment.AIR;\n        }\n        return World.collisionMap[index];\n    }\n    /**\n     * Checks if a specific entity (`sourceEntity`) collides with either of of the entities in the\n     * gameObjects array of the GameScene and returns all entities that currently collide.\n     * `Particles` are taken out of this check automatically.\n     *\n     * @param sourceEntity    - The entity to be checked against the other entities\n     * @param margin          - Optional margin added to the bounding boxes of the entities to\n     *                          extend collision radius\n     * @param ignoreEntities  - Array of entities to be ignored with this check\n     * @return                - An array containing all entities that collide with the source\n     *                          entity.\n     */\n    getEntityCollisions(sourceEntity, margin = 0, ignoreEntities = []) {\n        const collidesWith = [];\n        for (const gameObject of this.scene.gameObjects) {\n            if (gameObject !== sourceEntity\n                && !(gameObject instanceof Particles_1.Particles)\n                && gameObject instanceof Entity_1.Entity\n                && gameObject.isTrigger\n                && !ignoreEntities.includes(gameObject)) {\n                const colliding = this.boundingBoxesCollide(sourceEntity.getBounds(margin), gameObject.getBounds(margin));\n                if (colliding) {\n                    collidesWith.push(gameObject);\n                }\n            }\n        }\n        return collidesWith;\n    }\n    /**\n     * Returns all triggers that do collide with the provided entity\n     * @param sourceEntity Entity to check collisions against trigger boxes\n     */\n    getTriggerCollisions(sourceEntity) {\n        const collidesWith = [];\n        for (const triggerObject of this.scene.triggerObjects) {\n            const colliding = this.boundingBoxesCollide(sourceEntity.getBounds(), util_1.boundsFromMapObject(triggerObject));\n            if (colliding) {\n                collidesWith.push(triggerObject);\n            }\n        }\n        return collidesWith;\n    }\n    getGateCollisions(sourceEntity) {\n        const collidesWith = [];\n        for (const gateObject of this.scene.gateObjects) {\n            const colliding = this.boundingBoxesCollide(sourceEntity.getBounds(), util_1.boundsFromMapObject(gateObject, 0));\n            if (colliding && !gateObject.properties.disabled) {\n                collidesWith.push(gateObject);\n            }\n        }\n        return collidesWith;\n    }\n    getCameraBounds(sourceEntity) {\n        const collidesWith = [];\n        for (const triggerObject of this.scene.boundObjects) {\n            const colliding = this.boundingBoxesCollide(sourceEntity.getBounds(), util_1.boundsFromMapObject(triggerObject));\n            if (colliding) {\n                collidesWith.push(triggerObject);\n            }\n        }\n        return collidesWith;\n    }\n    /**\n     * Checks if the two provided bounding boxes are touching each other\n     * @param box1 first bounding box\n     * @param box2 second bounding box\n     * @return `true` when the bounding boxes are touching, `false` if not.\n     */\n    boundingBoxesCollide(box1, box2) {\n        return !(((box1.y - box1.height) > (box2.y)) ||\n            (box1.y < (box2.y - box2.height)) ||\n            ((box1.x + box1.width) < box2.x) ||\n            (box1.x > (box2.x + box2.width)));\n    }\n    getObjectAt(x, y, ignoreObjects = [], ignore = []) {\n        for (const gameObject of this.scene.gameObjects) {\n            if (gameObject !== this\n                && !ignoreObjects.includes(gameObject)\n                && GameScene_1.isCollidableGameObject(gameObject)) {\n                const environment = gameObject.collidesWith(x, y);\n                if (environment !== Environment.AIR && !ignore.includes(environment)) {\n                    return gameObject;\n                }\n            }\n        }\n        return null;\n    }\n    /**\n     * Check collision of a vertical line with the world.\n     *\n     * @param x      - X position within the world.\n     * @param y      - Y start position of the line in the world.\n     * @param height - The height of the line to check\n     * @return 0 if no collision. Type of first collision along the line otherwise.\n     */\n    collidesWithVerticalLine(x, y, height, ignoreObjects, ignore) {\n        for (let i = 0; i < height; i++) {\n            const collision = this.collidesWith(x, y - i, ignoreObjects, ignore);\n            if (collision) {\n                return collision;\n            }\n        }\n        return 0;\n    }\n    /**\n     * Returns the Y coordinate of the ground below the given world coordinate.\n     *\n     * @param x - X coordinate of current position.\n     * @param y - Y coordinate of current position.\n     * @return The Y coordinate of the ground below the given coordinate.\n     */\n    getGround(x, y, ignoreObjects, ignore) {\n        while (y > 0 && !this.collidesWith(x, y, ignoreObjects, ignore)) {\n            y--;\n        }\n        return y;\n    }\n    startRain() {\n        this.raining = true;\n    }\n    stopRain() {\n        this.raining = false;\n    }\n    isRaining() {\n        return this.raining;\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(\"maps/level.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], World, \"foreground\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"maps/level_collision.png\", {\n        map: (image) => new Uint32Array(graphics_1.getImageData(image).data.buffer)\n    }),\n    tslib_1.__metadata(\"design:type\", Uint32Array)\n], World, \"collisionMap\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"maps/bg.png\",\n        \"maps/bg2.png\",\n        \"maps/bg3.png\"\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], World, \"backgrounds\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/raindrop.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], World, \"raindrop\", void 0);\nexports.World = World;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvV29ybGQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvV29ybGQudHM/Y2MwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuL0Fzc2V0c1wiO1xyXG5pbXBvcnQgeyBCb3VuZHMsIEVudGl0eSB9IGZyb20gXCIuL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBib3VuZHNGcm9tTWFwT2JqZWN0LCBybmQsIHJuZEludCB9IGZyb20gXCIuL3V0aWxcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdCwgR2FtZVNjZW5lLCBpc0NvbGxpZGFibGVHYW1lT2JqZWN0IH0gZnJvbSBcIi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBHYW1lT2JqZWN0SW5mbyB9IGZyb20gXCIuL01hcEluZm9cIjtcclxuaW1wb3J0IHsgZ2V0SW1hZ2VEYXRhIH0gZnJvbSBcIi4vZ3JhcGhpY3NcIjtcclxuaW1wb3J0IHsgUGFydGljbGVFbWl0dGVyLCBQYXJ0aWNsZXMsIHZhbHVlQ3VydmVzIH0gZnJvbSBcIi4vUGFydGljbGVzXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyLCBSZW5kZXJpbmdUeXBlIH0gZnJvbSBcIi4vUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgUEVUVElOR19FTkRJTkdfQ1VUU0NFTkVfRFVSQVRJT04sIFdJTkRPV19FTkRJTkdfQ1VUU0NFTkVfRFVSQVRJT04gfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcclxuXHJcbmV4cG9ydCBlbnVtIEVudmlyb25tZW50IHtcclxuICAgIEFJUiA9IDAsXHJcbiAgICBTT0xJRCA9IDB4ZmYwMDAwMDAsXHJcbiAgICBQTEFURk9STSA9IDB4ZmY3ZjdmN2YsXHJcbiAgICBCT1VOQ0UgPSAweGZmZmYwMDAwLFxyXG4gICAgV0FURVIgPSAweGZmMDAwMGZmLFxyXG4gICAgU09JTCA9IDB4ZmZmZmZmMDAsXHJcbiAgICBSQUlOQ0xPVUQgPSAweGZmMDBmZjAwXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZEVudmlyb25tZW50cyA9IE9iamVjdC52YWx1ZXMoRW52aXJvbm1lbnQpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFdvcmxkIGltcGxlbWVudHMgR2FtZU9iamVjdCB7XHJcbiAgICBAYXNzZXQoXCJtYXBzL2xldmVsLnBuZ1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZm9yZWdyb3VuZDogSFRNTEltYWdlRWxlbWVudDtcclxuXHJcbiAgICBAYXNzZXQoXCJtYXBzL2xldmVsX2NvbGxpc2lvbi5wbmdcIiwge1xyXG4gICAgICAgIG1hcDogKGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50KSA9PiBuZXcgVWludDMyQXJyYXkoZ2V0SW1hZ2VEYXRhKGltYWdlKS5kYXRhLmJ1ZmZlcilcclxuICAgIH0pXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjb2xsaXNpb25NYXA6IFVpbnQzMkFycmF5O1xyXG5cclxuICAgIEBhc3NldChbXHJcbiAgICAgICAgXCJtYXBzL2JnLnBuZ1wiLFxyXG4gICAgICAgIFwibWFwcy9iZzIucG5nXCIsXHJcbiAgICAgICAgXCJtYXBzL2JnMy5wbmdcIlxyXG4gICAgXSlcclxuICAgIHByaXZhdGUgc3RhdGljIGJhY2tncm91bmRzOiBIVE1MSW1hZ2VFbGVtZW50W107XHJcblxyXG4gICAgcHJpdmF0ZSBzY2VuZTogR2FtZVNjZW5lO1xyXG5cclxuICAgIEBhc3NldChcInNwcml0ZXMvcmFpbmRyb3AucG5nXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyByYWluZHJvcDogSFRNTEltYWdlRWxlbWVudDtcclxuICAgIHByaXZhdGUgcmFpbkVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjtcclxuICAgIHByaXZhdGUgcmFpbmluZyA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG5cclxuICAgICAgICBjb25zdCByYWluU3Bhd25Qb3NpdGlvbiA9IHRoaXMuc2NlbmUucG9pbnRzT2ZJbnRlcmVzdC5maW5kKFxyXG4gICAgICAgICAgICBvID0+IG8ubmFtZSA9PT0gXCJyYWluX3NwYXduX3Bvc2l0aW9uXCJcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoIXJhaW5TcGF3blBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciAoXCJNaXNzaW5nICdyYWluX3NwYXduX3Bvc2l0aW9uJyBwb2ludCBpbiBtYXAgZGF0YSB0byBwbGFjZSByYWluIGVtaXR0ZXJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJhaW5FbWl0dGVyID0gdGhpcy5zY2VuZS5wYXJ0aWNsZXMuY3JlYXRlRW1pdHRlcih7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7eDogcmFpblNwYXduUG9zaXRpb24ueCwgeTogcmFpblNwYXduUG9zaXRpb24ueX0sXHJcbiAgICAgICAgICAgIG9mZnNldDogKCkgPT4gKHt4OiBybmQoLTEsIDEpICogMjYsIHk6IHJuZCgtMSwgMSkgKiA1fSksXHJcbiAgICAgICAgICAgIHZlbG9jaXR5OiAoKSA9PiAoeyB4OiBybmQoLTEsIDEpICogNSwgeTogLXJuZCg1MCwgODApIH0pLFxyXG4gICAgICAgICAgICBjb2xvcjogKCkgPT4gV29ybGQucmFpbmRyb3AsXHJcbiAgICAgICAgICAgIHNpemU6IDQsXHJcbiAgICAgICAgICAgIGdyYXZpdHk6IHt4OiAwLCB5OiAtMTAwfSxcclxuICAgICAgICAgICAgbGlmZXRpbWU6ICgpID0+IDMsXHJcbiAgICAgICAgICAgIGFscGhhOiAwLjYsXHJcbiAgICAgICAgICAgIGFscGhhQ3VydmU6IHZhbHVlQ3VydmVzLmxpbmVhci5pbnZlcnQoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBXb3JsZC5mb3JlZ3JvdW5kLndpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gV29ybGQuZm9yZWdyb3VuZC5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5yYWluaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmFpbkVtaXR0ZXIuZW1pdChybmRJbnQoMSwgNCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjYW1YID0gdGhpcy5zY2VuZS5jYW1lcmEueDtcclxuICAgICAgICBjb25zdCBjYW1ZID0gdGhpcy5zY2VuZS5jYW1lcmEueTtcclxuICAgICAgICBjb25zdCBwb3NYTXVsdGlwbGllciA9IDEgLSAoY2FtWCAvIHRoaXMuZ2V0V2lkdGgoKSAqIDIpO1xyXG5cclxuICAgICAgICBsZXQgYWxwaGEgPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnBldHRpbmdDdXRzY2VuZSkge1xyXG4gICAgICAgICAgICBhbHBoYSA9IE1hdGgubWF4KDAsIDEgLSAodGhpcy5zY2VuZS5wZXR0aW5nQ3V0c2NlbmVUaW1lIC8gUEVUVElOR19FTkRJTkdfQ1VUU0NFTkVfRFVSQVRJT04pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUud2luZG93Q3V0c2NlbmUpIHtcclxuICAgICAgICAgICAgYWxwaGEgPSBNYXRoLm1heCgwLCAxIC0gKHRoaXMuc2NlbmUud2luZG93Q3V0c2NlbmVUaW1lIC8gKFdJTkRPV19FTkRJTkdfQ1VUU0NFTkVfRFVSQVRJT04gLyAxLjUgKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGQoe1xyXG4gICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLkRSQVdfSU1BR0UsXHJcbiAgICAgICAgICAgIGxheWVyOiBSZW5kZXJpbmdMYXllci5USUxFTUFQX01BUCxcclxuICAgICAgICAgICAgdHJhbnNsYXRpb246IHsgeDogY2FtWCwgeTogLWNhbVkgfSxcclxuICAgICAgICAgICAgcG9zaXRpb246IHsgeDogLWNhbVgsIHk6IC10aGlzLmdldEhlaWdodCgpICsgY2FtWSB9LFxyXG4gICAgICAgICAgICBhc3NldDogV29ybGQuZm9yZWdyb3VuZCxcclxuICAgICAgICAgICAgYWxwaGE6IGFscGhhXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgYmFja2dyb3VuZCBvZiBXb3JsZC5iYWNrZ3JvdW5kcykge1xyXG4gICAgICAgICAgICBjb25zdCBiZ1ggPSB0aGlzLmdldFdpZHRoKCkgLyBiYWNrZ3JvdW5kLndpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBiZ1kgPSB0aGlzLmdldEhlaWdodCgpIC8gYmFja2dyb3VuZC5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLkRSQVdfSU1BR0UsXHJcbiAgICAgICAgICAgICAgICBsYXllcjogUmVuZGVyaW5nTGF5ZXIuVElMRU1BUF9CQUNLR1JPVU5ELFxyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRpb246IHsgeDogY2FtWCwgeTogLWNhbVkgfSxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogKC1jYW1YIC8gYmdYKSArICgtcG9zWE11bHRpcGxpZXIgKiAod2lkdGggLyAyKSksXHJcbiAgICAgICAgICAgICAgICAgICAgeTogKC10aGlzLmdldEhlaWdodCgpICsgY2FtWSkgLyBiZ1lcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhc3NldDogYmFja2dyb3VuZCxcclxuICAgICAgICAgICAgICAgIGFscGhhOiBhbHBoYVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVudmlyb25tZW50KHg6IG51bWJlciwgeTogbnVtYmVyKTogRW52aXJvbm1lbnQge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gKHRoaXMuZ2V0SGVpZ2h0KCkgLSAxIC0gTWF0aC5yb3VuZCh5KSkgKiB0aGlzLmdldFdpZHRoKCkgKyBNYXRoLnJvdW5kKHgpO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IFdvcmxkLmNvbGxpc2lvbk1hcC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudmlyb25tZW50LkFJUjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBXb3JsZC5jb2xsaXNpb25NYXBbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBwb3NpdGlvbiBjb2xsaWRlcyB3aXRoIHRoZSB3b3JsZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geCAtIFggcG9zaXRpb24gd2l0aGluIHRoZSB3b3JsZC5cclxuICAgICAqIEBwYXJhbSB5IC0gWSBwb3NpdGlvbiB3aXRoaW4gdGhlIHdvcmxkLlxyXG4gICAgICogQHJldHVybiAwIGlmIG5vIGNvbGxpc2lvbi4gQW55dGhpbmcgZWxzZSBpcyBhIHNwZWNpZmljIGNvbGxpc2lvbiB0eXBlIChhY3R1YWxseSBhbiBSR0JBIGNvbG9yXHJcbiAgICAgKiAgICAgICAgIHdoaWNoIGhhcyBzcGVjaWZpYyBtZWFuaW5nIHdoaWNoIGlzbid0IGRlZmluZWQgeWV0KS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbGxpZGVzV2l0aChcclxuICAgICAgICB4OiBudW1iZXIsIHk6IG51bWJlciwgaWdub3JlT2JqZWN0czogR2FtZU9iamVjdFtdID0gW10sIGlnbm9yZTogRW52aXJvbm1lbnRbXSA9IFtdXHJcbiAgICApOiBudW1iZXIge1xyXG4gICAgICAgIGZvciAoY29uc3QgZ2FtZU9iamVjdCBvZiB0aGlzLnNjZW5lLmdhbWVPYmplY3RzKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGdhbWVPYmplY3QgIT09IHRoaXNcclxuICAgICAgICAgICAgICAgICYmICFpZ25vcmVPYmplY3RzLmluY2x1ZGVzKGdhbWVPYmplY3QpXHJcbiAgICAgICAgICAgICAgICAmJiBpc0NvbGxpZGFibGVHYW1lT2JqZWN0KGdhbWVPYmplY3QpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW52aXJvbm1lbnQgPSBnYW1lT2JqZWN0LmNvbGxpZGVzV2l0aCh4LCB5KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZW52aXJvbm1lbnQgIT09IEVudmlyb25tZW50LkFJUiAmJiAhaWdub3JlLmluY2x1ZGVzKGVudmlyb25tZW50KSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW52aXJvbm1lbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gKHRoaXMuZ2V0SGVpZ2h0KCkgLSAxIC0gTWF0aC5yb3VuZCh5KSkgKiB0aGlzLmdldFdpZHRoKCkgKyBNYXRoLnJvdW5kKHgpO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IFdvcmxkLmNvbGxpc2lvbk1hcC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBlbnZpcm9ubWVudCA9IHRoaXMuZ2V0RW52aXJvbm1lbnQoeCwgeSk7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIXZhbGlkRW52aXJvbm1lbnRzLmluY2x1ZGVzKGVudmlyb25tZW50KVxyXG4gICAgICAgICAgICB8fCAoaWdub3JlICYmIGlnbm9yZS5pbmNsdWRlcyhlbnZpcm9ubWVudCkpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnZpcm9ubWVudC5BSVI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gV29ybGQuY29sbGlzaW9uTWFwW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiBhIHNwZWNpZmljIGVudGl0eSAoYHNvdXJjZUVudGl0eWApIGNvbGxpZGVzIHdpdGggZWl0aGVyIG9mIG9mIHRoZSBlbnRpdGllcyBpbiB0aGVcclxuICAgICAqIGdhbWVPYmplY3RzIGFycmF5IG9mIHRoZSBHYW1lU2NlbmUgYW5kIHJldHVybnMgYWxsIGVudGl0aWVzIHRoYXQgY3VycmVudGx5IGNvbGxpZGUuXHJcbiAgICAgKiBgUGFydGljbGVzYCBhcmUgdGFrZW4gb3V0IG9mIHRoaXMgY2hlY2sgYXV0b21hdGljYWxseS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc291cmNlRW50aXR5ICAgIC0gVGhlIGVudGl0eSB0byBiZSBjaGVja2VkIGFnYWluc3QgdGhlIG90aGVyIGVudGl0aWVzXHJcbiAgICAgKiBAcGFyYW0gbWFyZ2luICAgICAgICAgIC0gT3B0aW9uYWwgbWFyZ2luIGFkZGVkIHRvIHRoZSBib3VuZGluZyBib3hlcyBvZiB0aGUgZW50aXRpZXMgdG9cclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQgY29sbGlzaW9uIHJhZGl1c1xyXG4gICAgICogQHBhcmFtIGlnbm9yZUVudGl0aWVzICAtIEFycmF5IG9mIGVudGl0aWVzIHRvIGJlIGlnbm9yZWQgd2l0aCB0aGlzIGNoZWNrXHJcbiAgICAgKiBAcmV0dXJuICAgICAgICAgICAgICAgIC0gQW4gYXJyYXkgY29udGFpbmluZyBhbGwgZW50aXRpZXMgdGhhdCBjb2xsaWRlIHdpdGggdGhlIHNvdXJjZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEVudGl0eUNvbGxpc2lvbnMoXHJcbiAgICAgICAgc291cmNlRW50aXR5OiBFbnRpdHksIG1hcmdpbiA9IDAsIGlnbm9yZUVudGl0aWVzOiBFbnRpdHlbXSA9IFtdXHJcbiAgICApOiBFbnRpdHlbXSB7XHJcbiAgICAgICAgY29uc3QgY29sbGlkZXNXaXRoOiBFbnRpdHlbXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGdhbWVPYmplY3Qgb2YgdGhpcy5zY2VuZS5nYW1lT2JqZWN0cykge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBnYW1lT2JqZWN0ICE9PSBzb3VyY2VFbnRpdHlcclxuICAgICAgICAgICAgICAgICYmICEoZ2FtZU9iamVjdCBpbnN0YW5jZW9mIFBhcnRpY2xlcylcclxuICAgICAgICAgICAgICAgICYmIGdhbWVPYmplY3QgaW5zdGFuY2VvZiBFbnRpdHlcclxuICAgICAgICAgICAgICAgICYmIGdhbWVPYmplY3QuaXNUcmlnZ2VyXHJcbiAgICAgICAgICAgICAgICAmJiAhaWdub3JlRW50aXRpZXMuaW5jbHVkZXMoZ2FtZU9iamVjdClcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xsaWRpbmcgPSB0aGlzLmJvdW5kaW5nQm94ZXNDb2xsaWRlKFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUVudGl0eS5nZXRCb3VuZHMobWFyZ2luKSwgZ2FtZU9iamVjdC5nZXRCb3VuZHMobWFyZ2luKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29sbGlkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGlkZXNXaXRoLnB1c2goZ2FtZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb2xsaWRlc1dpdGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFsbCB0cmlnZ2VycyB0aGF0IGRvIGNvbGxpZGUgd2l0aCB0aGUgcHJvdmlkZWQgZW50aXR5XHJcbiAgICAgKiBAcGFyYW0gc291cmNlRW50aXR5IEVudGl0eSB0byBjaGVjayBjb2xsaXNpb25zIGFnYWluc3QgdHJpZ2dlciBib3hlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VHJpZ2dlckNvbGxpc2lvbnMoc291cmNlRW50aXR5OiBFbnRpdHkpOiBHYW1lT2JqZWN0SW5mb1tdIHtcclxuICAgICAgICBjb25zdCBjb2xsaWRlc1dpdGg6IEdhbWVPYmplY3RJbmZvW10gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCB0cmlnZ2VyT2JqZWN0IG9mIHRoaXMuc2NlbmUudHJpZ2dlck9iamVjdHMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sbGlkaW5nID0gdGhpcy5ib3VuZGluZ0JveGVzQ29sbGlkZShcclxuICAgICAgICAgICAgICAgIHNvdXJjZUVudGl0eS5nZXRCb3VuZHMoKSwgYm91bmRzRnJvbU1hcE9iamVjdCh0cmlnZ2VyT2JqZWN0KVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbGxpZGluZykge1xyXG4gICAgICAgICAgICAgICAgY29sbGlkZXNXaXRoLnB1c2godHJpZ2dlck9iamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb2xsaWRlc1dpdGg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEdhdGVDb2xsaXNpb25zKHNvdXJjZUVudGl0eTogRW50aXR5KTogR2FtZU9iamVjdEluZm9bXSB7XHJcbiAgICAgICAgY29uc3QgY29sbGlkZXNXaXRoOiBHYW1lT2JqZWN0SW5mb1tdID0gW107XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZ2F0ZU9iamVjdCBvZiB0aGlzLnNjZW5lLmdhdGVPYmplY3RzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbGxpZGluZyA9IHRoaXMuYm91bmRpbmdCb3hlc0NvbGxpZGUoXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VFbnRpdHkuZ2V0Qm91bmRzKCksIGJvdW5kc0Zyb21NYXBPYmplY3QoZ2F0ZU9iamVjdCwgMClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb2xsaWRpbmcgJiYgIWdhdGVPYmplY3QucHJvcGVydGllcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgY29sbGlkZXNXaXRoLnB1c2goZ2F0ZU9iamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb2xsaWRlc1dpdGg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENhbWVyYUJvdW5kcyhzb3VyY2VFbnRpdHk6IEVudGl0eSk6IEdhbWVPYmplY3RJbmZvW10ge1xyXG4gICAgICAgIGNvbnN0IGNvbGxpZGVzV2l0aDogR2FtZU9iamVjdEluZm9bXSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHRyaWdnZXJPYmplY3Qgb2YgdGhpcy5zY2VuZS5ib3VuZE9iamVjdHMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sbGlkaW5nID0gdGhpcy5ib3VuZGluZ0JveGVzQ29sbGlkZShcclxuICAgICAgICAgICAgICAgIHNvdXJjZUVudGl0eS5nZXRCb3VuZHMoKSwgYm91bmRzRnJvbU1hcE9iamVjdCh0cmlnZ2VyT2JqZWN0KVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbGxpZGluZykge1xyXG4gICAgICAgICAgICAgICAgY29sbGlkZXNXaXRoLnB1c2godHJpZ2dlck9iamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb2xsaWRlc1dpdGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIHR3byBwcm92aWRlZCBib3VuZGluZyBib3hlcyBhcmUgdG91Y2hpbmcgZWFjaCBvdGhlclxyXG4gICAgICogQHBhcmFtIGJveDEgZmlyc3QgYm91bmRpbmcgYm94XHJcbiAgICAgKiBAcGFyYW0gYm94MiBzZWNvbmQgYm91bmRpbmcgYm94XHJcbiAgICAgKiBAcmV0dXJuIGB0cnVlYCB3aGVuIHRoZSBib3VuZGluZyBib3hlcyBhcmUgdG91Y2hpbmcsIGBmYWxzZWAgaWYgbm90LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYm91bmRpbmdCb3hlc0NvbGxpZGUoYm94MTogQm91bmRzLCBib3gyOiBCb3VuZHMpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIShcclxuICAgICAgICAgICAgKChib3gxLnkgLSBib3gxLmhlaWdodCkgPiAoYm94Mi55KSkgfHxcclxuICAgICAgICAgICAgKGJveDEueSA8IChib3gyLnkgLSBib3gyLmhlaWdodCkpIHx8XHJcbiAgICAgICAgICAgICgoYm94MS54ICsgYm94MS53aWR0aCkgPCBib3gyLngpIHx8XHJcbiAgICAgICAgICAgIChib3gxLnggPiAoYm94Mi54ICsgYm94Mi53aWR0aCkpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0T2JqZWN0QXQoXHJcbiAgICAgICAgeDogbnVtYmVyLCB5OiBudW1iZXIsIGlnbm9yZU9iamVjdHM6IEdhbWVPYmplY3RbXSA9IFtdLCBpZ25vcmU6IEVudmlyb25tZW50W10gPSBbXVxyXG4gICAgKTogR2FtZU9iamVjdCB8IG51bGwge1xyXG4gICAgICAgIGZvciAoY29uc3QgZ2FtZU9iamVjdCBvZiB0aGlzLnNjZW5lLmdhbWVPYmplY3RzKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGdhbWVPYmplY3QgIT09IHRoaXNcclxuICAgICAgICAgICAgICAgICYmICFpZ25vcmVPYmplY3RzLmluY2x1ZGVzKGdhbWVPYmplY3QpXHJcbiAgICAgICAgICAgICAgICAmJiBpc0NvbGxpZGFibGVHYW1lT2JqZWN0KGdhbWVPYmplY3QpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW52aXJvbm1lbnQgPSBnYW1lT2JqZWN0LmNvbGxpZGVzV2l0aCh4LCB5KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZW52aXJvbm1lbnQgIT09IEVudmlyb25tZW50LkFJUiAmJiAhaWdub3JlLmluY2x1ZGVzKGVudmlyb25tZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnYW1lT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGNvbGxpc2lvbiBvZiBhIHZlcnRpY2FsIGxpbmUgd2l0aCB0aGUgd29ybGQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHggICAgICAtIFggcG9zaXRpb24gd2l0aGluIHRoZSB3b3JsZC5cclxuICAgICAqIEBwYXJhbSB5ICAgICAgLSBZIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBsaW5lIGluIHRoZSB3b3JsZC5cclxuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBUaGUgaGVpZ2h0IG9mIHRoZSBsaW5lIHRvIGNoZWNrXHJcbiAgICAgKiBAcmV0dXJuIDAgaWYgbm8gY29sbGlzaW9uLiBUeXBlIG9mIGZpcnN0IGNvbGxpc2lvbiBhbG9uZyB0aGUgbGluZSBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb2xsaWRlc1dpdGhWZXJ0aWNhbExpbmUoXHJcbiAgICAgICAgeDogbnVtYmVyLCB5OiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBpZ25vcmVPYmplY3RzPzogR2FtZU9iamVjdFtdLCBpZ25vcmU/OiBFbnZpcm9ubWVudFtdXHJcbiAgICApOiBudW1iZXIge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY29sbGlzaW9uID0gdGhpcy5jb2xsaWRlc1dpdGgoXHJcbiAgICAgICAgICAgICAgICB4LCB5IC0gaSwgaWdub3JlT2JqZWN0cywgaWdub3JlXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29sbGlzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sbGlzaW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIFkgY29vcmRpbmF0ZSBvZiB0aGUgZ3JvdW5kIGJlbG93IHRoZSBnaXZlbiB3b3JsZCBjb29yZGluYXRlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB4IC0gWCBjb29yZGluYXRlIG9mIGN1cnJlbnQgcG9zaXRpb24uXHJcbiAgICAgKiBAcGFyYW0geSAtIFkgY29vcmRpbmF0ZSBvZiBjdXJyZW50IHBvc2l0aW9uLlxyXG4gICAgICogQHJldHVybiBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSBncm91bmQgYmVsb3cgdGhlIGdpdmVuIGNvb3JkaW5hdGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRHcm91bmQoXHJcbiAgICAgICAgeDogbnVtYmVyLCB5OiBudW1iZXIsIGlnbm9yZU9iamVjdHM/OiBHYW1lT2JqZWN0W10sIGlnbm9yZT86IEVudmlyb25tZW50W11cclxuICAgICk6IG51bWJlciB7XHJcbiAgICAgICAgd2hpbGUgKFxyXG4gICAgICAgICAgICB5ID4gMCAmJiAhdGhpcy5jb2xsaWRlc1dpdGgoeCwgeSwgaWdub3JlT2JqZWN0cywgaWdub3JlKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB5LS07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4geTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRSYWluKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmFpbmluZyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0b3BSYWluKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmFpbmluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc1JhaW5pbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmFpbmluZztcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBdUJBO0FBRkE7QUFHQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7Ozs7O0FBT0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7Ozs7QUFPQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7Ozs7QUFNQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBM1VBO0FBREE7QUFDQTtBQUFBO0FBS0E7QUFIQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBT0E7QUFMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBS0E7QUFEQTtBQUNBO0FBQUE7QUFuQkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/World.js\n");
    
    /***/ }),
    
    /***/ "./lib/constants.js":
    /*!**************************!*\
      !*** ./lib/constants.js ***!
      \**************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WINDOW_ENDING_FADE_DURATION = exports.WINDOW_ENDING_CUTSCENE_DURATION = exports.PETTING_ENDING_FADE_DURATION = exports.PETTING_ENDING_CUTSCENE_DURATION = exports.DIALOG_FONT = exports.PLAYER_CARRY_HEIGHT = exports.PLAYER_WIDTH = exports.PLAYER_HEIGHT = exports.DOUBLE_JUMP_COLORS = exports.PLAYER_JUMP_TIMING_THRESHOLD = exports.TERMINAL_VELOCITY = exports.PLAYER_BOUNCE_HEIGHT = exports.PLAYER_JUMP_HEIGHT = exports.PLAYER_ACCELERATION_AIR = exports.PLAYER_ACCELERATION = exports.MAX_PLAYER_RUNNING_SPEED = exports.MAX_PLAYER_SPEED = exports.DROWNING_VELOCITY = exports.SHORT_JUMP_GRAVITY = exports.GRAVITY = exports.SOUND_INTENSITY_MULTIPLIER = exports.METER_PER_PIXEL = exports.PIXEL_PER_METER = exports.GAME_CANVAS_HEIGHT = exports.GAME_CANVAS_WIDTH = void 0;\n/**\n * Width of the game canvas in pixels.\n */\nexports.GAME_CANVAS_WIDTH = 480;\n/**\n * Height of the game canvas in pixels.\n */\nexports.GAME_CANVAS_HEIGHT = 270;\n/**\n * Number if pixels per meter on the world map. Used to convert from pixel coordinates to meters (for size and\n * physics calculations).\n */\nexports.PIXEL_PER_METER = 18;\nexports.METER_PER_PIXEL = 1 / exports.PIXEL_PER_METER;\nexports.SOUND_INTENSITY_MULTIPLIER = 50;\n/** Gravity in m/s² */\nexports.GRAVITY = 35;\n/** Gravity for short jumps (while flying upwards, after player releases jump key) in m/s² */\nexports.SHORT_JUMP_GRAVITY = 70;\n/** Drowning velocity in meters per second. */\nexports.DROWNING_VELOCITY = -1;\n/** Maximum movement speed of the player in m/s */\nexports.MAX_PLAYER_SPEED = 5;\n/** Maximum movement speed of the player in m/s */\nexports.MAX_PLAYER_RUNNING_SPEED = 7;\n/** Player movement acceleration on ground in m/s² */\nexports.PLAYER_ACCELERATION = 30;\n/** Player movement acceleration in air in m/s² */\nexports.PLAYER_ACCELERATION_AIR = 12;\n/** Player jump height in meters. */\nexports.PLAYER_JUMP_HEIGHT = 3.75;\n/** Player jump height in meters. */\nexports.PLAYER_BOUNCE_HEIGHT = 10;\n/** Terminal velocity in m/s */\nexports.TERMINAL_VELOCITY = -30;\n/** Threshold in seconds for allowing a jump after entering falling state */\nexports.PLAYER_JUMP_TIMING_THRESHOLD = 0.1;\n/** Color array containing all double jump particle colors */\nexports.DOUBLE_JUMP_COLORS = [\"#ffffff\", \"#cccccc\", \"#aaaaaa\"];\n/** Player dimensions */\nexports.PLAYER_HEIGHT = 1.60 * exports.PIXEL_PER_METER;\nexports.PLAYER_WIDTH = 0.5 * exports.PIXEL_PER_METER;\nexports.PLAYER_CARRY_HEIGHT = 4;\n/** Fonts */\nexports.DIALOG_FONT = \"fonts/pixcelsior.font.json\";\n/** Total duration in seconds until dog petting ending occurs */\nexports.PETTING_ENDING_CUTSCENE_DURATION = 135;\nexports.PETTING_ENDING_FADE_DURATION = 5;\n/** Total duration in seconds of ending d cutscene */\nexports.WINDOW_ENDING_CUTSCENE_DURATION = 50;\nexports.WINDOW_ENDING_FADE_DURATION = 3;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvY29uc3RhbnRzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN0YW50cy50cz84NWVlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBXaWR0aCBvZiB0aGUgZ2FtZSBjYW52YXMgaW4gcGl4ZWxzLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEdBTUVfQ0FOVkFTX1dJRFRIID0gNDgwO1xyXG5cclxuLyoqXHJcbiAqIEhlaWdodCBvZiB0aGUgZ2FtZSBjYW52YXMgaW4gcGl4ZWxzLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEdBTUVfQ0FOVkFTX0hFSUdIVCA9IDI3MDtcclxuXHJcbi8qKlxyXG4gKiBOdW1iZXIgaWYgcGl4ZWxzIHBlciBtZXRlciBvbiB0aGUgd29ybGQgbWFwLiBVc2VkIHRvIGNvbnZlcnQgZnJvbSBwaXhlbCBjb29yZGluYXRlcyB0byBtZXRlcnMgKGZvciBzaXplIGFuZFxyXG4gKiBwaHlzaWNzIGNhbGN1bGF0aW9ucykuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgUElYRUxfUEVSX01FVEVSID0gMTg7XHJcbmV4cG9ydCBjb25zdCBNRVRFUl9QRVJfUElYRUwgPSAxIC8gUElYRUxfUEVSX01FVEVSO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNPVU5EX0lOVEVOU0lUWV9NVUxUSVBMSUVSID0gNTA7XHJcblxyXG4vKiogR3Jhdml0eSBpbiBtL3PCsiAqL1xyXG5leHBvcnQgY29uc3QgR1JBVklUWSA9IDM1O1xyXG5cclxuLyoqIEdyYXZpdHkgZm9yIHNob3J0IGp1bXBzICh3aGlsZSBmbHlpbmcgdXB3YXJkcywgYWZ0ZXIgcGxheWVyIHJlbGVhc2VzIGp1bXAga2V5KSBpbiBtL3PCsiAqL1xyXG5leHBvcnQgY29uc3QgU0hPUlRfSlVNUF9HUkFWSVRZID0gNzA7XHJcblxyXG4vKiogRHJvd25pbmcgdmVsb2NpdHkgaW4gbWV0ZXJzIHBlciBzZWNvbmQuICovXHJcbmV4cG9ydCBjb25zdCBEUk9XTklOR19WRUxPQ0lUWSA9IC0xO1xyXG5cclxuLyoqIE1heGltdW0gbW92ZW1lbnQgc3BlZWQgb2YgdGhlIHBsYXllciBpbiBtL3MgKi9cclxuZXhwb3J0IGNvbnN0IE1BWF9QTEFZRVJfU1BFRUQgPSA1O1xyXG5cclxuLyoqIE1heGltdW0gbW92ZW1lbnQgc3BlZWQgb2YgdGhlIHBsYXllciBpbiBtL3MgKi9cclxuZXhwb3J0IGNvbnN0IE1BWF9QTEFZRVJfUlVOTklOR19TUEVFRCA9IDc7XHJcblxyXG4vKiogUGxheWVyIG1vdmVtZW50IGFjY2VsZXJhdGlvbiBvbiBncm91bmQgaW4gbS9zwrIgKi9cclxuZXhwb3J0IGNvbnN0IFBMQVlFUl9BQ0NFTEVSQVRJT04gPSAzMDtcclxuXHJcbi8qKiBQbGF5ZXIgbW92ZW1lbnQgYWNjZWxlcmF0aW9uIGluIGFpciBpbiBtL3PCsiAqL1xyXG5leHBvcnQgY29uc3QgUExBWUVSX0FDQ0VMRVJBVElPTl9BSVIgPSAxMjtcclxuXHJcbi8qKiBQbGF5ZXIganVtcCBoZWlnaHQgaW4gbWV0ZXJzLiAqL1xyXG5leHBvcnQgY29uc3QgUExBWUVSX0pVTVBfSEVJR0hUID0gMy43NTtcclxuXHJcbi8qKiBQbGF5ZXIganVtcCBoZWlnaHQgaW4gbWV0ZXJzLiAqL1xyXG5leHBvcnQgY29uc3QgUExBWUVSX0JPVU5DRV9IRUlHSFQgPSAxMDtcclxuXHJcbi8qKiBUZXJtaW5hbCB2ZWxvY2l0eSBpbiBtL3MgKi9cclxuZXhwb3J0IGNvbnN0IFRFUk1JTkFMX1ZFTE9DSVRZID0gLTMwO1xyXG5cclxuLyoqIFRocmVzaG9sZCBpbiBzZWNvbmRzIGZvciBhbGxvd2luZyBhIGp1bXAgYWZ0ZXIgZW50ZXJpbmcgZmFsbGluZyBzdGF0ZSAqL1xyXG5leHBvcnQgY29uc3QgUExBWUVSX0pVTVBfVElNSU5HX1RIUkVTSE9MRCA9IDAuMTtcclxuXHJcbi8qKiBDb2xvciBhcnJheSBjb250YWluaW5nIGFsbCBkb3VibGUganVtcCBwYXJ0aWNsZSBjb2xvcnMgKi9cclxuZXhwb3J0IGNvbnN0IERPVUJMRV9KVU1QX0NPTE9SUyA9IFsgXCIjZmZmZmZmXCIsIFwiI2NjY2NjY1wiLCBcIiNhYWFhYWFcIiBdO1xyXG5cclxuLyoqIFBsYXllciBkaW1lbnNpb25zICovXHJcbmV4cG9ydCBjb25zdCBQTEFZRVJfSEVJR0hUID0gMS42MCAqIFBJWEVMX1BFUl9NRVRFUjtcclxuZXhwb3J0IGNvbnN0IFBMQVlFUl9XSURUSCA9IDAuNSAqIFBJWEVMX1BFUl9NRVRFUjtcclxuZXhwb3J0IGNvbnN0IFBMQVlFUl9DQVJSWV9IRUlHSFQgPSA0O1xyXG5cclxuLyoqIEZvbnRzICovXHJcbmV4cG9ydCBjb25zdCBESUFMT0dfRk9OVCA9IFwiZm9udHMvcGl4Y2Vsc2lvci5mb250Lmpzb25cIjtcclxuXHJcbi8qKiBUb3RhbCBkdXJhdGlvbiBpbiBzZWNvbmRzIHVudGlsIGRvZyBwZXR0aW5nIGVuZGluZyBvY2N1cnMgKi9cclxuZXhwb3J0IGNvbnN0IFBFVFRJTkdfRU5ESU5HX0NVVFNDRU5FX0RVUkFUSU9OID0gMTM1O1xyXG5leHBvcnQgY29uc3QgUEVUVElOR19FTkRJTkdfRkFERV9EVVJBVElPTiA9IDU7XHJcblxyXG4vKiogVG90YWwgZHVyYXRpb24gaW4gc2Vjb25kcyBvZiBlbmRpbmcgZCBjdXRzY2VuZSAqL1xyXG5leHBvcnQgY29uc3QgV0lORE9XX0VORElOR19DVVRTQ0VORV9EVVJBVElPTiA9IDUwO1xyXG5leHBvcnQgY29uc3QgV0lORE9XX0VORElOR19GQURFX0RVUkFUSU9OID0gMzsiXSwibWFwcGluZ3MiOiI7OztBQUFBOztBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/constants.js\n");
    
    /***/ }),
    
    /***/ "./lib/easings.js":
    /*!************************!*\
      !*** ./lib/easings.js ***!
      \************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.easeInOutBounce = exports.easeInBounce = exports.easeOutBounce = exports.easeInOutElastic = exports.easeOutElastic = exports.easeInElastic = exports.easeInOutBack = exports.easeOutBack = exports.easeInBack = exports.easeInOutCirc = exports.easeOutCirc = exports.easeInCirc = exports.easeInOutExpo = exports.easeOutExpo = exports.easeInExpo = exports.easeInOutQuint = exports.easeOutQuint = exports.easeInQuint = exports.easeInOutQuart = exports.easeOutQuart = exports.easeInQuart = exports.easeInOutCubic = exports.easeOutCubic = exports.easeInCubic = exports.easeInOutQuad = exports.easeOutQuad = exports.easeInQuad = exports.easeInOutSine = exports.easeOutSine = exports.easeInSine = exports.linear = void 0;\nconst { PI, cos, sin } = Math;\nfunction linear(t) {\n    return t;\n}\nexports.linear = linear;\nfunction easeInSine(t) {\n    return 1 - cos(t * PI / 2);\n}\nexports.easeInSine = easeInSine;\nfunction easeOutSine(t) {\n    return sin(t * PI / 2);\n}\nexports.easeOutSine = easeOutSine;\nfunction easeInOutSine(t) {\n    return 0.5 - cos(PI * t) / 2;\n}\nexports.easeInOutSine = easeInOutSine;\nfunction easeInQuad(t) {\n    return t * t;\n}\nexports.easeInQuad = easeInQuad;\nfunction easeOutQuad(t) {\n    return t * (2 - t);\n}\nexports.easeOutQuad = easeOutQuad;\nfunction easeInOutQuad(t) {\n    if (t < 0.5) {\n        return 2 * t * t;\n    }\n    else {\n        return 4 * t - 2 * t * t - 1;\n    }\n}\nexports.easeInOutQuad = easeInOutQuad;\nfunction easeInCubic(t) {\n    return Math.pow(t, 3);\n}\nexports.easeInCubic = easeInCubic;\nfunction easeOutCubic(t) {\n    return Math.pow(t, 3) + 3 * (t - t * t);\n}\nexports.easeOutCubic = easeOutCubic;\nfunction easeInOutCubic(t) {\n    if (t < 0.5) {\n        return 4 * Math.pow(t, 3);\n    }\n    else {\n        return 4 * Math.pow(t, 3) + 12 * (t - t * t) - 3;\n    }\n}\nexports.easeInOutCubic = easeInOutCubic;\nfunction easeInQuart(t) {\n    return Math.pow(t, 4);\n}\nexports.easeInQuart = easeInQuart;\nfunction easeOutQuart(t) {\n    return 1 - Math.pow((t - 1), 4);\n}\nexports.easeOutQuart = easeOutQuart;\nfunction easeInOutQuart(t) {\n    if (t < 0.5) {\n        return 8 * Math.pow(t, 4);\n    }\n    else {\n        return 1 - 8 * Math.pow((t - 1), 4);\n    }\n}\nexports.easeInOutQuart = easeInOutQuart;\nfunction easeInQuint(t) {\n    return Math.pow(t, 5);\n}\nexports.easeInQuint = easeInQuint;\nfunction easeOutQuint(t) {\n    return 1 + Math.pow((t - 1), 5);\n}\nexports.easeOutQuint = easeOutQuint;\nfunction easeInOutQuint(t) {\n    if (t < 0.5) {\n        return 16 * Math.pow(t, 5);\n    }\n    else {\n        return 1 + 16 * Math.pow((t - 1), 5);\n    }\n}\nexports.easeInOutQuint = easeInOutQuint;\nfunction easeInExpo(t) {\n    if (t <= 0) {\n        return 0;\n    }\n    return Math.pow(2, (10 * (t - 1)));\n}\nexports.easeInExpo = easeInExpo;\nfunction easeOutExpo(t) {\n    if (t >= 1) {\n        return 1;\n    }\n    return 1 - 1 / Math.pow(1024, t);\n}\nexports.easeOutExpo = easeOutExpo;\nfunction easeInOutExpo(t) {\n    if (t <= 0) {\n        return 0;\n    }\n    if (t >= 1) {\n        return 1;\n    }\n    if (t < 0.5) {\n        return Math.pow(1048576, t) / 2048;\n    }\n    else {\n        return 1 - 512 / Math.pow(1048576, t);\n    }\n}\nexports.easeInOutExpo = easeInOutExpo;\nfunction easeInCirc(t) {\n    return 1 - Math.pow((1 - t * t), 0.5);\n}\nexports.easeInCirc = easeInCirc;\nfunction easeOutCirc(t) {\n    return Math.pow((2 * t - t * t), 0.5);\n}\nexports.easeOutCirc = easeOutCirc;\nfunction easeInOutCirc(t) {\n    if (t < 0.5) {\n        return 0.5 - Math.pow((0.25 - t * t), 0.5);\n    }\n    else {\n        return (Math.pow((4 * t * (2 - t) - 3), 0.5) + 1) / 2;\n    }\n}\nexports.easeInOutCirc = easeInOutCirc;\nfunction easeInBack(t) {\n    return 2.70158 * Math.pow(t, 3) - 1.70158 * t * t;\n}\nexports.easeInBack = easeInBack;\nfunction easeOutBack(t) {\n    return 2.70158 * Math.pow(t, 3) - 6.40316 * t * t + 4.70158 * t;\n}\nexports.easeOutBack = easeOutBack;\nfunction easeInOutBack(t) {\n    if (t < 0.5) {\n        return 14.379638 * Math.pow(t, 3) - 5.189819 * t * t;\n    }\n    else {\n        return 14.379638 * Math.pow(t, 3) - 37.949095 * t * t + 32.759276 * t - 8.189819;\n    }\n}\nexports.easeInOutBack = easeInOutBack;\nfunction easeInElastic(t) {\n    if (t <= 0) {\n        return 0;\n    }\n    if (t >= 1) {\n        return 1;\n    }\n    return Math.pow(1024, (t - 1)) * -sin(PI * (20 * t / 3 - 43 / 6));\n}\nexports.easeInElastic = easeInElastic;\nfunction easeOutElastic(t) {\n    if (t <= 0) {\n        return 0;\n    }\n    if (t >= 1) {\n        return 1;\n    }\n    return sin(PI * (20 * t / 3 - 0.5)) / (Math.pow(1024, t)) + 1;\n}\nexports.easeOutElastic = easeOutElastic;\nfunction easeInOutElastic(t) {\n    if (t <= 0) {\n        return 0;\n    }\n    if (t >= 1) {\n        return 1;\n    }\n    if (t < 0.5) {\n        return Math.pow(1048576, t) / -2048 * sin(PI * (80 * t / 9 - 89 / 18));\n    }\n    else {\n        return 512 / Math.pow(1048576, t) * sin(PI * (80 * t / 9 - 89 / 18)) + 1;\n    }\n}\nexports.easeInOutElastic = easeInOutElastic;\nfunction easeOutBounce(t) {\n    if (t < 4 / 11) {\n        return 121 * t * t / 16;\n    }\n    else if (t < 8 / 11) {\n        return 121 * t * t / 16 - 33 * t / 4 + 3;\n    }\n    else if (t < 10 / 11) {\n        return 121 * t * t / 16 - 99 * t / 8 + 6;\n    }\n    else {\n        return 121 * t * t / 16 - 231 * t / 16 + 63 / 8;\n    }\n}\nexports.easeOutBounce = easeOutBounce;\nfunction easeInBounce(t) {\n    return 1 - easeOutBounce(1 - t);\n}\nexports.easeInBounce = easeInBounce;\nfunction easeInOutBounce(t) {\n    if (t < 0.5) {\n        return easeInBounce(t * 2) / 2;\n    }\n    else {\n        return easeOutBounce(t * 2 - 1) / 2 + 0.5;\n    }\n}\nexports.easeInOutBounce = easeInOutBounce;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZWFzaW5ncy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lYXNpbmdzLnRzPzRhZjAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBQSSwgY29zLCBzaW4gfSA9IE1hdGg7XHJcblxyXG5leHBvcnQgdHlwZSBFYXNpbmcgPSAodDogbnVtYmVyKSA9PiBudW1iZXI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyKHQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJblNpbmUodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiAxIC0gY29zKHQgKiBQSSAvIDIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZU91dFNpbmUodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBzaW4odCAqIFBJIC8gMik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW5PdXRTaW5lKHQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gMC41IC0gY29zKFBJICogdCkgLyAyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluUXVhZCh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHQgKiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZU91dFF1YWQodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0ICogKDIgLSB0KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbk91dFF1YWQodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmICh0IDwgMC41KSB7XHJcbiAgICAgICAgcmV0dXJuIDIgKiB0ICogdDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDQgKiB0IC0gMiAqIHQgKiB0IC0gMTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbkN1YmljKHQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdCAqKiAzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZU91dEN1YmljKHQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdCAqKiAzICsgMyAqICh0IC0gdCAqIHQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluT3V0Q3ViaWModDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmICh0IDwgMC41KSB7XHJcbiAgICAgICAgcmV0dXJuIDQgKiB0ICoqIDM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiA0ICogdCAqKiAzICsgMTIgKiAodCAtIHQgKiB0KSAtIDM7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW5RdWFydCh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHQgKiogNDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VPdXRRdWFydCh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIDEgLSAodCAtIDEpICoqIDQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW5PdXRRdWFydCh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKHQgPCAwLjUpIHtcclxuICAgICAgICByZXR1cm4gOCAqIHQgKiogNDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSA4ICogKHQgLSAxKSAqKiA0O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluUXVpbnQodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0ICoqIDU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlYXNlT3V0UXVpbnQodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiAxICsgKHQgLSAxKSAqKiA1O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluT3V0UXVpbnQodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmICh0IDwgMC41KSB7XHJcbiAgICAgICAgcmV0dXJuIDE2ICogdCAqKiA1O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gMSArIDE2ICogKHQgLSAxKSAqKiA1O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluRXhwbyh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKHQgPD0gMCkgeyByZXR1cm4gMDsgfVxyXG4gICAgcmV0dXJuIDIgKiogKDEwICogKHQgLSAxKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlYXNlT3V0RXhwbyh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKHQgPj0gMSkge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDEgLSAxIC8gMTAyNCAqKiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluT3V0RXhwbyh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKHQgPD0gMCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgaWYgKHQgPj0gMSkge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gICAgaWYgKHQgPCAwLjUpIHtcclxuICAgICAgICByZXR1cm4gMTA0ODU3NiAqKiB0IC8gMjA0ODtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSA1MTIgLyAxMDQ4NTc2ICoqIHQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW5DaXJjKHQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gMSAtICgxIC0gdCAqIHQpICoqIDAuNTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VPdXRDaXJjKHQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gKDIgKiB0IC0gdCAqIHQpICoqIDAuNTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbk91dENpcmModDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmICh0IDwgMC41KSB7XHJcbiAgICAgICAgcmV0dXJuIDAuNSAtICgwLjI1IC0gdCAqIHQpICoqIDAuNTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICgoNCAqIHQgKiAoMiAtIHQpIC0gMykgKiogMC41ICsgMSkgLyAyO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluQmFjayh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIDIuNzAxNTggKiB0ICoqIDMgLSAxLjcwMTU4ICogdCAqIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlYXNlT3V0QmFjayh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIDIuNzAxNTggKiB0ICoqIDMgLSA2LjQwMzE2ICogdCAqIHQgKyA0LjcwMTU4ICogdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbk91dEJhY2sodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmICh0IDwgMC41KSB7XHJcbiAgICAgICAgcmV0dXJuIDE0LjM3OTYzOCAqIHQgKiogMyAtIDUuMTg5ODE5ICogdCAqIHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAxNC4zNzk2MzggKiB0ICoqIDMgLSAzNy45NDkwOTUgKiB0ICogdCArIDMyLjc1OTI3NiAqIHQgLSA4LjE4OTgxOTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbkVsYXN0aWModDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmICh0IDw9IDApIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGlmICh0ID49IDEpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIHJldHVybiAxMDI0ICoqICh0IC0gMSkgKiAtc2luKFBJICogKDIwICogdCAvIDMgLSA0MyAvIDYpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VPdXRFbGFzdGljKHQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBpZiAodCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBpZiAodCA+PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2luKFBJICogKDIwICogdCAvIDMgLSAwLjUpKSAvICgxMDI0ICoqIHQpICsgMTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbk91dEVsYXN0aWModDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmICh0IDw9IDApIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGlmICh0ID49IDEpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIGlmICh0IDwgMC41KSB7XHJcbiAgICAgICAgcmV0dXJuIDEwNDg1NzYgKiogdCAvIC0yMDQ4ICogc2luKFBJICogKDgwICogdCAvIDkgLSA4OSAvIDE4KSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiA1MTIgLyAxMDQ4NTc2ICoqIHQgKiBzaW4oUEkgKiAoODAgKiB0IC8gOSAtIDg5IC8gMTgpKSArIDE7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlYXNlT3V0Qm91bmNlKHQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBpZiAodCA8IDQgLyAxMSkge1xyXG4gICAgICAgIHJldHVybiAxMjEgKiB0ICogdCAvIDE2O1xyXG4gICAgfSBlbHNlIGlmICh0IDwgOCAvIDExKSB7XHJcbiAgICAgICAgcmV0dXJuIDEyMSAqIHQgKiB0IC8gMTYgLSAzMyAqIHQgLyA0ICsgMztcclxuICAgIH0gZWxzZSBpZiAodCA8IDEwIC8gMTEpIHtcclxuICAgICAgICByZXR1cm4gMTIxICogdCAqIHQgLyAxNiAtIDk5ICogdCAvIDggKyA2O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gMTIxICogdCAqIHQgLyAxNiAtIDIzMSAqIHQgLyAxNiArIDYzIC8gODtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbkJvdW5jZSh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIDEgLSBlYXNlT3V0Qm91bmNlKDEgLSB0KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbk91dEJvdW5jZSh0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKHQgPCAwLjUpIHtcclxuICAgICAgICByZXR1cm4gZWFzZUluQm91bmNlKHQgKiAyKSAvIDI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBlYXNlT3V0Qm91bmNlKHQgKiAyIC0gMSkgLyAyICsgMC41O1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBWUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/easings.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Bird.js":
    /*!******************************!*\
      !*** ./lib/entities/Bird.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Bird_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Bird = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ./../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ./../Assets */ \"./lib/Assets.js\");\nconst util_1 = __webpack_require__(/*! ./../util */ \"./lib/util.js\");\nconst Conversation_1 = __webpack_require__(/*! ./../Conversation */ \"./lib/Conversation.js\");\nconst bird_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ./../../assets/dialog/bird.dialog.json */ \"./assets/dialog/bird.dialog.json\"));\nconst constants_1 = __webpack_require__(/*! ./../constants */ \"./lib/constants.js\");\nconst Entity_1 = __webpack_require__(/*! ./../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ./../World */ \"./lib/World.js\");\nconst GameScene_1 = __webpack_require__(/*! ./../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Particles_1 = __webpack_require__(/*! ./../Particles */ \"./lib/Particles.js\");\nconst Renderer_1 = __webpack_require__(/*! ./../Renderer */ \"./lib/Renderer.js\");\nconst Sound_1 = __webpack_require__(/*! ./../Sound */ \"./lib/Sound.js\");\nvar BirdState;\n(function (BirdState) {\n    BirdState[BirdState[\"WAITING_LEFT\"] = 0] = \"WAITING_LEFT\";\n    BirdState[BirdState[\"FLYING_RIGHT\"] = 1] = \"FLYING_RIGHT\";\n    BirdState[BirdState[\"WAITING_RIGHT\"] = 2] = \"WAITING_RIGHT\";\n    BirdState[BirdState[\"FLYING_LEFT\"] = 3] = \"FLYING_LEFT\";\n})(BirdState || (BirdState = {}));\nconst WAITING_TIME = 5;\nconst JUMP_INTERVAL = 0.3;\nconst MAX_SPEED = 4;\nlet Bird = Bird_1 = class Bird extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 28, 24);\n        this.move = 1;\n        this.jumpHeight = 1.5;\n        this.waitTimer = 0;\n        this.state = BirdState.WAITING_LEFT;\n        this.jumpTimer = 0;\n        this.minAltitude = y;\n        this.conversation = new Conversation_1.Conversation(bird_dialog_json_1.default, this);\n        this.doubleJumpEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x, y: this.y },\n            velocity: () => ({ x: util_1.rnd(-1, 1) * 90, y: util_1.rnd(-1, 0) * 100 }),\n            color: () => util_1.rndItem(constants_1.DOUBLE_JUMP_COLORS),\n            size: util_1.rnd(1, 2),\n            gravity: { x: 0, y: -120 },\n            lifetime: () => util_1.rnd(0.4, 0.6),\n            alphaCurve: Particles_1.valueCurves.trapeze(0.05, 0.2)\n        });\n        this.setMaxVelocity(MAX_SPEED);\n    }\n    isWaiting() {\n        return this.state === BirdState.WAITING_LEFT || this.state === BirdState.WAITING_RIGHT;\n    }\n    jump() {\n        this.jumpTimer = JUMP_INTERVAL;\n        this.setVelocityY(Math.sqrt(2 * this.jumpHeight * constants_1.GRAVITY));\n        this.doubleJumpEmitter.setPosition(this.x, this.y + 20);\n        if (!this.scene.pettingCutscene) {\n            this.doubleJumpEmitter.emit(20);\n            const vol = util_1.calculateVolume(this.distanceToPlayer, 0.4);\n            if (vol > 0) {\n                Bird_1.jumpSound.setVolume(vol);\n                Bird_1.jumpSound.stop();\n                Bird_1.jumpSound.play();\n            }\n        }\n    }\n    canJump() {\n        return this.jumpTimer === 0;\n    }\n    updatePosition(newX, newY) {\n        this.x = newX;\n        this.y = newY;\n        // Check collision with the environment and correct player position and movement\n        if (this.pullOutOfGround() !== 0 || this.pullOutOfCeiling() !== 0) {\n            this.setVelocityY(0);\n        }\n        if (this.pullOutOfWall() !== 0) {\n            this.setVelocityX(0);\n        }\n    }\n    pullOutOfGround() {\n        let pulled = 0, col = 0;\n        if (this.getVelocityY() <= 0) {\n            const world = this.scene.world;\n            const height = world.getHeight();\n            col = world.collidesWith(this.x, this.y, [this], [World_1.Environment.WATER]);\n            while (this.y < height && col) {\n                pulled++;\n                this.y++;\n                col = world.collidesWith(this.x, this.y);\n            }\n        }\n        return pulled;\n    }\n    pullOutOfCeiling() {\n        let pulled = 0;\n        const world = this.scene.world;\n        while (this.y > 0\n            && world.collidesWith(this.x, this.y + this.height, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n            pulled++;\n            this.y--;\n        }\n        return pulled;\n    }\n    pullOutOfWall() {\n        let pulled = 0;\n        const world = this.scene.world;\n        if (this.getVelocityX() > 0) {\n            while (world.collidesWithVerticalLine(this.x + this.width / 2, this.y + this.height * 3 / 4, this.height / 2, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n                this.x--;\n                pulled++;\n            }\n        }\n        else {\n            while (world.collidesWithVerticalLine(this.x - this.width / 2, this.y + this.height * 3 / 4, this.height / 2, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n                this.x++;\n                pulled++;\n            }\n        }\n        return pulled;\n    }\n    nextState() {\n        if (this.state === BirdState.FLYING_LEFT) {\n            this.state = BirdState.WAITING_LEFT;\n        }\n        else {\n            this.state = this.state + 1;\n        }\n    }\n    isReadyForConversation() {\n        const superResult = super.isReadyForConversation();\n        return (superResult && this.isWaiting());\n    }\n    draw(ctx) {\n        let alpha;\n        if (this.scene.pettingCutscene) {\n            alpha = Math.max(0, 1 - (this.scene.pettingCutsceneTime / constants_1.PETTING_ENDING_CUTSCENE_DURATION));\n        }\n        this.scene.renderer.addAseprite(Bird_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES, this.direction, undefined, alpha);\n        if (this.scene.showBounds)\n            this.drawBounds();\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        this.move = 0;\n        // Triggers\n        const triggerCollisions = this.scene.world.getTriggerCollisions(this);\n        if (this.jumpTimer > 0) {\n            this.jumpTimer -= dt;\n            if (this.jumpTimer < 0) {\n                this.jumpTimer = 0;\n            }\n        }\n        if ((this.state === BirdState.WAITING_LEFT || this.state === BirdState.WAITING_RIGHT) && !this.hasActiveConversation()) {\n            this.waitTimer += dt;\n            if (this.waitTimer >= WAITING_TIME) {\n                this.waitTimer = 0;\n                this.nextState();\n            }\n        }\n        if (this.state === BirdState.FLYING_RIGHT || this.state === BirdState.FLYING_LEFT) {\n            this.move = this.state === BirdState.FLYING_RIGHT ? 1 : -1;\n            if (this.y < this.minAltitude && this.canJump()) {\n                this.jump();\n            }\n            if (this.state === BirdState.FLYING_RIGHT && triggerCollisions.length > 0 && triggerCollisions.find(t => t.name === \"bird_nest_right\")) {\n                this.nextState();\n            }\n            if (this.state === BirdState.FLYING_LEFT && triggerCollisions.length > 0 && triggerCollisions.find(t => t.name === \"bird_nest_left\")) {\n                this.nextState();\n            }\n        }\n        // Bird acceleration\n        if (this.move !== 0) {\n            this.direction = this.move;\n            this.accelerateX(constants_1.PLAYER_ACCELERATION_AIR * dt * this.move);\n        }\n        else {\n            if (this.getVelocityX() > 0) {\n                this.decelerateX(constants_1.PLAYER_ACCELERATION_AIR * dt);\n            }\n            else {\n                this.decelerateX(-constants_1.PLAYER_ACCELERATION_AIR * dt);\n            }\n        }\n        this.speechBubble.update(this.x, this.y);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/bird.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Bird, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/jumping/jump_neutral.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Bird, \"jumpSound\", void 0);\nBird = Bird_1 = tslib_1.__decorate([\n    Entity_1.entity(\"bird\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Bird);\nexports.Bird = Bird;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvQmlyZC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9CaXJkLnRzP2Y3MzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi8uLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLy4uL0Fzc2V0c1wiO1xyXG5pbXBvcnQgeyBjYWxjdWxhdGVWb2x1bWUsIHJuZCwgcm5kSXRlbSB9IGZyb20gXCIuLy4uL3V0aWxcIjtcclxuaW1wb3J0IHsgQ29udmVyc2F0aW9uIH0gZnJvbSBcIi4vLi4vQ29udmVyc2F0aW9uXCI7XHJcbmltcG9ydCBjb252ZXJzYXRpb24gZnJvbSBcIi4vLi4vLi4vYXNzZXRzL2RpYWxvZy9iaXJkLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCB7IERPVUJMRV9KVU1QX0NPTE9SUywgR1JBVklUWSwgUEVUVElOR19FTkRJTkdfQ1VUU0NFTkVfRFVSQVRJT04sIFBMQVlFUl9BQ0NFTEVSQVRJT05fQUlSIH0gZnJvbSBcIi4vLi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLy4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gXCIuLy4uL1dvcmxkXCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuLy4uL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgTlBDIH0gZnJvbSBcIi4vTlBDXCI7XHJcbmltcG9ydCB7IFBhcnRpY2xlRW1pdHRlciwgdmFsdWVDdXJ2ZXMgfSBmcm9tIFwiLi8uLi9QYXJ0aWNsZXNcIjtcclxuaW1wb3J0IHsgUmVuZGVyaW5nTGF5ZXIgfSBmcm9tIFwiLi8uLi9SZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuLy4uL1NvdW5kXCI7XHJcblxyXG5lbnVtIEJpcmRTdGF0ZSB7XHJcbiAgICBXQUlUSU5HX0xFRlQsXHJcbiAgICBGTFlJTkdfUklHSFQsXHJcbiAgICBXQUlUSU5HX1JJR0hULFxyXG4gICAgRkxZSU5HX0xFRlRcclxufVxyXG5cclxuY29uc3QgV0FJVElOR19USU1FID0gNTtcclxuY29uc3QgSlVNUF9JTlRFUlZBTCA9IDAuMztcclxuY29uc3QgTUFYX1NQRUVEID0gNDtcclxuXHJcbkBlbnRpdHkoXCJiaXJkXCIpXHJcbmV4cG9ydCBjbGFzcyBCaXJkIGV4dGVuZHMgTlBDIHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvYmlyZC5hc2Vwcml0ZS5qc29uXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzcHJpdGU6IEFzZXByaXRlO1xyXG4gICAgQGFzc2V0KFwic291bmRzL2p1bXBpbmcvanVtcF9uZXV0cmFsLm9nZ1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMganVtcFNvdW5kOiBTb3VuZDtcclxuICAgIHByaXZhdGUgZG91YmxlSnVtcEVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjtcclxuICAgIHByaXZhdGUgbW92ZTogMCB8IDEgfCAtMSAgPSAxO1xyXG4gICAgcHJpdmF0ZSBtaW5BbHRpdHVkZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBqdW1wSGVpZ2h0ID0gMS41O1xyXG4gICAgcHJpdmF0ZSB3YWl0VGltZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0ZSA9IEJpcmRTdGF0ZS5XQUlUSU5HX0xFRlQ7XHJcbiAgICBwcml2YXRlIGp1bXBUaW1lciA9IDA7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNjZW5lOiBHYW1lU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHksIDI4LCAyNCk7XHJcbiAgICAgICAgdGhpcy5taW5BbHRpdHVkZSA9IHk7XHJcbiAgICAgICAgdGhpcy5jb252ZXJzYXRpb24gPSBuZXcgQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbiwgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZG91YmxlSnVtcEVtaXR0ZXIgPSB0aGlzLnNjZW5lLnBhcnRpY2xlcy5jcmVhdGVFbWl0dGVyKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IHt4OiB0aGlzLngsIHk6IHRoaXMueX0sXHJcbiAgICAgICAgICAgIHZlbG9jaXR5OiAoKSA9PiAoeyB4OiBybmQoLTEsIDEpICogOTAsIHk6IHJuZCgtMSwgMCkgKiAxMDAgfSksXHJcbiAgICAgICAgICAgIGNvbG9yOiAoKSA9PiBybmRJdGVtKERPVUJMRV9KVU1QX0NPTE9SUyksXHJcbiAgICAgICAgICAgIHNpemU6IHJuZCgxLCAyKSxcclxuICAgICAgICAgICAgZ3Jhdml0eToge3g6IDAsIHk6IC0xMjB9LFxyXG4gICAgICAgICAgICBsaWZldGltZTogKCkgPT4gcm5kKDAuNCwgMC42KSxcclxuICAgICAgICAgICAgYWxwaGFDdXJ2ZTogdmFsdWVDdXJ2ZXMudHJhcGV6ZSgwLjA1LCAwLjIpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZXRNYXhWZWxvY2l0eShNQVhfU1BFRUQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNXYWl0aW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSBCaXJkU3RhdGUuV0FJVElOR19MRUZUIHx8IHRoaXMuc3RhdGUgPT09IEJpcmRTdGF0ZS5XQUlUSU5HX1JJR0hUO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBqdW1wKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuanVtcFRpbWVyID0gSlVNUF9JTlRFUlZBTDtcclxuICAgICAgICB0aGlzLnNldFZlbG9jaXR5WShNYXRoLnNxcnQoMiAqIHRoaXMuanVtcEhlaWdodCAqIEdSQVZJVFkpKTtcclxuICAgICAgICB0aGlzLmRvdWJsZUp1bXBFbWl0dGVyLnNldFBvc2l0aW9uKHRoaXMueCwgdGhpcy55ICsgMjApO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2NlbmUucGV0dGluZ0N1dHNjZW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG91YmxlSnVtcEVtaXR0ZXIuZW1pdCgyMCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2b2wgPSBjYWxjdWxhdGVWb2x1bWUodGhpcy5kaXN0YW5jZVRvUGxheWVyLCAwLjQpO1xyXG4gICAgICAgICAgICBpZiAodm9sID4gMCkge1xyXG4gICAgICAgICAgICAgICAgQmlyZC5qdW1wU291bmQuc2V0Vm9sdW1lKHZvbCk7XHJcbiAgICAgICAgICAgICAgICBCaXJkLmp1bXBTb3VuZC5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICBCaXJkLmp1bXBTb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNhbkp1bXAoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuanVtcFRpbWVyID09PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCB1cGRhdGVQb3NpdGlvbihuZXdYOiBudW1iZXIsIG5ld1k6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMueCA9IG5ld1g7XHJcbiAgICAgICAgdGhpcy55ID0gbmV3WTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgY29sbGlzaW9uIHdpdGggdGhlIGVudmlyb25tZW50IGFuZCBjb3JyZWN0IHBsYXllciBwb3NpdGlvbiBhbmQgbW92ZW1lbnRcclxuICAgICAgICBpZiAodGhpcy5wdWxsT3V0T2ZHcm91bmQoKSAhPT0gMCB8fCB0aGlzLnB1bGxPdXRPZkNlaWxpbmcoKSAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WSgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnB1bGxPdXRPZldhbGwoKSAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WCgwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwdWxsT3V0T2ZHcm91bmQoKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgcHVsbGVkID0gMCwgY29sID0gMDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmVsb2NpdHlZKCkgPD0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JsZCA9IHRoaXMuc2NlbmUud29ybGQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHdvcmxkLmdldEhlaWdodCgpO1xyXG4gICAgICAgICAgICBjb2wgPSB3b3JsZC5jb2xsaWRlc1dpdGgodGhpcy54LCB0aGlzLnksIFsgdGhpcyBdLCBbIEVudmlyb25tZW50LldBVEVSIF0pO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRoaXMueSA8IGhlaWdodCAmJiBjb2wpIHtcclxuICAgICAgICAgICAgICAgIHB1bGxlZCsrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy55Kys7XHJcbiAgICAgICAgICAgICAgICBjb2wgPSB3b3JsZC5jb2xsaWRlc1dpdGgodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHVsbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHVsbE91dE9mQ2VpbGluZygpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBwdWxsZWQgPSAwO1xyXG4gICAgICAgIGNvbnN0IHdvcmxkID0gdGhpcy5zY2VuZS53b3JsZDtcclxuXHJcbiAgICAgICAgd2hpbGUgKFxyXG4gICAgICAgICAgICB0aGlzLnkgPiAwXHJcbiAgICAgICAgICAgICYmIHdvcmxkLmNvbGxpZGVzV2l0aChcclxuICAgICAgICAgICAgICAgIHRoaXMueCwgdGhpcy55ICsgdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBbIHRoaXMgXSxcclxuICAgICAgICAgICAgICAgIFsgRW52aXJvbm1lbnQuUExBVEZPUk0sIEVudmlyb25tZW50LldBVEVSIF1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBwdWxsZWQrKztcclxuICAgICAgICAgICAgdGhpcy55LS07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHVsbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHVsbE91dE9mV2FsbCgpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBwdWxsZWQgPSAwO1xyXG4gICAgICAgIGNvbnN0IHdvcmxkID0gdGhpcy5zY2VuZS53b3JsZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmVsb2NpdHlYKCkgPiAwKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChcclxuICAgICAgICAgICAgICAgIHdvcmxkLmNvbGxpZGVzV2l0aFZlcnRpY2FsTGluZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnggKyB0aGlzLndpZHRoIC8gMiwgdGhpcy55ICsgdGhpcy5oZWlnaHQgKiAzIC8gNCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgWyB0aGlzIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgWyBFbnZpcm9ubWVudC5QTEFURk9STSwgRW52aXJvbm1lbnQuV0FURVIgXVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueC0tO1xyXG4gICAgICAgICAgICAgICAgcHVsbGVkKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aGlsZSAoXHJcbiAgICAgICAgICAgICAgICB3b3JsZC5jb2xsaWRlc1dpdGhWZXJ0aWNhbExpbmUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54IC0gdGhpcy53aWR0aCAvIDIsIHRoaXMueSArIHRoaXMuaGVpZ2h0ICogMyAvIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIFsgdGhpcyBdLFxyXG4gICAgICAgICAgICAgICAgICAgIFsgRW52aXJvbm1lbnQuUExBVEZPUk0sIEVudmlyb25tZW50LldBVEVSIF1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLngrKztcclxuICAgICAgICAgICAgICAgIHB1bGxlZCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHVsbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbmV4dFN0YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBCaXJkU3RhdGUuRkxZSU5HX0xFRlQpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IEJpcmRTdGF0ZS5XQUlUSU5HX0xFRlQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhdGUgKyAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNSZWFkeUZvckNvbnZlcnNhdGlvbigpOiBib29sZWFuIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3Qgc3VwZXJSZXN1bHQgPSBzdXBlci5pc1JlYWR5Rm9yQ29udmVyc2F0aW9uKCk7XHJcbiAgICAgICAgcmV0dXJuIChzdXBlclJlc3VsdCAmJiB0aGlzLmlzV2FpdGluZygpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGxldCBhbHBoYTogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnBldHRpbmdDdXRzY2VuZSkge1xyXG4gICAgICAgICAgICBhbHBoYSA9IE1hdGgubWF4KDAsIDEgLSAodGhpcy5zY2VuZS5wZXR0aW5nQ3V0c2NlbmVUaW1lIC8gUEVUVElOR19FTkRJTkdfQ1VUU0NFTkVfRFVSQVRJT04pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoQmlyZC5zcHJpdGUsIFwiaWRsZVwiLCB0aGlzLngsIHRoaXMueSwgUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMsIHRoaXMuZGlyZWN0aW9uLCB1bmRlZmluZWQsIGFscGhhKTtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5zaG93Qm91bmRzKSB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS5kcmF3KGN0eCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuICAgICAgICB0aGlzLm1vdmUgPSAwO1xyXG5cclxuICAgICAgICAvLyBUcmlnZ2Vyc1xyXG4gICAgICAgIGNvbnN0IHRyaWdnZXJDb2xsaXNpb25zID0gdGhpcy5zY2VuZS53b3JsZC5nZXRUcmlnZ2VyQ29sbGlzaW9ucyh0aGlzKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuanVtcFRpbWVyID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmp1bXBUaW1lciAtPSBkdDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuanVtcFRpbWVyIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5qdW1wVGltZXIgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKHRoaXMuc3RhdGUgPT09IEJpcmRTdGF0ZS5XQUlUSU5HX0xFRlQgfHwgdGhpcy5zdGF0ZSA9PT0gQmlyZFN0YXRlLldBSVRJTkdfUklHSFQpICYmICF0aGlzLmhhc0FjdGl2ZUNvbnZlcnNhdGlvbigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2FpdFRpbWVyICs9IGR0O1xyXG4gICAgICAgICAgICBpZiAodGhpcy53YWl0VGltZXIgPj0gV0FJVElOR19USU1FKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndhaXRUaW1lciA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gQmlyZFN0YXRlLkZMWUlOR19SSUdIVCB8fCB0aGlzLnN0YXRlID09PSBCaXJkU3RhdGUuRkxZSU5HX0xFRlQpIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlID0gdGhpcy5zdGF0ZSA9PT0gQmlyZFN0YXRlLkZMWUlOR19SSUdIVCA/IDEgOiAtMTtcclxuICAgICAgICAgICAgaWYgKHRoaXMueSA8IHRoaXMubWluQWx0aXR1ZGUgJiYgdGhpcy5jYW5KdW1wKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuanVtcCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gQmlyZFN0YXRlLkZMWUlOR19SSUdIVCAmJiB0cmlnZ2VyQ29sbGlzaW9ucy5sZW5ndGggPiAwICYmIHRyaWdnZXJDb2xsaXNpb25zLmZpbmQodCA9PiB0Lm5hbWUgPT09IFwiYmlyZF9uZXN0X3JpZ2h0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gQmlyZFN0YXRlLkZMWUlOR19MRUZUICYmIHRyaWdnZXJDb2xsaXNpb25zLmxlbmd0aCA+IDAgJiYgdHJpZ2dlckNvbGxpc2lvbnMuZmluZCh0ID0+IHQubmFtZSA9PT0gXCJiaXJkX25lc3RfbGVmdFwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQmlyZCBhY2NlbGVyYXRpb25cclxuICAgICAgICBpZiAodGhpcy5tb3ZlICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gdGhpcy5tb3ZlO1xyXG4gICAgICAgICAgICB0aGlzLmFjY2VsZXJhdGVYKFBMQVlFUl9BQ0NFTEVSQVRJT05fQUlSICogZHQgKiB0aGlzLm1vdmUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFZlbG9jaXR5WCgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWNlbGVyYXRlWChQTEFZRVJfQUNDRUxFUkFUSU9OX0FJUiAqIGR0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVjZWxlcmF0ZVgoLVBMQVlFUl9BQ0NFTEVSQVRJT05fQUlSICogZHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS51cGRhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFhQTtBQUNBO0FBUkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXBOQTtBQURBO0FBQ0E7QUFBQTtBQUVBO0FBREE7QUFDQTtBQUFBO0FBSkE7QUFEQTtBQWNBO0FBYkE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Bird.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Bone.js":
    /*!******************************!*\
      !*** ./lib/entities/Bone.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Bone_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Bone = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst PhysicsEntity_1 = __webpack_require__(/*! ./PhysicsEntity */ \"./lib/entities/PhysicsEntity.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nlet Bone = Bone_1 = class Bone extends PhysicsEntity_1.PhysicsEntity {\n    constructor(scene, x, y) {\n        super(scene, x, y, 20, 10);\n    }\n    draw() {\n        this.scene.renderer.addAseprite(Bone_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n    }\n    isCarried() {\n        return this.scene.player.isCarrying(this);\n    }\n    update(dt) {\n        super.update(dt);\n        const player = this.scene.player;\n        if (!this.isCarried() && this.distanceTo(player) < 20) {\n            player.carry(this);\n        }\n        if (!this.isCarried() && this.scene.world.collidesWith(this.x, this.y - 5) === World_1.Environment.WATER) {\n            const vx = this.getVelocityX();\n            this.setVelocity(vx, 10);\n        }\n        if (Conversation_1.Conversation.getGlobals()[\"$gotBoneQuest\"] && !this.isCarried() && this.distanceTo(this.scene.powerShiba) < 20) {\n            Bone_1.successSound.play();\n            this.scene.powerShiba.feed();\n            this.scene.removeGameObject(this);\n        }\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/bone.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Bone, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/throwing/success.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Bone, \"successSound\", void 0);\nBone = Bone_1 = tslib_1.__decorate([\n    Entity_1.entity(\"bone\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Bone);\nexports.Bone = Bone;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvQm9uZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9Cb25lLnRzP2EzN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgZW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gXCIuLi9Xb3JsZFwiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBQaHlzaWNzRW50aXR5IH0gZnJvbSBcIi4vUGh5c2ljc0VudGl0eVwiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciB9IGZyb20gXCIuLi9SZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuLi9Tb3VuZFwiO1xyXG5cclxuQGVudGl0eShcImJvbmVcIilcclxuZXhwb3J0IGNsYXNzIEJvbmUgZXh0ZW5kcyBQaHlzaWNzRW50aXR5IHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvYm9uZS5hc2Vwcml0ZS5qc29uXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzcHJpdGU6IEFzZXByaXRlO1xyXG5cclxuICAgIEBhc3NldChcInNvdW5kcy90aHJvd2luZy9zdWNjZXNzLm1wM1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3VjY2Vzc1NvdW5kOiBTb3VuZDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMjAsIDEwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZEFzZXByaXRlKEJvbmUuc3ByaXRlLCBcImlkbGVcIiwgdGhpcy54LCB0aGlzLnksIFJlbmRlcmluZ0xheWVyLkVOVElUSUVTKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzQ2FycmllZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZS5wbGF5ZXIuaXNDYXJyeWluZyh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci51cGRhdGUoZHQpO1xyXG5cclxuICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLnNjZW5lLnBsYXllcjtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2FycmllZCgpICYmIHRoaXMuZGlzdGFuY2VUbyhwbGF5ZXIpIDwgMjApIHtcclxuICAgICAgICAgICAgcGxheWVyLmNhcnJ5KHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2FycmllZCgpICYmIHRoaXMuc2NlbmUud29ybGQuY29sbGlkZXNXaXRoKHRoaXMueCwgdGhpcy55IC0gNSkgPT09IEVudmlyb25tZW50LldBVEVSKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZ4ID0gdGhpcy5nZXRWZWxvY2l0eVgoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRWZWxvY2l0eSh2eCwgMTApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKENvbnZlcnNhdGlvbi5nZXRHbG9iYWxzKClbXCIkZ290Qm9uZVF1ZXN0XCJdICYmICF0aGlzLmlzQ2FycmllZCgpICYmIHRoaXMuZGlzdGFuY2VUbyh0aGlzLnNjZW5lLnBvd2VyU2hpYmEpIDwgMjApIHtcclxuICAgICAgICAgICAgQm9uZS5zdWNjZXNzU291bmQucGxheSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnBvd2VyU2hpYmEuZmVlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZUdhbWVPYmplY3QodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6Q0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUxBO0FBREE7QUFRQTtBQVBBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/entities/Bone.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Campfire.js":
    /*!**********************************!*\
      !*** ./lib/entities/Campfire.js ***!
      \**********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Campfire_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Campfire = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet Campfire = Campfire_1 = class Campfire extends Entity_1.Entity {\n    constructor(scene, x, y) {\n        super(scene, x, y, 14, 28, false);\n    }\n    draw() {\n        this.scene.renderer.addAseprite(Campfire_1.sprite, \"idle\", this.x, this.y - 2, Renderer_1.RenderingLayer.ENTITIES);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n    }\n    update() { }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/campfire.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Campfire, \"sprite\", void 0);\nCampfire = Campfire_1 = tslib_1.__decorate([\n    Entity_1.entity(\"campfire\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Campfire);\nexports.Campfire = Campfire;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvQ2FtcGZpcmUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvQ2FtcGZpcmUudHM/MDIyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgZW50aXR5LCBFbnRpdHkgfSBmcm9tIFwiLi4vRW50aXR5XCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcblxyXG5AZW50aXR5KFwiY2FtcGZpcmVcIilcclxuZXhwb3J0IGNsYXNzIENhbXBmaXJlIGV4dGVuZHMgRW50aXR5IHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvY2FtcGZpcmUuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMTQsIDI4LCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShcclxuICAgICAgICAgICAgQ2FtcGZpcmUuc3ByaXRlLFxyXG4gICAgICAgICAgICBcImlkbGVcIixcclxuICAgICAgICAgICAgdGhpcy54LCB0aGlzLnkgLSAyLFxyXG4gICAgICAgICAgICBSZW5kZXJpbmdMYXllci5FTlRJVElFU1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnNob3dCb3VuZHMpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3Qm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7fVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBcEJBO0FBREE7QUFDQTtBQUFBO0FBRkE7QUFEQTtBQUtBO0FBSkE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Campfire.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Caveman.js":
    /*!*********************************!*\
      !*** ./lib/entities/Caveman.js ***!
      \*********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Caveman_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Caveman = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet Caveman = Caveman_1 = class Caveman extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 18, 24);\n    }\n    draw(ctx) {\n        this.scene.renderer.addAseprite(Caveman_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES, this.direction);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        this.speechBubble.update(this.x, this.y);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/caveman.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Caveman, \"sprite\", void 0);\nCaveman = Caveman_1 = tslib_1.__decorate([\n    Entity_1.entity(\"caveman\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Caveman);\nexports.Caveman = Caveman;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvQ2F2ZW1hbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9DYXZlbWFuLnRzPzI2ODEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4uL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgTlBDIH0gZnJvbSBcIi4vTlBDXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcblxyXG5AZW50aXR5KFwiY2F2ZW1hblwiKVxyXG5leHBvcnQgY2xhc3MgQ2F2ZW1hbiBleHRlbmRzIE5QQyB7XHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL2NhdmVtYW4uYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMTgsIDI0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoXHJcbiAgICAgICAgICAgIENhdmVtYW4uc3ByaXRlLFxyXG4gICAgICAgICAgICBcImlkbGVcIixcclxuICAgICAgICAgICAgdGhpcy54LCB0aGlzLnksXHJcbiAgICAgICAgICAgIFJlbmRlcmluZ0xheWVyLkVOVElUSUVTLFxyXG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvblxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnNob3dCb3VuZHMpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3Qm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS5kcmF3KGN0eCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS51cGRhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFCQTtBQURBO0FBQ0E7QUFBQTtBQUZBO0FBREE7QUFLQTtBQUpBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/entities/Caveman.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Chicken.js":
    /*!*********************************!*\
      !*** ./lib/entities/Chicken.js ***!
      \*********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Chicken_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Chicken = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst chicken_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../../assets/dialog/chicken.dialog.json */ \"./assets/dialog/chicken.dialog.json\"));\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet Chicken = Chicken_1 = class Chicken extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 24, 18);\n        this.lookAtPlayer = false;\n        this.conversation = new Conversation_1.Conversation(chicken_dialog_json_1.default, this);\n    }\n    getInteractionText() {\n        if (!this.met) {\n            return \"Touch\";\n        }\n        else {\n            return \"Talk\";\n        }\n    }\n    draw(ctx) {\n        this.scene.renderer.addAseprite(Chicken_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES, this.direction);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        this.speechBubble.update(this.x, this.y);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/chicken.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Chicken, \"sprite\", void 0);\nChicken = Chicken_1 = tslib_1.__decorate([\n    Entity_1.entity(\"chicken\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Chicken);\nexports.Chicken = Chicken;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvQ2hpY2tlbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9DaGlja2VuLnRzPzM2ZjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IGNvbnZlcnNhdGlvbiBmcm9tIFwiLi4vLi4vYXNzZXRzL2RpYWxvZy9jaGlja2VuLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4uL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgTlBDIH0gZnJvbSBcIi4vTlBDXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcblxyXG5AZW50aXR5KFwiY2hpY2tlblwiKVxyXG5leHBvcnQgY2xhc3MgQ2hpY2tlbiBleHRlbmRzIE5QQyB7XHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL2NoaWNrZW4uYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMjQsIDE4KTtcclxuXHJcbiAgICAgICAgdGhpcy5sb29rQXRQbGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbiA9IG5ldyBDb252ZXJzYXRpb24oY29udmVyc2F0aW9uLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW50ZXJhY3Rpb25UZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1ldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJUb3VjaFwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlRhbGtcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZEFzZXByaXRlKFxyXG4gICAgICAgICAgICBDaGlja2VuLnNwcml0ZSxcclxuICAgICAgICAgICAgXCJpZGxlXCIsXHJcbiAgICAgICAgICAgIHRoaXMueCwgdGhpcy55LFxyXG4gICAgICAgICAgICBSZW5kZXJpbmdMYXllci5FTlRJVElFUyxcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb25cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUuZHJhdyhjdHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShkdCk7XHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQ0E7QUFEQTtBQUNBO0FBQUE7QUFGQTtBQURBO0FBS0E7QUFKQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/Chicken.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Cloud.js":
    /*!*******************************!*\
      !*** ./lib/entities/Cloud.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Cloud_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Cloud = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst Particles_1 = __webpack_require__(/*! ../Particles */ \"./lib/Particles.js\");\nconst PhysicsEntity_1 = __webpack_require__(/*! ./PhysicsEntity */ \"./lib/entities/PhysicsEntity.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nlet Cloud = Cloud_1 = class Cloud extends PhysicsEntity_1.PhysicsEntity {\n    constructor(scene, x, y, properties, canRain = false) {\n        super(scene, x, y, 74, 5);\n        this.raining = 0;\n        this.isRainCloud = false;\n        this.setFloating(true);\n        this.startX = this.targetX = x;\n        this.startY = this.targetY = y;\n        this.isRainCloud = canRain;\n        this.velocity = properties.velocity / constants_1.PIXEL_PER_METER;\n        if (properties.direction === \"right\") {\n            this.targetX = x + properties.distance;\n            this.setVelocityX(this.velocity);\n        }\n        else if (properties.direction === \"left\") {\n            this.targetX = x - properties.distance;\n            this.setVelocityX(-this.velocity);\n        }\n        else if (properties.direction === \"up\") {\n            this.targetY = y + properties.distance;\n            this.setVelocityY(this.velocity);\n        }\n        else if (properties.direction === \"down\") {\n            this.targetY = y - properties.distance;\n            this.setVelocityY(-this.velocity);\n        }\n        this.rainEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x, y: this.y },\n            offset: () => ({ x: util_1.rnd(-1, 1) * 26, y: util_1.rnd(-1, 1) * 5 }),\n            velocity: () => ({\n                x: this.getVelocityX() * constants_1.PIXEL_PER_METER + util_1.rnd(-1, 1) * 5,\n                y: this.getVelocityY() * constants_1.PIXEL_PER_METER - util_1.rnd(50, 80)\n            }),\n            color: () => Cloud_1.raindrop,\n            size: 4,\n            gravity: { x: 0, y: -100 },\n            lifetime: () => util_1.rnd(0.7, 1.2),\n            alpha: 0.6,\n            alphaCurve: Particles_1.valueCurves.linear.invert()\n        });\n    }\n    startRain(time = Infinity) {\n        this.raining = time;\n    }\n    isRaining() {\n        return this.raining > 0;\n    }\n    canRain() {\n        return this.isRainCloud;\n    }\n    draw() {\n        this.scene.renderer.addAseprite(Cloud_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.PLATFORMS);\n    }\n    update(dt) {\n        super.update(dt);\n        if (this.getVelocityY() > 0) {\n            if (this.y >= Math.max(this.startY, this.targetY)) {\n                this.y = Math.max(this.startY, this.targetY);\n                this.setVelocityY(-this.velocity);\n            }\n        }\n        else if (this.getVelocityY() < 0) {\n            if (this.y <= Math.min(this.startY, this.targetY)) {\n                this.y = Math.min(this.startY, this.targetY);\n                this.setVelocityY(this.velocity);\n            }\n        }\n        if (this.getVelocityX() > 0) {\n            if (this.x >= Math.max(this.targetX, this.startX)) {\n                this.x = Math.max(this.targetX, this.startX);\n                this.setVelocityX(-this.velocity);\n            }\n        }\n        else if (this.getVelocityX() < 0) {\n            if (this.x <= Math.min(this.startX, this.targetX)) {\n                this.x = Math.min(this.startX, this.targetX);\n                this.setVelocityX(this.velocity);\n            }\n        }\n        if (this.raining) {\n            this.raining -= dt;\n            if (this.raining <= 0) {\n                this.raining = 0;\n            }\n            else {\n                if (util_1.timedRnd(dt, 0.1)) {\n                    this.rainEmitter.setPosition(this.x, this.y);\n                    this.rainEmitter.emit(util_1.rndInt(1, 4));\n                }\n            }\n        }\n    }\n    collidesWith(x, y) {\n        if (x >= this.x - this.width / 2\n            && x <= this.x + this.width / 2\n            && y >= this.y\n            && y <= this.y + this.height) {\n            return World_1.Environment.PLATFORM;\n        }\n        return World_1.Environment.AIR;\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/cloud3.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Cloud, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/raindrop.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], Cloud, \"raindrop\", void 0);\nCloud = Cloud_1 = tslib_1.__decorate([\n    Entity_1.entity(\"cloud\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number, Object, Object])\n], Cloud);\nexports.Cloud = Cloud;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvQ2xvdWQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvQ2xvdWQudHM/ZDNiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgQ29sbGlkYWJsZUdhbWVPYmplY3QsIEdhbWVTY2VuZSB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vV29ybGRcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdFByb3BlcnRpZXMgfSBmcm9tIFwiLi4vTWFwSW5mb1wiO1xyXG5pbXBvcnQgeyBQYXJ0aWNsZUVtaXR0ZXIsIHZhbHVlQ3VydmVzIH0gZnJvbSBcIi4uL1BhcnRpY2xlc1wiO1xyXG5pbXBvcnQgeyBQaHlzaWNzRW50aXR5IH0gZnJvbSBcIi4vUGh5c2ljc0VudGl0eVwiO1xyXG5pbXBvcnQgeyBQSVhFTF9QRVJfTUVURVIgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IHJuZCwgcm5kSW50LCB0aW1lZFJuZCB9IGZyb20gXCIuLi91dGlsXCI7XHJcblxyXG5AZW50aXR5KFwiY2xvdWRcIilcclxuZXhwb3J0IGNsYXNzIENsb3VkIGV4dGVuZHMgUGh5c2ljc0VudGl0eSBpbXBsZW1lbnRzIENvbGxpZGFibGVHYW1lT2JqZWN0IHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvY2xvdWQzLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNwcml0ZTogQXNlcHJpdGU7XHJcblxyXG4gICAgQGFzc2V0KFwic3ByaXRlcy9yYWluZHJvcC5wbmdcIilcclxuICAgIHByaXZhdGUgc3RhdGljIHJhaW5kcm9wOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuICAgIHByaXZhdGUgc3RhcnRYOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHN0YXJ0WTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0YXJnZXRYOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRhcmdldFk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdmVsb2NpdHk6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIHJhaW5FbWl0dGVyOiBQYXJ0aWNsZUVtaXR0ZXI7XHJcbiAgICBwcml2YXRlIHJhaW5pbmcgPSAwO1xyXG4gICAgcHJpdmF0ZSBpc1JhaW5DbG91ZCA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlciwgcHJvcGVydGllczogR2FtZU9iamVjdFByb3BlcnRpZXMsIGNhblJhaW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCA3NCwgNSk7XHJcbiAgICAgICAgdGhpcy5zZXRGbG9hdGluZyh0cnVlKTtcclxuICAgICAgICB0aGlzLnN0YXJ0WCA9IHRoaXMudGFyZ2V0WCA9IHg7XHJcbiAgICAgICAgdGhpcy5zdGFydFkgPSB0aGlzLnRhcmdldFkgPSB5O1xyXG4gICAgICAgIHRoaXMuaXNSYWluQ2xvdWQgPSBjYW5SYWluO1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSBwcm9wZXJ0aWVzLnZlbG9jaXR5IC8gUElYRUxfUEVSX01FVEVSO1xyXG5cclxuICAgICAgICBpZiAocHJvcGVydGllcy5kaXJlY3Rpb24gPT09IFwicmlnaHRcIikge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldFggPSB4ICsgcHJvcGVydGllcy5kaXN0YW5jZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRWZWxvY2l0eVgodGhpcy52ZWxvY2l0eSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0aWVzLmRpcmVjdGlvbiA9PT0gXCJsZWZ0XCIpIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRYID0geCAtIHByb3BlcnRpZXMuZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlYKC10aGlzLnZlbG9jaXR5KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnRpZXMuZGlyZWN0aW9uID09PSBcInVwXCIpIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRZID0geSArIHByb3BlcnRpZXMuZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlZKHRoaXMudmVsb2NpdHkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocHJvcGVydGllcy5kaXJlY3Rpb24gPT09IFwiZG93blwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0WSA9IHkgLSBwcm9wZXJ0aWVzLmRpc3RhbmNlO1xyXG4gICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WSgtdGhpcy52ZWxvY2l0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJhaW5FbWl0dGVyID0gdGhpcy5zY2VuZS5wYXJ0aWNsZXMuY3JlYXRlRW1pdHRlcih7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7eDogdGhpcy54LCB5OiB0aGlzLnl9LFxyXG4gICAgICAgICAgICBvZmZzZXQ6ICgpID0+ICh7eDogcm5kKC0xLCAxKSAqIDI2LCB5OiBybmQoLTEsIDEpICogNX0pLFxyXG4gICAgICAgICAgICB2ZWxvY2l0eTogKCkgPT4gKHtcclxuICAgICAgICAgICAgICAgIHg6IHRoaXMuZ2V0VmVsb2NpdHlYKCkgKiBQSVhFTF9QRVJfTUVURVIgKyBybmQoLTEsIDEpICogNSxcclxuICAgICAgICAgICAgICAgIHk6IHRoaXMuZ2V0VmVsb2NpdHlZKCkgKiBQSVhFTF9QRVJfTUVURVIgLSBybmQoNTAsIDgwKVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgY29sb3I6ICgpID0+IENsb3VkLnJhaW5kcm9wLFxyXG4gICAgICAgICAgICBzaXplOiA0LFxyXG4gICAgICAgICAgICBncmF2aXR5OiB7eDogMCwgeTogLTEwMH0sXHJcbiAgICAgICAgICAgIGxpZmV0aW1lOiAoKSA9PiBybmQoMC43LCAxLjIpLFxyXG4gICAgICAgICAgICBhbHBoYTogMC42LFxyXG4gICAgICAgICAgICBhbHBoYUN1cnZlOiB2YWx1ZUN1cnZlcy5saW5lYXIuaW52ZXJ0KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRSYWluKHRpbWU6IG51bWJlciA9IEluZmluaXR5KSB7XHJcbiAgICAgICAgdGhpcy5yYWluaW5nID0gdGltZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNSYWluaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJhaW5pbmcgPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjYW5SYWluKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzUmFpbkNsb3VkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoXHJcbiAgICAgICAgICAgIENsb3VkLnNwcml0ZSxcclxuICAgICAgICAgICAgXCJpZGxlXCIsXHJcbiAgICAgICAgICAgIHRoaXMueCwgdGhpcy55LFxyXG4gICAgICAgICAgICBSZW5kZXJpbmdMYXllci5QTEFURk9STVNcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShkdCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldFZlbG9jaXR5WSgpID4gMCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy55ID49IE1hdGgubWF4KHRoaXMuc3RhcnRZLCB0aGlzLnRhcmdldFkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnkgPSBNYXRoLm1heCh0aGlzLnN0YXJ0WSwgdGhpcy50YXJnZXRZKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlZKC10aGlzLnZlbG9jaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZXRWZWxvY2l0eVkoKSA8IDApIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMueSA8PSBNYXRoLm1pbih0aGlzLnN0YXJ0WSwgdGhpcy50YXJnZXRZKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ID0gTWF0aC5taW4odGhpcy5zdGFydFksIHRoaXMudGFyZ2V0WSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WSh0aGlzLnZlbG9jaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmVsb2NpdHlYKCkgPiAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnggPj0gTWF0aC5tYXgodGhpcy50YXJnZXRYLCB0aGlzLnN0YXJ0WCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueCA9IE1hdGgubWF4KHRoaXMudGFyZ2V0WCwgdGhpcy5zdGFydFgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWZWxvY2l0eVgoLXRoaXMudmVsb2NpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdldFZlbG9jaXR5WCgpIDwgMCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy54IDw9IE1hdGgubWluKHRoaXMuc3RhcnRYLCB0aGlzLnRhcmdldFgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnggPSBNYXRoLm1pbih0aGlzLnN0YXJ0WCwgdGhpcy50YXJnZXRYKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlYKHRoaXMudmVsb2NpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5yYWluaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmFpbmluZyAtPSBkdDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJhaW5pbmcgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYWluaW5nID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lZFJuZChkdCwgMC4xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFpbkVtaXR0ZXIuc2V0UG9zaXRpb24odGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFpbkVtaXR0ZXIuZW1pdChybmRJbnQoMSwgNCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb2xsaWRlc1dpdGgoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgeCA+PSB0aGlzLnggLSB0aGlzLndpZHRoIC8gMlxyXG4gICAgICAgICAgICAmJiB4IDw9IHRoaXMueCArIHRoaXMud2lkdGggLyAyXHJcbiAgICAgICAgICAgICYmIHkgPj0gdGhpcy55XHJcbiAgICAgICAgICAgICYmIHkgPD0gdGhpcy55ICsgdGhpcy5oZWlnaHRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudmlyb25tZW50LlBMQVRGT1JNO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIEVudmlyb25tZW50LkFJUjtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQWlCQTtBQUNBO0FBSkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBL0hBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFMQTtBQURBO0FBa0JBO0FBakJBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/entities/Cloud.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/ExitPortal.js":
    /*!************************************!*\
      !*** ./lib/entities/ExitPortal.js ***!
      \************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar ExitPortal_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExitPortal = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nvar PortalAnimationState;\n(function (PortalAnimationState) {\n    PortalAnimationState[PortalAnimationState[\"OFF\"] = 0] = \"OFF\";\n    PortalAnimationState[PortalAnimationState[\"FADEIN\"] = 1] = \"FADEIN\";\n    PortalAnimationState[PortalAnimationState[\"IDLE\"] = 2] = \"IDLE\";\n})(PortalAnimationState || (PortalAnimationState = {}));\nlet ExitPortal = ExitPortal_1 = class ExitPortal extends Entity_1.Entity {\n    constructor(scene, x, y) {\n        super(scene, x, y, 32, 50, false);\n        this.animationState = PortalAnimationState.OFF;\n        this.animator.assignSprite(ExitPortal_1.sprite);\n    }\n    activate() {\n        if (this.animationState === PortalAnimationState.OFF) {\n            ExitPortal_1.sound.play();\n            this.nextAnimationState();\n        }\n    }\n    nextAnimationState() {\n        this.animationState++;\n    }\n    draw() {\n        switch (this.animationState) {\n            case PortalAnimationState.OFF:\n                this.animator.play(\"empty\", 1);\n                break;\n            case PortalAnimationState.FADEIN:\n                this.animator.play(\"fadein\", 1, { loop: false, callback: this.nextAnimationState.bind(this) });\n                break;\n            case PortalAnimationState.IDLE:\n                this.animator.play(\"idle\", 1);\n                break;\n        }\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n    }\n    update(dt) {\n        super.update(dt);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/portal.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], ExitPortal, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/portal/portal.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], ExitPortal, \"sound\", void 0);\nExitPortal = ExitPortal_1 = tslib_1.__decorate([\n    Entity_1.entity(\"exitportal\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], ExitPortal);\nexports.ExitPortal = ExitPortal;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvRXhpdFBvcnRhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9FeGl0UG9ydGFsLnRzPzRjNDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IGVudGl0eSwgRW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuLi9Tb3VuZFwiO1xyXG5cclxuZW51bSBQb3J0YWxBbmltYXRpb25TdGF0ZSB7IE9GRiwgRkFERUlOLCBJRExFIH1cclxuXHJcbkBlbnRpdHkoXCJleGl0cG9ydGFsXCIpXHJcbmV4cG9ydCBjbGFzcyBFeGl0UG9ydGFsIGV4dGVuZHMgRW50aXR5IHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvcG9ydGFsLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNwcml0ZTogQXNlcHJpdGU7XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL3BvcnRhbC9wb3J0YWwub2dnXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzb3VuZDogU291bmQ7XHJcblxyXG4gICAgcHJpdmF0ZSBhbmltYXRpb25TdGF0ZSA9IFBvcnRhbEFuaW1hdGlvblN0YXRlLk9GRjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMzIsIDUwLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRvci5hc3NpZ25TcHJpdGUoRXhpdFBvcnRhbC5zcHJpdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhY3RpdmF0ZSAoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uU3RhdGUgPT09IFBvcnRhbEFuaW1hdGlvblN0YXRlLk9GRikge1xyXG4gICAgICAgICAgICBFeGl0UG9ydGFsLnNvdW5kLnBsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0QW5pbWF0aW9uU3RhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBuZXh0QW5pbWF0aW9uU3RhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25TdGF0ZSsrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCk6IHZvaWQge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5hbmltYXRpb25TdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFBvcnRhbEFuaW1hdGlvblN0YXRlLk9GRjpcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0b3IucGxheShcImVtcHR5XCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUG9ydGFsQW5pbWF0aW9uU3RhdGUuRkFERUlOOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRvci5wbGF5KFwiZmFkZWluXCIsIDEsIHsgbG9vcDogZmFsc2UsIGNhbGxiYWNrOiB0aGlzLm5leHRBbmltYXRpb25TdGF0ZS5iaW5kKHRoaXMpIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUG9ydGFsQW5pbWF0aW9uU3RhdGUuSURMRTpcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0b3IucGxheShcImlkbGVcIiwgMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnNob3dCb3VuZHMpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3Qm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShkdCk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQVNBO0FBQ0E7QUFIQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBNUNBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFMQTtBQURBO0FBVUE7QUFUQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/ExitPortal.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Fire.js":
    /*!******************************!*\
      !*** ./lib/entities/Fire.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Fire_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Fire = exports.FireState = exports.SHRINK_SIZE = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst Face_1 = __webpack_require__(/*! ../Face */ \"./lib/Face.js\");\nconst FireGfx_1 = __webpack_require__(/*! ../FireGfx */ \"./lib/FireGfx.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Particles_1 = __webpack_require__(/*! ../Particles */ \"./lib/Particles.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst Shiba_1 = __webpack_require__(/*! ./Shiba */ \"./lib/entities/Shiba.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nconst SoundEmitter_1 = __webpack_require__(/*! ../SoundEmitter */ \"./lib/SoundEmitter.js\");\nexports.SHRINK_SIZE = 2;\nvar FireState;\n(function (FireState) {\n    FireState[FireState[\"IDLE\"] = 0] = \"IDLE\";\n    FireState[FireState[\"ANGRY\"] = 1] = \"ANGRY\";\n    FireState[FireState[\"BEING_PUT_OUT\"] = 2] = \"BEING_PUT_OUT\";\n    FireState[FireState[\"PUT_OUT\"] = 3] = \"PUT_OUT\";\n})(FireState = exports.FireState || (exports.FireState = {}));\nlet Fire = Fire_1 = class Fire extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 1.5 * constants_1.PIXEL_PER_METER, 1.85 * constants_1.PIXEL_PER_METER);\n        this.intensity = 5;\n        this.state = FireState.IDLE;\n        this.angry = false; // fire will be angry once wood was fed\n        this.beingPutOut = false;\n        this.growthTarget = 5;\n        this.growth = 1;\n        this.averageParticleDelay = 0.1;\n        this.averageSteamDelay = 0.05;\n        this.isVisible = true;\n        this.fireGfx = new FireGfx_1.FireGfx();\n        this.soundEmitter = new SoundEmitter_1.SoundEmitter(this.scene, this.x, this.y, Fire_1.fireAmbience, 0.7, 0.2);\n        this.smokeEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x, y: this.y },\n            offset: () => ({ x: util_1.rnd(-1, 1) * 3 * this.intensity, y: util_1.rnd(2) * this.intensity }),\n            velocity: () => ({ x: util_1.rnd(-1, 1) * 15, y: 4 + util_1.rnd(3) }),\n            color: () => Fire_1.smokeImage,\n            size: () => util_1.rndInt(24, 32),\n            gravity: { x: 0, y: 8 },\n            lifetime: () => util_1.rnd(5, 8),\n            alpha: () => util_1.rnd(0.2, 0.45),\n            angleSpeed: () => util_1.rnd(-1, 1) * 1.5,\n            blendMode: \"source-over\",\n            alphaCurve: Particles_1.valueCurves.cos(0.1, 0.5),\n            breakFactor: 0.85\n        });\n        this.steamEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x + 10, y: this.y },\n            offset: () => ({ x: util_1.rnd(-1, 1) * 3, y: 0 }),\n            velocity: () => ({ x: util_1.rnd(-1, 2) * 5, y: 50 + util_1.rnd(3) }),\n            color: () => Fire_1.steamImage,\n            size: () => util_1.rndInt(12, 18),\n            gravity: { x: 0, y: 8 },\n            lifetime: () => util_1.rnd(1, 3),\n            alpha: () => util_1.rnd(0.5, 0.8),\n            angleSpeed: () => util_1.rnd(-1, 1) * 3,\n            blendMode: \"source-over\",\n            alphaCurve: Particles_1.valueCurves.cos(0.1, 0.5),\n            renderingLayer: Renderer_1.RenderingLayer.ENTITIES,\n            zIndex: 1,\n            breakFactor: 0.5\n        });\n        this.sparkEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x, y: this.y },\n            velocity: () => ({ x: util_1.rnd(-1, 1) * 30, y: util_1.rnd(50, 100) }),\n            color: () => FireGfx_1.FireGfx.gradient.getCss(Math.pow(util_1.rnd(), 0.5)),\n            size: 2,\n            gravity: { x: 0, y: -100 },\n            lifetime: () => util_1.rnd(1, 1.5),\n            blendMode: \"screen\",\n            alpha: () => util_1.rnd(0.3, 1),\n            alphaCurve: Particles_1.valueCurves.trapeze(0.05, 0.2)\n        });\n        this.face = new Face_1.Face(scene, this, Face_1.EyeType.STANDARD, 0, 6);\n    }\n    showDialoguePrompt() {\n        if (!super.showDialoguePrompt()) {\n            return false;\n        }\n        return (this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() === Quests_1.QuestATrigger.JUST_ARRIVED ||\n            (this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() >= Quests_1.QuestATrigger.GOT_WOOD &&\n                this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() < Quests_1.QuestATrigger.TALKED_TO_FIRE_WITH_WOOD) ||\n            this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() === Quests_1.QuestATrigger.THROWN_WOOD_INTO_FIRE ||\n            this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() === Quests_1.QuestATrigger.BEAT_FIRE);\n    }\n    isRendered() {\n        return this.isVisible;\n    }\n    isAngry() {\n        return this.state === FireState.ANGRY;\n    }\n    isBeingPutOut() {\n        return this.state === FireState.BEING_PUT_OUT;\n    }\n    isPutOut() {\n        return this.state === FireState.PUT_OUT;\n    }\n    setState(state) {\n        this.state = state;\n        if (state === FireState.BEING_PUT_OUT || state === FireState.PUT_OUT) {\n            Fire_1.fireAmbience.stop();\n        }\n    }\n    drawToCanvas(ctx) {\n        ctx.save();\n        ctx.translate(this.x, -this.y);\n        ctx.scale(this.intensity / 5, this.intensity / 5);\n        this.fireGfx.draw(ctx, 0, 0);\n        ctx.restore();\n    }\n    draw(ctx) {\n        if (!this.isVisible) {\n            return;\n        }\n        this.scene.renderer.add({ type: Renderer_1.RenderingType.FIRE, layer: Renderer_1.RenderingLayer.ENTITIES, entity: this });\n        this.drawFace(ctx);\n        if (this.showDialoguePrompt()) {\n            this.drawDialoguePrompt();\n        }\n        if (this.thinkBubble) {\n            this.thinkBubble.draw(ctx);\n        }\n        this.speechBubble.draw(ctx);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n    }\n    update(dt) {\n        var _a, _b;\n        if (this.state === FireState.ANGRY && !this.beingPutOut) {\n            (_a = this.face) === null || _a === void 0 ? void 0 : _a.setMode(Face_1.FaceModes.ANGRY);\n        }\n        else if (this.state === FireState.BEING_PUT_OUT) {\n            (_b = this.face) === null || _b === void 0 ? void 0 : _b.setMode(Face_1.FaceModes.DISGUSTED);\n        }\n        if (this.intensity !== this.growthTarget) {\n            this.intensity = util_1.shiftValue(this.intensity, this.growthTarget, this.growth * dt);\n        }\n        if (this.scene.friendshipCutscene\n            && this.scene.shiba.getState() === Shiba_1.ShibaState.KILLING_FIRE\n            && this.intensity <= exports.SHRINK_SIZE) {\n            this.scene.shiba.nextState();\n        }\n        if (!this.scene.camera.isPointVisible(this.x, this.y, 200)) {\n            this.isVisible = false;\n            return;\n        }\n        this.isVisible = true;\n        if (!this.isBeingPutOut() && !this.isPutOut()) {\n            let particleChance = dt - util_1.rnd() * this.averageParticleDelay;\n            while (particleChance > 0) {\n                if (util_1.rnd() < 0.5) {\n                    this.sparkEmitter.emit();\n                }\n                if (util_1.rnd() < 0.32) {\n                    this.smokeEmitter.emit();\n                }\n                particleChance -= util_1.rnd() * this.averageParticleDelay;\n            }\n            this.soundEmitter.update();\n        }\n        if (this.isBeingPutOut()) {\n            let steamParticleChance = dt - util_1.rnd() * this.averageSteamDelay;\n            while (steamParticleChance > 0) {\n                this.steamEmitter.emit();\n                steamParticleChance -= util_1.rnd() * this.averageSteamDelay;\n            }\n        }\n        if (this.isVisible) {\n            this.fireGfx.update();\n        }\n        if (this.showDialoguePrompt()) {\n            this.dialoguePrompt.update(dt, this.x, this.y + 32);\n        }\n        this.speechBubble.update(this.x, this.y);\n    }\n    feed(wood) {\n        wood.remove();\n        // Handle end of the world\n        this.state = FireState.ANGRY;\n        this.growthTarget = 14;\n        this.scene.startApocalypseMusic();\n        // Disable remaining dialogs\n        this.conversation = null;\n        // Remove any reachable NPCs\n        for (const npc of [this.scene.shadowPresence]) {\n            if (npc) {\n                this.scene.removeGameObject(npc);\n            }\n        }\n        // Player thoughts\n        [\n            [\"What…\", 2, 2],\n            [\"What have I done?\", 6, 3],\n            [\"I trusted you! I helped you!\", 10, 3]\n        ].forEach(line => setTimeout(() => {\n            this.scene.player.think(line[0], line[2] * 1000);\n        }, line[1] * 1000));\n        // Give fire new dialog\n        setTimeout(() => {\n            this.scene.game.campaign.runAction(\"enable\", null, [\"fire\", \"fire2\"]);\n        }, 13500);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/smoke.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], Fire, \"smokeImage\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/steam.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], Fire, \"steamImage\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/fire/fire.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Fire, \"fireAmbience\", void 0);\nFire = Fire_1 = tslib_1.__decorate([\n    Entity_1.entity(\"fire\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Fire);\nexports.Fire = Fire;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvRmlyZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9GaXJlLnRzPzA2NWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgRXllVHlwZSwgRmFjZSwgRmFjZU1vZGVzIH0gZnJvbSBcIi4uL0ZhY2VcIjtcclxuaW1wb3J0IHsgRmlyZUdmeCB9IGZyb20gXCIuLi9GaXJlR2Z4XCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IE5QQyB9IGZyb20gXCIuL05QQ1wiO1xyXG5pbXBvcnQgeyBQYXJ0aWNsZUVtaXR0ZXIsIHZhbHVlQ3VydmVzIH0gZnJvbSBcIi4uL1BhcnRpY2xlc1wiO1xyXG5pbXBvcnQgeyBQSVhFTF9QRVJfTUVURVIgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFF1ZXN0QVRyaWdnZXIsIFF1ZXN0S2V5IH0gZnJvbSBcIi4uL1F1ZXN0c1wiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciwgUmVuZGVyaW5nVHlwZSB9IGZyb20gXCIuLi9SZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBybmQsIHJuZEludCwgc2hpZnRWYWx1ZSB9IGZyb20gXCIuLi91dGlsXCI7XHJcbmltcG9ydCB7IFNoaWJhU3RhdGUgfSBmcm9tIFwiLi9TaGliYVwiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuLi9Tb3VuZFwiO1xyXG5pbXBvcnQgeyBTb3VuZEVtaXR0ZXIgfSBmcm9tIFwiLi4vU291bmRFbWl0dGVyXCI7XHJcbmltcG9ydCB7IFdvb2QgfSBmcm9tIFwiLi9Xb29kXCI7XHJcblxyXG5leHBvcnQgY29uc3QgU0hSSU5LX1NJWkUgPSAyO1xyXG5cclxuZXhwb3J0IGVudW0gRmlyZVN0YXRlIHtcclxuICAgIElETEUsXHJcbiAgICBBTkdSWSxcclxuICAgIEJFSU5HX1BVVF9PVVQsXHJcbiAgICBQVVRfT1VUXHJcbn1cclxuXHJcbkBlbnRpdHkoXCJmaXJlXCIpXHJcbmV4cG9ydCBjbGFzcyBGaXJlIGV4dGVuZHMgTlBDIHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvc21va2UucG5nXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzbW9rZUltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuICAgIEBhc3NldChcInNwcml0ZXMvc3RlYW0ucG5nXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzdGVhbUltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuICAgIEBhc3NldChcInNvdW5kcy9maXJlL2ZpcmUub2dnXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBmaXJlQW1iaWVuY2U6IFNvdW5kO1xyXG4gICAgcHJpdmF0ZSBzb3VuZEVtaXR0ZXI6IFNvdW5kRW1pdHRlcjtcclxuXHJcbiAgICBwdWJsaWMgaW50ZW5zaXR5ID0gNTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGUgPSBGaXJlU3RhdGUuSURMRTtcclxuXHJcbiAgICBwdWJsaWMgYW5ncnkgPSBmYWxzZTsgLy8gZmlyZSB3aWxsIGJlIGFuZ3J5IG9uY2Ugd29vZCB3YXMgZmVkXHJcblxyXG4gICAgcHVibGljIGJlaW5nUHV0T3V0ID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIGdyb3d0aFRhcmdldCA9IDU7XHJcblxyXG4gICAgcHVibGljIGdyb3d0aCA9IDE7XHJcblxyXG4gICAgcHJpdmF0ZSBhdmVyYWdlUGFydGljbGVEZWxheSA9IDAuMTtcclxuICAgIHByaXZhdGUgYXZlcmFnZVN0ZWFtRGVsYXkgPSAwLjA1O1xyXG5cclxuICAgIHByaXZhdGUgaXNWaXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICBwcml2YXRlIGZpcmVHZnggPSBuZXcgRmlyZUdmeCgpO1xyXG5cclxuICAgIHByaXZhdGUgc3BhcmtFbWl0dGVyOiBQYXJ0aWNsZUVtaXR0ZXI7XHJcbiAgICBwcml2YXRlIHNtb2tlRW1pdHRlcjogUGFydGljbGVFbWl0dGVyO1xyXG4gICAgcHJpdmF0ZSBzdGVhbUVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMS41ICogUElYRUxfUEVSX01FVEVSLCAxLjg1ICogUElYRUxfUEVSX01FVEVSKTtcclxuXHJcbiAgICAgICAgdGhpcy5zb3VuZEVtaXR0ZXIgPSBuZXcgU291bmRFbWl0dGVyKHRoaXMuc2NlbmUsIHRoaXMueCwgdGhpcy55LCBGaXJlLmZpcmVBbWJpZW5jZSwgMC43LCAwLjIpO1xyXG5cclxuICAgICAgICB0aGlzLnNtb2tlRW1pdHRlciA9IHRoaXMuc2NlbmUucGFydGljbGVzLmNyZWF0ZUVtaXR0ZXIoe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjoge3g6IHRoaXMueCwgeTogdGhpcy55fSxcclxuICAgICAgICAgICAgb2Zmc2V0OiAoKSA9PiAoeyB4OiBybmQoLTEsIDEpICogMyAqIHRoaXMuaW50ZW5zaXR5LCB5OiBybmQoMikgKiB0aGlzLmludGVuc2l0eSB9KSxcclxuICAgICAgICAgICAgdmVsb2NpdHk6ICgpID0+ICh7IHg6IHJuZCgtMSwgMSkgKiAxNSwgeTogNCArIHJuZCgzKSB9KSxcclxuICAgICAgICAgICAgY29sb3I6ICgpID0+IEZpcmUuc21va2VJbWFnZSxcclxuICAgICAgICAgICAgc2l6ZTogKCkgPT4gcm5kSW50KDI0LCAzMiksXHJcbiAgICAgICAgICAgIGdyYXZpdHk6IHt4OiAwLCB5OiA4fSxcclxuICAgICAgICAgICAgbGlmZXRpbWU6ICgpID0+IHJuZCg1LCA4KSxcclxuICAgICAgICAgICAgYWxwaGE6ICgpID0+IHJuZCgwLjIsIDAuNDUpLFxyXG4gICAgICAgICAgICBhbmdsZVNwZWVkOiAoKSA9PiBybmQoLTEsIDEpICogMS41LFxyXG4gICAgICAgICAgICBibGVuZE1vZGU6IFwic291cmNlLW92ZXJcIixcclxuICAgICAgICAgICAgYWxwaGFDdXJ2ZTogdmFsdWVDdXJ2ZXMuY29zKDAuMSwgMC41KSxcclxuICAgICAgICAgICAgYnJlYWtGYWN0b3I6IDAuODVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGVhbUVtaXR0ZXIgPSB0aGlzLnNjZW5lLnBhcnRpY2xlcy5jcmVhdGVFbWl0dGVyKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IHt4OiB0aGlzLnggKyAxMCwgeTogdGhpcy55fSxcclxuICAgICAgICAgICAgb2Zmc2V0OiAoKSA9PiAoeyB4OiBybmQoLTEsIDEpICogMywgeTogMCB9KSxcclxuICAgICAgICAgICAgdmVsb2NpdHk6ICgpID0+ICh7IHg6IHJuZCgtMSwgMikgKiA1LCB5OiA1MCArIHJuZCgzKSB9KSxcclxuICAgICAgICAgICAgY29sb3I6ICgpID0+IEZpcmUuc3RlYW1JbWFnZSxcclxuICAgICAgICAgICAgc2l6ZTogKCkgPT4gcm5kSW50KDEyLCAxOCksXHJcbiAgICAgICAgICAgIGdyYXZpdHk6IHt4OiAwLCB5OiA4fSxcclxuICAgICAgICAgICAgbGlmZXRpbWU6ICgpID0+IHJuZCgxLCAzKSxcclxuICAgICAgICAgICAgYWxwaGE6ICgpID0+IHJuZCgwLjUsIDAuOCksXHJcbiAgICAgICAgICAgIGFuZ2xlU3BlZWQ6ICgpID0+IHJuZCgtMSwgMSkgKiAzLFxyXG4gICAgICAgICAgICBibGVuZE1vZGU6IFwic291cmNlLW92ZXJcIixcclxuICAgICAgICAgICAgYWxwaGFDdXJ2ZTogdmFsdWVDdXJ2ZXMuY29zKDAuMSwgMC41KSxcclxuICAgICAgICAgICAgcmVuZGVyaW5nTGF5ZXI6IFJlbmRlcmluZ0xheWVyLkVOVElUSUVTLFxyXG4gICAgICAgICAgICB6SW5kZXg6IDEsXHJcbiAgICAgICAgICAgIGJyZWFrRmFjdG9yOiAwLjVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGFya0VtaXR0ZXIgPSB0aGlzLnNjZW5lLnBhcnRpY2xlcy5jcmVhdGVFbWl0dGVyKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IHt4OiB0aGlzLngsIHk6IHRoaXMueX0sXHJcbiAgICAgICAgICAgIHZlbG9jaXR5OiAoKSA9PiAoeyB4OiBybmQoLTEsIDEpICogMzAsIHk6IHJuZCg1MCwgMTAwKSB9KSxcclxuICAgICAgICAgICAgY29sb3I6ICgpID0+IEZpcmVHZnguZ3JhZGllbnQuZ2V0Q3NzKHJuZCgpICoqIDAuNSksXHJcbiAgICAgICAgICAgIHNpemU6IDIsXHJcbiAgICAgICAgICAgIGdyYXZpdHk6IHt4OiAwLCB5OiAtMTAwfSxcclxuICAgICAgICAgICAgbGlmZXRpbWU6ICgpID0+IHJuZCgxLCAxLjUpLFxyXG4gICAgICAgICAgICBibGVuZE1vZGU6IFwic2NyZWVuXCIsXHJcbiAgICAgICAgICAgIGFscGhhOiAoKSA9PiBybmQoMC4zLCAxKSxcclxuICAgICAgICAgICAgYWxwaGFDdXJ2ZTogdmFsdWVDdXJ2ZXMudHJhcGV6ZSgwLjA1LCAwLjIpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZmFjZSA9IG5ldyBGYWNlKHNjZW5lLCB0aGlzLCBFeWVUeXBlLlNUQU5EQVJELCAwLCA2KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd0RpYWxvZ3VlUHJvbXB0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghc3VwZXIuc2hvd0RpYWxvZ3VlUHJvbXB0KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA9PT0gUXVlc3RBVHJpZ2dlci5KVVNUX0FSUklWRUQgfHxcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA+PSBRdWVzdEFUcmlnZ2VyLkdPVF9XT09EICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkuZ2V0SGlnaGVzdFRyaWdnZXJJbmRleCgpIDwgUXVlc3RBVHJpZ2dlci5UQUxLRURfVE9fRklSRV9XSVRIX1dPT0RcclxuICAgICAgICAgICAgKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkuZ2V0SGlnaGVzdFRyaWdnZXJJbmRleCgpID09PSBRdWVzdEFUcmlnZ2VyLlRIUk9XTl9XT09EX0lOVE9fRklSRSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkuZ2V0SGlnaGVzdFRyaWdnZXJJbmRleCgpID09PSBRdWVzdEFUcmlnZ2VyLkJFQVRfRklSRVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzUmVuZGVyZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWaXNpYmxlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0FuZ3J5KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSBGaXJlU3RhdGUuQU5HUlk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzQmVpbmdQdXRPdXQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09IEZpcmVTdGF0ZS5CRUlOR19QVVRfT1VUO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc1B1dE91dCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gRmlyZVN0YXRlLlBVVF9PVVQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFN0YXRlKHN0YXRlOiBGaXJlU3RhdGUpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgaWYgKHN0YXRlID09PSBGaXJlU3RhdGUuQkVJTkdfUFVUX09VVCB8fCBzdGF0ZSA9PT0gRmlyZVN0YXRlLlBVVF9PVVQpIHtcclxuICAgICAgICAgICAgRmlyZS5maXJlQW1iaWVuY2Uuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd1RvQ2FudmFzKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMueCwgLXRoaXMueSk7XHJcbiAgICAgICAgY3R4LnNjYWxlKHRoaXMuaW50ZW5zaXR5IC8gNSwgdGhpcy5pbnRlbnNpdHkgLyA1KTtcclxuICAgICAgICB0aGlzLmZpcmVHZnguZHJhdyhjdHgsIDAsIDApO1xyXG5cclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZCh7IHR5cGU6IFJlbmRlcmluZ1R5cGUuRklSRSwgbGF5ZXI6IFJlbmRlcmluZ0xheWVyLkVOVElUSUVTLCBlbnRpdHk6IHRoaXMgfSk7XHJcbiAgICAgICAgdGhpcy5kcmF3RmFjZShjdHgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93RGlhbG9ndWVQcm9tcHQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdEaWFsb2d1ZVByb21wdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGhpbmtCdWJibGUpIHtcclxuICAgICAgICAgICAgdGhpcy50aGlua0J1YmJsZS5kcmF3KGN0eCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS5kcmF3KGN0eCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnNob3dCb3VuZHMpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3Qm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBGaXJlU3RhdGUuQU5HUlkgJiYgIXRoaXMuYmVpbmdQdXRPdXQpIHtcclxuICAgICAgICAgICAgdGhpcy5mYWNlPy5zZXRNb2RlKEZhY2VNb2Rlcy5BTkdSWSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBGaXJlU3RhdGUuQkVJTkdfUFVUX09VVCkge1xyXG4gICAgICAgICAgICB0aGlzLmZhY2U/LnNldE1vZGUoRmFjZU1vZGVzLkRJU0dVU1RFRCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pbnRlbnNpdHkgIT09IHRoaXMuZ3Jvd3RoVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZW5zaXR5ID0gc2hpZnRWYWx1ZSh0aGlzLmludGVuc2l0eSwgdGhpcy5ncm93dGhUYXJnZXQsIHRoaXMuZ3Jvd3RoICogZHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmZyaWVuZHNoaXBDdXRzY2VuZVxyXG4gICAgICAgICAgICAmJiB0aGlzLnNjZW5lLnNoaWJhLmdldFN0YXRlKCkgPT09IFNoaWJhU3RhdGUuS0lMTElOR19GSVJFXHJcbiAgICAgICAgICAgICYmIHRoaXMuaW50ZW5zaXR5IDw9IFNIUklOS19TSVpFXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc2hpYmEubmV4dFN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2NlbmUuY2FtZXJhLmlzUG9pbnRWaXNpYmxlKHRoaXMueCwgdGhpcy55LCAyMDApKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQmVpbmdQdXRPdXQoKSAmJiAhdGhpcy5pc1B1dE91dCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0aWNsZUNoYW5jZSA9IGR0IC0gcm5kKCkgKiB0aGlzLmF2ZXJhZ2VQYXJ0aWNsZURlbGF5O1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHBhcnRpY2xlQ2hhbmNlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJuZCgpIDwgMC41KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGFya0VtaXR0ZXIuZW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChybmQoKSA8IDAuMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNtb2tlRW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcGFydGljbGVDaGFuY2UgLT0gcm5kKCkgKiB0aGlzLmF2ZXJhZ2VQYXJ0aWNsZURlbGF5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNvdW5kRW1pdHRlci51cGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzQmVpbmdQdXRPdXQoKSkge1xyXG4gICAgICAgICAgICBsZXQgc3RlYW1QYXJ0aWNsZUNoYW5jZSA9IGR0IC0gcm5kKCkgKiB0aGlzLmF2ZXJhZ2VTdGVhbURlbGF5O1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHN0ZWFtUGFydGljbGVDaGFuY2UgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZWFtRW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgICAgICAgICBzdGVhbVBhcnRpY2xlQ2hhbmNlIC09IHJuZCgpICogdGhpcy5hdmVyYWdlU3RlYW1EZWxheTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlyZUdmeC51cGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dEaWFsb2d1ZVByb21wdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9ndWVQcm9tcHQudXBkYXRlKGR0LCB0aGlzLngsIHRoaXMueSArIDMyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3BlZWNoQnViYmxlLnVwZGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZlZWQod29vZDogV29vZCk6IHZvaWQge1xyXG4gICAgICAgIHdvb2QucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBlbmQgb2YgdGhlIHdvcmxkXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IEZpcmVTdGF0ZS5BTkdSWTtcclxuICAgICAgICB0aGlzLmdyb3d0aFRhcmdldCA9IDE0O1xyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0QXBvY2FseXBzZU11c2ljKCk7XHJcblxyXG4gICAgICAgIC8vIERpc2FibGUgcmVtYWluaW5nIGRpYWxvZ3NcclxuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBhbnkgcmVhY2hhYmxlIE5QQ3NcclxuICAgICAgICBmb3IgKGNvbnN0IG5wYyBvZiBbdGhpcy5zY2VuZS5zaGFkb3dQcmVzZW5jZV0pIHtcclxuICAgICAgICAgICAgaWYgKG5wYykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmVHYW1lT2JqZWN0KG5wYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBsYXllciB0aG91Z2h0c1xyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgW1wiV2hhdOKAplwiLCAyLCAyXSxcclxuICAgICAgICAgICAgW1wiV2hhdCBoYXZlIEkgZG9uZT9cIiwgNiwgM10sXHJcbiAgICAgICAgICAgIFtcIkkgdHJ1c3RlZCB5b3UhIEkgaGVscGVkIHlvdSFcIiwgMTAsIDNdXHJcbiAgICAgICAgXS5mb3JFYWNoKGxpbmUgPT4gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucGxheWVyLnRoaW5rKGxpbmVbMF0gYXMgc3RyaW5nLCBsaW5lWzJdIGFzIG51bWJlciAqIDEwMDApO1xyXG4gICAgICAgIH0sIChsaW5lWzFdIGFzIG51bWJlcikgKiAxMDAwKSk7XHJcblxyXG4gICAgICAgIC8vIEdpdmUgZmlyZSBuZXcgZGlhbG9nXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5ydW5BY3Rpb24oXCJlbmFibGVcIiwgbnVsbCwgW1wiZmlyZVwiLCBcImZpcmUyXCJdKTtcclxuICAgICAgICB9LCAxMzUwMCk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFrQ0E7QUFDQTtBQXhCQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVQQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFSQTtBQURBO0FBbUNBO0FBbENBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/entities/Fire.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/FlameBoy.js":
    /*!**********************************!*\
      !*** ./lib/entities/FlameBoy.js ***!
      \**********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar FlameBoy_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FlameBoy = exports.FlameBoyState = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst Face_1 = __webpack_require__(/*! ../Face */ \"./lib/Face.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nconst SoundEmitter_1 = __webpack_require__(/*! ../SoundEmitter */ \"./lib/SoundEmitter.js\");\nconst ScriptableNPC_1 = __webpack_require__(/*! ./ScriptableNPC */ \"./lib/entities/ScriptableNPC.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nvar FlameBoyState;\n(function (FlameBoyState) {\n    FlameBoyState[FlameBoyState[\"VENDOR\"] = 0] = \"VENDOR\";\n    FlameBoyState[FlameBoyState[\"WAITING_FOR_DIALOG\"] = 1] = \"WAITING_FOR_DIALOG\";\n    FlameBoyState[FlameBoyState[\"IDLE\"] = 2] = \"IDLE\";\n})(FlameBoyState = exports.FlameBoyState || (exports.FlameBoyState = {}));\nconst IDLE_DURATION = [2, 3, 4];\nconst WALK_DURATION = [1, 1.5, 2];\nconst ACCELERATION = 15;\nlet FlameBoy = FlameBoy_1 = class FlameBoy extends ScriptableNPC_1.ScriptableNPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 26, 54);\n        this.state = FlameBoyState.VENDOR;\n        this.idleTimer = util_1.rndItem(IDLE_DURATION);\n        this.walkTimer = null;\n        this.autoMoveDirection = 1;\n        this.setMaxVelocity(3);\n        this.face = new Face_1.Face(scene, this, Face_1.EyeType.FLAMEBOY, 0, 5);\n        this.defaultFaceMode = Face_1.FaceModes.BORED;\n        this.face.setMode(this.defaultFaceMode);\n        this.soundEmitter = new SoundEmitter_1.SoundEmitter(this.scene, this.x, this.y, FlameBoy_1.fireAmbience, 0.7, 0.2);\n    }\n    setState(state) {\n        this.state = state;\n    }\n    getState() {\n        return this.state;\n    }\n    feed(wood) {\n        wood.remove();\n        this.scene.game.campaign.runAction(\"giveWoodToFlameboy\");\n        this.think(\"Well, that was unexpected…\", 2000);\n        this.nextState();\n    }\n    nextState() {\n        this.state++;\n        if (this.state === FlameBoyState.WAITING_FOR_DIALOG) {\n            this.defaultFaceMode = Face_1.FaceModes.NEUTRAL;\n            this.face = new Face_1.Face(this.scene, this, Face_1.EyeType.FLAMEBOY2, 0, 2);\n        }\n    }\n    showDialoguePrompt() {\n        if (!super.showDialoguePrompt()) {\n            return false;\n        }\n        const thrownStoneIntoWater = (this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() >= Quests_1.QuestATrigger.THROWN_STONE_INTO_WATER\n            && this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() < Quests_1.QuestATrigger.GOT_MULTIJUMP);\n        const waitingForWoodDialog = this.state === FlameBoyState.WAITING_FOR_DIALOG;\n        return thrownStoneIntoWater || waitingForWoodDialog;\n    }\n    getAnimationTag() {\n        switch (this.state) {\n            case FlameBoyState.VENDOR: return \"idle\";\n            default: return \"idle2\";\n        }\n    }\n    walkRandomly(triggerCollisions, dt) {\n        if (triggerCollisions.length > 0) {\n            const event = triggerCollisions.find(t => t.name === \"flameboy_action\");\n            if (event && event.properties.velocity) {\n                this.autoMoveDirection = event.properties.velocity > 0 ? 1 : -1;\n                this.move = this.autoMoveDirection;\n            }\n        }\n        if (this.idleTimer !== null && this.idleTimer >= 0) {\n            this.idleTimer -= dt;\n        }\n        if (this.walkTimer !== null && this.walkTimer >= 0) {\n            this.walkTimer -= dt;\n        }\n        if (this.idleTimer && this.idleTimer <= 0 && this.walkTimer === null) {\n            this.walkTimer = util_1.rndItem(WALK_DURATION);\n            this.idleTimer = null;\n            this.move = this.autoMoveDirection;\n        }\n        if (this.walkTimer && this.walkTimer <= 0 && this.idleTimer === null) {\n            this.idleTimer = util_1.rndItem(IDLE_DURATION);\n            this.walkTimer = null;\n            this.move = 0;\n        }\n    }\n    draw(ctx) {\n        if (this.move === 0) {\n            this.scene.renderer.addAseprite(FlameBoy_1.sprite, this.getAnimationTag(), this.x, this.y, Renderer_1.RenderingLayer.ENTITIES, this.direction);\n        }\n        else {\n            this.scene.renderer.addAseprite(FlameBoy_1.sprite, \"walk\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES, this.direction);\n        }\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        this.drawFace(ctx, false);\n        if (this.thinkBubble) {\n            this.thinkBubble.draw(ctx);\n        }\n        if (this.showDialoguePrompt()) {\n            this.drawDialoguePrompt();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        // Triggers\n        const triggerCollisions = this.scene.world.getTriggerCollisions(this);\n        if (this.hasActiveConversation()) {\n            this.move = 0;\n        }\n        else {\n            if (this.state === FlameBoyState.IDLE) {\n                this.walkRandomly(triggerCollisions, dt);\n            }\n        }\n        if (this.move !== 0) {\n            this.direction = this.move;\n            this.accelerateX(ACCELERATION * dt * this.move);\n        }\n        else {\n            if (this.getVelocityX() > 0) {\n                this.decelerateX(ACCELERATION * dt);\n            }\n            else {\n                this.decelerateX(-ACCELERATION * dt);\n            }\n        }\n        if (this.thinkBubble) {\n            this.thinkBubble.update(this.x, this.y);\n        }\n        this.dialoguePrompt.update(dt, this.x, this.y + 32);\n        this.speechBubble.update(this.x, this.y);\n        this.soundEmitter.update();\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/flameboy.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], FlameBoy, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/fire/fire2.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], FlameBoy, \"fireAmbience\", void 0);\nFlameBoy = FlameBoy_1 = tslib_1.__decorate([\n    Entity_1.entity(\"flameboy\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], FlameBoy);\nexports.FlameBoy = FlameBoy;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvRmxhbWVCb3kuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvRmxhbWVCb3kudHM/OTc4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgZW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBFeWVUeXBlLCBGYWNlLCBGYWNlTW9kZXMgfSBmcm9tIFwiLi4vRmFjZVwiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBRdWVzdEFUcmlnZ2VyLCBRdWVzdEtleSB9IGZyb20gXCIuLi9RdWVzdHNcIjtcclxuaW1wb3J0IHsgUmVuZGVyaW5nTGF5ZXIgfSBmcm9tIFwiLi4vUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgU291bmQgfSBmcm9tIFwiLi4vU291bmRcIjtcclxuaW1wb3J0IHsgU291bmRFbWl0dGVyIH0gZnJvbSBcIi4uL1NvdW5kRW1pdHRlclwiO1xyXG5pbXBvcnQgeyBTY3JpcHRhYmxlTlBDIH0gZnJvbSBcIi4vU2NyaXB0YWJsZU5QQ1wiO1xyXG5pbXBvcnQgeyBybmRJdGVtIH0gZnJvbSBcIi4uL3V0aWxcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdEluZm8gfSBmcm9tIFwiLi4vTWFwSW5mb1wiO1xyXG5pbXBvcnQgeyBXb29kIH0gZnJvbSBcIi4vV29vZFwiO1xyXG5cclxuZXhwb3J0IGVudW0gRmxhbWVCb3lTdGF0ZSB7XHJcbiAgICBWRU5ET1IsXHJcbiAgICBXQUlUSU5HX0ZPUl9ESUFMT0csXHJcbiAgICBJRExFXHJcbn1cclxuXHJcbmNvbnN0IElETEVfRFVSQVRJT04gPSBbMiwgMywgNF07XHJcbmNvbnN0IFdBTEtfRFVSQVRJT04gPSBbMSwgMS41LCAyXTtcclxuY29uc3QgQUNDRUxFUkFUSU9OID0gMTU7XHJcblxyXG5AZW50aXR5KFwiZmxhbWVib3lcIilcclxuZXhwb3J0IGNsYXNzIEZsYW1lQm95IGV4dGVuZHMgU2NyaXB0YWJsZU5QQyB7XHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL2ZsYW1lYm95LmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNwcml0ZTogQXNlcHJpdGU7XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL2ZpcmUvZmlyZTIub2dnXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBmaXJlQW1iaWVuY2U6IFNvdW5kO1xyXG4gICAgcHJpdmF0ZSBzb3VuZEVtaXR0ZXI6IFNvdW5kRW1pdHRlcjtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRlID0gRmxhbWVCb3lTdGF0ZS5WRU5ET1I7XHJcbiAgICBwcml2YXRlIGlkbGVUaW1lcjogbnVtYmVyIHwgbnVsbCA9IHJuZEl0ZW0oSURMRV9EVVJBVElPTik7XHJcbiAgICBwcml2YXRlIHdhbGtUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGF1dG9Nb3ZlRGlyZWN0aW9uOiAxIHwgLTEgPSAxO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCAyNiwgNTQpO1xyXG4gICAgICAgIHRoaXMuc2V0TWF4VmVsb2NpdHkoMyk7XHJcbiAgICAgICAgdGhpcy5mYWNlID0gbmV3IEZhY2Uoc2NlbmUsIHRoaXMsIEV5ZVR5cGUuRkxBTUVCT1ksIDAsIDUpO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdEZhY2VNb2RlID0gRmFjZU1vZGVzLkJPUkVEO1xyXG4gICAgICAgIHRoaXMuZmFjZS5zZXRNb2RlKHRoaXMuZGVmYXVsdEZhY2VNb2RlKTtcclxuICAgICAgICB0aGlzLnNvdW5kRW1pdHRlciA9IG5ldyBTb3VuZEVtaXR0ZXIodGhpcy5zY2VuZSwgdGhpcy54LCB0aGlzLnksIEZsYW1lQm95LmZpcmVBbWJpZW5jZSwgMC43LCAwLjIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRTdGF0ZShzdGF0ZTogRmxhbWVCb3lTdGF0ZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3RhdGUoKTogRmxhbWVCb3lTdGF0ZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZlZWQod29vZDogV29vZCk6IHZvaWQge1xyXG4gICAgICAgIHdvb2QucmVtb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLnJ1bkFjdGlvbihcImdpdmVXb29kVG9GbGFtZWJveVwiKTtcclxuICAgICAgICB0aGlzLnRoaW5rKFwiV2VsbCwgdGhhdCB3YXMgdW5leHBlY3RlZOKAplwiLCAyMDAwKTtcclxuICAgICAgICB0aGlzLm5leHRTdGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBuZXh0U3RhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSsrO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBGbGFtZUJveVN0YXRlLldBSVRJTkdfRk9SX0RJQUxPRykge1xyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRGYWNlTW9kZSA9IEZhY2VNb2Rlcy5ORVVUUkFMO1xyXG4gICAgICAgICAgICB0aGlzLmZhY2UgPSBuZXcgRmFjZSh0aGlzLnNjZW5lLCB0aGlzLCBFeWVUeXBlLkZMQU1FQk9ZMiwgMCwgMik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzaG93RGlhbG9ndWVQcm9tcHQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFzdXBlci5zaG93RGlhbG9ndWVQcm9tcHQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0aHJvd25TdG9uZUludG9XYXRlciA9IChcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA+PSBRdWVzdEFUcmlnZ2VyLlRIUk9XTl9TVE9ORV9JTlRPX1dBVEVSXHJcbiAgICAgICAgICAgICYmIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS5nZXRIaWdoZXN0VHJpZ2dlckluZGV4KCkgPCBRdWVzdEFUcmlnZ2VyLkdPVF9NVUxUSUpVTVBcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IHdhaXRpbmdGb3JXb29kRGlhbG9nID0gdGhpcy5zdGF0ZSA9PT0gRmxhbWVCb3lTdGF0ZS5XQUlUSU5HX0ZPUl9ESUFMT0c7XHJcblxyXG4gICAgICAgIHJldHVybiB0aHJvd25TdG9uZUludG9XYXRlciB8fCB3YWl0aW5nRm9yV29vZERpYWxvZztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEFuaW1hdGlvblRhZyAoKTogc3RyaW5nIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSBGbGFtZUJveVN0YXRlLlZFTkRPUjogcmV0dXJuIFwiaWRsZVwiO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gXCJpZGxlMlwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHdhbGtSYW5kb21seSh0cmlnZ2VyQ29sbGlzaW9uczogR2FtZU9iamVjdEluZm9bXSwgZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0cmlnZ2VyQ29sbGlzaW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gdHJpZ2dlckNvbGxpc2lvbnMuZmluZCh0ID0+IHQubmFtZSA9PT0gXCJmbGFtZWJveV9hY3Rpb25cIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXZlbnQgJiYgZXZlbnQucHJvcGVydGllcy52ZWxvY2l0eSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRvTW92ZURpcmVjdGlvbiA9IGV2ZW50LnByb3BlcnRpZXMudmVsb2NpdHkgPiAwID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlID0gdGhpcy5hdXRvTW92ZURpcmVjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaWRsZVRpbWVyICE9PSBudWxsICYmIHRoaXMuaWRsZVRpbWVyID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5pZGxlVGltZXIgLT0gZHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy53YWxrVGltZXIgIT09IG51bGwgJiYgdGhpcy53YWxrVGltZXIgPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLndhbGtUaW1lciAtPSBkdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlkbGVUaW1lciAmJiB0aGlzLmlkbGVUaW1lciA8PSAwICYmIHRoaXMud2Fsa1RpbWVyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2Fsa1RpbWVyID0gcm5kSXRlbShXQUxLX0RVUkFUSU9OKTtcclxuICAgICAgICAgICAgdGhpcy5pZGxlVGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLm1vdmUgPSB0aGlzLmF1dG9Nb3ZlRGlyZWN0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMud2Fsa1RpbWVyICYmIHRoaXMud2Fsa1RpbWVyIDw9IDAgJiYgdGhpcy5pZGxlVGltZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5pZGxlVGltZXIgPSBybmRJdGVtKElETEVfRFVSQVRJT04pO1xyXG4gICAgICAgICAgICB0aGlzLndhbGtUaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm1vdmUgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShcclxuICAgICAgICAgICAgICAgIEZsYW1lQm95LnNwcml0ZSwgdGhpcy5nZXRBbmltYXRpb25UYWcoKSwgdGhpcy54LCB0aGlzLnksIFJlbmRlcmluZ0xheWVyLkVOVElUSUVTLCB0aGlzLmRpcmVjdGlvblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoXHJcbiAgICAgICAgICAgICAgICBGbGFtZUJveS5zcHJpdGUsIFwid2Fsa1wiLCB0aGlzLngsIHRoaXMueSwgUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMsIHRoaXMuZGlyZWN0aW9uXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kcmF3RmFjZShjdHgsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGhpbmtCdWJibGUpIHtcclxuICAgICAgICAgICAgdGhpcy50aGlua0J1YmJsZS5kcmF3KGN0eCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93RGlhbG9ndWVQcm9tcHQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdEaWFsb2d1ZVByb21wdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUuZHJhdyhjdHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShkdCk7XHJcblxyXG4gICAgICAgIC8vIFRyaWdnZXJzXHJcbiAgICAgICAgY29uc3QgdHJpZ2dlckNvbGxpc2lvbnMgPSB0aGlzLnNjZW5lLndvcmxkLmdldFRyaWdnZXJDb2xsaXNpb25zKHRoaXMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5oYXNBY3RpdmVDb252ZXJzYXRpb24oKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmUgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBGbGFtZUJveVN0YXRlLklETEUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2Fsa1JhbmRvbWx5KHRyaWdnZXJDb2xsaXNpb25zLCBkdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1vdmUgIT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSB0aGlzLm1vdmU7XHJcbiAgICAgICAgICAgIHRoaXMuYWNjZWxlcmF0ZVgoQUNDRUxFUkFUSU9OICogZHQgKiB0aGlzLm1vdmUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFZlbG9jaXR5WCgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWNlbGVyYXRlWChBQ0NFTEVSQVRJT04gKiBkdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlY2VsZXJhdGVYKC1BQ0NFTEVSQVRJT04gKiBkdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRoaW5rQnViYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGhpbmtCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGlhbG9ndWVQcm9tcHQudXBkYXRlKGR0LCB0aGlzLngsIHRoaXMueSArIDMyKTtcclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS51cGRhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIHRoaXMuc291bmRFbWl0dGVyLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFhQTtBQUNBO0FBTkE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN0pBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFMQTtBQURBO0FBY0E7QUFiQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/FlameBoy.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Mimic.js":
    /*!*******************************!*\
      !*** ./lib/entities/Mimic.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Mimic_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Mimic = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst mimic_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../../assets/dialog/mimic.dialog.json */ \"./assets/dialog/mimic.dialog.json\"));\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nvar MimicState;\n(function (MimicState) {\n    MimicState[MimicState[\"SLEEPING\"] = 0] = \"SLEEPING\";\n    MimicState[MimicState[\"OPEN_UP\"] = 1] = \"OPEN_UP\";\n    MimicState[MimicState[\"IDLE\"] = 2] = \"IDLE\";\n})(MimicState || (MimicState = {}));\nlet Mimic = Mimic_1 = class Mimic extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 46, 24);\n        this.state = MimicState.SLEEPING;\n        this.lookAtPlayer = false;\n        this.direction = 1;\n        this.conversation = new Conversation_1.Conversation(mimic_dialog_json_1.default, this);\n        this.animator.assignSprite(Mimic_1.sprite);\n    }\n    nextState() {\n        this.state++;\n        if (this.state === MimicState.OPEN_UP) {\n            Mimic_1.openingSound.play();\n        }\n    }\n    getInteractionText() {\n        if (!this.met) {\n            return \"Open\";\n        }\n        else {\n            return \"Talk\";\n        }\n    }\n    draw(ctx) {\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        switch (this.state) {\n            case MimicState.SLEEPING:\n                this.animator.play(\"sleeping\", this.direction);\n                break;\n            case MimicState.OPEN_UP:\n                this.animator.play(\"open\", this.direction, { loop: false, callback: this.nextState.bind(this) });\n                break;\n            case MimicState.IDLE:\n                this.animator.play(\"idle\", this.direction);\n                break;\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        this.speechBubble.update(this.x, this.y);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/mimic.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Mimic, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/item/chest.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Mimic, \"openingSound\", void 0);\nMimic = Mimic_1 = tslib_1.__decorate([\n    Entity_1.entity(\"mimic\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Mimic);\nexports.Mimic = Mimic;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvTWltaWMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvTWltaWMudHM/MmZhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgQ29udmVyc2F0aW9uIH0gZnJvbSBcIi4uL0NvbnZlcnNhdGlvblwiO1xyXG5pbXBvcnQgY29udmVyc2F0aW9uIGZyb20gXCIuLi8uLi9hc3NldHMvZGlhbG9nL21pbWljLmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4uL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgTlBDIH0gZnJvbSBcIi4vTlBDXCI7XHJcbmltcG9ydCB7IFNvdW5kIH0gZnJvbSBcIi4uL1NvdW5kXCI7XHJcblxyXG5lbnVtIE1pbWljU3RhdGUgeyBTTEVFUElORywgT1BFTl9VUCwgSURMRSB9XHJcblxyXG5AZW50aXR5KFwibWltaWNcIilcclxuZXhwb3J0IGNsYXNzIE1pbWljIGV4dGVuZHMgTlBDIHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvbWltaWMuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBAYXNzZXQoXCJzb3VuZHMvaXRlbS9jaGVzdC5vZ2dcIilcclxuICAgIHByaXZhdGUgc3RhdGljIG9wZW5pbmdTb3VuZDogU291bmQ7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0ZSA9IE1pbWljU3RhdGUuU0xFRVBJTkc7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNjZW5lOiBHYW1lU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHksIDQ2LCAyNCk7XHJcbiAgICAgICAgdGhpcy5sb29rQXRQbGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IDE7XHJcbiAgICAgICAgdGhpcy5jb252ZXJzYXRpb24gPSBuZXcgQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbiwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRvci5hc3NpZ25TcHJpdGUoTWltaWMuc3ByaXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbmV4dFN0YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RhdGUrKztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IE1pbWljU3RhdGUuT1BFTl9VUCkge1xyXG4gICAgICAgICAgICBNaW1pYy5vcGVuaW5nU291bmQucGxheSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW50ZXJhY3Rpb25UZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1ldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJPcGVuXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiVGFsa1wiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnNob3dCb3VuZHMpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3Qm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSBNaW1pY1N0YXRlLlNMRUVQSU5HOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRvci5wbGF5KFwic2xlZXBpbmdcIiwgdGhpcy5kaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTWltaWNTdGF0ZS5PUEVOX1VQOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRvci5wbGF5KFwib3BlblwiLCB0aGlzLmRpcmVjdGlvbiwgeyBsb29wOiBmYWxzZSwgY2FsbGJhY2s6IHRoaXMubmV4dFN0YXRlLmJpbmQodGhpcykgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBNaW1pY1N0YXRlLklETEU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdG9yLnBsYXkoXCJpZGxlXCIsIHRoaXMuZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUuZHJhdyhjdHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShkdCk7XHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBU0E7QUFDQTtBQUhBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZEQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBTEE7QUFEQTtBQVVBO0FBVEE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Mimic.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/MovingPlatform.js":
    /*!****************************************!*\
      !*** ./lib/entities/MovingPlatform.js ***!
      \****************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar MovingPlatform_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MovingPlatform = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst PhysicsEntity_1 = __webpack_require__(/*! ./PhysicsEntity */ \"./lib/entities/PhysicsEntity.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet MovingPlatform = MovingPlatform_1 = class MovingPlatform extends PhysicsEntity_1.PhysicsEntity {\n    constructor(scene, x, y, properties) {\n        super(scene, x, y, 68, 12);\n        this.setFloating(true);\n        this.startX = this.targetX = x;\n        this.startY = this.targetY = y;\n        this.velocity = properties.velocity / constants_1.PIXEL_PER_METER;\n        if (properties.direction === \"right\") {\n            this.targetX = x + properties.distance;\n            this.setVelocityX(this.velocity);\n        }\n        else if (properties.direction === \"left\") {\n            this.targetX = x - properties.distance;\n            this.setVelocityX(-this.velocity);\n        }\n        else if (properties.direction === \"up\") {\n            this.targetY = y + properties.distance;\n            this.setVelocityY(this.velocity);\n        }\n        else if (properties.direction === \"down\") {\n            this.targetY = y - properties.distance;\n            this.setVelocityY(-this.velocity);\n        }\n    }\n    draw() {\n        this.scene.renderer.addAseprite(MovingPlatform_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.PLATFORMS);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n    }\n    update(dt) {\n        super.update(dt);\n        if (this.getVelocityY() > 0) {\n            if (this.y >= Math.max(this.startY, this.targetY)) {\n                this.y = Math.max(this.startY, this.targetY);\n                this.setVelocityY(-this.velocity);\n            }\n        }\n        else if (this.getVelocityY() < 0) {\n            if (this.y <= Math.min(this.startY, this.targetY)) {\n                this.y = Math.min(this.startY, this.targetY);\n                this.setVelocityY(this.velocity);\n            }\n        }\n        if (this.getVelocityX() > 0) {\n            if (this.x >= Math.max(this.targetX, this.startX)) {\n                this.x = Math.max(this.targetX, this.startX);\n                this.setVelocityX(-this.velocity);\n            }\n        }\n        else if (this.getVelocityX() < 0) {\n            if (this.x <= Math.min(this.startX, this.targetX)) {\n                this.x = Math.min(this.startX, this.targetX);\n                this.setVelocityX(this.velocity);\n            }\n        }\n    }\n    collidesWith(x, y) {\n        if (x >= this.x - this.width / 2\n            && x <= this.x + this.width / 2\n            && y >= this.y\n            && y <= this.y + this.height) {\n            return World_1.Environment.PLATFORM;\n        }\n        return World_1.Environment.AIR;\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/stoneplatform.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], MovingPlatform, \"sprite\", void 0);\nMovingPlatform = MovingPlatform_1 = tslib_1.__decorate([\n    Entity_1.entity(\"movingplatform\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number, Object])\n], MovingPlatform);\nexports.MovingPlatform = MovingPlatform;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvTW92aW5nUGxhdGZvcm0uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvTW92aW5nUGxhdGZvcm0udHM/MjYzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgQ29sbGlkYWJsZUdhbWVPYmplY3QsIEdhbWVTY2VuZSB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vV29ybGRcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdFByb3BlcnRpZXMgfSBmcm9tIFwiLi4vTWFwSW5mb1wiO1xyXG5pbXBvcnQgeyBQaHlzaWNzRW50aXR5IH0gZnJvbSBcIi4vUGh5c2ljc0VudGl0eVwiO1xyXG5pbXBvcnQgeyBQSVhFTF9QRVJfTUVURVIgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcblxyXG5AZW50aXR5KFwibW92aW5ncGxhdGZvcm1cIilcclxuZXhwb3J0IGNsYXNzIE1vdmluZ1BsYXRmb3JtIGV4dGVuZHMgUGh5c2ljc0VudGl0eSBpbXBsZW1lbnRzIENvbGxpZGFibGVHYW1lT2JqZWN0IHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvc3RvbmVwbGF0Zm9ybS5hc2Vwcml0ZS5qc29uXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzcHJpdGU6IEFzZXByaXRlO1xyXG5cclxuICAgIHByaXZhdGUgc3RhcnRYOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHN0YXJ0WTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0YXJnZXRYOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRhcmdldFk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdmVsb2NpdHk6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHByb3BlcnRpZXM6IEdhbWVPYmplY3RQcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHksIDY4LCAxMik7XHJcbiAgICAgICAgdGhpcy5zZXRGbG9hdGluZyh0cnVlKTtcclxuICAgICAgICB0aGlzLnN0YXJ0WCA9IHRoaXMudGFyZ2V0WCA9IHg7XHJcbiAgICAgICAgdGhpcy5zdGFydFkgPSB0aGlzLnRhcmdldFkgPSB5O1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSBwcm9wZXJ0aWVzLnZlbG9jaXR5IC8gUElYRUxfUEVSX01FVEVSO1xyXG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmRpcmVjdGlvbiA9PT0gXCJyaWdodFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0WCA9IHggKyBwcm9wZXJ0aWVzLmRpc3RhbmNlO1xyXG4gICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WCh0aGlzLnZlbG9jaXR5KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnRpZXMuZGlyZWN0aW9uID09PSBcImxlZnRcIikge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldFggPSB4IC0gcHJvcGVydGllcy5kaXN0YW5jZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRWZWxvY2l0eVgoLXRoaXMudmVsb2NpdHkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocHJvcGVydGllcy5kaXJlY3Rpb24gPT09IFwidXBcIikge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldFkgPSB5ICsgcHJvcGVydGllcy5kaXN0YW5jZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRWZWxvY2l0eVkodGhpcy52ZWxvY2l0eSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0aWVzLmRpcmVjdGlvbiA9PT0gXCJkb3duXCIpIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRZID0geSAtIHByb3BlcnRpZXMuZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlZKC10aGlzLnZlbG9jaXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShNb3ZpbmdQbGF0Zm9ybS5zcHJpdGUsIFwiaWRsZVwiLCB0aGlzLngsIHRoaXMueSwgUmVuZGVyaW5nTGF5ZXIuUExBVEZPUk1TKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmVsb2NpdHlZKCkgPiAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnkgPj0gTWF0aC5tYXgodGhpcy5zdGFydFksIHRoaXMudGFyZ2V0WSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueSA9IE1hdGgubWF4KHRoaXMuc3RhcnRZLCB0aGlzLnRhcmdldFkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWZWxvY2l0eVkoLXRoaXMudmVsb2NpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdldFZlbG9jaXR5WSgpIDwgMCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy55IDw9IE1hdGgubWluKHRoaXMuc3RhcnRZLCB0aGlzLnRhcmdldFkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnkgPSBNYXRoLm1pbih0aGlzLnN0YXJ0WSwgdGhpcy50YXJnZXRZKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlZKHRoaXMudmVsb2NpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5nZXRWZWxvY2l0eVgoKSA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMueCA+PSBNYXRoLm1heCh0aGlzLnRhcmdldFgsIHRoaXMuc3RhcnRYKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy54ID0gTWF0aC5tYXgodGhpcy50YXJnZXRYLCB0aGlzLnN0YXJ0WCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WCgtdGhpcy52ZWxvY2l0eSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0VmVsb2NpdHlYKCkgPCAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnggPD0gTWF0aC5taW4odGhpcy5zdGFydFgsIHRoaXMudGFyZ2V0WCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueCA9IE1hdGgubWluKHRoaXMuc3RhcnRYLCB0aGlzLnRhcmdldFgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWZWxvY2l0eVgodGhpcy52ZWxvY2l0eSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbGxpZGVzV2l0aCh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB4ID49IHRoaXMueCAtIHRoaXMud2lkdGggLyAyXHJcbiAgICAgICAgICAgICYmIHggPD0gdGhpcy54ICsgdGhpcy53aWR0aCAvIDJcclxuICAgICAgICAgICAgJiYgeSA+PSB0aGlzLnlcclxuICAgICAgICAgICAgJiYgeSA8PSB0aGlzLnkgKyB0aGlzLmhlaWdodFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm4gRW52aXJvbm1lbnQuUExBVEZPUk07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gRW52aXJvbm1lbnQuQUlSO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUE3RUE7QUFEQTtBQUNBO0FBQUE7QUFGQTtBQURBO0FBV0E7QUFWQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/MovingPlatform.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/NPC.js":
    /*!*****************************!*\
      !*** ./lib/entities/NPC.js ***!
      \*****************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NPC = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst DialoguePrompt_1 = __webpack_require__(/*! ../DialoguePrompt */ \"./lib/DialoguePrompt.js\");\nconst Face_1 = __webpack_require__(/*! ../Face */ \"./lib/Face.js\");\nconst PhysicsEntity_1 = __webpack_require__(/*! ./PhysicsEntity */ \"./lib/entities/PhysicsEntity.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst SpeechBubble_1 = __webpack_require__(/*! ../SpeechBubble */ \"./lib/SpeechBubble.js\");\n// Seconds NPC can't be talked to after a conversation has ended\nconst PAUSE_AFTER_CONVERSATION = 1.5;\nclass NPC extends PhysicsEntity_1.PhysicsEntity {\n    constructor() {\n        super(...arguments);\n        this.direction = 1;\n        this.face = null;\n        this.defaultFaceMode = Face_1.FaceModes.NEUTRAL;\n        this.greeting = null;\n        this.conversation = null;\n        this.thinkBubble = null;\n        this.speechBubble = new SpeechBubble_1.SpeechBubble(this.scene, this.x, this.y);\n        this.lookAtPlayer = true;\n        this.dialoguePrompt = new DialoguePrompt_1.DialoguePrompt(this.scene, this.x, this.y);\n        this.lastEndedConversation = -Infinity;\n        this.met = false;\n    }\n    drawFace(ctx, lookAtPlayer = true) {\n        if (this.face) {\n            // Look at player\n            if (lookAtPlayer) {\n                const dx = this.scene.player.x - this.x;\n                this.face.toggleDirection((dx > 0) ? 1 : -1);\n                this.face.draw(ctx);\n            }\n            else {\n                this.face.setDirection(this.direction);\n                this.face.draw(ctx);\n            }\n        }\n    }\n    think(message, time) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (this.thinkBubble) {\n                this.thinkBubble.hide();\n                this.thinkBubble = null;\n            }\n            const thinkBubble = this.thinkBubble = new SpeechBubble_1.SpeechBubble(this.scene, this.x, this.y);\n            thinkBubble.setMessage(message);\n            thinkBubble.show();\n            yield util_1.sleep(time);\n            if (this.thinkBubble === thinkBubble) {\n                thinkBubble.hide();\n                this.thinkBubble = null;\n            }\n        });\n    }\n    hasMet() {\n        return false;\n    }\n    meet() {\n        this.met = true;\n    }\n    getInteractionText() {\n        return \"Talk\";\n    }\n    showDialoguePrompt() {\n        if (this.hasActiveConversation() || !this.scene.player.isControllable) {\n            return false;\n        }\n        return true;\n    }\n    drawDialoguePrompt() {\n        this.dialoguePrompt.draw();\n    }\n    drawGreeting(ctx) {\n        var _a;\n        (_a = this.greeting) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n    }\n    updateGreeting() {\n        var _a;\n        (_a = this.greeting) === null || _a === void 0 ? void 0 : _a.update();\n    }\n    registerEndedConversation() {\n        this.lastEndedConversation = this.scene.gameTime;\n    }\n    isReadyForConversation() {\n        return (this.conversation\n            && !this.scene.player.isCarrying(this)\n            && this.scene.gameTime - this.lastEndedConversation > PAUSE_AFTER_CONVERSATION);\n    }\n    hasActiveConversation() {\n        return (this.scene.player.playerConversation !== null && this.scene.player.playerConversation.npc === this);\n    }\n    toggleDirection(direction = this.direction > 0 ? -1 : 1) {\n        if (direction !== this.direction) {\n            this.direction = direction;\n        }\n    }\n    update(dt) {\n        if (this.lookAtPlayer) {\n            const dx = this.scene.player.x - this.x;\n            this.toggleDirection((dx > 0) ? 1 : -1);\n        }\n        super.update(dt);\n    }\n}\nexports.NPC = NPC;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvTlBDLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2VudGl0aWVzL05QQy50cz80NTcwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgRGlhbG9ndWVQcm9tcHQgfSBmcm9tIFwiLi4vRGlhbG9ndWVQcm9tcHRcIjtcclxuaW1wb3J0IHsgRmFjZSwgRmFjZU1vZGVzIH0gZnJvbSBcIi4uL0ZhY2VcIjtcclxuaW1wb3J0IHsgR3JlZXRpbmcgfSBmcm9tIFwiLi4vR3JlZXRpbmdcIjtcclxuaW1wb3J0IHsgUGh5c2ljc0VudGl0eSB9IGZyb20gXCIuL1BoeXNpY3NFbnRpdHlcIjtcclxuaW1wb3J0IHsgc2xlZXAgfSBmcm9tIFwiLi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBTcGVlY2hCdWJibGUgfSBmcm9tIFwiLi4vU3BlZWNoQnViYmxlXCI7XHJcblxyXG4vLyBTZWNvbmRzIE5QQyBjYW4ndCBiZSB0YWxrZWQgdG8gYWZ0ZXIgYSBjb252ZXJzYXRpb24gaGFzIGVuZGVkXHJcbmNvbnN0IFBBVVNFX0FGVEVSX0NPTlZFUlNBVElPTiA9IDEuNTtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBOUEMgZXh0ZW5kcyBQaHlzaWNzRW50aXR5IHtcclxuICAgIHB1YmxpYyBkaXJlY3Rpb24gPSAxO1xyXG4gICAgcHVibGljIGZhY2U6IEZhY2UgfCBudWxsID0gbnVsbDtcclxuICAgIHB1YmxpYyBkZWZhdWx0RmFjZU1vZGUgPSBGYWNlTW9kZXMuTkVVVFJBTDtcclxuICAgIHB1YmxpYyBncmVldGluZzogR3JlZXRpbmcgfCBudWxsID0gbnVsbDtcclxuICAgIHB1YmxpYyBjb252ZXJzYXRpb246IENvbnZlcnNhdGlvbiB8IG51bGwgPSBudWxsO1xyXG4gICAgcHVibGljIHRoaW5rQnViYmxlOiBTcGVlY2hCdWJibGUgfCBudWxsID0gbnVsbDtcclxuICAgIHB1YmxpYyBzcGVlY2hCdWJibGUgPSBuZXcgU3BlZWNoQnViYmxlKHRoaXMuc2NlbmUsIHRoaXMueCwgdGhpcy55KTtcclxuICAgIHB1YmxpYyBsb29rQXRQbGF5ZXIgPSB0cnVlO1xyXG4gICAgcHVibGljIGRpYWxvZ3VlUHJvbXB0ID0gbmV3IERpYWxvZ3VlUHJvbXB0KHRoaXMuc2NlbmUsIHRoaXMueCwgdGhpcy55KTtcclxuICAgIHByaXZhdGUgbGFzdEVuZGVkQ29udmVyc2F0aW9uID0gLUluZmluaXR5O1xyXG4gICAgcHJvdGVjdGVkIG1ldCA9IGZhbHNlO1xyXG5cclxuICAgIHByb3RlY3RlZCBkcmF3RmFjZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgbG9va0F0UGxheWVyID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmZhY2UpIHtcclxuICAgICAgICAgICAgLy8gTG9vayBhdCBwbGF5ZXJcclxuICAgICAgICAgICAgaWYgKGxvb2tBdFBsYXllcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZHggPSB0aGlzLnNjZW5lLnBsYXllci54IC0gdGhpcy54O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYWNlLnRvZ2dsZURpcmVjdGlvbigoZHggPiAwKSA/IDEgOiAtMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhY2UuZHJhdyhjdHgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYWNlLnNldERpcmVjdGlvbih0aGlzLmRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhY2UuZHJhdyhjdHgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyB0aGluayhtZXNzYWdlOiBzdHJpbmcsIHRpbWU6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICh0aGlzLnRoaW5rQnViYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGhpbmtCdWJibGUuaGlkZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnRoaW5rQnViYmxlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRoaW5rQnViYmxlID0gdGhpcy50aGlua0J1YmJsZSA9IG5ldyBTcGVlY2hCdWJibGUodGhpcy5zY2VuZSwgdGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIHRoaW5rQnViYmxlLnNldE1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpbmtCdWJibGUuc2hvdygpO1xyXG5cclxuICAgICAgICBhd2FpdCBzbGVlcCh0aW1lKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGhpbmtCdWJibGUgPT09IHRoaW5rQnViYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaW5rQnViYmxlLmhpZGUoKTtcclxuICAgICAgICAgICAgdGhpcy50aGlua0J1YmJsZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYXNNZXQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtZWV0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubWV0ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW50ZXJhY3Rpb25UZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiVGFsa1wiO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzaG93RGlhbG9ndWVQcm9tcHQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzQWN0aXZlQ29udmVyc2F0aW9uKCkgfHwgIXRoaXMuc2NlbmUucGxheWVyLmlzQ29udHJvbGxhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBkcmF3RGlhbG9ndWVQcm9tcHQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kaWFsb2d1ZVByb21wdC5kcmF3KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGRyYXdHcmVldGluZyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ3JlZXRpbmc/LmRyYXcoY3R4KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlR3JlZXRpbmcoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ncmVldGluZz8udXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlZ2lzdGVyRW5kZWRDb252ZXJzYXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5sYXN0RW5kZWRDb252ZXJzYXRpb24gPSB0aGlzLnNjZW5lLmdhbWVUaW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc1JlYWR5Rm9yQ29udmVyc2F0aW9uKCk6IGJvb2xlYW4gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLmNvbnZlcnNhdGlvblxyXG4gICAgICAgICAgICAmJiAhdGhpcy5zY2VuZS5wbGF5ZXIuaXNDYXJyeWluZyh0aGlzKVxyXG4gICAgICAgICAgICAmJiB0aGlzLnNjZW5lLmdhbWVUaW1lIC0gdGhpcy5sYXN0RW5kZWRDb252ZXJzYXRpb24gPiBQQVVTRV9BRlRFUl9DT05WRVJTQVRJT05cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYXNBY3RpdmVDb252ZXJzYXRpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnNjZW5lLnBsYXllci5wbGF5ZXJDb252ZXJzYXRpb24gIT09IG51bGwgJiYgdGhpcy5zY2VuZS5wbGF5ZXIucGxheWVyQ29udmVyc2F0aW9uLm5wYyA9PT0gdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvZ2dsZURpcmVjdGlvbihkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbiA+IDAgPyAtMSA6IDEpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZGlyZWN0aW9uICE9PSB0aGlzLmRpcmVjdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9va0F0UGxheWVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR4ID0gdGhpcy5zY2VuZS5wbGF5ZXIueCAtIHRoaXMueDtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVEaXJlY3Rpb24oKGR4ID4gMCkgPyAxIDogLTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWdHQTtBQTlGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBM0dBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/NPC.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/PhysicsEntity.js":
    /*!***************************************!*\
      !*** ./lib/entities/PhysicsEntity.js ***!
      \***************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PhysicsEntity = void 0;\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst Player_1 = __webpack_require__(/*! ./Player */ \"./lib/entities/Player.js\");\nclass PhysicsEntity extends Entity_1.Entity {\n    constructor() {\n        super(...arguments);\n        this.velocityX = 0;\n        this.velocityY = 0;\n        this.maxVelocityX = Infinity;\n        this.maxVelocityY = Infinity;\n        this.floating = false;\n        this.ground = null;\n        // This property describes how much the player hitbox grows when\n        // this entity is carried. Defaults to the entities own height.\n        this.carryHeight = this.height;\n        this.lastGroundPosition = { x: 0, y: 0 };\n    }\n    setFloating(floating) {\n        this.floating = floating;\n        if (floating) {\n            this.setVelocity(0, 0);\n        }\n    }\n    isFloating() {\n        return this.floating;\n    }\n    setMaxVelocity(maxVelocityX, maxVelocityY = maxVelocityX) {\n        this.maxVelocityX = maxVelocityX;\n        this.maxVelocityY = maxVelocityY;\n    }\n    accelerate(x, y) {\n        this.accelerateX(x);\n        this.accelerateY(y);\n    }\n    accelerateX(x) {\n        if (x > 0) {\n            this.velocityX = Math.min(this.maxVelocityX, this.velocityX + x);\n        }\n        else {\n            this.velocityX = Math.max(-this.maxVelocityX, this.velocityX + x);\n        }\n    }\n    accelerateY(y) {\n        this.velocityY = Math.min(this.maxVelocityY, this.velocityY + y);\n    }\n    decelerate(x, y) {\n        this.decelerateX(x);\n        this.decelerateY(y);\n    }\n    decelerateX(x) {\n        if (x > 0) {\n            this.velocityX = Math.max(0, this.velocityX - x);\n        }\n        else {\n            this.velocityX = Math.min(0, this.velocityX - x);\n        }\n    }\n    decelerateY(y) {\n        this.velocityY = Math.max(0, this.velocityY - y);\n    }\n    setVelocity(x, y) {\n        this.velocityX = x;\n        this.velocityY = y;\n    }\n    setVelocityX(x) {\n        this.velocityX = x;\n    }\n    setVelocityY(y) {\n        this.velocityY = y;\n    }\n    getVelocityX() {\n        return this.velocityX;\n    }\n    getVelocityY() {\n        return this.velocityY;\n    }\n    checkCollision(x, y, ignore) {\n        return this.scene.world.collidesWith(x, y, [this], ignore);\n    }\n    checkCollisionBox(x, y, ignore) {\n        for (let i = -this.width / 2; i < this.width / 2; i++) {\n            let env = this.checkCollision(x + i, y, ignore);\n            if (env !== World_1.Environment.AIR) {\n                return env;\n            }\n            env = this.checkCollision(x + i, y + this.height, ignore);\n            if (env !== World_1.Environment.AIR) {\n                return env;\n            }\n        }\n        for (let i = 0; i < this.height; i++) {\n            let env = this.checkCollision(x - this.width / 2, y + i, ignore);\n            if (env !== World_1.Environment.AIR) {\n                return env;\n            }\n            env = this.checkCollision(x + this.width / 2, y + i, ignore);\n            if (env !== World_1.Environment.AIR) {\n                return env;\n            }\n        }\n        return World_1.Environment.AIR;\n    }\n    updatePosition(newX, newY) {\n        if (this.floating) {\n            this.x = newX;\n            this.y = newY;\n        }\n        else {\n            const env = this.checkCollisionBox(newX, newY, newY > this.y ? [World_1.Environment.PLATFORM] : []);\n            if (env === World_1.Environment.AIR || env === World_1.Environment.WATER) {\n                this.x = newX;\n                this.y = newY;\n            }\n            else {\n                this.setVelocity(0, 0);\n            }\n        }\n    }\n    update(dt) {\n        super.update(dt);\n        const world = this.scene.world;\n        const ground = world.getObjectAt(this.x, this.y - 5, [this]);\n        if (ground instanceof PhysicsEntity) {\n            this.x += ground.getVelocityX() * constants_1.PIXEL_PER_METER * dt;\n            this.y += ground.getVelocityY() * constants_1.PIXEL_PER_METER * dt;\n        }\n        this.ground = ground;\n        this.updatePosition(this.x + this.velocityX * constants_1.PIXEL_PER_METER * dt, this.y + this.velocityY * constants_1.PIXEL_PER_METER * dt);\n        // Object dropping down when there is no ground below\n        if (!this.floating) {\n            const environment = world.collidesWith(this.x, this.y - 1, [this], this instanceof Player_1.Player && this.jumpDown ? [World_1.Environment.PLATFORM] : []);\n            if (environment === World_1.Environment.AIR) {\n                this.velocityY -= this.getGravity() * dt;\n                // Apply terminal velocity to falling entities\n                if (this.velocityY < 0) {\n                    this.velocityY = Math.max(this.velocityY, constants_1.TERMINAL_VELOCITY);\n                }\n            }\n            else if (environment === World_1.Environment.WATER) {\n                this.velocityY = constants_1.DROWNING_VELOCITY;\n                this.velocityX = 0;\n            }\n            else if (this.velocityY < 0) {\n                this.velocityY = 0;\n                if (!(this instanceof Player_1.Player)) {\n                    this.velocityX = 0;\n                }\n                this.x = Math.round(this.x);\n                this.y = Math.round(this.y);\n            }\n            else {\n                // is on ground\n                this.lastGroundPosition.x = this.x;\n                this.lastGroundPosition.y = this.y;\n            }\n        }\n    }\n    getGravity() {\n        return constants_1.GRAVITY;\n    }\n    getGround() {\n        return this.ground;\n    }\n}\nexports.PhysicsEntity = PhysicsEntity;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvUGh5c2ljc0VudGl0eS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9QaHlzaWNzRW50aXR5LnRzPzRlZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRFJPV05JTkdfVkVMT0NJVFksIEdSQVZJVFksIFBJWEVMX1BFUl9NRVRFUiwgVEVSTUlOQUxfVkVMT0NJVFkgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vV29ybGRcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdCB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL1BsYXllclwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBoeXNpY3NFbnRpdHkgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgcHJpdmF0ZSB2ZWxvY2l0eVggPSAwO1xyXG4gICAgcHJpdmF0ZSB2ZWxvY2l0eVkgPSAwO1xyXG4gICAgcHJpdmF0ZSBtYXhWZWxvY2l0eVggPSBJbmZpbml0eTtcclxuICAgIHByaXZhdGUgbWF4VmVsb2NpdHlZID0gSW5maW5pdHk7XHJcbiAgICBwcml2YXRlIGZsb2F0aW5nID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGdyb3VuZDogR2FtZU9iamVjdCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIC8vIFRoaXMgcHJvcGVydHkgZGVzY3JpYmVzIGhvdyBtdWNoIHRoZSBwbGF5ZXIgaGl0Ym94IGdyb3dzIHdoZW5cclxuICAgIC8vIHRoaXMgZW50aXR5IGlzIGNhcnJpZWQuIERlZmF1bHRzIHRvIHRoZSBlbnRpdGllcyBvd24gaGVpZ2h0LlxyXG4gICAgcHVibGljIGNhcnJ5SGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGxhc3RHcm91bmRQb3NpdGlvbiA9IHsgeDogMCwgeTogMCB9O1xyXG5cclxuICAgIHB1YmxpYyBzZXRGbG9hdGluZyhmbG9hdGluZzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZmxvYXRpbmcgPSBmbG9hdGluZztcclxuXHJcbiAgICAgICAgaWYgKGZsb2F0aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0Zsb2F0aW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZsb2F0aW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRNYXhWZWxvY2l0eShtYXhWZWxvY2l0eVg6IG51bWJlciwgbWF4VmVsb2NpdHlZID0gbWF4VmVsb2NpdHlYKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tYXhWZWxvY2l0eVggPSBtYXhWZWxvY2l0eVg7XHJcbiAgICAgICAgdGhpcy5tYXhWZWxvY2l0eVkgPSBtYXhWZWxvY2l0eVk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFjY2VsZXJhdGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFjY2VsZXJhdGVYKHgpO1xyXG4gICAgICAgIHRoaXMuYWNjZWxlcmF0ZVkoeSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFjY2VsZXJhdGVYKHg6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh4ID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5WCA9IE1hdGgubWluKHRoaXMubWF4VmVsb2NpdHlYLCB0aGlzLnZlbG9jaXR5WCArIHgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHlYID0gTWF0aC5tYXgoLXRoaXMubWF4VmVsb2NpdHlYLCB0aGlzLnZlbG9jaXR5WCArIHgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWNjZWxlcmF0ZVkoeTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eVkgPSBNYXRoLm1pbih0aGlzLm1heFZlbG9jaXR5WSwgdGhpcy52ZWxvY2l0eVkgKyB5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVjZWxlcmF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGVjZWxlcmF0ZVgoeCk7XHJcbiAgICAgICAgdGhpcy5kZWNlbGVyYXRlWSh5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVjZWxlcmF0ZVgoeDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHlYID0gTWF0aC5tYXgoMCwgdGhpcy52ZWxvY2l0eVggLSB4KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5WCA9IE1hdGgubWluKDAsIHRoaXMudmVsb2NpdHlYIC0geCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWNlbGVyYXRlWSh5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5WSA9IE1hdGgubWF4KDAsIHRoaXMudmVsb2NpdHlZIC0geSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFZlbG9jaXR5KHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eVggPSB4O1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHlZID0geTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0VmVsb2NpdHlYKHg6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHlYID0geDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0VmVsb2NpdHlZKHk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHlZID0geTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VmVsb2NpdHlYKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmVsb2NpdHlYO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRWZWxvY2l0eVkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52ZWxvY2l0eVk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0NvbGxpc2lvbih4OiBudW1iZXIsIHk6IG51bWJlciwgaWdub3JlPzogRW52aXJvbm1lbnRbXSk6IEVudmlyb25tZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZS53b3JsZC5jb2xsaWRlc1dpdGgoeCwgeSwgWyB0aGlzIF0sIGlnbm9yZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0NvbGxpc2lvbkJveCh4OiBudW1iZXIsIHk6IG51bWJlciwgaWdub3JlPzogRW52aXJvbm1lbnRbXSk6IEVudmlyb25tZW50IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gLXRoaXMud2lkdGggLyAyOyBpIDwgdGhpcy53aWR0aCAvIDI7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZW52ID0gdGhpcy5jaGVja0NvbGxpc2lvbih4ICsgaSwgeSwgaWdub3JlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlbnYgIT09IEVudmlyb25tZW50LkFJUikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZW52ID0gdGhpcy5jaGVja0NvbGxpc2lvbih4ICsgaSwgeSArIHRoaXMuaGVpZ2h0LCBpZ25vcmUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVudiAhPT0gRW52aXJvbm1lbnQuQUlSKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZW52O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGVpZ2h0OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGVudiA9IHRoaXMuY2hlY2tDb2xsaXNpb24oeCAtIHRoaXMud2lkdGggLyAyLCB5ICsgaSwgaWdub3JlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlbnYgIT09IEVudmlyb25tZW50LkFJUikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZW52ID0gdGhpcy5jaGVja0NvbGxpc2lvbih4ICsgdGhpcy53aWR0aCAvIDIsIHkgKyBpLCBpZ25vcmUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVudiAhPT0gRW52aXJvbm1lbnQuQUlSKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZW52O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gRW52aXJvbm1lbnQuQUlSO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCB1cGRhdGVQb3NpdGlvbihuZXdYOiBudW1iZXIsIG5ld1k6IG51bWJlcik6IHZvaWQge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mbG9hdGluZykge1xyXG4gICAgICAgICAgICB0aGlzLnggPSBuZXdYO1xyXG4gICAgICAgICAgICB0aGlzLnkgPSBuZXdZO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudiA9IHRoaXMuY2hlY2tDb2xsaXNpb25Cb3goXHJcbiAgICAgICAgICAgICAgICBuZXdYLCBuZXdZLCBuZXdZID4gdGhpcy55ID8gWyBFbnZpcm9ubWVudC5QTEFURk9STSBdIDogW11cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlbnYgPT09IEVudmlyb25tZW50LkFJUiB8fCBlbnYgPT09IEVudmlyb25tZW50LldBVEVSKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnggPSBuZXdYO1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ID0gbmV3WTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuXHJcbiAgICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLnNjZW5lLndvcmxkO1xyXG4gICAgICAgIGNvbnN0IGdyb3VuZCA9IHdvcmxkLmdldE9iamVjdEF0KHRoaXMueCwgdGhpcy55IC0gNSwgWyB0aGlzIF0pO1xyXG5cclxuICAgICAgICBpZiAoZ3JvdW5kIGluc3RhbmNlb2YgUGh5c2ljc0VudGl0eSkge1xyXG4gICAgICAgICAgICB0aGlzLnggKz0gZ3JvdW5kLmdldFZlbG9jaXR5WCgpICogUElYRUxfUEVSX01FVEVSICogZHQ7XHJcbiAgICAgICAgICAgIHRoaXMueSArPSBncm91bmQuZ2V0VmVsb2NpdHlZKCkgKiBQSVhFTF9QRVJfTUVURVIgKiBkdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZ3JvdW5kID0gZ3JvdW5kO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKFxyXG4gICAgICAgICAgICB0aGlzLnggKyB0aGlzLnZlbG9jaXR5WCAqIFBJWEVMX1BFUl9NRVRFUiAqIGR0LFxyXG4gICAgICAgICAgICB0aGlzLnkgKyB0aGlzLnZlbG9jaXR5WSAqIFBJWEVMX1BFUl9NRVRFUiAqIGR0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gT2JqZWN0IGRyb3BwaW5nIGRvd24gd2hlbiB0aGVyZSBpcyBubyBncm91bmQgYmVsb3dcclxuICAgICAgICBpZiAoIXRoaXMuZmxvYXRpbmcpIHtcclxuICAgICAgICAgICAgY29uc3QgZW52aXJvbm1lbnQgPSB3b3JsZC5jb2xsaWRlc1dpdGgoXHJcbiAgICAgICAgICAgICAgICB0aGlzLngsIHRoaXMueSAtIDEsXHJcbiAgICAgICAgICAgICAgICBbIHRoaXMgXSxcclxuICAgICAgICAgICAgICAgIHRoaXMgaW5zdGFuY2VvZiBQbGF5ZXIgJiYgdGhpcy5qdW1wRG93biA/IFsgRW52aXJvbm1lbnQuUExBVEZPUk0gXSA6IFtdXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZW52aXJvbm1lbnQgPT09IEVudmlyb25tZW50LkFJUikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZWxvY2l0eVkgLT0gdGhpcy5nZXRHcmF2aXR5KCkgKiBkdDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBcHBseSB0ZXJtaW5hbCB2ZWxvY2l0eSB0byBmYWxsaW5nIGVudGl0aWVzXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52ZWxvY2l0eVkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZWxvY2l0eVkgPSBNYXRoLm1heCh0aGlzLnZlbG9jaXR5WSwgVEVSTUlOQUxfVkVMT0NJVFkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVudmlyb25tZW50ID09PSBFbnZpcm9ubWVudC5XQVRFUikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZWxvY2l0eVkgPSBEUk9XTklOR19WRUxPQ0lUWTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVsb2NpdHlYID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnZlbG9jaXR5WSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVsb2NpdHlZID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUGxheWVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVsb2NpdHlYID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMueCA9IE1hdGgucm91bmQodGhpcy54KTtcclxuICAgICAgICAgICAgICAgIHRoaXMueSA9IE1hdGgucm91bmQodGhpcy55KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGlzIG9uIGdyb3VuZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0R3JvdW5kUG9zaXRpb24ueCA9IHRoaXMueDtcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdEdyb3VuZFBvc2l0aW9uLnkgPSB0aGlzLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldEdyYXZpdHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gR1JBVklUWTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0R3JvdW5kKCk6IEdhbWVPYmplY3QgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ncm91bmQ7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUE0TEE7QUExTEE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBeE1BOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/PhysicsEntity.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Player.js":
    /*!********************************!*\
      !*** ./lib/entities/Player.js ***!
      \********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Player_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Player = exports.Gender = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst BitmapFont_1 = __webpack_require__(/*! ../BitmapFont */ \"./lib/BitmapFont.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst Campaign_1 = __webpack_require__(/*! ../Campaign */ \"./lib/Campaign.js\");\nconst Cloud_1 = __webpack_require__(/*! ./Cloud */ \"./lib/entities/Cloud.js\");\nconst ControllerFamily_1 = __webpack_require__(/*! ../input/ControllerFamily */ \"./lib/input/ControllerFamily.js\");\nconst ControllerManager_1 = __webpack_require__(/*! ../input/ControllerManager */ \"./lib/input/ControllerManager.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst ConversationProxy_1 = __webpack_require__(/*! ../ConversationProxy */ \"./lib/ConversationProxy.js\");\nconst Dance_1 = __webpack_require__(/*! ../Dance */ \"./lib/Dance.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst GotItemScene_1 = __webpack_require__(/*! ../scenes/GotItemScene */ \"./lib/scenes/GotItemScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Particles_1 = __webpack_require__(/*! ../Particles */ \"./lib/Particles.js\");\nconst PhysicsEntity_1 = __webpack_require__(/*! ./PhysicsEntity */ \"./lib/entities/PhysicsEntity.js\");\nconst PlayerConversation_1 = __webpack_require__(/*! ../PlayerConversation */ \"./lib/PlayerConversation.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst Seed_1 = __webpack_require__(/*! ./Seed */ \"./lib/entities/Seed.js\");\nconst Sign_1 = __webpack_require__(/*! ./Sign */ \"./lib/entities/Sign.js\");\nconst Snowball_1 = __webpack_require__(/*! ./Snowball */ \"./lib/entities/Snowball.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nconst SpeechBubble_1 = __webpack_require__(/*! ../SpeechBubble */ \"./lib/SpeechBubble.js\");\nconst Stone_1 = __webpack_require__(/*! ./Stone */ \"./lib/entities/Stone.js\");\nconst Wall_1 = __webpack_require__(/*! ./Wall */ \"./lib/entities/Wall.js\");\nconst Wood_1 = __webpack_require__(/*! ./Wood */ \"./lib/entities/Wood.js\");\nconst groundColors = [\n    \"#806057\",\n    \"#504336\",\n    \"#3C8376\",\n    \"#908784\"\n];\nconst bounceColors = [\n    \"#f06060\",\n    \"#e87f7f\",\n    \"#ff7070\"\n];\nconst drownThoughts = [\n    { message: \"OK, I'm not Jesus. Noted!\", duration: 4000 },\n    { message: \"Looks like I can't swim… But I can respawn, nice!\", duration: 5000 },\n    { message: \"Well, that was strange… And wet.\", duration: 4000 }\n];\nconst drowningThoughts = [\n    { message: \"Waah!\", duration: 1000 },\n    { message: \"Help!\", duration: 1000 },\n    { message: \"Mama!\", duration: 1000 },\n    { message: \"Ieeh!\", duration: 1000 },\n    { message: \"Argh!\", duration: 1000 }\n];\nvar Gender;\n(function (Gender) {\n    Gender[Gender[\"FEMALE\"] = 0] = \"FEMALE\";\n    Gender[Gender[\"MALE\"] = 1] = \"MALE\";\n})(Gender = exports.Gender || (exports.Gender = {}));\n/** The number of seconds until player gets a hint. */\nconst HINT_TIMEOUT = 90;\nlet Player = Player_1 = class Player extends PhysicsEntity_1.PhysicsEntity {\n    constructor(scene, x, y) {\n        super(scene, x, y, constants_1.PLAYER_WIDTH, constants_1.PLAYER_HEIGHT);\n        this.controllerSpriteMapRecords = {\n            [ControllerFamily_1.ControllerSpriteMap.KEYBOARD]: Player_1.buttons[0],\n            [ControllerFamily_1.ControllerSpriteMap.XBOX]: Player_1.buttons[1],\n            [ControllerFamily_1.ControllerSpriteMap.PLAYSTATION]: Player_1.buttons[2]\n        };\n        this.lastHint = Date.now();\n        this.flying = false;\n        this.direction = 1;\n        this.playerSpriteMetadata = null;\n        this.animation = \"idle\";\n        this.moveLeft = false;\n        this.moveRight = false;\n        this.visible = false;\n        this.running = false;\n        this.jumpThresholdTimer = constants_1.PLAYER_JUMP_TIMING_THRESHOLD;\n        this.jumpDown = false;\n        this.jumpKeyPressed = false;\n        this.drowning = 0;\n        this.dance = null;\n        this.currentFailAnimation = 1;\n        this.carrying = null;\n        this.canRun = false;\n        this.canRainDance = false;\n        this.doubleJump = false;\n        this.multiJump = false;\n        this.hasFriendship = false;\n        this.usedJump = false;\n        this.usedDoubleJump = false;\n        this.autoMove = null;\n        this.isControllable = true;\n        this.showHints = false;\n        this.isPettingDog = false;\n        this.playerConversation = null;\n        this.speechBubble = new SpeechBubble_1.SpeechBubble(this.scene, this.x, this.y, undefined, undefined, undefined, undefined, undefined, undefined, true);\n        this.thinkBubble = null;\n        this.closestNPC = null;\n        this.disableParticles = false;\n        this.isControllable = false;\n        this.setFloating(true);\n        // Apply selected character traits\n        this.characterAsset = this.scene.game.campaign.selectedCharacter;\n        this.voiceAsset = this.scene.game.campaign.selectedVoice;\n        Conversation_1.Conversation.setGlobal(\"ismale\", this.characterAsset === Campaign_1.CharacterAsset.MALE ? \"true\" : \"false\");\n        setTimeout(() => {\n            this.isControllable = true;\n            this.visible = true;\n            this.setFloating(false);\n        }, 2200);\n        document.addEventListener(\"keydown\", event => this.handleKeyDown(event));\n        if (util_1.isDev()) {\n            console.log(\"Dev mode, press “C” to dance anywhere, “P” to spawn the stone, “O” to spawn the \"\n                + \"seed, “I” to spawn wood, “T” to throw useless snowball, “K” to learn all \"\n                + \"abilities, “M” to show bounds of entities and triggers.\");\n        }\n        this.setMaxVelocity(constants_1.MAX_PLAYER_RUNNING_SPEED);\n        this.dustEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x, y: this.y },\n            velocity: () => ({ x: util_1.rnd(-1, 1) * 26, y: util_1.rnd(0.7, 1) * 45 }),\n            color: () => util_1.rndItem(groundColors),\n            size: util_1.rnd(1, 2),\n            gravity: { x: 0, y: -100 },\n            lifetime: () => util_1.rnd(0.5, 0.8),\n            alphaCurve: Particles_1.valueCurves.trapeze(0.05, 0.2)\n        });\n        this.bounceEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x, y: this.y },\n            velocity: () => ({ x: util_1.rnd(-1, 1) * 90, y: util_1.rnd(0.7, 1) * 60 }),\n            color: () => util_1.rndItem(bounceColors),\n            size: util_1.rnd(1.5, 3),\n            gravity: { x: 0, y: -120 },\n            lifetime: () => util_1.rnd(0.4, 0.6),\n            alphaCurve: Particles_1.valueCurves.trapeze(0.05, 0.2)\n        });\n        this.doubleJumpEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x, y: this.y },\n            velocity: () => ({ x: util_1.rnd(-1, 1) * 90, y: util_1.rnd(-1, 0) * 100 }),\n            color: () => util_1.rndItem(constants_1.DOUBLE_JUMP_COLORS),\n            size: util_1.rnd(1.5, 3),\n            gravity: { x: 0, y: -120 },\n            lifetime: () => util_1.rnd(0.4, 0.6),\n            alphaCurve: Particles_1.valueCurves.trapeze(0.05, 0.2)\n        });\n    }\n    getControllable() {\n        return this.isControllable;\n    }\n    setControllable(isControllable) {\n        this.isControllable = isControllable;\n    }\n    startAutoMove(x, turnAround) {\n        if (!this.autoMove) {\n            this.autoMove = {\n                destinationX: x,\n                lastX: this.x,\n                turnAround\n            };\n        }\n        // Failsafe to stop automove after 1 second.\n        setTimeout(() => {\n            if (this.autoMove)\n                this.stopAutoMove();\n        }, 1000);\n    }\n    stopAutoMove() {\n        var _a;\n        if ((_a = this.autoMove) === null || _a === void 0 ? void 0 : _a.turnAround) {\n            this.direction = this.direction * -1;\n        }\n        this.autoMove = null;\n        this.moveRight = false;\n        this.moveLeft = false;\n    }\n    startPettingDog() {\n        this.isPettingDog = true;\n        this.x = this.scene.shiba.direction > 0 ? this.scene.shiba.x + 18 : this.scene.shiba.x - 18;\n    }\n    stopPettingDog() {\n        this.isPettingDog = false;\n    }\n    enableRunning() {\n        this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.GOT_RUNNING_ABILITY);\n        if (!this.canRun) {\n            this.scene.scenes.pushScene(GotItemScene_1.GotItemScene, GotItemScene_1.Item.RUNNING);\n            this.canRun = true;\n        }\n    }\n    enableRainDance() {\n        this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.LEARNED_RAIN_DANCE);\n        if (!this.canRainDance) {\n            this.scene.scenes.pushScene(GotItemScene_1.GotItemScene, GotItemScene_1.Item.RAINDANCE);\n            this.canRainDance = true;\n        }\n    }\n    enableDoubleJump() {\n        Conversation_1.Conversation.setGlobal(\"hasDoubleJump\", \"true\");\n        this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.GOT_QUEST_FROM_TREE);\n        if (!this.doubleJump) {\n            this.scene.scenes.pushScene(GotItemScene_1.GotItemScene, GotItemScene_1.Item.DOUBLEJUMP);\n            this.doubleJump = true;\n        }\n    }\n    enableMultiJump() {\n        this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.GOT_MULTIJUMP);\n        if (!this.multiJump) {\n            this.scene.scenes.pushScene(GotItemScene_1.GotItemScene, GotItemScene_1.Item.MULTIJUMP);\n            this.multiJump = true;\n        }\n    }\n    disableMultiJump() {\n        this.multiJump = false;\n    }\n    enableFriendship() {\n        if (!this.hasFriendship) {\n            this.scene.scenes.pushScene(GotItemScene_1.GotItemScene, GotItemScene_1.Item.FRIENDSHIP);\n            this.hasFriendship = true;\n            Conversation_1.Conversation.setGlobal(\"hasFriendship\", \"true\");\n            this.scene.removeGameObject(this.scene.powerShiba);\n        }\n    }\n    removePowerUps() {\n        this.multiJump = false;\n        this.doubleJump = false;\n        this.canRun = false;\n    }\n    removeMultiJump() {\n        this.multiJump = false;\n    }\n    switchToReality() {\n        this.canRun = false;\n        this.multiJump = false;\n        this.characterAsset = Campaign_1.CharacterAsset.PATIENT;\n        this.direction = -1;\n    }\n    getDance() {\n        return this.dance;\n    }\n    cancelDance() {\n        this.dance = null;\n    }\n    handleButtonDown(event) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (this.scene.paused || !this.isControllable || this.autoMove) {\n                return;\n            }\n            if (this.isPettingDog) {\n                if (event.isPlayerMoveLeft || event.isPlayerMoveRight || event.isPlayerAction) {\n                    this.scene.cancelPatEnding();\n                }\n                return;\n            }\n            if (this.dance) {\n                this.dance.handleButtonDown(event);\n                return;\n            }\n            if (!this.scene.camera.isOnTarget() || event.repeat) {\n                return;\n            }\n            if (this.playerConversation) {\n                this.playerConversation.handleButton(event);\n                return;\n            }\n            if (this.canRun && event.isPlayerRun) {\n                this.running = true;\n            }\n            if (event.isPlayerMoveRight) {\n                this.moveRight = true;\n                this.moveLeft = false;\n            }\n            else if (event.isPlayerMoveLeft) {\n                this.moveLeft = true;\n                this.moveRight = false;\n            }\n            else if (event.isPlayerEnterDoor) {\n                if (!this.canEnterDoor())\n                    return;\n                const gate = this.scene.world.getGateCollisions(this)[0];\n                this.enterGate(gate);\n            }\n            else if (event.isPlayerInteract) {\n                // Check for gates / doors\n                if (!this.flying) {\n                    if (this.closestNPC\n                        && this.closestNPC.isReadyForConversation()\n                        && this.closestNPC.conversation) {\n                        const conversation = this.closestNPC.conversation;\n                        // Disable auto movement to a safe talking distance for the stone in the river\n                        const autoMove = (this.closestNPC instanceof Sign_1.Sign\n                            || (this.closestNPC instanceof Stone_1.Stone\n                                && this.closestNPC.state !== Stone_1.StoneState.DEFAULT) ? false : true);\n                        this.playerConversation = new PlayerConversation_1.PlayerConversation(this, this.closestNPC, conversation, autoMove);\n                    }\n                    else if (this.readableTrigger) {\n                        const proxy = new ConversationProxy_1.ConversationProxy(this.scene, this.x, this.y, this.readableTrigger.properties);\n                        this.playerConversation = new PlayerConversation_1.PlayerConversation(this, proxy, proxy.conversation, false);\n                    }\n                    else if (this.canDanceToMakeRain()) {\n                        this.startDance(this.scene.apocalypse ? 3 : 2);\n                        this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.MADE_RAIN);\n                    }\n                }\n            }\n            else if (event.isPlayerAction) {\n                if (this.isCarrying())\n                    this.throw();\n            }\n            else if (event.isPlayerJump && this.canJump()) {\n                this.jumpKeyPressed = true;\n                this.jump();\n            }\n            else if (event.isPlayerDrop) {\n                this.jumpDown = true;\n            }\n        });\n    }\n    throw() {\n        if (!this.carrying || (this.carrying instanceof Stone_1.Stone && !this.canThrowStoneIntoWater())) {\n            return;\n        }\n        if (this.carrying instanceof Stone_1.Stone) {\n            this.carrying.setVelocity(10 * this.direction, 10);\n        }\n        else {\n            this.carrying.setVelocity(5 * this.direction, 5);\n        }\n        this.height = constants_1.PLAYER_HEIGHT;\n        this.carrying = null;\n        Player_1.throwingSound.stop();\n        Player_1.throwingSound.play();\n    }\n    // Used in dev mode to enable some special keys that can only be triggered by using a keyboard.\n    handleKeyDown(event) {\n        if (this.scene.paused) {\n            return;\n        }\n        if (!this.scene.camera.isOnTarget() || event.repeat) {\n            return;\n        }\n        if (util_1.isDev()) {\n            if (event.key === \"c\") {\n                // TODO Just for debugging. Real dancing is with action key on rain cloud\n                this.startDance(3);\n            }\n            else if (event.key === \"p\" && !this.carrying) {\n                // TODO Just for debugging, this must be removed later\n                this.carry(this.scene.stone);\n            }\n            else if (event.key === \"o\" && !this.carrying) {\n                this.carry(this.scene.tree.spawnSeed());\n            }\n            else if (event.key === \"u\" && !this.carrying) {\n                this.carry(this.scene.bone);\n            }\n            else if (event.key === \"i\" && !this.carrying) {\n                this.carry(this.scene.tree.seed.spawnWood());\n            }\n            else if (event.key === \"t\") {\n                this.scene.gameObjects.push(new Snowball_1.Snowball(this.scene, this.x, this.y + this.height * 0.75, 20 * this.direction, 10));\n                Player_1.throwingSound.stop();\n                Player_1.throwingSound.play();\n            }\n            else if (event.key === \"k\") {\n                this.multiJump = true;\n                this.doubleJump = true;\n                this.canRun = true;\n                this.canRainDance = true;\n                this.think(\"I can do everything now.\", 1500);\n            }\n            else if (event.key === \"m\") {\n                this.scene.showBounds = !this.scene.showBounds;\n                this.think(\"Toggling bounds.\", 1500);\n            }\n        }\n    }\n    think(message, time) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (this.thinkBubble) {\n                this.thinkBubble.hide();\n                this.thinkBubble = null;\n            }\n            const thinkBubble = this.thinkBubble = new SpeechBubble_1.SpeechBubble(this.scene, this.x, this.y);\n            thinkBubble.setMessage(message);\n            thinkBubble.show();\n            yield util_1.sleep(time);\n            if (this.thinkBubble === thinkBubble) {\n                thinkBubble.hide();\n                this.thinkBubble = null;\n            }\n        });\n    }\n    startDance(difficulty = 1) {\n        if (!this.dance) {\n            switch (difficulty) {\n                case 1:\n                    this.dance = new Dance_1.Dance(this.scene, this.x, this.y - 25, 100, \"  1 1 2 2 1 2 1 3\", undefined, 1, undefined, true, 0);\n                    break;\n                case 2:\n                    this.dance = new Dance_1.Dance(this.scene, this.x, this.y - 25, 192, \"1   2   1 1 2 2 121 212 121 212 3    \", undefined, 3);\n                    break;\n                case 3:\n                    this.dance = new Dance_1.Dance(this.scene, this.x, this.y - 25, 192, \"112 221 312 123 2121121 111 222 3    \", undefined, 4);\n                    break;\n                default:\n                    this.dance = new Dance_1.Dance(this.scene, this.x, this.y - 25, 192, \"3\");\n            }\n        }\n    }\n    /**\n     * Teleport the player from the source gate to it's corresponding target gate.\n     * The teleport is not instant but accompanied by a fade to black to obscure the teleportation.\n     * Also sets the camera bounds to the target position\n     * @param gate the source the player enters\n     */\n    enterGate(gate) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (gate && gate.properties.target) {\n                this.isControllable = false;\n                this.moveRight = false;\n                this.moveLeft = false;\n                const targetGate = this.scene.gateObjects.find(target => target.name === gate.properties.target);\n                const targetBgmId = gate.properties.bgm;\n                if (targetGate) {\n                    if (gate.properties.enterSound) {\n                        if (gate.properties.enterSound === \"portal\") {\n                            Player_1.enterPortalSound.stop();\n                            Player_1.enterPortalSound.play();\n                        }\n                    }\n                    else {\n                        Player_1.enterGateSound.stop();\n                        Player_1.enterGateSound.play();\n                    }\n                    this.scene.fadeToBlack(0.8, GameScene_1.FadeDirection.FADE_OUT)\n                        .then(() => tslib_1.__awaiter(this, void 0, void 0, function* () {\n                        if (targetBgmId) {\n                            this.scene.setActiveBgmTrack(targetBgmId);\n                        }\n                        if (targetGate.properties.exitSound) {\n                            if (targetGate.properties.exitSound === \"portal\") {\n                                Player_1.enterPortalSound.stop();\n                                Player_1.enterPortalSound.play();\n                            }\n                        }\n                        else {\n                            Player_1.leaveGateSound.stop();\n                            Player_1.leaveGateSound.play();\n                        }\n                        this.x = targetGate.x + (targetGate.width / 2);\n                        this.y = targetGate.y - targetGate.height;\n                        this.scene.camera.setBounds(this.getCurrentMapBounds());\n                        if (targetGate.name === \"exitportaldoor_2\") {\n                            this.switchToReality();\n                        }\n                        if (targetGate.properties.exitSleepTime) {\n                            yield util_1.sleep(targetGate.properties.exitSleepTime * 1000);\n                        }\n                        const fadeInTime = targetGate.properties.exitFadeTime ? targetGate.properties.exitFadeTime : 0.8;\n                        this.scene.fadeToBlack(fadeInTime, GameScene_1.FadeDirection.FADE_IN).then(() => {\n                            this.isControllable = true;\n                        });\n                    }));\n                }\n            }\n        });\n    }\n    canJump() {\n        if (this.characterAsset === Campaign_1.CharacterAsset.PATIENT)\n            return false;\n        if (this.multiJump) {\n            return true;\n        }\n        else if (!this.usedJump && this.jumpThresholdTimer > 0) {\n            return true;\n        }\n        else if (this.doubleJump) {\n            return !this.usedDoubleJump;\n        }\n        return !this.flying;\n    }\n    jump() {\n        if (this.drowning > 0)\n            return;\n        this.setVelocityY(Math.sqrt(2 * constants_1.PLAYER_JUMP_HEIGHT * constants_1.GRAVITY));\n        Player_1.jumpingSounds[this.voiceAsset].stop();\n        Player_1.jumpingSounds[this.voiceAsset].play();\n        if (this.flying && this.usedJump) {\n            this.usedDoubleJump = true;\n            if (!this.disableParticles && this.visible) {\n                this.doubleJumpEmitter.setPosition(this.x, this.y + 20);\n                this.doubleJumpEmitter.emit(20);\n            }\n        }\n        this.usedJump = true;\n    }\n    handleButtonUp(event) {\n        if (this.scene.paused || !this.isControllable || this.autoMove) {\n            return;\n        }\n        if (event.isPlayerMoveRight) {\n            this.moveRight = false;\n        }\n        else if (event.isPlayerMoveLeft) {\n            this.moveLeft = false;\n        }\n        else if (event.isPlayerJump) {\n            this.jumpKeyPressed = false;\n        }\n        else if (event.isPlayerDrop) {\n            this.jumpDown = false;\n        }\n        else if (event.isPlayerRun) {\n            this.running = false;\n        }\n    }\n    drawTooltip(text, buttonTag = ControllerFamily_1.ControllerAnimationTags.ACTION) {\n        if (!this.isControllable)\n            return;\n        const controllerSprite = ControllerManager_1.ControllerManager.getInstance().controllerSprite;\n        const measure = Player_1.font.measureText(text);\n        const gap = 6;\n        const offsetY = 12;\n        const textPositionX = Math.round(Math.round(this.x) - ((measure.width - this.controllerSpriteMapRecords[controllerSprite].width + gap) / 2));\n        const textPositionY = -this.y + offsetY;\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.ASEPRITE,\n            layer: Renderer_1.RenderingLayer.UI,\n            position: {\n                x: textPositionX - this.controllerSpriteMapRecords[controllerSprite].width - gap,\n                y: textPositionY\n            },\n            asset: this.controllerSpriteMapRecords[controllerSprite],\n            animationTag: buttonTag,\n        });\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.TEXT,\n            layer: Renderer_1.RenderingLayer.UI,\n            text,\n            textColor: \"white\",\n            outlineColor: \"black\",\n            position: {\n                x: textPositionX,\n                y: textPositionY\n            },\n            asset: Player_1.font,\n        });\n    }\n    draw(ctx) {\n        if (!this.visible) {\n            return;\n        }\n        const sprite = Player_1.playerSprites[this.characterAsset];\n        let animation = this.animation;\n        // TODO: Implement animation state concept instead of `animation === \"idle\" || animation === \"walk\" || …`\n        if (this.carrying\n            && (animation === \"idle\" || animation === \"walk\" || animation === \"jump\" || animation === \"fall\")) {\n            animation = animation + \"-carry\";\n        }\n        this.scene.renderer.addAseprite(sprite, animation, this.x, this.y - 1, Renderer_1.RenderingLayer.PLAYER, this.direction);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        if (this.closestNPC\n            && !this.dance\n            && !this.playerConversation\n            && this.closestNPC.isReadyForConversation()) {\n            this.drawTooltip(this.closestNPC.getInteractionText(), ControllerFamily_1.ControllerAnimationTags.INTERACT);\n        }\n        else if (this.readableTrigger) {\n            this.drawTooltip(\"Examine\", ControllerFamily_1.ControllerAnimationTags.INTERACT);\n        }\n        else if (this.canEnterDoor()) {\n            this.drawTooltip(\"Enter\", ControllerFamily_1.ControllerAnimationTags.OPEN_DOOR);\n        }\n        else if (this.canThrowStoneIntoWater()) {\n            this.drawTooltip(\"Throw stone\", ControllerFamily_1.ControllerAnimationTags.ACTION);\n        }\n        else if (this.canThrowSeedIntoSoil()) {\n            this.drawTooltip(\"Plant seed\", ControllerFamily_1.ControllerAnimationTags.ACTION);\n        }\n        else if (this.canDanceToMakeRain()) {\n            this.drawTooltip(\"Dance\", ControllerFamily_1.ControllerAnimationTags.INTERACT);\n        }\n        if (this.dance) {\n            this.dance.addDanceToRenderQueue();\n        }\n        this.speechBubble.draw(ctx);\n        if (this.thinkBubble) {\n            this.thinkBubble.draw(ctx);\n        }\n    }\n    canThrowStoneIntoWater() {\n        return (this.carrying instanceof Stone_1.Stone\n            && (this.direction === -1\n                && this.scene.world.collidesWith(this.x - 30, this.y - 20) === World_1.Environment.WATER));\n    }\n    canThrowSeedIntoSoil() {\n        return (this.carrying instanceof Seed_1.Seed\n            && (this.direction === -1\n                && this.scene.world.collidesWith(this.x - 30, this.y + 2) === World_1.Environment.SOIL));\n    }\n    debugCollisions() {\n        console.log(\"Entities: \", this.scene.world.getEntityCollisions(this));\n        console.log(\"Triggers: \", this.scene.world.getTriggerCollisions(this));\n        console.log(\"Gates: \", this.scene.world.getGateCollisions(this));\n    }\n    getReadableTrigger() {\n        const triggers = this.scene.world.getTriggerCollisions(this);\n        if (triggers.length === 0)\n            return undefined;\n        return triggers.find(t => t.name === \"readable\");\n    }\n    canDanceToMakeRain() {\n        if (!this.canRainDance)\n            return false;\n        const ground = this.getGround();\n        return ((this.isCollidingWithTrigger(\"raincloud_sky\")\n            && !this.scene.world.isRaining()\n            && this.carrying === null\n            && !this.scene.apocalypse) || (ground instanceof Cloud_1.Cloud\n            && this.scene.apocalypse\n            && !ground.isRaining()\n            && ground.canRain()));\n    }\n    canEnterDoor() {\n        return !this.flying && !this.carrying && this.scene.world.getGateCollisions(this).length > 0;\n    }\n    /**\n     * Returns the bounds of the map area the player currently resides in\n     */\n    getCurrentMapBounds() {\n        const collisions = this.scene.world.getCameraBounds(this);\n        if (collisions.length === 0)\n            return undefined;\n        return util_1.boundsFromMapObject(collisions[0]);\n    }\n    respawn() {\n        this.x = this.lastGroundPosition.x;\n        this.y = this.lastGroundPosition.y + 10;\n        this.setVelocity(0, 0);\n    }\n    getPlayerSpriteMetadata() {\n        if (this.playerSpriteMetadata == null) {\n            this.playerSpriteMetadata = Player_1.playerSprites.map(sprite => {\n                var _a;\n                const metaDataJSON = (_a = sprite.getLayer(\"Meta\")) === null || _a === void 0 ? void 0 : _a.data;\n                return metaDataJSON ? JSON.parse(metaDataJSON) : {};\n            });\n        }\n        return this.playerSpriteMetadata;\n    }\n    resetJumps() {\n        this.usedJump = false;\n        this.usedDoubleJump = false;\n        this.jumpThresholdTimer = constants_1.PLAYER_JUMP_TIMING_THRESHOLD;\n    }\n    isOutOfBounds() {\n        if (!this.isControllable)\n            return false;\n        const mapBounds = this.scene.camera.getBounds();\n        if (!mapBounds)\n            return false;\n        return !this.scene.world.boundingBoxesCollide(this.getBounds(), {\n            x: mapBounds.x + 4,\n            y: mapBounds.y - 4,\n            width: mapBounds.width - 8,\n            height: mapBounds.height - 8\n        });\n    }\n    update(dt) {\n        var _a;\n        super.update(dt);\n        const triggerCollisions = this.scene.world.getTriggerCollisions(this);\n        // Check if the player left the current map bounds and teleport him back to a valid position.\n        if (this.isOutOfBounds()) {\n            const pos = this.scene.apocalypse ?\n                this.scene.pointsOfInterest.find(poi => poi.name === \"boss_spawn\") :\n                this.scene.pointsOfInterest.find(poi => poi.name === \"player_reset_position\");\n            if (pos) {\n                this.x = pos.x;\n                this.y = pos.y;\n                this.scene.camera.setBounds(this.getCurrentMapBounds());\n            }\n        }\n        this.speechBubble.update(this.x, this.y);\n        if (this.thinkBubble) {\n            this.thinkBubble.update(this.x, this.y);\n        }\n        if (this.playerConversation) {\n            this.playerConversation.update();\n        }\n        if (this.showHints) {\n            if ((Date.now() - this.lastHint) / 1000 > HINT_TIMEOUT) {\n                this.showHint();\n            }\n        }\n        if (this.carrying) {\n            if (this.running) {\n                this.running = false;\n                this.animation = \"walk\";\n            }\n            this.carrying.x = this.x;\n            const currentFrameIndex = Player_1.playerSprites[this.characterAsset].getTaggedFrameIndex(this.animation + \"-carry\", this.scene.gameTime * 1000);\n            const carryOffsetFrames = (_a = this.getPlayerSpriteMetadata()[this.characterAsset].carryOffsetFrames) !== null && _a !== void 0 ? _a : [];\n            const offset = carryOffsetFrames.includes(currentFrameIndex + 1) ? 0 : -1;\n            this.carrying.y = this.y + (this.height - this.carrying.carryHeight) - offset;\n            if (this.carrying instanceof Stone_1.Stone) {\n                this.carrying.direction = this.direction;\n            }\n        }\n        const isDrowning = this.scene.world.collidesWith(this.x, this.y) === World_1.Environment.WATER;\n        if (isDrowning) {\n            if (!this.thinkBubble) {\n                const thought = drowningThoughts[util_1.rndInt(0, drowningThoughts.length)];\n                this.think(thought.message, thought.duration);\n            }\n            if (this.carrying instanceof Stone_1.Stone) {\n                this.carrying.setVelocity(-2, 10);\n                this.carrying = null;\n            }\n            if (this.drowning === 0) {\n                Player_1.drowningSound.play();\n            }\n            this.setVelocityX(0);\n            this.drowning += dt;\n            if (this.drowning > 3) {\n                Player_1.drowningSound.stop();\n                this.respawn();\n                const thought = drownThoughts[util_1.rndInt(0, drownThoughts.length)];\n                this.think(thought.message, thought.duration);\n            }\n        }\n        else {\n            this.drowning = 0;\n        }\n        const world = this.scene.world;\n        const wasFlying = this.flying;\n        const prevVelocity = this.getVelocityY();\n        // Apply auto movement\n        if (this.autoMove) {\n            if ((this.autoMove.lastX - this.autoMove.destinationX) * (this.x - this.autoMove.destinationX) <= 0) {\n                // Reached or overreached destination\n                this.stopAutoMove();\n            }\n            else {\n                // Not yet reached, keep going\n                this.autoMove.lastX = this.x;\n                if (this.x < this.autoMove.destinationX) {\n                    this.moveRight = true;\n                    this.moveLeft = false;\n                }\n                else {\n                    this.moveRight = false;\n                    this.moveLeft = true;\n                }\n            }\n        }\n        // Player movement\n        if (!this.scene.camera.isOnTarget()) {\n            this.moveRight = false;\n            this.moveLeft = false;\n        }\n        const acceleration = this.flying ? constants_1.PLAYER_ACCELERATION_AIR : constants_1.PLAYER_ACCELERATION;\n        if (!isDrowning) {\n            if (this.running) {\n                this.setMaxVelocity(constants_1.MAX_PLAYER_RUNNING_SPEED);\n            }\n            else {\n                this.setMaxVelocity(this.characterAsset === Campaign_1.CharacterAsset.PATIENT ? 3 : constants_1.MAX_PLAYER_SPEED);\n            }\n            if (this.moveRight) {\n                this.direction = 1;\n                if (!this.flying) {\n                    Player_1.walkingSound.play();\n                }\n                this.accelerateX(acceleration * dt);\n            }\n            else if (this.moveLeft) {\n                this.direction = -1;\n                if (!this.flying) {\n                    Player_1.walkingSound.play();\n                }\n                this.accelerateX(-acceleration * dt);\n            }\n            else {\n                Player_1.walkingSound.stop();\n                if (this.getVelocityX() > 0) {\n                    this.decelerateX(acceleration * dt);\n                }\n                else {\n                    this.decelerateX(-acceleration * dt);\n                }\n            }\n        }\n        // Set sprite index depending on movement\n        if (this.getVelocityX() === 0 && this.getVelocityY() === 0) {\n            this.animation = \"idle\";\n            this.flying = false;\n            this.resetJumps();\n        }\n        else {\n            if (this.getVelocityY() > 0) {\n                this.animation = \"jump\";\n                this.flying = true;\n            }\n            else if (isDrowning\n                || (this.getVelocityY() < 0\n                    && this.y - world.getGround(this.x, this.y) > 10)) {\n                if (this.jumpThresholdTimer < 0 || this.usedJump) {\n                    this.animation = \"fall\";\n                }\n                this.flying = true;\n            }\n            else {\n                this.animation = (this.running && !this.carrying) ? \"run\" : \"walk\";\n                this.flying = false;\n                this.resetJumps();\n            }\n        }\n        if (wasFlying && !this.flying) {\n            Player_1.landingSound.stop();\n            Player_1.landingSound.play();\n        }\n        // Reduce jump threshold timer when player did not jump yet when falling off an edge\n        if (this.flying && !this.usedJump && this.jumpThresholdTimer > 0) {\n            this.jumpThresholdTimer -= dt;\n        }\n        // Check for NPC's that can be interacted with. Reset closestNPC and get all entities that\n        // collide with the player with an added 5 px of margin. If there are multiple NPCs\n        // colliding, the closest one will be chosen.\n        this.closestNPC = null;\n        const entities = this.scene.world.getEntityCollisions(this, 5);\n        if (entities.length > 0) {\n            const closestEntity = entities.length > 1 ? this.getClosestEntity() : entities[0];\n            if (closestEntity instanceof NPC_1.NPC) {\n                this.closestNPC = closestEntity;\n            }\n        }\n        // Check for readables in player trigger collisions\n        this.readableTrigger = this.getReadableTrigger();\n        // Spawn random dust particles while walking\n        if (!this.disableParticles && this.visible) {\n            if (!this.flying && (Math.abs(this.getVelocityX()) > 1 || wasFlying)) {\n                if (util_1.timedRnd(dt, 0.2) || wasFlying) {\n                    this.dustEmitter.setPosition(this.x, this.y);\n                    const count = wasFlying ? Math.ceil(Math.abs(prevVelocity) / 5) : 1;\n                    this.dustEmitter.emit(count);\n                }\n            }\n        }\n        // Reset jump key state when on ground\n        if (!this.flying && this.jumpKeyPressed != null) {\n            this.jumpKeyPressed = null;\n        }\n        // Bounce\n        if (this.scene.world.collidesWith(this.x, this.y - 2, [this]) === World_1.Environment.BOUNCE) {\n            this.bounce();\n        }\n        // Dance\n        if (this.dance) {\n            if (this.dance.hasStarted()) {\n                // Basic dancing or error?\n                const err = this.dance.getTimeSinceLastMistake();\n                const suc = this.dance.getTimeSinceLastSuccess();\n                if (err < 1 || suc < 3) {\n                    if (err <= suc) {\n                        if (err === 0) {\n                            this.currentFailAnimation = util_1.rndInt(1, 3);\n                        }\n                        this.animation = \"dance-fluke-\" + this.currentFailAnimation;\n                    }\n                    else {\n                        this.animation = \"dance\";\n                    }\n                }\n            }\n            this.dance.setPosition(this.x, this.y - 16);\n            const done = this.dance.update();\n            if (done) {\n                // On cloud -> make it rain\n                if (this.dance.wasSuccessful()) {\n                    // (Useless because wrong cloud but hey…)\n                    const ground = this.getGround();\n                    if (ground && ground instanceof Cloud_1.Cloud) {\n                        ground.startRain(this.scene.apocalypse ? Infinity : 15);\n                        // Camera focus to boss for each triggered rain cloud\n                        const bossPointer = this.scene.pointsOfInterest.find(poi => poi.name === \"boss_spawn\");\n                        if (bossPointer) {\n                            this.scene.camera.focusOn(3, bossPointer.x, bossPointer.y + 60, 1, 0, Particles_1.valueCurves.cos(0.35));\n                        }\n                        // Remove a single boss fight barrier\n                        const rainingCloudCount = this.scene.gameObjects.filter(o => o instanceof Cloud_1.Cloud && o.isRaining()).length;\n                        const wallIdentifier = `wall${rainingCloudCount - 1}`;\n                        const targetWall = this.scene.gameObjects.find(o => o instanceof Wall_1.Wall && o.identifier === wallIdentifier);\n                        if (targetWall) {\n                            targetWall.crumble();\n                        }\n                    }\n                    if (this.isCollidingWithTrigger(\"raincloud_sky\")) {\n                        this.scene.world.startRain();\n                    }\n                }\n                this.dance = null;\n            }\n        }\n        this.disableParticles = false;\n        // Pet Dog Animation\n        if (this.isPettingDog) {\n            this.animation = \"petting\";\n        }\n        // Logic from triggers\n        if (triggerCollisions.length > 0) {\n            triggerCollisions.forEach(trigger => {\n                // Handle MountainRiddle logic\n                if (trigger.name === \"reset_mountain\") {\n                    this.scene.mountainRiddle.resetRiddle();\n                }\n                if (trigger.name === \"mountaingate\") {\n                    const row = trigger.properties.row;\n                    const col = trigger.properties.col;\n                    if (col != null && row != null) {\n                        this.scene.mountainRiddle.checkGate(col, row);\n                    }\n                }\n                if (trigger.name === \"teleporter\"\n                    && this.scene.mountainRiddle.isFailed()\n                    && !this.scene.mountainRiddle.isCleared()) {\n                    const teleportY = trigger.properties.teleportY;\n                    if (teleportY) {\n                        this.y -= teleportY;\n                    }\n                }\n                if (trigger.name === \"finish_mountain_riddle\") {\n                    this.scene.mountainRiddle.clearRiddle();\n                }\n                // Disable particle effects while in trigger\n                const disableParticles = trigger.properties.disableParticles;\n                if (disableParticles) {\n                    this.disableParticles = true;\n                }\n                // Set Global Conversation Variables from map triggers\n                const globalConversationProps = {\n                    key: trigger.properties.setGlobalKey,\n                    value: trigger.properties.setGlobalVal\n                };\n                if (globalConversationProps.key && globalConversationProps.value) {\n                    Conversation_1.Conversation.setGlobal(globalConversationProps.key, globalConversationProps.value);\n                }\n                // Enable Conversion Trees from map triggers\n                const enableConversationProps = {\n                    key: trigger.properties.setDialogEntity,\n                    value: trigger.properties.setDialogValue\n                };\n                if (enableConversationProps.key && enableConversationProps.value) {\n                    this.scene.game.campaign.runAction(\"enable\", null, [enableConversationProps.key, enableConversationProps.value]);\n                }\n            });\n        }\n    }\n    /**\n     * If given coordinate collides with the world then the first free y coordinate above is\n     * returned. This can be used to unstuck an object after a new position was set.\n     *\n     * @param x - X coordinate of current position.\n     * @param y - Y coordinate of current position.\n     * @return The Y coordinate of the ground below the given coordinate.\n     */\n    pullOutOfGround() {\n        let pulled = 0, col = 0;\n        if (this.getVelocityY() <= 0) {\n            const world = this.scene.world;\n            const height = world.getHeight();\n            col = world.collidesWith(this.x, this.y, [this], this.jumpDown ? [World_1.Environment.PLATFORM, World_1.Environment.WATER] : [World_1.Environment.WATER]);\n            while (this.y < height && col) {\n                pulled++;\n                this.y++;\n                col = world.collidesWith(this.x, this.y);\n            }\n        }\n        return pulled;\n    }\n    bounce() {\n        this.setVelocityY(Math.sqrt(2 * constants_1.PLAYER_BOUNCE_HEIGHT * constants_1.GRAVITY));\n        // Nice bouncy particles\n        this.bounceEmitter.setPosition(this.x, this.y - 12);\n        this.bounceEmitter.emit(20);\n        this.dustEmitter.clear();\n        Player_1.bouncingSound.stop();\n        Player_1.bouncingSound.play();\n    }\n    /**\n     * If given coordinate collides with the world then the first free y coordinate above is\n     * returned. This can be used to unstuck an object after a new position was set.\n     *\n     * @param x - X coordinate of current position.\n     * @param y - Y coordinate of current position.\n     * @return The Y coordinate of the ground below the given coordinate.\n     */\n    pullOutOfCeiling() {\n        let pulled = 0;\n        const world = this.scene.world;\n        while (this.y > 0\n            && world.collidesWith(this.x, this.y + this.height, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n            pulled++;\n            this.y--;\n        }\n        return pulled;\n    }\n    pullOutOfWall() {\n        let pulled = 0;\n        const world = this.scene.world;\n        if (this.getVelocityX() > 0) {\n            while (world.collidesWithVerticalLine(this.x + this.width / 2, this.y + this.height * 3 / 4, this.height / 2, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n                this.x--;\n                pulled++;\n            }\n        }\n        else {\n            while (world.collidesWithVerticalLine(this.x - this.width / 2, this.y + this.height * 3 / 4, this.height / 2, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n                this.x++;\n                pulled++;\n            }\n        }\n        return pulled;\n    }\n    updatePosition(newX, newY) {\n        this.x = newX;\n        this.y = newY;\n        // Check collision with the environment and correct player position and movement\n        if (this.pullOutOfGround() !== 0 || this.pullOutOfCeiling() !== 0) {\n            this.setVelocityY(0);\n        }\n        if (this.pullOutOfWall() !== 0) {\n            this.setVelocityX(0);\n        }\n    }\n    getGravity() {\n        if (this.flying && this.jumpKeyPressed === false && this.getVelocityY() > 0) {\n            return constants_1.SHORT_JUMP_GRAVITY;\n        }\n        else {\n            return constants_1.GRAVITY;\n        }\n    }\n    carry(object) {\n        if (!this.carrying) {\n            this.height = constants_1.PLAYER_HEIGHT + object.carryHeight + constants_1.PLAYER_CARRY_HEIGHT;\n            if (object instanceof Seed_1.Seed\n                && this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() < Quests_1.QuestATrigger.GOT_SEED) {\n                this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.GOT_SEED);\n            }\n            if (object instanceof Wood_1.Wood\n                && this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() < Quests_1.QuestATrigger.GOT_WOOD) {\n                this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.GOT_WOOD);\n                this.scene.game.campaign.runAction(\"enable\", null, [\"fire\", \"fire1\"]);\n            }\n            if (object instanceof Stone_1.Stone\n                && this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() < Quests_1.QuestATrigger.GOT_STONE) {\n                this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.GOT_STONE);\n            }\n            this.carrying = object;\n            object.setFloating(false);\n            if (object instanceof Stone_1.Stone) {\n                object.state = Stone_1.StoneState.DEFAULT;\n            }\n            if (object instanceof Seed_1.Seed) {\n                object.state = Seed_1.SeedState.FREE;\n            }\n            if (object instanceof Wood_1.Wood) {\n                object.state = Wood_1.WoodState.FREE;\n            }\n            object.x = this.x;\n            object.y = this.y + this.height;\n            object.setVelocity(0, 0);\n        }\n    }\n    isCarrying(object) {\n        if (object) {\n            return this.carrying === object;\n        }\n        else {\n            return this.carrying != null;\n        }\n    }\n    showHint() {\n        if (this.playerConversation === null) {\n            switch (this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex()) {\n                case Quests_1.QuestATrigger.JUST_ARRIVED:\n                    this.think(\"I should talk to someone.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.TALKED_TO_FIRE:\n                    this.think(\"I think the fire needs my help.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.GOT_QUEST_FROM_FIRE:\n                    this.think(\"The fire told me to visit the tree in the east.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.TALKED_TO_TREE:\n                    this.think(\"Maybe I should talk to the tree again.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.GOT_QUEST_FROM_TREE:\n                    this.think(\"I need to pick up the seed by the tree.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.GOT_SEED:\n                    this.think(\"I should check the mountains for a good place for the seed.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.PLANTED_SEED:\n                    this.think(\"The seed needs something to grow, I think.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.TALKED_TO_STONE:\n                    this.think(\"I should talk to that crazy stone again.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.GOT_STONE:\n                    this.think(\"My arms get heavy. I really should throw that thing in the river.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.THROWN_STONE_INTO_WATER:\n                    this.think(\"There must be something interesting west of the river.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.GOT_MULTIJUMP:\n                    this.think(\"I should check the clouds. The seed still needs something to grow.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.MADE_RAIN:\n                    this.think(\"I should talk to that singing tree again.\", 3000);\n                    break;\n                case Quests_1.QuestATrigger.GOT_WOOD:\n                    this.think(\"Quick! The fire needs wood!\", 3000);\n                    break;\n            }\n        }\n        this.lastHint = Date.now();\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"sprites/pc/female.aseprite.json\",\n        \"sprites/pc/male.aseprite.json\",\n        \"sprites/pc/patient.aseprite.json\"\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], Player, \"playerSprites\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"sprites/buttons_keyboard.aseprite.json\",\n        \"sprites/buttons_xbox.aseprite.json\",\n        \"sprites/buttons_playstation.aseprite.json\"\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], Player, \"buttons\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/drowning/drowning.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Player, \"drowningSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/feet-walking/steps_single.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Player, \"walkingSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/throwing/throwing.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Player, \"throwingSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/gate/door_open.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Player, \"enterGateSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/portal/enter-portal.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Player, \"enterPortalSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/gate/door_close.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Player, \"leaveGateSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"sounds/jumping/jumping_female.mp3\",\n        \"sounds/jumping/jumping.mp3\"\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], Player, \"jumpingSounds\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/jumping/landing.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Player, \"landingSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/jumping/squish.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Player, \"bouncingSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(constants_1.DIALOG_FONT),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], Player, \"font\", void 0);\nPlayer = Player_1 = tslib_1.__decorate([\n    Entity_1.entity(\"player\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Player);\nexports.Player = Player;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvUGxheWVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2VudGl0aWVzL1BsYXllci50cz8xY2RlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzZXByaXRlIH0gZnJvbSBcIi4uL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IGFzc2V0IH0gZnJvbSBcIi4uL0Fzc2V0c1wiO1xyXG5pbXBvcnQgeyBCZ21JZCwgRmFkZURpcmVjdGlvbiwgR2FtZVNjZW5lIH0gZnJvbSBcIi4uL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgQml0bWFwRm9udCB9IGZyb20gXCIuLi9CaXRtYXBGb250XCI7XHJcbmltcG9ydCB7IEJvdW5kcywgZW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBib3VuZHNGcm9tTWFwT2JqZWN0LCBpc0Rldiwgcm5kLCBybmRJbnQsIHJuZEl0ZW0sIHNsZWVwLCB0aW1lZFJuZCB9IGZyb20gXCIuLi91dGlsXCI7XHJcbmltcG9ydCB7IENoYXJhY3RlckFzc2V0LCBWb2ljZUFzc2V0IH0gZnJvbSBcIi4uL0NhbXBhaWduXCI7XHJcbmltcG9ydCB7IENsb3VkIH0gZnJvbSBcIi4vQ2xvdWRcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckFuaW1hdGlvblRhZ3MsIENvbnRyb2xsZXJTcHJpdGVNYXAgfSBmcm9tIFwiLi4vaW5wdXQvQ29udHJvbGxlckZhbWlseVwiO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyRXZlbnQgfSBmcm9tIFwiLi4vaW5wdXQvQ29udHJvbGxlckV2ZW50XCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJNYW5hZ2VyIH0gZnJvbSBcIi4uL2lucHV0L0NvbnRyb2xsZXJNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgQ29udmVyc2F0aW9uUHJveHkgfSBmcm9tIFwiLi4vQ29udmVyc2F0aW9uUHJveHlcIjtcclxuaW1wb3J0IHsgRGFuY2UgfSBmcm9tIFwiLi4vRGFuY2VcIjtcclxuaW1wb3J0IHtcclxuICAgIERJQUxPR19GT05ULCBET1VCTEVfSlVNUF9DT0xPUlMsIEdSQVZJVFksIE1BWF9QTEFZRVJfUlVOTklOR19TUEVFRCwgTUFYX1BMQVlFUl9TUEVFRCxcclxuICAgIFBMQVlFUl9BQ0NFTEVSQVRJT04sIFBMQVlFUl9BQ0NFTEVSQVRJT05fQUlSLCBQTEFZRVJfQk9VTkNFX0hFSUdIVCwgUExBWUVSX0NBUlJZX0hFSUdIVCxcclxuICAgIFBMQVlFUl9IRUlHSFQsIFBMQVlFUl9KVU1QX0hFSUdIVCwgUExBWUVSX0pVTVBfVElNSU5HX1RIUkVTSE9MRCwgUExBWUVSX1dJRFRILFxyXG4gICAgU0hPUlRfSlVNUF9HUkFWSVRZXHJcbn0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gXCIuLi9Xb3JsZFwiO1xyXG5pbXBvcnQgeyBHYW1lT2JqZWN0SW5mbyB9IGZyb20gXCIuLi9NYXBJbmZvXCI7XHJcbmltcG9ydCB7IEdvdEl0ZW1TY2VuZSwgSXRlbSB9IGZyb20gXCIuLi9zY2VuZXMvR290SXRlbVNjZW5lXCI7XHJcbmltcG9ydCB7IE5QQyB9IGZyb20gXCIuL05QQ1wiO1xyXG5pbXBvcnQgeyBQYXJ0aWNsZUVtaXR0ZXIsIHZhbHVlQ3VydmVzIH0gZnJvbSBcIi4uL1BhcnRpY2xlc1wiO1xyXG5pbXBvcnQgeyBQaHlzaWNzRW50aXR5IH0gZnJvbSBcIi4vUGh5c2ljc0VudGl0eVwiO1xyXG5pbXBvcnQgeyBQbGF5ZXJDb252ZXJzYXRpb24gfSBmcm9tIFwiLi4vUGxheWVyQ29udmVyc2F0aW9uXCI7XHJcbmltcG9ydCB7IFF1ZXN0QVRyaWdnZXIsIFF1ZXN0S2V5IH0gZnJvbSBcIi4uL1F1ZXN0c1wiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciwgUmVuZGVyaW5nVHlwZSB9IGZyb20gXCIuLi9SZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBTZWVkLCBTZWVkU3RhdGUgfSBmcm9tIFwiLi9TZWVkXCI7XHJcbmltcG9ydCB7IFNpZ24gfSBmcm9tIFwiLi9TaWduXCI7XHJcbmltcG9ydCB7IFNub3diYWxsIH0gZnJvbSBcIi4vU25vd2JhbGxcIjtcclxuaW1wb3J0IHsgU291bmQgfSBmcm9tIFwiLi4vU291bmRcIjtcclxuaW1wb3J0IHsgU3BlZWNoQnViYmxlIH0gZnJvbSBcIi4uL1NwZWVjaEJ1YmJsZVwiO1xyXG5pbXBvcnQgeyBTdG9uZSwgU3RvbmVTdGF0ZSB9IGZyb20gXCIuL1N0b25lXCI7XHJcbmltcG9ydCB7IFdhbGwgfSBmcm9tIFwiLi9XYWxsXCI7XHJcbmltcG9ydCB7IFdvb2QsIFdvb2RTdGF0ZSB9IGZyb20gXCIuL1dvb2RcIjtcclxuXHJcbmNvbnN0IGdyb3VuZENvbG9ycyA9IFtcclxuICAgIFwiIzgwNjA1N1wiLFxyXG4gICAgXCIjNTA0MzM2XCIsXHJcbiAgICBcIiMzQzgzNzZcIixcclxuICAgIFwiIzkwODc4NFwiXHJcbl07XHJcblxyXG5jb25zdCBib3VuY2VDb2xvcnMgPSBbXHJcbiAgICBcIiNmMDYwNjBcIixcclxuICAgIFwiI2U4N2Y3ZlwiLFxyXG4gICAgXCIjZmY3MDcwXCJcclxuXTtcclxuXHJcbmNvbnN0IGRyb3duVGhvdWdodHMgPSBbXHJcbiAgICB7IG1lc3NhZ2U6IFwiT0ssIEknbSBub3QgSmVzdXMuIE5vdGVkIVwiLCBkdXJhdGlvbjogNDAwMCB9LFxyXG4gICAgeyBtZXNzYWdlOiBcIkxvb2tzIGxpa2UgSSBjYW4ndCBzd2lt4oCmIEJ1dCBJIGNhbiByZXNwYXduLCBuaWNlIVwiLCBkdXJhdGlvbjogNTAwMCB9LFxyXG4gICAgeyBtZXNzYWdlOiBcIldlbGwsIHRoYXQgd2FzIHN0cmFuZ2XigKYgQW5kIHdldC5cIiwgZHVyYXRpb246IDQwMDAgfVxyXG5dO1xyXG5cclxuY29uc3QgZHJvd25pbmdUaG91Z2h0cyA9IFtcclxuICAgIHsgbWVzc2FnZTogXCJXYWFoIVwiLCBkdXJhdGlvbjogMTAwMCB9LFxyXG4gICAgeyBtZXNzYWdlOiBcIkhlbHAhXCIsIGR1cmF0aW9uOiAxMDAwIH0sXHJcbiAgICB7IG1lc3NhZ2U6IFwiTWFtYSFcIiwgZHVyYXRpb246IDEwMDAgfSxcclxuICAgIHsgbWVzc2FnZTogXCJJZWVoIVwiLCBkdXJhdGlvbjogMTAwMCB9LFxyXG4gICAgeyBtZXNzYWdlOiBcIkFyZ2ghXCIsIGR1cmF0aW9uOiAxMDAwIH1cclxuXTtcclxuXHJcbmV4cG9ydCBlbnVtIEdlbmRlciB7XHJcbiAgICBGRU1BTEUgPSAwLFxyXG4gICAgTUFMRSA9IDFcclxufVxyXG5cclxuLyoqIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyB1bnRpbCBwbGF5ZXIgZ2V0cyBhIGhpbnQuICovXHJcbmNvbnN0IEhJTlRfVElNRU9VVCA9IDkwO1xyXG5cclxuaW50ZXJmYWNlIFBsYXllclNwcml0ZU1ldGFkYXRhIHtcclxuICAgIGNhcnJ5T2Zmc2V0RnJhbWVzPzogbnVtYmVyW107XHJcbn1cclxuXHJcbnR5cGUgQXV0b01vdmUgPSB7XHJcbiAgICBkZXN0aW5hdGlvblg6IG51bWJlcjtcclxuICAgIGxhc3RYOiBudW1iZXI7XHJcbiAgICB0dXJuQXJvdW5kOiBib29sZWFuO1xyXG59O1xyXG5cclxuQGVudGl0eShcInBsYXllclwiKVxyXG5leHBvcnQgY2xhc3MgUGxheWVyIGV4dGVuZHMgUGh5c2ljc0VudGl0eSB7XHJcbiAgICBAYXNzZXQoW1xyXG4gICAgICAgIFwic3ByaXRlcy9wYy9mZW1hbGUuYXNlcHJpdGUuanNvblwiLFxyXG4gICAgICAgIFwic3ByaXRlcy9wYy9tYWxlLmFzZXByaXRlLmpzb25cIixcclxuICAgICAgICBcInNwcml0ZXMvcGMvcGF0aWVudC5hc2Vwcml0ZS5qc29uXCJcclxuICAgIF0pXHJcbiAgICBwdWJsaWMgc3RhdGljIHBsYXllclNwcml0ZXM6IEFzZXByaXRlW107XHJcblxyXG4gICAgQGFzc2V0KFtcclxuICAgICAgICBcInNwcml0ZXMvYnV0dG9uc19rZXlib2FyZC5hc2Vwcml0ZS5qc29uXCIsXHJcbiAgICAgICAgXCJzcHJpdGVzL2J1dHRvbnNfeGJveC5hc2Vwcml0ZS5qc29uXCIsXHJcbiAgICAgICAgXCJzcHJpdGVzL2J1dHRvbnNfcGxheXN0YXRpb24uYXNlcHJpdGUuanNvblwiXHJcbiAgICBdKVxyXG4gICAgcHVibGljIHN0YXRpYyBidXR0b25zOiBBc2Vwcml0ZVtdO1xyXG5cclxuICAgIHB1YmxpYyBjb250cm9sbGVyU3ByaXRlTWFwUmVjb3JkczogUmVjb3JkPENvbnRyb2xsZXJTcHJpdGVNYXAsIEFzZXByaXRlPiA9IHtcclxuICAgICAgICBbQ29udHJvbGxlclNwcml0ZU1hcC5LRVlCT0FSRF06IFBsYXllci5idXR0b25zWzBdLFxyXG4gICAgICAgIFtDb250cm9sbGVyU3ByaXRlTWFwLlhCT1hdOiBQbGF5ZXIuYnV0dG9uc1sxXSxcclxuICAgICAgICBbQ29udHJvbGxlclNwcml0ZU1hcC5QTEFZU1RBVElPTl06IFBsYXllci5idXR0b25zWzJdXHJcbiAgICB9O1xyXG5cclxuICAgIEBhc3NldChcInNvdW5kcy9kcm93bmluZy9kcm93bmluZy5tcDNcIilcclxuICAgIHByaXZhdGUgc3RhdGljIGRyb3duaW5nU291bmQ6IFNvdW5kO1xyXG5cclxuICAgIEBhc3NldChcInNvdW5kcy9mZWV0LXdhbGtpbmcvc3RlcHNfc2luZ2xlLm1wM1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgd2Fsa2luZ1NvdW5kOiBTb3VuZDtcclxuXHJcbiAgICBAYXNzZXQoXCJzb3VuZHMvdGhyb3dpbmcvdGhyb3dpbmcubXAzXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyB0aHJvd2luZ1NvdW5kOiBTb3VuZDtcclxuXHJcbiAgICBAYXNzZXQoXCJzb3VuZHMvZ2F0ZS9kb29yX29wZW4ubXAzXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBlbnRlckdhdGVTb3VuZDogU291bmQ7XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL3BvcnRhbC9lbnRlci1wb3J0YWwub2dnXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBlbnRlclBvcnRhbFNvdW5kOiBTb3VuZDtcclxuXHJcbiAgICBAYXNzZXQoXCJzb3VuZHMvZ2F0ZS9kb29yX2Nsb3NlLm1wM1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbGVhdmVHYXRlU291bmQ6IFNvdW5kO1xyXG5cclxuICAgIEBhc3NldChbXHJcbiAgICAgICAgXCJzb3VuZHMvanVtcGluZy9qdW1waW5nX2ZlbWFsZS5tcDNcIixcclxuICAgICAgICBcInNvdW5kcy9qdW1waW5nL2p1bXBpbmcubXAzXCJcclxuICAgIF0pXHJcbiAgICBwcml2YXRlIHN0YXRpYyBqdW1waW5nU291bmRzOiBTb3VuZFtdO1xyXG5cclxuICAgIEBhc3NldChcInNvdW5kcy9qdW1waW5nL2xhbmRpbmcubXAzXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBsYW5kaW5nU291bmQ6IFNvdW5kO1xyXG5cclxuICAgIEBhc3NldChcInNvdW5kcy9qdW1waW5nL3NxdWlzaC5tcDNcIilcclxuICAgIHByaXZhdGUgc3RhdGljIGJvdW5jaW5nU291bmQ6IFNvdW5kO1xyXG5cclxuICAgIEBhc3NldChESUFMT0dfRk9OVClcclxuICAgIHByaXZhdGUgc3RhdGljIGZvbnQ6IEJpdG1hcEZvbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBsYXN0SGludCA9IERhdGUubm93KCk7XHJcbiAgICBwcml2YXRlIGZseWluZyA9IGZhbHNlO1xyXG4gICAgcHVibGljIGRpcmVjdGlvbiA9IDE7XHJcbiAgICBwcml2YXRlIHBsYXllclNwcml0ZU1ldGFkYXRhOiBQbGF5ZXJTcHJpdGVNZXRhZGF0YVtdIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwdWJsaWMgYW5pbWF0aW9uID0gXCJpZGxlXCI7XHJcbiAgICBwcml2YXRlIG1vdmVMZWZ0OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIG1vdmVSaWdodDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSB2aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBydW5uaW5nOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBqdW1wVGhyZXNob2xkVGltZXIgPSBQTEFZRVJfSlVNUF9USU1JTkdfVEhSRVNIT0xEO1xyXG5cclxuICAgIHB1YmxpYyBqdW1wRG93bjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBqdW1wS2V5UHJlc3NlZDogYm9vbGVhbiB8IG51bGwgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgZHJvd25pbmcgPSAwO1xyXG4gICAgcHJpdmF0ZSBkYW5jZTogRGFuY2UgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgY3VycmVudEZhaWxBbmltYXRpb24gPSAxO1xyXG4gICAgcHJpdmF0ZSBjYXJyeWluZzogUGh5c2ljc0VudGl0eSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBjYW5SdW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgY2FuUmFpbkRhbmNlID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGRvdWJsZUp1bXAgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgbXVsdGlKdW1wID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGhhc0ZyaWVuZHNoaXAgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdXNlZEp1bXAgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdXNlZERvdWJsZUp1bXAgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgYXV0b01vdmU6IEF1dG9Nb3ZlIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwdWJsaWMgaXNDb250cm9sbGFibGU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBzaG93SGludHMgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgaXNQZXR0aW5nRG9nID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBjaGFyYWN0ZXJBc3NldDogQ2hhcmFjdGVyQXNzZXQ7XHJcbiAgICBwcml2YXRlIHZvaWNlQXNzZXQ6IFZvaWNlQXNzZXQ7XHJcblxyXG4gICAgcHVibGljIHBsYXllckNvbnZlcnNhdGlvbjogUGxheWVyQ29udmVyc2F0aW9uIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIHNwZWVjaEJ1YmJsZSA9IG5ldyBTcGVlY2hCdWJibGUoXHJcbiAgICAgICAgdGhpcy5zY2VuZSxcclxuICAgICAgICB0aGlzLngsIHRoaXMueSxcclxuICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLFxyXG4gICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICB0cnVlXHJcbiAgICApO1xyXG5cclxuICAgIHB1YmxpYyB0aGlua0J1YmJsZTogU3BlZWNoQnViYmxlIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBjbG9zZXN0TlBDOiBOUEMgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgcmVhZGFibGVUcmlnZ2VyPzogR2FtZU9iamVjdEluZm87XHJcbiAgICBwcml2YXRlIGR1c3RFbWl0dGVyOiBQYXJ0aWNsZUVtaXR0ZXI7XHJcbiAgICBwcml2YXRlIGJvdW5jZUVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjtcclxuICAgIHByaXZhdGUgZG91YmxlSnVtcEVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjtcclxuICAgIHByaXZhdGUgZGlzYWJsZVBhcnRpY2xlcyA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCBQTEFZRVJfV0lEVEgsIFBMQVlFUl9IRUlHSFQpO1xyXG5cclxuICAgICAgICB0aGlzLmlzQ29udHJvbGxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZXRGbG9hdGluZyh0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gQXBwbHkgc2VsZWN0ZWQgY2hhcmFjdGVyIHRyYWl0c1xyXG4gICAgICAgIHRoaXMuY2hhcmFjdGVyQXNzZXQgPSB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uc2VsZWN0ZWRDaGFyYWN0ZXI7XHJcbiAgICAgICAgdGhpcy52b2ljZUFzc2V0ID0gdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLnNlbGVjdGVkVm9pY2U7XHJcbiAgICAgICAgQ29udmVyc2F0aW9uLnNldEdsb2JhbChcImlzbWFsZVwiLCB0aGlzLmNoYXJhY3RlckFzc2V0ID09PSBDaGFyYWN0ZXJBc3NldC5NQUxFID8gXCJ0cnVlXCIgOiBcImZhbHNlXCIpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pc0NvbnRyb2xsYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RmxvYXRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0sIDIyMDApO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudCA9PiB0aGlzLmhhbmRsZUtleURvd24oZXZlbnQpKTtcclxuXHJcbiAgICAgICAgaWYgKGlzRGV2KCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICBcIkRldiBtb2RlLCBwcmVzcyDigJxD4oCdIHRvIGRhbmNlIGFueXdoZXJlLCDigJxQ4oCdIHRvIHNwYXduIHRoZSBzdG9uZSwg4oCcT+KAnSB0byBzcGF3biB0aGUgXCJcclxuICAgICAgICAgICAgICAgICsgXCJzZWVkLCDigJxJ4oCdIHRvIHNwYXduIHdvb2QsIOKAnFTigJ0gdG8gdGhyb3cgdXNlbGVzcyBzbm93YmFsbCwg4oCcS+KAnSB0byBsZWFybiBhbGwgXCJcclxuICAgICAgICAgICAgICAgICsgXCJhYmlsaXRpZXMsIOKAnE3igJ0gdG8gc2hvdyBib3VuZHMgb2YgZW50aXRpZXMgYW5kIHRyaWdnZXJzLlwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldE1heFZlbG9jaXR5KE1BWF9QTEFZRVJfUlVOTklOR19TUEVFRCk7XHJcblxyXG4gICAgICAgIHRoaXMuZHVzdEVtaXR0ZXIgPSB0aGlzLnNjZW5lLnBhcnRpY2xlcy5jcmVhdGVFbWl0dGVyKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IHt4OiB0aGlzLngsIHk6IHRoaXMueX0sXHJcbiAgICAgICAgICAgIHZlbG9jaXR5OiAoKSA9PiAoeyB4OiBybmQoLTEsIDEpICogMjYsIHk6IHJuZCgwLjcsIDEpICogNDUgfSksXHJcbiAgICAgICAgICAgIGNvbG9yOiAoKSA9PiBybmRJdGVtKGdyb3VuZENvbG9ycyksXHJcbiAgICAgICAgICAgIHNpemU6IHJuZCgxLCAyKSxcclxuICAgICAgICAgICAgZ3Jhdml0eToge3g6IDAsIHk6IC0xMDB9LFxyXG4gICAgICAgICAgICBsaWZldGltZTogKCkgPT4gcm5kKDAuNSwgMC44KSxcclxuICAgICAgICAgICAgYWxwaGFDdXJ2ZTogdmFsdWVDdXJ2ZXMudHJhcGV6ZSgwLjA1LCAwLjIpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYm91bmNlRW1pdHRlciA9IHRoaXMuc2NlbmUucGFydGljbGVzLmNyZWF0ZUVtaXR0ZXIoe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjoge3g6IHRoaXMueCwgeTogdGhpcy55fSxcclxuICAgICAgICAgICAgdmVsb2NpdHk6ICgpID0+ICh7IHg6IHJuZCgtMSwgMSkgKiA5MCwgeTogcm5kKDAuNywgMSkgKiA2MCB9KSxcclxuICAgICAgICAgICAgY29sb3I6ICgpID0+IHJuZEl0ZW0oYm91bmNlQ29sb3JzKSxcclxuICAgICAgICAgICAgc2l6ZTogcm5kKDEuNSwgMyksXHJcbiAgICAgICAgICAgIGdyYXZpdHk6IHt4OiAwLCB5OiAtMTIwfSxcclxuICAgICAgICAgICAgbGlmZXRpbWU6ICgpID0+IHJuZCgwLjQsIDAuNiksXHJcbiAgICAgICAgICAgIGFscGhhQ3VydmU6IHZhbHVlQ3VydmVzLnRyYXBlemUoMC4wNSwgMC4yKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmRvdWJsZUp1bXBFbWl0dGVyID0gdGhpcy5zY2VuZS5wYXJ0aWNsZXMuY3JlYXRlRW1pdHRlcih7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7eDogdGhpcy54LCB5OiB0aGlzLnl9LFxyXG4gICAgICAgICAgICB2ZWxvY2l0eTogKCkgPT4gKHsgeDogcm5kKC0xLCAxKSAqIDkwLCB5OiBybmQoLTEsIDApICogMTAwIH0pLFxyXG4gICAgICAgICAgICBjb2xvcjogKCkgPT4gcm5kSXRlbShET1VCTEVfSlVNUF9DT0xPUlMpLFxyXG4gICAgICAgICAgICBzaXplOiBybmQoMS41LCAzKSxcclxuICAgICAgICAgICAgZ3Jhdml0eToge3g6IDAsIHk6IC0xMjB9LFxyXG4gICAgICAgICAgICBsaWZldGltZTogKCkgPT4gcm5kKDAuNCwgMC42KSxcclxuICAgICAgICAgICAgYWxwaGFDdXJ2ZTogdmFsdWVDdXJ2ZXMudHJhcGV6ZSgwLjA1LCAwLjIpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvbnRyb2xsYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0NvbnRyb2xsYWJsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Q29udHJvbGxhYmxlKGlzQ29udHJvbGxhYmxlOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pc0NvbnRyb2xsYWJsZSA9IGlzQ29udHJvbGxhYmxlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydEF1dG9Nb3ZlKHg6IG51bWJlciwgdHVybkFyb3VuZDogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICghdGhpcy5hdXRvTW92ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9Nb3ZlID0ge1xyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25YOiB4LFxyXG4gICAgICAgICAgICAgICAgbGFzdFg6IHRoaXMueCxcclxuICAgICAgICAgICAgICAgIHR1cm5Bcm91bmRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZhaWxzYWZlIHRvIHN0b3AgYXV0b21vdmUgYWZ0ZXIgMSBzZWNvbmQuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9Nb3ZlKSB0aGlzLnN0b3BBdXRvTW92ZSgpO1xyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdG9wQXV0b01vdmUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b01vdmU/LnR1cm5Bcm91bmQpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbiAqIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hdXRvTW92ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tb3ZlUmlnaHQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1vdmVMZWZ0ID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0UGV0dGluZ0RvZygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlzUGV0dGluZ0RvZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy54ID0gdGhpcy5zY2VuZS5zaGliYS5kaXJlY3Rpb24gPiAwID8gdGhpcy5zY2VuZS5zaGliYS54ICsgMTggOiB0aGlzLnNjZW5lLnNoaWJhLnggLSAxODtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RvcFBldHRpbmdEb2coKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pc1BldHRpbmdEb2cgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW5hYmxlUnVubmluZygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkudHJpZ2dlcihRdWVzdEFUcmlnZ2VyLkdPVF9SVU5OSU5HX0FCSUxJVFkpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuY2FuUnVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc2NlbmVzLnB1c2hTY2VuZShHb3RJdGVtU2NlbmUsIEl0ZW0uUlVOTklORyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuUnVuID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVuYWJsZVJhaW5EYW5jZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkudHJpZ2dlcihRdWVzdEFUcmlnZ2VyLkxFQVJORURfUkFJTl9EQU5DRSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jYW5SYWluRGFuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zY2VuZXMucHVzaFNjZW5lKEdvdEl0ZW1TY2VuZSwgSXRlbS5SQUlOREFOQ0UpO1xyXG4gICAgICAgICAgICB0aGlzLmNhblJhaW5EYW5jZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbmFibGVEb3VibGVKdW1wKCk6IHZvaWQge1xyXG4gICAgICAgIENvbnZlcnNhdGlvbi5zZXRHbG9iYWwoXCJoYXNEb3VibGVKdW1wXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkudHJpZ2dlcihRdWVzdEFUcmlnZ2VyLkdPVF9RVUVTVF9GUk9NX1RSRUUpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZG91YmxlSnVtcCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnNjZW5lcy5wdXNoU2NlbmUoR290SXRlbVNjZW5lLCBJdGVtLkRPVUJMRUpVTVApO1xyXG4gICAgICAgICAgICB0aGlzLmRvdWJsZUp1bXAgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW5hYmxlTXVsdGlKdW1wKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuR09UX01VTFRJSlVNUCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5tdWx0aUp1bXApIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zY2VuZXMucHVzaFNjZW5lKEdvdEl0ZW1TY2VuZSwgSXRlbS5NVUxUSUpVTVApO1xyXG4gICAgICAgICAgICB0aGlzLm11bHRpSnVtcCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkaXNhYmxlTXVsdGlKdW1wKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubXVsdGlKdW1wID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVuYWJsZUZyaWVuZHNoaXAoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0ZyaWVuZHNoaXApIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zY2VuZXMucHVzaFNjZW5lKEdvdEl0ZW1TY2VuZSwgSXRlbS5GUklFTkRTSElQKTtcclxuICAgICAgICAgICAgdGhpcy5oYXNGcmllbmRzaGlwID0gdHJ1ZTtcclxuICAgICAgICAgICAgQ29udmVyc2F0aW9uLnNldEdsb2JhbChcImhhc0ZyaWVuZHNoaXBcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZUdhbWVPYmplY3QodGhpcy5zY2VuZS5wb3dlclNoaWJhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVBvd2VyVXBzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubXVsdGlKdW1wID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kb3VibGVKdW1wID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jYW5SdW4gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlTXVsdGlKdW1wKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubXVsdGlKdW1wID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN3aXRjaFRvUmVhbGl0eSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhblJ1biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubXVsdGlKdW1wID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJBc3NldCA9IENoYXJhY3RlckFzc2V0LlBBVElFTlQ7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RGFuY2UoKTogRGFuY2UgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2FuY2VsRGFuY2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kYW5jZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGhhbmRsZUJ1dHRvbkRvd24oZXZlbnQ6IENvbnRyb2xsZXJFdmVudCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnBhdXNlZCB8fCAhdGhpcy5pc0NvbnRyb2xsYWJsZSB8fCB0aGlzLmF1dG9Nb3ZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzUGV0dGluZ0RvZykge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQuaXNQbGF5ZXJNb3ZlTGVmdCB8fCBldmVudC5pc1BsYXllck1vdmVSaWdodCB8fCBldmVudC5pc1BsYXllckFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5jYW5jZWxQYXRFbmRpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kYW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhbmNlLmhhbmRsZUJ1dHRvbkRvd24oZXZlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2NlbmUuY2FtZXJhLmlzT25UYXJnZXQoKSB8fCBldmVudC5yZXBlYXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGxheWVyQ29udmVyc2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyQ29udmVyc2F0aW9uLmhhbmRsZUJ1dHRvbihldmVudCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhblJ1biAmJiBldmVudC5pc1BsYXllclJ1bikge1xyXG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LmlzUGxheWVyTW92ZVJpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZVJpZ2h0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlTGVmdCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNQbGF5ZXJNb3ZlTGVmdCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVMZWZ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlUmlnaHQgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmlzUGxheWVyRW50ZXJEb29yKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5FbnRlckRvb3IoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBnYXRlID0gdGhpcy5zY2VuZS53b3JsZC5nZXRHYXRlQ29sbGlzaW9ucyh0aGlzKVswXTtcclxuICAgICAgICAgICAgdGhpcy5lbnRlckdhdGUoZ2F0ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5pc1BsYXllckludGVyYWN0KSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBnYXRlcyAvIGRvb3JzXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5mbHlpbmcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3Nlc3ROUENcclxuICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLmNsb3Nlc3ROUEMuaXNSZWFkeUZvckNvbnZlcnNhdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5jbG9zZXN0TlBDLmNvbnZlcnNhdGlvblxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uID0gdGhpcy5jbG9zZXN0TlBDLmNvbnZlcnNhdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzYWJsZSBhdXRvIG1vdmVtZW50IHRvIGEgc2FmZSB0YWxraW5nIGRpc3RhbmNlIGZvciB0aGUgc3RvbmUgaW4gdGhlIHJpdmVyXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0b01vdmUgPSAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VzdE5QQyBpbnN0YW5jZW9mIFNpZ25cclxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZXN0TlBDIGluc3RhbmNlb2YgU3RvbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHRoaXMuY2xvc2VzdE5QQy5zdGF0ZSAhPT0gU3RvbmVTdGF0ZS5ERUZBVUxUXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgPyBmYWxzZSA6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllckNvbnZlcnNhdGlvbiA9IG5ldyBQbGF5ZXJDb252ZXJzYXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsIHRoaXMuY2xvc2VzdE5QQywgY29udmVyc2F0aW9uLCBhdXRvTW92ZVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVhZGFibGVUcmlnZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJveHkgPSBuZXcgQ29udmVyc2F0aW9uUHJveHkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUsIHRoaXMueCwgdGhpcy55LCB0aGlzLnJlYWRhYmxlVHJpZ2dlci5wcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJDb252ZXJzYXRpb24gPSBuZXcgUGxheWVyQ29udmVyc2F0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLCBwcm94eSwgcHJveHkuY29udmVyc2F0aW9uLCBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY2FuRGFuY2VUb01ha2VSYWluKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGFuY2UodGhpcy5zY2VuZS5hcG9jYWx5cHNlID8gMyA6IDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuTUFERV9SQUlOKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNQbGF5ZXJBY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDYXJyeWluZygpKSB0aGlzLnRocm93KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5pc1BsYXllckp1bXAgJiYgdGhpcy5jYW5KdW1wKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5qdW1wS2V5UHJlc3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuanVtcCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNQbGF5ZXJEcm9wKSB7XHJcbiAgICAgICAgICAgIHRoaXMuanVtcERvd24gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdGhyb3coKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNhcnJ5aW5nIHx8ICh0aGlzLmNhcnJ5aW5nIGluc3RhbmNlb2YgU3RvbmUgJiYgIXRoaXMuY2FuVGhyb3dTdG9uZUludG9XYXRlcigpKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jYXJyeWluZyBpbnN0YW5jZW9mIFN0b25lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2Fycnlpbmcuc2V0VmVsb2NpdHkoMTAgKiB0aGlzLmRpcmVjdGlvbiwgMTApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2Fycnlpbmcuc2V0VmVsb2NpdHkoNSAqIHRoaXMuZGlyZWN0aW9uLCA1KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gUExBWUVSX0hFSUdIVDtcclxuICAgICAgICB0aGlzLmNhcnJ5aW5nID0gbnVsbDtcclxuXHJcbiAgICAgICAgUGxheWVyLnRocm93aW5nU291bmQuc3RvcCgpO1xyXG4gICAgICAgIFBsYXllci50aHJvd2luZ1NvdW5kLnBsYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVc2VkIGluIGRldiBtb2RlIHRvIGVuYWJsZSBzb21lIHNwZWNpYWwga2V5cyB0aGF0IGNhbiBvbmx5IGJlIHRyaWdnZXJlZCBieSB1c2luZyBhIGtleWJvYXJkLlxyXG4gICAgcHVibGljIGhhbmRsZUtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5wYXVzZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNjZW5lLmNhbWVyYS5pc09uVGFyZ2V0KCkgfHwgZXZlbnQucmVwZWF0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc0RldigpKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IFwiY1wiKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPIEp1c3QgZm9yIGRlYnVnZ2luZy4gUmVhbCBkYW5jaW5nIGlzIHdpdGggYWN0aW9uIGtleSBvbiByYWluIGNsb3VkXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGFuY2UoMyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcInBcIiAmJiAhdGhpcy5jYXJyeWluZykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyBKdXN0IGZvciBkZWJ1Z2dpbmcsIHRoaXMgbXVzdCBiZSByZW1vdmVkIGxhdGVyXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcnJ5KHRoaXMuc2NlbmUuc3RvbmUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gXCJvXCIgJiYgIXRoaXMuY2FycnlpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FycnkodGhpcy5zY2VuZS50cmVlLnNwYXduU2VlZCgpKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09IFwidVwiICYmICF0aGlzLmNhcnJ5aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcnJ5KHRoaXMuc2NlbmUuYm9uZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcImlcIiAmJiAhdGhpcy5jYXJyeWluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXJyeSh0aGlzLnNjZW5lLnRyZWUuc2VlZC5zcGF3bldvb2QoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcInRcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5nYW1lT2JqZWN0cy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTbm93YmFsbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54LCB0aGlzLnkgKyB0aGlzLmhlaWdodCAqIDAuNzUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDIwICogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDEwXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBQbGF5ZXIudGhyb3dpbmdTb3VuZC5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICBQbGF5ZXIudGhyb3dpbmdTb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcImtcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tdWx0aUp1bXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3VibGVKdW1wID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FuUnVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FuUmFpbkRhbmNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGhpbmsoXCJJIGNhbiBkbyBldmVyeXRoaW5nIG5vdy5cIiwgMTUwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSBcIm1cIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zaG93Qm91bmRzID0gIXRoaXMuc2NlbmUuc2hvd0JvdW5kcztcclxuICAgICAgICAgICAgICAgIHRoaXMudGhpbmsoXCJUb2dnbGluZyBib3VuZHMuXCIsIDE1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyB0aGluayhtZXNzYWdlOiBzdHJpbmcsIHRpbWU6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICh0aGlzLnRoaW5rQnViYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGhpbmtCdWJibGUuaGlkZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnRoaW5rQnViYmxlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRoaW5rQnViYmxlID0gdGhpcy50aGlua0J1YmJsZSA9IG5ldyBTcGVlY2hCdWJibGUoXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUsIHRoaXMueCwgdGhpcy55XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpbmtCdWJibGUuc2V0TWVzc2FnZShtZXNzYWdlKTtcclxuICAgICAgICB0aGlua0J1YmJsZS5zaG93KCk7XHJcblxyXG4gICAgICAgIGF3YWl0IHNsZWVwKHRpbWUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50aGlua0J1YmJsZSA9PT0gdGhpbmtCdWJibGUpIHtcclxuICAgICAgICAgICAgdGhpbmtCdWJibGUuaGlkZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnRoaW5rQnViYmxlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0RGFuY2UoZGlmZmljdWx0eTogbnVtYmVyID0gMSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5kYW5jZSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhbmNlID0gbmV3IERhbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLngsIHRoaXMueSAtIDI1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiICAxIDEgMiAyIDEgMiAxIDNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGFuY2UgPSBuZXcgRGFuY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueCwgdGhpcy55IC0gMjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDE5MixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCIxICAgMiAgIDEgMSAyIDIgMTIxIDIxMiAxMjEgMjEyIDMgICAgXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgM1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYW5jZSA9IG5ldyBEYW5jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54LCB0aGlzLnkgLSAyNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTkyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjExMiAyMjEgMzEyIDEyMyAyMTIxMTIxIDExMSAyMjIgMyAgICBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYW5jZSA9IG5ldyBEYW5jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54LCB0aGlzLnkgLSAyNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTkyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjNcIlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZWxlcG9ydCB0aGUgcGxheWVyIGZyb20gdGhlIHNvdXJjZSBnYXRlIHRvIGl0J3MgY29ycmVzcG9uZGluZyB0YXJnZXQgZ2F0ZS5cclxuICAgICAqIFRoZSB0ZWxlcG9ydCBpcyBub3QgaW5zdGFudCBidXQgYWNjb21wYW5pZWQgYnkgYSBmYWRlIHRvIGJsYWNrIHRvIG9ic2N1cmUgdGhlIHRlbGVwb3J0YXRpb24uXHJcbiAgICAgKiBBbHNvIHNldHMgdGhlIGNhbWVyYSBib3VuZHMgdG8gdGhlIHRhcmdldCBwb3NpdGlvblxyXG4gICAgICogQHBhcmFtIGdhdGUgdGhlIHNvdXJjZSB0aGUgcGxheWVyIGVudGVyc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGVudGVyR2F0ZShnYXRlOiBHYW1lT2JqZWN0SW5mbyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmIChnYXRlICYmIGdhdGUucHJvcGVydGllcy50YXJnZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0NvbnRyb2xsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVSaWdodCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVMZWZ0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRHYXRlID0gdGhpcy5zY2VuZS5nYXRlT2JqZWN0cy5maW5kKFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0+IHRhcmdldC5uYW1lID09PSBnYXRlLnByb3BlcnRpZXMudGFyZ2V0XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRCZ21JZCA9IGdhdGUucHJvcGVydGllcy5iZ207XHJcblxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0R2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhdGUucHJvcGVydGllcy5lbnRlclNvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhdGUucHJvcGVydGllcy5lbnRlclNvdW5kID09PSBcInBvcnRhbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBsYXllci5lbnRlclBvcnRhbFNvdW5kLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUGxheWVyLmVudGVyUG9ydGFsU291bmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUGxheWVyLmVudGVyR2F0ZVNvdW5kLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBQbGF5ZXIuZW50ZXJHYXRlU291bmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmZhZGVUb0JsYWNrKDAuOCwgRmFkZURpcmVjdGlvbi5GQURFX09VVClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRCZ21JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zZXRBY3RpdmVCZ21UcmFjayh0YXJnZXRCZ21JZCBhcyBCZ21JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRHYXRlLnByb3BlcnRpZXMuZXhpdFNvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0R2F0ZS5wcm9wZXJ0aWVzLmV4aXRTb3VuZCA9PT0gXCJwb3J0YWxcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsYXllci5lbnRlclBvcnRhbFNvdW5kLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGF5ZXIuZW50ZXJQb3J0YWxTb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGF5ZXIubGVhdmVHYXRlU291bmQuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGxheWVyLmxlYXZlR2F0ZVNvdW5kLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueCA9IHRhcmdldEdhdGUueCArICh0YXJnZXRHYXRlLndpZHRoIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IHRhcmdldEdhdGUueSAtIHRhcmdldEdhdGUuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEuc2V0Qm91bmRzKHRoaXMuZ2V0Q3VycmVudE1hcEJvdW5kcygpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRHYXRlLm5hbWUgPT09IFwiZXhpdHBvcnRhbGRvb3JfMlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaFRvUmVhbGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0R2F0ZS5wcm9wZXJ0aWVzLmV4aXRTbGVlcFRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwKHRhcmdldEdhdGUucHJvcGVydGllcy5leGl0U2xlZXBUaW1lICogMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhZGVJblRpbWUgPSB0YXJnZXRHYXRlLnByb3BlcnRpZXMuZXhpdEZhZGVUaW1lID8gdGFyZ2V0R2F0ZS5wcm9wZXJ0aWVzLmV4aXRGYWRlVGltZSA6IDAuODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5mYWRlVG9CbGFjayhmYWRlSW5UaW1lLCBGYWRlRGlyZWN0aW9uLkZBREVfSU4pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NvbnRyb2xsYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FuSnVtcCgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5jaGFyYWN0ZXJBc3NldCA9PT0gQ2hhcmFjdGVyQXNzZXQuUEFUSUVOVCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpSnVtcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnVzZWRKdW1wICYmIHRoaXMuanVtcFRocmVzaG9sZFRpbWVyID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZG91YmxlSnVtcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMudXNlZERvdWJsZUp1bXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gIXRoaXMuZmx5aW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUganVtcCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5kcm93bmluZyA+IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRWZWxvY2l0eVkoTWF0aC5zcXJ0KDIgKiBQTEFZRVJfSlVNUF9IRUlHSFQgKiBHUkFWSVRZKSk7XHJcbiAgICAgICAgUGxheWVyLmp1bXBpbmdTb3VuZHNbdGhpcy52b2ljZUFzc2V0XS5zdG9wKCk7XHJcbiAgICAgICAgUGxheWVyLmp1bXBpbmdTb3VuZHNbdGhpcy52b2ljZUFzc2V0XS5wbGF5KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZseWluZyAmJiB0aGlzLnVzZWRKdW1wKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXNlZERvdWJsZUp1bXAgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZVBhcnRpY2xlcyAmJiB0aGlzLnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZG91YmxlSnVtcEVtaXR0ZXIuc2V0UG9zaXRpb24odGhpcy54LCB0aGlzLnkgKyAyMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvdWJsZUp1bXBFbWl0dGVyLmVtaXQoMjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVzZWRKdW1wID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFuZGxlQnV0dG9uVXAoZXZlbnQ6IENvbnRyb2xsZXJFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnBhdXNlZCB8fCAhdGhpcy5pc0NvbnRyb2xsYWJsZSB8fCB0aGlzLmF1dG9Nb3ZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChldmVudC5pc1BsYXllck1vdmVSaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVSaWdodCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNQbGF5ZXJNb3ZlTGVmdCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVMZWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5pc1BsYXllckp1bXApIHtcclxuICAgICAgICAgICAgdGhpcy5qdW1wS2V5UHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNQbGF5ZXJEcm9wKSB7XHJcbiAgICAgICAgICAgIHRoaXMuanVtcERvd24gPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmlzUGxheWVyUnVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRyYXdUb29sdGlwKFxyXG4gICAgICAgIHRleHQ6IHN0cmluZywgYnV0dG9uVGFnOiBDb250cm9sbGVyQW5pbWF0aW9uVGFncyA9IENvbnRyb2xsZXJBbmltYXRpb25UYWdzLkFDVElPTlxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29udHJvbGxhYmxlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXJTcHJpdGUgPSBDb250cm9sbGVyTWFuYWdlci5nZXRJbnN0YW5jZSgpLmNvbnRyb2xsZXJTcHJpdGU7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZSA9IFBsYXllci5mb250Lm1lYXN1cmVUZXh0KHRleHQpO1xyXG4gICAgICAgIGNvbnN0IGdhcCA9IDY7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IDEyO1xyXG4gICAgICAgIGNvbnN0IHRleHRQb3NpdGlvblggPSBNYXRoLnJvdW5kKE1hdGgucm91bmQodGhpcy54KSAtICgobWVhc3VyZS53aWR0aCAtIHRoaXMuY29udHJvbGxlclNwcml0ZU1hcFJlY29yZHNbY29udHJvbGxlclNwcml0ZV0ud2lkdGggKyBnYXApIC8gMikpO1xyXG4gICAgICAgIGNvbnN0IHRleHRQb3NpdGlvblkgPSAtdGhpcy55ICsgb2Zmc2V0WTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkKHtcclxuICAgICAgICAgICAgdHlwZTogUmVuZGVyaW5nVHlwZS5BU0VQUklURSxcclxuICAgICAgICAgICAgbGF5ZXI6IFJlbmRlcmluZ0xheWVyLlVJLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgeDogdGV4dFBvc2l0aW9uWCAtIHRoaXMuY29udHJvbGxlclNwcml0ZU1hcFJlY29yZHNbY29udHJvbGxlclNwcml0ZV0ud2lkdGggLSBnYXAsXHJcbiAgICAgICAgICAgICAgICB5OiB0ZXh0UG9zaXRpb25ZXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFzc2V0OiB0aGlzLmNvbnRyb2xsZXJTcHJpdGVNYXBSZWNvcmRzW2NvbnRyb2xsZXJTcHJpdGVdLFxyXG4gICAgICAgICAgICBhbmltYXRpb25UYWc6IGJ1dHRvblRhZyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGQoe1xyXG4gICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLlRFWFQsXHJcbiAgICAgICAgICAgIGxheWVyOiBSZW5kZXJpbmdMYXllci5VSSxcclxuICAgICAgICAgICAgdGV4dCxcclxuICAgICAgICAgICAgdGV4dENvbG9yOiBcIndoaXRlXCIsXHJcbiAgICAgICAgICAgIG91dGxpbmVDb2xvcjogXCJibGFja1wiLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgeDogdGV4dFBvc2l0aW9uWCxcclxuICAgICAgICAgICAgICAgIHk6IHRleHRQb3NpdGlvbllcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYXNzZXQ6IFBsYXllci5mb250LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnZpc2libGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3ByaXRlID0gUGxheWVyLnBsYXllclNwcml0ZXNbdGhpcy5jaGFyYWN0ZXJBc3NldF07XHJcbiAgICAgICAgbGV0IGFuaW1hdGlvbiA9IHRoaXMuYW5pbWF0aW9uO1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYW5pbWF0aW9uIHN0YXRlIGNvbmNlcHQgaW5zdGVhZCBvZiBgYW5pbWF0aW9uID09PSBcImlkbGVcIiB8fCBhbmltYXRpb24gPT09IFwid2Fsa1wiIHx8IOKApmBcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuY2FycnlpbmdcclxuICAgICAgICAgICAgJiYgKGFuaW1hdGlvbiA9PT0gXCJpZGxlXCIgfHwgYW5pbWF0aW9uID09PSBcIndhbGtcIiB8fCBhbmltYXRpb24gPT09IFwianVtcFwiIHx8IGFuaW1hdGlvbiA9PT0gXCJmYWxsXCIpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbiA9IGFuaW1hdGlvbiArIFwiLWNhcnJ5XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZEFzZXByaXRlKFxyXG4gICAgICAgICAgICBzcHJpdGUsXHJcbiAgICAgICAgICAgIGFuaW1hdGlvbixcclxuICAgICAgICAgICAgdGhpcy54LCB0aGlzLnkgLSAxLFxyXG4gICAgICAgICAgICBSZW5kZXJpbmdMYXllci5QTEFZRVIsXHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5jbG9zZXN0TlBDXHJcbiAgICAgICAgICAgICYmICF0aGlzLmRhbmNlXHJcbiAgICAgICAgICAgICYmICF0aGlzLnBsYXllckNvbnZlcnNhdGlvblxyXG4gICAgICAgICAgICAmJiB0aGlzLmNsb3Nlc3ROUEMuaXNSZWFkeUZvckNvbnZlcnNhdGlvbigpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1Rvb2x0aXAodGhpcy5jbG9zZXN0TlBDLmdldEludGVyYWN0aW9uVGV4dCgpLCBDb250cm9sbGVyQW5pbWF0aW9uVGFncy5JTlRFUkFDVCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlYWRhYmxlVHJpZ2dlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdUb29sdGlwKFwiRXhhbWluZVwiLCBDb250cm9sbGVyQW5pbWF0aW9uVGFncy5JTlRFUkFDVCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNhbkVudGVyRG9vcigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1Rvb2x0aXAoXCJFbnRlclwiLCBDb250cm9sbGVyQW5pbWF0aW9uVGFncy5PUEVOX0RPT1IpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jYW5UaHJvd1N0b25lSW50b1dhdGVyKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3VG9vbHRpcChcIlRocm93IHN0b25lXCIsIENvbnRyb2xsZXJBbmltYXRpb25UYWdzLkFDVElPTik7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNhblRocm93U2VlZEludG9Tb2lsKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3VG9vbHRpcChcIlBsYW50IHNlZWRcIiwgQ29udHJvbGxlckFuaW1hdGlvblRhZ3MuQUNUSU9OKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY2FuRGFuY2VUb01ha2VSYWluKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3VG9vbHRpcChcIkRhbmNlXCIsIENvbnRyb2xsZXJBbmltYXRpb25UYWdzLklOVEVSQUNUKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGFuY2UuYWRkRGFuY2VUb1JlbmRlclF1ZXVlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS5kcmF3KGN0eCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRoaW5rQnViYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGhpbmtCdWJibGUuZHJhdyhjdHgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNhblRocm93U3RvbmVJbnRvV2F0ZXIoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdGhpcy5jYXJyeWluZyBpbnN0YW5jZW9mIFN0b25lXHJcbiAgICAgICAgICAgICYmIChcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID09PSAtMVxyXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5zY2VuZS53b3JsZC5jb2xsaWRlc1dpdGgoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54IC0gMzAsIHRoaXMueSAtIDIwXHJcbiAgICAgICAgICAgICAgICApID09PSBFbnZpcm9ubWVudC5XQVRFUlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNhblRocm93U2VlZEludG9Tb2lsKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuY2FycnlpbmcgaW5zdGFuY2VvZiBTZWVkXHJcbiAgICAgICAgICAgICYmIChcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID09PSAtMVxyXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5zY2VuZS53b3JsZC5jb2xsaWRlc1dpdGgodGhpcy54IC0gMzAsIHRoaXMueSArIDIpID09PSBFbnZpcm9ubWVudC5TT0lMXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWJ1Z0NvbGxpc2lvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJFbnRpdGllczogXCIsdGhpcy5zY2VuZS53b3JsZC5nZXRFbnRpdHlDb2xsaXNpb25zKHRoaXMpKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlRyaWdnZXJzOiBcIix0aGlzLnNjZW5lLndvcmxkLmdldFRyaWdnZXJDb2xsaXNpb25zKHRoaXMpKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkdhdGVzOiBcIix0aGlzLnNjZW5lLndvcmxkLmdldEdhdGVDb2xsaXNpb25zKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFJlYWRhYmxlVHJpZ2dlcigpOiBHYW1lT2JqZWN0SW5mbyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgY29uc3QgdHJpZ2dlcnMgPSB0aGlzLnNjZW5lLndvcmxkLmdldFRyaWdnZXJDb2xsaXNpb25zKHRoaXMpO1xyXG4gICAgICAgIGlmICh0cmlnZ2Vycy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHJldHVybiB0cmlnZ2Vycy5maW5kKHQgPT4gdC5uYW1lID09PSBcInJlYWRhYmxlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FuRGFuY2VUb01ha2VSYWluKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5jYW5SYWluRGFuY2UpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgZ3JvdW5kID0gdGhpcy5nZXRHcm91bmQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0NvbGxpZGluZ1dpdGhUcmlnZ2VyKFwicmFpbmNsb3VkX3NreVwiKVxyXG4gICAgICAgICAgICAgICAgJiYgIXRoaXMuc2NlbmUud29ybGQuaXNSYWluaW5nKClcclxuICAgICAgICAgICAgICAgICYmIHRoaXMuY2FycnlpbmcgPT09IG51bGxcclxuICAgICAgICAgICAgICAgICYmICF0aGlzLnNjZW5lLmFwb2NhbHlwc2VcclxuICAgICAgICAgICAgKSB8fCAoXHJcbiAgICAgICAgICAgICAgICBncm91bmQgaW5zdGFuY2VvZiBDbG91ZFxyXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5zY2VuZS5hcG9jYWx5cHNlXHJcbiAgICAgICAgICAgICAgICAmJiAhZ3JvdW5kLmlzUmFpbmluZygpXHJcbiAgICAgICAgICAgICAgICAmJiBncm91bmQuY2FuUmFpbigpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FuRW50ZXJEb29yKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5mbHlpbmcgJiYgIXRoaXMuY2FycnlpbmcgJiYgdGhpcy5zY2VuZS53b3JsZC5nZXRHYXRlQ29sbGlzaW9ucyh0aGlzKS5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgYm91bmRzIG9mIHRoZSBtYXAgYXJlYSB0aGUgcGxheWVyIGN1cnJlbnRseSByZXNpZGVzIGluXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDdXJyZW50TWFwQm91bmRzKCk6IEJvdW5kcyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgY29uc3QgY29sbGlzaW9ucyA9IHRoaXMuc2NlbmUud29ybGQuZ2V0Q2FtZXJhQm91bmRzKHRoaXMpO1xyXG4gICAgICAgIGlmIChjb2xsaXNpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICByZXR1cm4gYm91bmRzRnJvbU1hcE9iamVjdChjb2xsaXNpb25zWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc3Bhd24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy54ID0gdGhpcy5sYXN0R3JvdW5kUG9zaXRpb24ueDtcclxuICAgICAgICB0aGlzLnkgPSB0aGlzLmxhc3RHcm91bmRQb3NpdGlvbi55ICsgMTA7XHJcbiAgICAgICAgdGhpcy5zZXRWZWxvY2l0eSgwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFBsYXllclNwcml0ZU1ldGFkYXRhKCk6IFBsYXllclNwcml0ZU1ldGFkYXRhW10ge1xyXG4gICAgICAgIGlmICh0aGlzLnBsYXllclNwcml0ZU1ldGFkYXRhID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTcHJpdGVNZXRhZGF0YSA9IFBsYXllci5wbGF5ZXJTcHJpdGVzLm1hcChzcHJpdGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YURhdGFKU09OID0gc3ByaXRlLmdldExheWVyKFwiTWV0YVwiKT8uZGF0YTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtZXRhRGF0YUpTT04gPyBKU09OLnBhcnNlKG1ldGFEYXRhSlNPTikgOiB7fTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXJTcHJpdGVNZXRhZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0SnVtcHMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy51c2VkSnVtcCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudXNlZERvdWJsZUp1bXAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmp1bXBUaHJlc2hvbGRUaW1lciA9IFBMQVlFUl9KVU1QX1RJTUlOR19USFJFU0hPTEQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc091dE9mQm91bmRzICgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNDb250cm9sbGFibGUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBjb25zdCBtYXBCb3VuZHMgPSB0aGlzLnNjZW5lLmNhbWVyYS5nZXRCb3VuZHMoKTtcclxuICAgICAgICBpZiAoIW1hcEJvdW5kcykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gIXRoaXMuc2NlbmUud29ybGQuYm91bmRpbmdCb3hlc0NvbGxpZGUodGhpcy5nZXRCb3VuZHMoKSwge1xyXG4gICAgICAgICAgICB4OiBtYXBCb3VuZHMueCArIDQsXHJcbiAgICAgICAgICAgIHk6IG1hcEJvdW5kcy55IC0gNCxcclxuICAgICAgICAgICAgd2lkdGg6IG1hcEJvdW5kcy53aWR0aCAtIDgsXHJcbiAgICAgICAgICAgIGhlaWdodDogbWFwQm91bmRzLmhlaWdodCAtIDhcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci51cGRhdGUoZHQpO1xyXG4gICAgICAgIGNvbnN0IHRyaWdnZXJDb2xsaXNpb25zID0gdGhpcy5zY2VuZS53b3JsZC5nZXRUcmlnZ2VyQ29sbGlzaW9ucyh0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBsYXllciBsZWZ0IHRoZSBjdXJyZW50IG1hcCBib3VuZHMgYW5kIHRlbGVwb3J0IGhpbSBiYWNrIHRvIGEgdmFsaWQgcG9zaXRpb24uXHJcbiAgICAgICAgaWYgKHRoaXMuaXNPdXRPZkJvdW5kcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuc2NlbmUuYXBvY2FseXBzZSA/XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnBvaW50c09mSW50ZXJlc3QuZmluZChwb2kgPT4gcG9pLm5hbWUgPT09IFwiYm9zc19zcGF3blwiKSA6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnBvaW50c09mSW50ZXJlc3QuZmluZChwb2kgPT4gcG9pLm5hbWUgPT09IFwicGxheWVyX3Jlc2V0X3Bvc2l0aW9uXCIpO1xyXG4gICAgICAgICAgICBpZiAocG9zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnggPSBwb3MueDtcclxuICAgICAgICAgICAgICAgIHRoaXMueSA9IHBvcy55O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEuc2V0Qm91bmRzKHRoaXMuZ2V0Q3VycmVudE1hcEJvdW5kcygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGhpbmtCdWJibGUpIHtcclxuICAgICAgICAgICAgdGhpcy50aGlua0J1YmJsZS51cGRhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGxheWVyQ29udmVyc2F0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyQ29udmVyc2F0aW9uLnVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0hpbnRzKSB7XHJcbiAgICAgICAgICAgIGlmICgoRGF0ZS5ub3coKSAtIHRoaXMubGFzdEhpbnQpIC8gMTAwMCA+IEhJTlRfVElNRU9VVCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93SGludCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jYXJyeWluZykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uID0gXCJ3YWxrXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FycnlpbmcueCA9IHRoaXMueDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGcmFtZUluZGV4ID0gUGxheWVyLnBsYXllclNwcml0ZXNbdGhpcy5jaGFyYWN0ZXJBc3NldF0uZ2V0VGFnZ2VkRnJhbWVJbmRleChcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uICsgXCItY2FycnlcIixcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZVRpbWUgKiAxMDAwXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjYXJyeU9mZnNldEZyYW1lcyA9IHRoaXMuZ2V0UGxheWVyU3ByaXRlTWV0YWRhdGEoKVt0aGlzLmNoYXJhY3RlckFzc2V0XS5jYXJyeU9mZnNldEZyYW1lcyA/PyBbXTtcclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gY2FycnlPZmZzZXRGcmFtZXMuaW5jbHVkZXMoY3VycmVudEZyYW1lSW5kZXggKyAxKSA/IDAgOiAtMTtcclxuICAgICAgICAgICAgdGhpcy5jYXJyeWluZy55ID0gdGhpcy55ICsgKHRoaXMuaGVpZ2h0IC0gdGhpcy5jYXJyeWluZy5jYXJyeUhlaWdodCkgLSBvZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jYXJyeWluZyBpbnN0YW5jZW9mIFN0b25lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcnJ5aW5nLmRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpc0Ryb3duaW5nID0gdGhpcy5zY2VuZS53b3JsZC5jb2xsaWRlc1dpdGgodGhpcy54LCB0aGlzLnkpID09PSBFbnZpcm9ubWVudC5XQVRFUjtcclxuXHJcbiAgICAgICAgaWYgKGlzRHJvd25pbmcpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnRoaW5rQnViYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aG91Z2h0ID0gZHJvd25pbmdUaG91Z2h0c1tybmRJbnQoMCwgZHJvd25pbmdUaG91Z2h0cy5sZW5ndGgpXTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGhpbmsodGhvdWdodC5tZXNzYWdlLCB0aG91Z2h0LmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FycnlpbmcgaW5zdGFuY2VvZiBTdG9uZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXJyeWluZy5zZXRWZWxvY2l0eSgtMiwgMTApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXJyeWluZyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRyb3duaW5nID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBQbGF5ZXIuZHJvd25pbmdTb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlYKDApO1xyXG4gICAgICAgICAgICB0aGlzLmRyb3duaW5nICs9IGR0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZHJvd25pbmcgPiAzKSB7XHJcbiAgICAgICAgICAgICAgICBQbGF5ZXIuZHJvd25pbmdTb3VuZC5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3Bhd24oKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRob3VnaHQgPSBkcm93blRob3VnaHRzW3JuZEludCgwLCBkcm93blRob3VnaHRzLmxlbmd0aCldO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aGluayh0aG91Z2h0Lm1lc3NhZ2UsIHRob3VnaHQuZHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kcm93bmluZyA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB3b3JsZCA9IHRoaXMuc2NlbmUud29ybGQ7XHJcbiAgICAgICAgY29uc3Qgd2FzRmx5aW5nID0gdGhpcy5mbHlpbmc7XHJcbiAgICAgICAgY29uc3QgcHJldlZlbG9jaXR5ID0gdGhpcy5nZXRWZWxvY2l0eVkoKTtcclxuXHJcbiAgICAgICAgLy8gQXBwbHkgYXV0byBtb3ZlbWVudFxyXG4gICAgICAgIGlmICh0aGlzLmF1dG9Nb3ZlKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICh0aGlzLmF1dG9Nb3ZlLmxhc3RYIC0gdGhpcy5hdXRvTW92ZS5kZXN0aW5hdGlvblgpICogKHRoaXMueCAtIHRoaXMuYXV0b01vdmUuZGVzdGluYXRpb25YKSA8PSAwXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVhY2hlZCBvciBvdmVycmVhY2hlZCBkZXN0aW5hdGlvblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wQXV0b01vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vdCB5ZXQgcmVhY2hlZCwga2VlcCBnb2luZ1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRvTW92ZS5sYXN0WCA9IHRoaXMueDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy54IDwgdGhpcy5hdXRvTW92ZS5kZXN0aW5hdGlvblgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVSaWdodCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlTGVmdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVSaWdodCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZUxlZnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQbGF5ZXIgbW92ZW1lbnRcclxuICAgICAgICBpZiAoIXRoaXMuc2NlbmUuY2FtZXJhLmlzT25UYXJnZXQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVSaWdodCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVMZWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhY2NlbGVyYXRpb24gPSB0aGlzLmZseWluZyA/IFBMQVlFUl9BQ0NFTEVSQVRJT05fQUlSIDogUExBWUVSX0FDQ0VMRVJBVElPTjtcclxuXHJcbiAgICAgICAgaWYgKCFpc0Ryb3duaW5nKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TWF4VmVsb2NpdHkoTUFYX1BMQVlFUl9SVU5OSU5HX1NQRUVEKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TWF4VmVsb2NpdHkodGhpcy5jaGFyYWN0ZXJBc3NldCA9PT0gQ2hhcmFjdGVyQXNzZXQuUEFUSUVOVCA/IDMgOiBNQVhfUExBWUVSX1NQRUVEKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubW92ZVJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZseWluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIFBsYXllci53YWxraW5nU291bmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWNjZWxlcmF0ZVgoYWNjZWxlcmF0aW9uICogZHQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubW92ZUxlZnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZseWluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIFBsYXllci53YWxraW5nU291bmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWNjZWxlcmF0ZVgoLWFjY2VsZXJhdGlvbiAqIGR0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFBsYXllci53YWxraW5nU291bmQuc3RvcCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldFZlbG9jaXR5WCgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjZWxlcmF0ZVgoYWNjZWxlcmF0aW9uICogZHQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY2VsZXJhdGVYKC1hY2NlbGVyYXRpb24gKiBkdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNldCBzcHJpdGUgaW5kZXggZGVwZW5kaW5nIG9uIG1vdmVtZW50XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmVsb2NpdHlYKCkgPT09IDAgJiYgdGhpcy5nZXRWZWxvY2l0eVkoKSA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IFwiaWRsZVwiO1xyXG4gICAgICAgICAgICB0aGlzLmZseWluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0SnVtcHMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRWZWxvY2l0eVkoKSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uID0gXCJqdW1wXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZseWluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICBpc0Ryb3duaW5nXHJcbiAgICAgICAgICAgICAgICB8fCAoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRWZWxvY2l0eVkoKSA8IDBcclxuICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLnkgLSB3b3JsZC5nZXRHcm91bmQodGhpcy54LCB0aGlzLnkpID4gMTBcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5qdW1wVGhyZXNob2xkVGltZXIgPCAwIHx8IHRoaXMudXNlZEp1bXApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IFwiZmFsbFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZmx5aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uID0gKHRoaXMucnVubmluZyAmJiAhdGhpcy5jYXJyeWluZykgPyBcInJ1blwiIDogXCJ3YWxrXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZseWluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldEp1bXBzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3YXNGbHlpbmcgJiYgIXRoaXMuZmx5aW5nKSB7XHJcbiAgICAgICAgICAgIFBsYXllci5sYW5kaW5nU291bmQuc3RvcCgpO1xyXG4gICAgICAgICAgICBQbGF5ZXIubGFuZGluZ1NvdW5kLnBsYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlZHVjZSBqdW1wIHRocmVzaG9sZCB0aW1lciB3aGVuIHBsYXllciBkaWQgbm90IGp1bXAgeWV0IHdoZW4gZmFsbGluZyBvZmYgYW4gZWRnZVxyXG4gICAgICAgIGlmICh0aGlzLmZseWluZyAmJiAhdGhpcy51c2VkSnVtcCAmJiB0aGlzLmp1bXBUaHJlc2hvbGRUaW1lciA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5qdW1wVGhyZXNob2xkVGltZXIgLT0gZHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBmb3IgTlBDJ3MgdGhhdCBjYW4gYmUgaW50ZXJhY3RlZCB3aXRoLiBSZXNldCBjbG9zZXN0TlBDIGFuZCBnZXQgYWxsIGVudGl0aWVzIHRoYXRcclxuICAgICAgICAvLyBjb2xsaWRlIHdpdGggdGhlIHBsYXllciB3aXRoIGFuIGFkZGVkIDUgcHggb2YgbWFyZ2luLiBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgTlBDc1xyXG4gICAgICAgIC8vIGNvbGxpZGluZywgdGhlIGNsb3Nlc3Qgb25lIHdpbGwgYmUgY2hvc2VuLlxyXG4gICAgICAgIHRoaXMuY2xvc2VzdE5QQyA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgZW50aXRpZXMgPSB0aGlzLnNjZW5lLndvcmxkLmdldEVudGl0eUNvbGxpc2lvbnModGhpcywgNSk7XHJcblxyXG4gICAgICAgIGlmIChlbnRpdGllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNsb3Nlc3RFbnRpdHkgPSBlbnRpdGllcy5sZW5ndGggPiAxID8gdGhpcy5nZXRDbG9zZXN0RW50aXR5KCkgOiBlbnRpdGllc1swXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbG9zZXN0RW50aXR5IGluc3RhbmNlb2YgTlBDKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3Nlc3ROUEMgPSBjbG9zZXN0RW50aXR5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBmb3IgcmVhZGFibGVzIGluIHBsYXllciB0cmlnZ2VyIGNvbGxpc2lvbnNcclxuICAgICAgICB0aGlzLnJlYWRhYmxlVHJpZ2dlciA9IHRoaXMuZ2V0UmVhZGFibGVUcmlnZ2VyKCk7XHJcblxyXG4gICAgICAgIC8vIFNwYXduIHJhbmRvbSBkdXN0IHBhcnRpY2xlcyB3aGlsZSB3YWxraW5nXHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVQYXJ0aWNsZXMgJiYgdGhpcy52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5mbHlpbmcgJiYgKE1hdGguYWJzKHRoaXMuZ2V0VmVsb2NpdHlYKCkpID4gMSB8fCB3YXNGbHlpbmcpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGltZWRSbmQoZHQsIDAuMikgfHwgd2FzRmx5aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kdXN0RW1pdHRlci5zZXRQb3NpdGlvbih0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSB3YXNGbHlpbmcgPyBNYXRoLmNlaWwoTWF0aC5hYnMocHJldlZlbG9jaXR5KSAvIDUpIDogMTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmR1c3RFbWl0dGVyLmVtaXQoY291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXNldCBqdW1wIGtleSBzdGF0ZSB3aGVuIG9uIGdyb3VuZFxyXG4gICAgICAgIGlmICghdGhpcy5mbHlpbmcgJiYgdGhpcy5qdW1wS2V5UHJlc3NlZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuanVtcEtleVByZXNzZWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQm91bmNlXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLndvcmxkLmNvbGxpZGVzV2l0aChcclxuICAgICAgICAgICAgICAgIHRoaXMueCwgdGhpcy55IC0gMixcclxuICAgICAgICAgICAgICAgIFsgdGhpcyBdXHJcbiAgICAgICAgICAgICkgPT09IEVudmlyb25tZW50LkJPVU5DRVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLmJvdW5jZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGFuY2VcclxuICAgICAgICBpZiAodGhpcy5kYW5jZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYW5jZS5oYXNTdGFydGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEJhc2ljIGRhbmNpbmcgb3IgZXJyb3I/XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSB0aGlzLmRhbmNlLmdldFRpbWVTaW5jZUxhc3RNaXN0YWtlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWMgPSB0aGlzLmRhbmNlLmdldFRpbWVTaW5jZUxhc3RTdWNjZXNzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVyciA8IDEgfHwgc3VjIDwgMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIgPD0gc3VjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZhaWxBbmltYXRpb24gPSBybmRJbnQoMSwgMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uID0gXCJkYW5jZS1mbHVrZS1cIiArIHRoaXMuY3VycmVudEZhaWxBbmltYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb24gPSBcImRhbmNlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRhbmNlLnNldFBvc2l0aW9uKHRoaXMueCwgdGhpcy55IC0gMTYpO1xyXG4gICAgICAgICAgICBjb25zdCBkb25lID0gdGhpcy5kYW5jZS51cGRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkb25lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbiBjbG91ZCAtPiBtYWtlIGl0IHJhaW5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhbmNlLndhc1N1Y2Nlc3NmdWwoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIChVc2VsZXNzIGJlY2F1c2Ugd3JvbmcgY2xvdWQgYnV0IGhleeKApilcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91bmQgPSB0aGlzLmdldEdyb3VuZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdW5kICYmIGdyb3VuZCBpbnN0YW5jZW9mIENsb3VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VuZC5zdGFydFJhaW4odGhpcy5zY2VuZS5hcG9jYWx5cHNlID8gSW5maW5pdHkgOiAxNSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYW1lcmEgZm9jdXMgdG8gYm9zcyBmb3IgZWFjaCB0cmlnZ2VyZWQgcmFpbiBjbG91ZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib3NzUG9pbnRlciA9IHRoaXMuc2NlbmUucG9pbnRzT2ZJbnRlcmVzdC5maW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pID0+IHBvaS5uYW1lID09PSBcImJvc3Nfc3Bhd25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvc3NQb2ludGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS5mb2N1c09uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9zc1BvaW50ZXIueCwgYm9zc1BvaW50ZXIueSArIDYwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUN1cnZlcy5jb3MoMC4zNSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhIHNpbmdsZSBib3NzIGZpZ2h0IGJhcnJpZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFpbmluZ0Nsb3VkQ291bnQgPSB0aGlzLnNjZW5lLmdhbWVPYmplY3RzLmZpbHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPT4gbyBpbnN0YW5jZW9mIENsb3VkICYmIG8uaXNSYWluaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgKS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3YWxsSWRlbnRpZmllciA9IGB3YWxsJHtyYWluaW5nQ2xvdWRDb3VudCAtIDF9YDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFdhbGwgPSB0aGlzLnNjZW5lLmdhbWVPYmplY3RzLmZpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0+IG8gaW5zdGFuY2VvZiBXYWxsICYmIG8uaWRlbnRpZmllciA9PT0gd2FsbElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSBhcyBXYWxsIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFdhbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFdhbGwuY3J1bWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NvbGxpZGluZ1dpdGhUcmlnZ2VyKFwicmFpbmNsb3VkX3NreVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLndvcmxkLnN0YXJ0UmFpbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZGFuY2UgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRpc2FibGVQYXJ0aWNsZXMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gUGV0IERvZyBBbmltYXRpb25cclxuICAgICAgICBpZiAodGhpcy5pc1BldHRpbmdEb2cpIHtcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb24gPSBcInBldHRpbmdcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExvZ2ljIGZyb20gdHJpZ2dlcnNcclxuICAgICAgICBpZiAodHJpZ2dlckNvbGxpc2lvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0cmlnZ2VyQ29sbGlzaW9ucy5mb3JFYWNoKHRyaWdnZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIE1vdW50YWluUmlkZGxlIGxvZ2ljXHJcbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlci5uYW1lID09PSBcInJlc2V0X21vdW50YWluXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLm1vdW50YWluUmlkZGxlLnJlc2V0UmlkZGxlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRyaWdnZXIubmFtZSA9PT0gXCJtb3VudGFpbmdhdGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRyaWdnZXIucHJvcGVydGllcy5yb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sID0gdHJpZ2dlci5wcm9wZXJ0aWVzLmNvbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbCAhPSBudWxsICYmIHJvdyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUubW91bnRhaW5SaWRkbGUuY2hlY2tHYXRlKGNvbCwgcm93KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXIubmFtZSA9PT0gXCJ0ZWxlcG9ydGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLnNjZW5lLm1vdW50YWluUmlkZGxlLmlzRmFpbGVkKClcclxuICAgICAgICAgICAgICAgICAgICAmJiAhdGhpcy5zY2VuZS5tb3VudGFpblJpZGRsZS5pc0NsZWFyZWQoKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVsZXBvcnRZID0gdHJpZ2dlci5wcm9wZXJ0aWVzLnRlbGVwb3J0WTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbGVwb3J0WSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkgLT0gdGVsZXBvcnRZO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlci5uYW1lID09PSBcImZpbmlzaF9tb3VudGFpbl9yaWRkbGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUubW91bnRhaW5SaWRkbGUuY2xlYXJSaWRkbGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIHBhcnRpY2xlIGVmZmVjdHMgd2hpbGUgaW4gdHJpZ2dlclxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZVBhcnRpY2xlcyA9IHRyaWdnZXIucHJvcGVydGllcy5kaXNhYmxlUGFydGljbGVzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlUGFydGljbGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlUGFydGljbGVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgR2xvYmFsIENvbnZlcnNhdGlvbiBWYXJpYWJsZXMgZnJvbSBtYXAgdHJpZ2dlcnNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbENvbnZlcnNhdGlvblByb3BzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogdHJpZ2dlci5wcm9wZXJ0aWVzLnNldEdsb2JhbEtleSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdHJpZ2dlci5wcm9wZXJ0aWVzLnNldEdsb2JhbFZhbFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsQ29udmVyc2F0aW9uUHJvcHMua2V5ICYmIGdsb2JhbENvbnZlcnNhdGlvblByb3BzLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29udmVyc2F0aW9uLnNldEdsb2JhbChnbG9iYWxDb252ZXJzYXRpb25Qcm9wcy5rZXksIGdsb2JhbENvbnZlcnNhdGlvblByb3BzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFbmFibGUgQ29udmVyc2lvbiBUcmVlcyBmcm9tIG1hcCB0cmlnZ2Vyc1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5hYmxlQ29udmVyc2F0aW9uUHJvcHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiB0cmlnZ2VyLnByb3BlcnRpZXMuc2V0RGlhbG9nRW50aXR5LFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0cmlnZ2VyLnByb3BlcnRpZXMuc2V0RGlhbG9nVmFsdWVcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVuYWJsZUNvbnZlcnNhdGlvblByb3BzLmtleSAmJiBlbmFibGVDb252ZXJzYXRpb25Qcm9wcy52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5ydW5BY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW5hYmxlXCIsIG51bGwsIFtlbmFibGVDb252ZXJzYXRpb25Qcm9wcy5rZXksIGVuYWJsZUNvbnZlcnNhdGlvblByb3BzLnZhbHVlXVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiBnaXZlbiBjb29yZGluYXRlIGNvbGxpZGVzIHdpdGggdGhlIHdvcmxkIHRoZW4gdGhlIGZpcnN0IGZyZWUgeSBjb29yZGluYXRlIGFib3ZlIGlzXHJcbiAgICAgKiByZXR1cm5lZC4gVGhpcyBjYW4gYmUgdXNlZCB0byB1bnN0dWNrIGFuIG9iamVjdCBhZnRlciBhIG5ldyBwb3NpdGlvbiB3YXMgc2V0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB4IC0gWCBjb29yZGluYXRlIG9mIGN1cnJlbnQgcG9zaXRpb24uXHJcbiAgICAgKiBAcGFyYW0geSAtIFkgY29vcmRpbmF0ZSBvZiBjdXJyZW50IHBvc2l0aW9uLlxyXG4gICAgICogQHJldHVybiBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSBncm91bmQgYmVsb3cgdGhlIGdpdmVuIGNvb3JkaW5hdGUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcHVsbE91dE9mR3JvdW5kKCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHB1bGxlZCA9IDAsIGNvbCA9IDA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldFZlbG9jaXR5WSgpIDw9IDApIHtcclxuICAgICAgICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLnNjZW5lLndvcmxkO1xyXG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSB3b3JsZC5nZXRIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbCA9IHdvcmxkLmNvbGxpZGVzV2l0aChcclxuICAgICAgICAgICAgICAgIHRoaXMueCwgdGhpcy55LFxyXG4gICAgICAgICAgICAgICAgWyB0aGlzIF0sXHJcbiAgICAgICAgICAgICAgICB0aGlzLmp1bXBEb3duID8gWyBFbnZpcm9ubWVudC5QTEFURk9STSwgRW52aXJvbm1lbnQuV0FURVIgXSA6IFsgRW52aXJvbm1lbnQuV0FURVIgXVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRoaXMueSA8IGhlaWdodCAmJiBjb2wpIHtcclxuICAgICAgICAgICAgICAgIHB1bGxlZCsrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy55Kys7XHJcbiAgICAgICAgICAgICAgICBjb2wgPSB3b3JsZC5jb2xsaWRlc1dpdGgodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHVsbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYm91bmNlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0VmVsb2NpdHlZKE1hdGguc3FydCgyICogUExBWUVSX0JPVU5DRV9IRUlHSFQgKiBHUkFWSVRZKSk7XHJcbiAgICAgICAgLy8gTmljZSBib3VuY3kgcGFydGljbGVzXHJcbiAgICAgICAgdGhpcy5ib3VuY2VFbWl0dGVyLnNldFBvc2l0aW9uKHRoaXMueCwgdGhpcy55IC0gMTIpO1xyXG4gICAgICAgIHRoaXMuYm91bmNlRW1pdHRlci5lbWl0KDIwKTtcclxuICAgICAgICB0aGlzLmR1c3RFbWl0dGVyLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIFBsYXllci5ib3VuY2luZ1NvdW5kLnN0b3AoKTtcclxuICAgICAgICBQbGF5ZXIuYm91bmNpbmdTb3VuZC5wbGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiBnaXZlbiBjb29yZGluYXRlIGNvbGxpZGVzIHdpdGggdGhlIHdvcmxkIHRoZW4gdGhlIGZpcnN0IGZyZWUgeSBjb29yZGluYXRlIGFib3ZlIGlzXHJcbiAgICAgKiByZXR1cm5lZC4gVGhpcyBjYW4gYmUgdXNlZCB0byB1bnN0dWNrIGFuIG9iamVjdCBhZnRlciBhIG5ldyBwb3NpdGlvbiB3YXMgc2V0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB4IC0gWCBjb29yZGluYXRlIG9mIGN1cnJlbnQgcG9zaXRpb24uXHJcbiAgICAgKiBAcGFyYW0geSAtIFkgY29vcmRpbmF0ZSBvZiBjdXJyZW50IHBvc2l0aW9uLlxyXG4gICAgICogQHJldHVybiBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSBncm91bmQgYmVsb3cgdGhlIGdpdmVuIGNvb3JkaW5hdGUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcHVsbE91dE9mQ2VpbGluZygpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBwdWxsZWQgPSAwO1xyXG4gICAgICAgIGNvbnN0IHdvcmxkID0gdGhpcy5zY2VuZS53b3JsZDtcclxuXHJcbiAgICAgICAgd2hpbGUgKFxyXG4gICAgICAgICAgICB0aGlzLnkgPiAwXHJcbiAgICAgICAgICAgICYmIHdvcmxkLmNvbGxpZGVzV2l0aChcclxuICAgICAgICAgICAgICAgIHRoaXMueCwgdGhpcy55ICsgdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBbIHRoaXMgXSxcclxuICAgICAgICAgICAgICAgIFsgRW52aXJvbm1lbnQuUExBVEZPUk0sIEVudmlyb25tZW50LldBVEVSIF1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBwdWxsZWQrKztcclxuICAgICAgICAgICAgdGhpcy55LS07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHVsbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHVsbE91dE9mV2FsbCgpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBwdWxsZWQgPSAwO1xyXG4gICAgICAgIGNvbnN0IHdvcmxkID0gdGhpcy5zY2VuZS53b3JsZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmVsb2NpdHlYKCkgPiAwKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChcclxuICAgICAgICAgICAgICAgIHdvcmxkLmNvbGxpZGVzV2l0aFZlcnRpY2FsTGluZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnggKyB0aGlzLndpZHRoIC8gMiwgdGhpcy55ICsgdGhpcy5oZWlnaHQgKiAzIC8gNCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgWyB0aGlzIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgWyBFbnZpcm9ubWVudC5QTEFURk9STSwgRW52aXJvbm1lbnQuV0FURVIgXVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueC0tO1xyXG4gICAgICAgICAgICAgICAgcHVsbGVkKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aGlsZSAoXHJcbiAgICAgICAgICAgICAgICB3b3JsZC5jb2xsaWRlc1dpdGhWZXJ0aWNhbExpbmUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54IC0gdGhpcy53aWR0aCAvIDIsIHRoaXMueSArIHRoaXMuaGVpZ2h0ICogMyAvIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIFsgdGhpcyBdLFxyXG4gICAgICAgICAgICAgICAgICAgIFsgRW52aXJvbm1lbnQuUExBVEZPUk0sIEVudmlyb25tZW50LldBVEVSIF1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLngrKztcclxuICAgICAgICAgICAgICAgIHB1bGxlZCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHVsbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCB1cGRhdGVQb3NpdGlvbihuZXdYOiBudW1iZXIsIG5ld1k6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMueCA9IG5ld1g7XHJcbiAgICAgICAgdGhpcy55ID0gbmV3WTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgY29sbGlzaW9uIHdpdGggdGhlIGVudmlyb25tZW50IGFuZCBjb3JyZWN0IHBsYXllciBwb3NpdGlvbiBhbmQgbW92ZW1lbnRcclxuICAgICAgICBpZiAodGhpcy5wdWxsT3V0T2ZHcm91bmQoKSAhPT0gMCB8fCB0aGlzLnB1bGxPdXRPZkNlaWxpbmcoKSAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WSgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnB1bGxPdXRPZldhbGwoKSAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WCgwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldEdyYXZpdHkoKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAodGhpcy5mbHlpbmcgJiYgdGhpcy5qdW1wS2V5UHJlc3NlZCA9PT0gZmFsc2UgJiYgdGhpcy5nZXRWZWxvY2l0eVkoKSA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNIT1JUX0pVTVBfR1JBVklUWTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gR1JBVklUWTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNhcnJ5KG9iamVjdDogUGh5c2ljc0VudGl0eSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5jYXJyeWluZykge1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IFBMQVlFUl9IRUlHSFQgKyBvYmplY3QuY2FycnlIZWlnaHQgKyBQTEFZRVJfQ0FSUllfSEVJR0hUO1xyXG5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgb2JqZWN0IGluc3RhbmNlb2YgU2VlZFxyXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA8IFF1ZXN0QVRyaWdnZXIuR09UX1NFRURcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkudHJpZ2dlcihRdWVzdEFUcmlnZ2VyLkdPVF9TRUVEKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgb2JqZWN0IGluc3RhbmNlb2YgV29vZFxyXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA8IFF1ZXN0QVRyaWdnZXIuR09UX1dPT0RcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkudHJpZ2dlcihRdWVzdEFUcmlnZ2VyLkdPVF9XT09EKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5ydW5BY3Rpb24oXCJlbmFibGVcIiwgbnVsbCwgW1wiZmlyZVwiLCBcImZpcmUxXCJdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgb2JqZWN0IGluc3RhbmNlb2YgU3RvbmVcclxuICAgICAgICAgICAgICAgICYmIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS5nZXRIaWdoZXN0VHJpZ2dlckluZGV4KCkgPCBRdWVzdEFUcmlnZ2VyLkdPVF9TVE9ORVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuR09UX1NUT05FKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXJyeWluZyA9IG9iamVjdDtcclxuICAgICAgICAgICAgb2JqZWN0LnNldEZsb2F0aW5nKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBTdG9uZSkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXRlID0gU3RvbmVTdGF0ZS5ERUZBVUxUO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgU2VlZCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXRlID0gU2VlZFN0YXRlLkZSRUU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBXb29kKSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RhdGUgPSBXb29kU3RhdGUuRlJFRTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmplY3QueCA9IHRoaXMueDtcclxuICAgICAgICAgICAgb2JqZWN0LnkgPSB0aGlzLnkgKyB0aGlzLmhlaWdodDtcclxuICAgICAgICAgICAgb2JqZWN0LnNldFZlbG9jaXR5KDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNDYXJyeWluZyhvYmplY3Q/OiBQaHlzaWNzRW50aXR5KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKG9iamVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJyeWluZyA9PT0gb2JqZWN0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnJ5aW5nICE9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93SGludCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5wbGF5ZXJDb252ZXJzYXRpb24gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkuZ2V0SGlnaGVzdFRyaWdnZXJJbmRleCgpKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFF1ZXN0QVRyaWdnZXIuSlVTVF9BUlJJVkVEOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhpbmsoXCJJIHNob3VsZCB0YWxrIHRvIHNvbWVvbmUuXCIsIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBRdWVzdEFUcmlnZ2VyLlRBTEtFRF9UT19GSVJFOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhpbmsoXCJJIHRoaW5rIHRoZSBmaXJlIG5lZWRzIG15IGhlbHAuXCIsIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBRdWVzdEFUcmlnZ2VyLkdPVF9RVUVTVF9GUk9NX0ZJUkU6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aGluayhcIlRoZSBmaXJlIHRvbGQgbWUgdG8gdmlzaXQgdGhlIHRyZWUgaW4gdGhlIGVhc3QuXCIsIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBRdWVzdEFUcmlnZ2VyLlRBTEtFRF9UT19UUkVFOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhpbmsoXCJNYXliZSBJIHNob3VsZCB0YWxrIHRvIHRoZSB0cmVlIGFnYWluLlwiLCAzMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUXVlc3RBVHJpZ2dlci5HT1RfUVVFU1RfRlJPTV9UUkVFOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhpbmsoXCJJIG5lZWQgdG8gcGljayB1cCB0aGUgc2VlZCBieSB0aGUgdHJlZS5cIiwgMzAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFF1ZXN0QVRyaWdnZXIuR09UX1NFRUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aGluayhcIkkgc2hvdWxkIGNoZWNrIHRoZSBtb3VudGFpbnMgZm9yIGEgZ29vZCBwbGFjZSBmb3IgdGhlIHNlZWQuXCIsIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBRdWVzdEFUcmlnZ2VyLlBMQU5URURfU0VFRDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRoaW5rKFwiVGhlIHNlZWQgbmVlZHMgc29tZXRoaW5nIHRvIGdyb3csIEkgdGhpbmsuXCIsIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBRdWVzdEFUcmlnZ2VyLlRBTEtFRF9UT19TVE9ORTpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRoaW5rKFwiSSBzaG91bGQgdGFsayB0byB0aGF0IGNyYXp5IHN0b25lIGFnYWluLlwiLCAzMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgUXVlc3RBVHJpZ2dlci5HT1RfU1RPTkU6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aGluayhcIk15IGFybXMgZ2V0IGhlYXZ5LiBJIHJlYWxseSBzaG91bGQgdGhyb3cgdGhhdCB0aGluZyBpbiB0aGUgcml2ZXIuXCIsIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBRdWVzdEFUcmlnZ2VyLlRIUk9XTl9TVE9ORV9JTlRPX1dBVEVSOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhpbmsoXCJUaGVyZSBtdXN0IGJlIHNvbWV0aGluZyBpbnRlcmVzdGluZyB3ZXN0IG9mIHRoZSByaXZlci5cIiwgMzAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFF1ZXN0QVRyaWdnZXIuR09UX01VTFRJSlVNUDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRoaW5rKFwiSSBzaG91bGQgY2hlY2sgdGhlIGNsb3Vkcy4gVGhlIHNlZWQgc3RpbGwgbmVlZHMgc29tZXRoaW5nIHRvIGdyb3cuXCIsIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBRdWVzdEFUcmlnZ2VyLk1BREVfUkFJTjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRoaW5rKFwiSSBzaG91bGQgdGFsayB0byB0aGF0IHNpbmdpbmcgdHJlZSBhZ2Fpbi5cIiwgMzAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFF1ZXN0QVRyaWdnZXIuR09UX1dPT0Q6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aGluayhcIlF1aWNrISBUaGUgZmlyZSBuZWVkcyB3b29kIVwiLCAzMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sYXN0SGludCA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFhQTtBQTRHQTtBQUNBO0FBOUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQVNBO0FBRUE7QUFLQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFJQTtBQUdBO0FBQUE7QUFDQTtBQUlBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQVFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUlBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUF6NENBO0FBTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQU9BO0FBTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQVNBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQU1BO0FBSkE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFwREE7QUFEQTtBQTZHQTtBQTVHQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/Player.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Portal.js":
    /*!********************************!*\
      !*** ./lib/entities/Portal.js ***!
      \********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Portal_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Portal = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nvar PortalAnimationState;\n(function (PortalAnimationState) {\n    PortalAnimationState[PortalAnimationState[\"WAITING\"] = 0] = \"WAITING\";\n    PortalAnimationState[PortalAnimationState[\"FADEIN\"] = 1] = \"FADEIN\";\n    PortalAnimationState[PortalAnimationState[\"IDLE\"] = 2] = \"IDLE\";\n    PortalAnimationState[PortalAnimationState[\"FADEOUT\"] = 3] = \"FADEOUT\";\n    PortalAnimationState[PortalAnimationState[\"GONE\"] = 4] = \"GONE\";\n})(PortalAnimationState || (PortalAnimationState = {}));\nlet Portal = Portal_1 = class Portal extends Entity_1.Entity {\n    constructor(scene, x, y) {\n        super(scene, x, y, 32, 50, false);\n        this.animationState = PortalAnimationState.WAITING;\n        this.animator.assignSprite(Portal_1.sprite);\n    }\n    nextAnimationState() {\n        this.animationState++;\n    }\n    draw() {\n        switch (this.animationState) {\n            case PortalAnimationState.WAITING:\n                this.animator.play(\"empty\", 1);\n                break;\n            case PortalAnimationState.FADEIN:\n                this.animator.play(\"fadein\", 1, { loop: false, callback: this.nextAnimationState.bind(this) });\n                break;\n            case PortalAnimationState.IDLE:\n                this.animator.play(\"idle\", 1);\n                break;\n            case PortalAnimationState.FADEOUT:\n                this.animator.play(\"fadeout\", 1, { loop: false, callback: this.nextAnimationState.bind(this) });\n                break;\n            case PortalAnimationState.GONE:\n                this.animator.play(\"empty\", 1);\n                break;\n        }\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n    }\n    update(dt) {\n        super.update(dt);\n        if (this.animationState === PortalAnimationState.WAITING) {\n            if (this.timeAlive >= 1) {\n                this.nextAnimationState();\n                Portal_1.sound.play();\n            }\n        }\n        else if (this.animationState === PortalAnimationState.IDLE) {\n            if (this.timeAlive >= 4) {\n                this.nextAnimationState();\n            }\n        }\n        else if (this.animationState === PortalAnimationState.GONE) {\n            this.scene.removeGameObject(this);\n        }\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/portal.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Portal, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/portal/portal.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Portal, \"sound\", void 0);\nPortal = Portal_1 = tslib_1.__decorate([\n    Entity_1.entity(\"portal\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Portal);\nexports.Portal = Portal;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvUG9ydGFsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2VudGl0aWVzL1BvcnRhbC50cz9hYzFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzZXByaXRlIH0gZnJvbSBcIi4uL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IGFzc2V0IH0gZnJvbSBcIi4uL0Fzc2V0c1wiO1xyXG5pbXBvcnQgeyBlbnRpdHksIEVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4uL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgU291bmQgfSBmcm9tIFwiLi4vU291bmRcIjtcclxuXHJcbmVudW0gUG9ydGFsQW5pbWF0aW9uU3RhdGUgeyBXQUlUSU5HLCBGQURFSU4sIElETEUsIEZBREVPVVQsIEdPTkUgfVxyXG5cclxuQGVudGl0eShcInBvcnRhbFwiKVxyXG5leHBvcnQgY2xhc3MgUG9ydGFsIGV4dGVuZHMgRW50aXR5IHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvcG9ydGFsLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNwcml0ZTogQXNlcHJpdGU7XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL3BvcnRhbC9wb3J0YWwub2dnXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzb3VuZDogU291bmQ7XHJcblxyXG4gICAgcHJpdmF0ZSBhbmltYXRpb25TdGF0ZSA9IFBvcnRhbEFuaW1hdGlvblN0YXRlLldBSVRJTkc7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNjZW5lOiBHYW1lU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHksIDMyLCA1MCwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0b3IuYXNzaWduU3ByaXRlKFBvcnRhbC5zcHJpdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbmV4dEFuaW1hdGlvblN0YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU3RhdGUrKztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuYW5pbWF0aW9uU3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSBQb3J0YWxBbmltYXRpb25TdGF0ZS5XQUlUSU5HOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRvci5wbGF5KFwiZW1wdHlcIiwgMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBQb3J0YWxBbmltYXRpb25TdGF0ZS5GQURFSU46XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdG9yLnBsYXkoXCJmYWRlaW5cIiwgMSwgeyBsb29wOiBmYWxzZSwgY2FsbGJhY2s6IHRoaXMubmV4dEFuaW1hdGlvblN0YXRlLmJpbmQodGhpcykgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBQb3J0YWxBbmltYXRpb25TdGF0ZS5JRExFOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRvci5wbGF5KFwiaWRsZVwiLCAxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFBvcnRhbEFuaW1hdGlvblN0YXRlLkZBREVPVVQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdG9yLnBsYXkoXCJmYWRlb3V0XCIsIDEsIHsgbG9vcDogZmFsc2UsIGNhbGxiYWNrOiB0aGlzLm5leHRBbmltYXRpb25TdGF0ZS5iaW5kKHRoaXMpIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUG9ydGFsQW5pbWF0aW9uU3RhdGUuR09ORTpcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0b3IucGxheShcImVtcHR5XCIsIDEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci51cGRhdGUoZHQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5hbmltYXRpb25TdGF0ZSA9PT0gUG9ydGFsQW5pbWF0aW9uU3RhdGUuV0FJVElORykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50aW1lQWxpdmUgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0QW5pbWF0aW9uU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIFBvcnRhbC5zb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYW5pbWF0aW9uU3RhdGUgPT09IFBvcnRhbEFuaW1hdGlvblN0YXRlLklETEUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGltZUFsaXZlID49IDQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmV4dEFuaW1hdGlvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYW5pbWF0aW9uU3RhdGUgPT09IFBvcnRhbEFuaW1hdGlvblN0YXRlLkdPTkUpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmVHYW1lT2JqZWN0KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQVNBO0FBQ0E7QUFIQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhEQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBTEE7QUFEQTtBQVVBO0FBVEE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Portal.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Radio.js":
    /*!*******************************!*\
      !*** ./lib/entities/Radio.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Radio_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Radio = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet Radio = Radio_1 = class Radio extends Entity_1.Entity {\n    constructor(scene, x, y) {\n        super(scene, x, y, 24, 24, false);\n    }\n    draw() {\n        this.scene.renderer.addAseprite(Radio_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n    }\n    update() { }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/radio.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Radio, \"sprite\", void 0);\nRadio = Radio_1 = tslib_1.__decorate([\n    Entity_1.entity(\"radio\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Radio);\nexports.Radio = Radio;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvUmFkaW8uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvUmFkaW8udHM/ZjE0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgZW50aXR5LCBFbnRpdHkgfSBmcm9tIFwiLi4vRW50aXR5XCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcblxyXG5AZW50aXR5KFwicmFkaW9cIilcclxuZXhwb3J0IGNsYXNzIFJhZGlvIGV4dGVuZHMgRW50aXR5IHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvcmFkaW8uYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMjQsIDI0LCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShSYWRpby5zcHJpdGUsIFwiaWRsZVwiLCB0aGlzLngsIHRoaXMueSwgUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge31cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQWZBO0FBREE7QUFDQTtBQUFBO0FBRkE7QUFEQTtBQUtBO0FBSkE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Radio.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/RiddleStone.js":
    /*!*************************************!*\
      !*** ./lib/entities/RiddleStone.js ***!
      \*************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RiddleStone = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nclass RiddleStone extends Entity_1.Entity {\n    constructor(scene, x, y, properties) {\n        super(scene, x, y, 16, 16, false);\n        this.col = properties.col || 0;\n        this.row = properties.row || 0;\n    }\n    draw() {\n        if (this.scene.mountainRiddle.isCorrectGate(this.col, this.row)) {\n            this.scene.renderer.addAseprite(RiddleStone.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES);\n            if (this.scene.showBounds) {\n                this.drawBounds();\n            }\n        }\n    }\n    update() { }\n}\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/riddlestone.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], RiddleStone, \"sprite\", void 0);\nexports.RiddleStone = RiddleStone;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvUmlkZGxlU3RvbmUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvUmlkZGxlU3RvbmUudHM/YjI2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBHYW1lT2JqZWN0UHJvcGVydGllcyB9IGZyb20gXCIuLi9NYXBJbmZvXCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUmlkZGxlU3RvbmUgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgQGFzc2V0KFwic3ByaXRlcy9yaWRkbGVzdG9uZS5hc2Vwcml0ZS5qc29uXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzcHJpdGU6IEFzZXByaXRlO1xyXG4gICAgcHJpdmF0ZSBjb2w6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcm93OiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNjZW5lOiBHYW1lU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyLCBwcm9wZXJ0aWVzOiBHYW1lT2JqZWN0UHJvcGVydGllcykge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCAxNiwgMTYsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb2wgPSBwcm9wZXJ0aWVzLmNvbCB8fCAwO1xyXG4gICAgICAgIHRoaXMucm93ID0gcHJvcGVydGllcy5yb3cgfHwgMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5tb3VudGFpblJpZGRsZS5pc0NvcnJlY3RHYXRlKHRoaXMuY29sLCB0aGlzLnJvdykpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShSaWRkbGVTdG9uZS5zcHJpdGUsIFwiaWRsZVwiLCB0aGlzLngsIHRoaXMueSwgUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Qm91bmRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHt9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQXRCQTtBQURBO0FBQ0E7QUFBQTtBQUZBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/RiddleStone.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/ScriptableNPC.js":
    /*!***************************************!*\
      !*** ./lib/entities/ScriptableNPC.js ***!
      \***************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScriptableNPC = void 0;\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nclass ScriptableNPC extends NPC_1.NPC {\n    constructor() {\n        super(...arguments);\n        this.move = 0;\n    }\n    updatePosition(newX, newY) {\n        this.x = newX;\n        this.y = newY;\n        // Check collision with the environment and correct player position and movement\n        if (this.pullOutOfGround() !== 0 || this.pullOutOfCeiling() !== 0) {\n            this.setVelocityY(0);\n        }\n        if (this.pullOutOfWall() !== 0) {\n            this.setVelocityX(0);\n        }\n    }\n    pullOutOfGround() {\n        let pulled = 0, col = 0;\n        if (this.getVelocityY() <= 0) {\n            const world = this.scene.world;\n            const height = world.getHeight();\n            col = world.collidesWith(this.x, this.y, [this], [World_1.Environment.WATER]);\n            while (this.y < height && col) {\n                pulled++;\n                this.y++;\n                col = world.collidesWith(this.x, this.y);\n            }\n        }\n        return pulled;\n    }\n    pullOutOfCeiling() {\n        let pulled = 0;\n        const world = this.scene.world;\n        while (this.y > 0\n            && world.collidesWith(this.x, this.y + this.height, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n            pulled++;\n            this.y--;\n        }\n        return pulled;\n    }\n    pullOutOfWall() {\n        let pulled = 0;\n        const world = this.scene.world;\n        if (this.getVelocityX() > 0) {\n            while (world.collidesWithVerticalLine(this.x + this.width / 2, this.y + this.height * 3 / 4, this.height / 2, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n                this.x--;\n                pulled++;\n            }\n        }\n        else {\n            while (world.collidesWithVerticalLine(this.x - this.width / 2, this.y + this.height * 3 / 4, this.height / 2, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n                this.x++;\n                pulled++;\n            }\n        }\n        return pulled;\n    }\n    update(dt) {\n        super.update(dt);\n    }\n}\nexports.ScriptableNPC = ScriptableNPC;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU2NyaXB0YWJsZU5QQy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9TY3JpcHRhYmxlTlBDLnRzPzA5MWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vV29ybGRcIjtcclxuaW1wb3J0IHsgTlBDIH0gZnJvbSBcIi4vTlBDXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU2NyaXB0YWJsZU5QQyBleHRlbmRzIE5QQyB7XHJcbiAgICBwcm90ZWN0ZWQgbW92ZTogMCB8IDEgfCAtMSAgPSAwO1xyXG5cclxuICAgIHByb3RlY3RlZCB1cGRhdGVQb3NpdGlvbihuZXdYOiBudW1iZXIsIG5ld1k6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMueCA9IG5ld1g7XHJcbiAgICAgICAgdGhpcy55ID0gbmV3WTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgY29sbGlzaW9uIHdpdGggdGhlIGVudmlyb25tZW50IGFuZCBjb3JyZWN0IHBsYXllciBwb3NpdGlvbiBhbmQgbW92ZW1lbnRcclxuICAgICAgICBpZiAodGhpcy5wdWxsT3V0T2ZHcm91bmQoKSAhPT0gMCB8fCB0aGlzLnB1bGxPdXRPZkNlaWxpbmcoKSAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WSgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnB1bGxPdXRPZldhbGwoKSAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5WCgwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwdWxsT3V0T2ZHcm91bmQoKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgcHVsbGVkID0gMCwgY29sID0gMDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmVsb2NpdHlZKCkgPD0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JsZCA9IHRoaXMuc2NlbmUud29ybGQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHdvcmxkLmdldEhlaWdodCgpO1xyXG4gICAgICAgICAgICBjb2wgPSB3b3JsZC5jb2xsaWRlc1dpdGgodGhpcy54LCB0aGlzLnksIFsgdGhpcyBdLCBbIEVudmlyb25tZW50LldBVEVSIF0pO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRoaXMueSA8IGhlaWdodCAmJiBjb2wpIHtcclxuICAgICAgICAgICAgICAgIHB1bGxlZCsrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy55Kys7XHJcbiAgICAgICAgICAgICAgICBjb2wgPSB3b3JsZC5jb2xsaWRlc1dpdGgodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHVsbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHVsbE91dE9mQ2VpbGluZygpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBwdWxsZWQgPSAwO1xyXG4gICAgICAgIGNvbnN0IHdvcmxkID0gdGhpcy5zY2VuZS53b3JsZDtcclxuXHJcbiAgICAgICAgd2hpbGUgKFxyXG4gICAgICAgICAgICB0aGlzLnkgPiAwXHJcbiAgICAgICAgICAgICYmIHdvcmxkLmNvbGxpZGVzV2l0aChcclxuICAgICAgICAgICAgICAgIHRoaXMueCwgdGhpcy55ICsgdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBbIHRoaXMgXSxcclxuICAgICAgICAgICAgICAgIFsgRW52aXJvbm1lbnQuUExBVEZPUk0sIEVudmlyb25tZW50LldBVEVSIF1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBwdWxsZWQrKztcclxuICAgICAgICAgICAgdGhpcy55LS07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHVsbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHVsbE91dE9mV2FsbCgpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBwdWxsZWQgPSAwO1xyXG4gICAgICAgIGNvbnN0IHdvcmxkID0gdGhpcy5zY2VuZS53b3JsZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmVsb2NpdHlYKCkgPiAwKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChcclxuICAgICAgICAgICAgICAgIHdvcmxkLmNvbGxpZGVzV2l0aFZlcnRpY2FsTGluZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnggKyB0aGlzLndpZHRoIC8gMiwgdGhpcy55ICsgdGhpcy5oZWlnaHQgKiAzIC8gNCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgWyB0aGlzIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgWyBFbnZpcm9ubWVudC5QTEFURk9STSwgRW52aXJvbm1lbnQuV0FURVIgXVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueC0tO1xyXG4gICAgICAgICAgICAgICAgcHVsbGVkKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aGlsZSAoXHJcbiAgICAgICAgICAgICAgICB3b3JsZC5jb2xsaWRlc1dpdGhWZXJ0aWNhbExpbmUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54IC0gdGhpcy53aWR0aCAvIDIsIHRoaXMueSArIHRoaXMuaGVpZ2h0ICogMyAvIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIFsgdGhpcyBdLFxyXG4gICAgICAgICAgICAgICAgICAgIFsgRW52aXJvbm1lbnQuUExBVEZPUk0sIEVudmlyb25tZW50LldBVEVSIF1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLngrKztcclxuICAgICAgICAgICAgICAgIHB1bGxlZCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHVsbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShkdCk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBRUE7QUFBQTs7QUFDQTtBQXlGQTtBQXZGQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBMUZBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/ScriptableNPC.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Seed.js":
    /*!******************************!*\
      !*** ./lib/entities/Seed.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Seed_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Seed = exports.SeedState = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst Face_1 = __webpack_require__(/*! ../Face */ \"./lib/Face.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nconst Wood_1 = __webpack_require__(/*! ./Wood */ \"./lib/entities/Wood.js\");\nvar SeedState;\n(function (SeedState) {\n    SeedState[SeedState[\"FREE\"] = 0] = \"FREE\";\n    SeedState[SeedState[\"PLANTED\"] = 1] = \"PLANTED\";\n    SeedState[SeedState[\"SWIMMING\"] = 2] = \"SWIMMING\";\n    SeedState[SeedState[\"GROWN\"] = 3] = \"GROWN\";\n})(SeedState = exports.SeedState || (exports.SeedState = {}));\nlet Seed = Seed_1 = class Seed extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 24, 24);\n        this.state = SeedState.FREE;\n        this.wood = new Wood_1.Wood(scene, x, y);\n        this.face = new Face_1.Face(scene, this, Face_1.EyeType.STANDARD, 0, 8);\n        const floatingPosition = this.scene.pointsOfInterest.find(poi => poi.name === \"recover_floating_position\");\n        if (!floatingPosition) {\n            throw new Error(\"Could not find “recover_floating_position” point of interest in game scene.\");\n        }\n        this.floatingPosition = floatingPosition;\n    }\n    resetState() {\n        this.setFloating(false);\n        this.state = SeedState.FREE;\n    }\n    getSpriteTag() {\n        switch (this.state) {\n            case SeedState.PLANTED:\n                return \"planted\";\n            case SeedState.GROWN:\n                return \"grown\";\n            default:\n                return \"free\";\n        }\n    }\n    draw(ctx) {\n        this.scene.renderer.addAseprite(Seed_1.sprite, this.getSpriteTag(), this.x, this.y - 1, Renderer_1.RenderingLayer.ENTITIES, undefined);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        if (this.state === SeedState.GROWN) {\n            this.drawFace(ctx);\n        }\n        this.speechBubble.draw(ctx);\n    }\n    isCarried() {\n        return this.scene.player.isCarrying(this);\n    }\n    grow() {\n        if (this.state === SeedState.PLANTED) {\n            this.state = SeedState.GROWN;\n            this.scene.seed = this;\n            Conversation_1.Conversation.setGlobal(\"seedgrown\", \"true\");\n            this.scene.game.campaign.runAction(\"enable\", null, [\"tree\", \"tree2\"]);\n            this.scene.game.campaign.runAction(\"enable\", null, [\"seed\", \"seed1\"]);\n        }\n    }\n    update(dt) {\n        super.update(dt);\n        if (this.state === SeedState.SWIMMING) {\n            const diffX = this.floatingPosition.x - this.x;\n            const moveX = Math.min(20, Math.abs(diffX)) * Math.sign(diffX);\n            this.x += moveX * dt;\n            this.setVelocityY(Math.abs(((util_1.now() % 2000) - 1000) / 1000) - 0.5);\n        }\n        if (this.state === SeedState.FREE || this.state === SeedState.SWIMMING) {\n            const player = this.scene.player;\n            if (!this.isCarried() && this.distanceTo(player) < 20) {\n                player.carry(this);\n            }\n            if (!this.isCarried()\n                && this.scene.world.collidesWith(this.x, this.y - 8) === World_1.Environment.SOIL) {\n                const seedPosition = this.scene.pointsOfInterest.find(poi => poi.name === \"seedposition\");\n                if (!seedPosition)\n                    throw new Error(\"Seed position is missing in points of interest array\");\n                this.state = SeedState.PLANTED;\n                this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.PLANTED_SEED);\n                this.setFloating(true);\n                this.x = seedPosition.x;\n                this.y = seedPosition.y;\n                Seed_1.successSound.play();\n                Conversation_1.Conversation.setGlobal(\"seedplanted\", \"true\");\n            }\n            if (!this.isCarried()\n                && this.state !== SeedState.SWIMMING\n                && this.scene.world.collidesWith(this.x, this.y - 5) === World_1.Environment.WATER) {\n                this.state = SeedState.SWIMMING;\n                this.setVelocity(0, 0);\n                this.setFloating(true);\n                this.y = this.floatingPosition.y;\n            }\n        }\n        else if (this.state === SeedState.PLANTED) {\n            if (this.scene.world.isRaining()) {\n                this.grow();\n            }\n        }\n        else if (this.state === SeedState.GROWN) {\n            // TODO Special update behavior when grown\n        }\n        this.speechBubble.update(this.x, this.y);\n    }\n    spawnWood() {\n        if (!this.scene.gameObjects.includes(this.wood)) {\n            this.scene.addGameObject(this.wood);\n        }\n        this.wood.x = this.x;\n        this.wood.y = this.y + this.height / 2;\n        this.wood.setVelocity(-5, 0);\n        return this.wood;\n    }\n    startDialog() { }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/seed.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Seed, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/throwing/success.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Seed, \"successSound\", void 0);\nSeed = Seed_1 = tslib_1.__decorate([\n    Entity_1.entity(\"seed\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Seed);\nexports.Seed = Seed;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU2VlZC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9TZWVkLnRzPzg4MjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgZW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gXCIuLi9Xb3JsZFwiO1xyXG5pbXBvcnQgeyBFeWVUeXBlLCBGYWNlIH0gZnJvbSBcIi4uL0ZhY2VcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdEluZm8gfSBmcm9tIFwiLi4vTWFwSW5mb1wiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBub3cgfSBmcm9tIFwiLi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBOUEMgfSBmcm9tIFwiLi9OUENcIjtcclxuaW1wb3J0IHsgUXVlc3RBVHJpZ2dlciwgUXVlc3RLZXkgfSBmcm9tIFwiLi4vUXVlc3RzXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFNvdW5kIH0gZnJvbSBcIi4uL1NvdW5kXCI7XHJcbmltcG9ydCB7IFdvb2QgfSBmcm9tIFwiLi9Xb29kXCI7XHJcblxyXG5leHBvcnQgZW51bSBTZWVkU3RhdGUge1xyXG4gICAgRlJFRSA9IDAsXHJcbiAgICBQTEFOVEVEID0gMSxcclxuICAgIFNXSU1NSU5HID0gMixcclxuICAgIEdST1dOID0gM1xyXG59XHJcblxyXG5AZW50aXR5KFwic2VlZFwiKVxyXG5leHBvcnQgY2xhc3MgU2VlZCBleHRlbmRzIE5QQyB7XHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL3NlZWQuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBAYXNzZXQoXCJzb3VuZHMvdGhyb3dpbmcvc3VjY2Vzcy5tcDNcIilcclxuICAgIHByaXZhdGUgc3RhdGljIHN1Y2Nlc3NTb3VuZDogU291bmQ7XHJcblxyXG4gICAgcHVibGljIHN0YXRlID0gU2VlZFN0YXRlLkZSRUU7XHJcbiAgICBwcml2YXRlIHdvb2Q6IFdvb2Q7XHJcbiAgICBwcml2YXRlIGZsb2F0aW5nUG9zaXRpb246IEdhbWVPYmplY3RJbmZvO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCAyNCwgMjQpO1xyXG4gICAgICAgIHRoaXMud29vZCA9IG5ldyBXb29kKHNjZW5lLCB4LCB5KTtcclxuICAgICAgICB0aGlzLmZhY2UgPSBuZXcgRmFjZShzY2VuZSwgdGhpcywgRXllVHlwZS5TVEFOREFSRCwgMCwgOCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZsb2F0aW5nUG9zaXRpb24gPSB0aGlzLnNjZW5lLnBvaW50c09mSW50ZXJlc3QuZmluZChwb2kgPT4gcG9pLm5hbWUgPT09IFwicmVjb3Zlcl9mbG9hdGluZ19wb3NpdGlvblwiKTtcclxuXHJcbiAgICAgICAgaWYgKCFmbG9hdGluZ1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciAoXCJDb3VsZCBub3QgZmluZCDigJxyZWNvdmVyX2Zsb2F0aW5nX3Bvc2l0aW9u4oCdIHBvaW50IG9mIGludGVyZXN0IGluIGdhbWUgc2NlbmUuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5mbG9hdGluZ1Bvc2l0aW9uID0gZmxvYXRpbmdQb3NpdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVzZXRTdGF0ZSAoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRGbG9hdGluZyhmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFNlZWRTdGF0ZS5GUkVFO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0U3ByaXRlVGFnKCk6IHN0cmluZyB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgU2VlZFN0YXRlLlBMQU5URUQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJwbGFudGVkXCI7XHJcbiAgICAgICAgICAgIGNhc2UgU2VlZFN0YXRlLkdST1dOOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZ3Jvd25cIjtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImZyZWVcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZEFzZXByaXRlKFxyXG4gICAgICAgICAgICBTZWVkLnNwcml0ZSxcclxuICAgICAgICAgICAgdGhpcy5nZXRTcHJpdGVUYWcoKSxcclxuICAgICAgICAgICAgdGhpcy54LCB0aGlzLnkgLSAxLFxyXG4gICAgICAgICAgICBSZW5kZXJpbmdMYXllci5FTlRJVElFUyxcclxuICAgICAgICAgICAgdW5kZWZpbmVkXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTZWVkU3RhdGUuR1JPV04pIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3RmFjZShjdHgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUuZHJhdyhjdHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0NhcnJpZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUucGxheWVyLmlzQ2FycnlpbmcodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdyb3coKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNlZWRTdGF0ZS5QTEFOVEVEKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTZWVkU3RhdGUuR1JPV047XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc2VlZCA9IHRoaXM7XHJcbiAgICAgICAgICAgIENvbnZlcnNhdGlvbi5zZXRHbG9iYWwoXCJzZWVkZ3Jvd25cIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24ucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcInRyZWVcIiwgXCJ0cmVlMlwiXSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5ydW5BY3Rpb24oXCJlbmFibGVcIiwgbnVsbCwgW1wic2VlZFwiLCBcInNlZWQxXCJdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNlZWRTdGF0ZS5TV0lNTUlORykge1xyXG4gICAgICAgICAgICBjb25zdCBkaWZmWCA9IHRoaXMuZmxvYXRpbmdQb3NpdGlvbi54IC0gdGhpcy54O1xyXG4gICAgICAgICAgICBjb25zdCBtb3ZlWCA9IE1hdGgubWluKDIwLCBNYXRoLmFicyhkaWZmWCkpICogTWF0aC5zaWduKGRpZmZYKTtcclxuICAgICAgICAgICAgdGhpcy54ICs9IG1vdmVYICogZHQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlZKE1hdGguYWJzKCgobm93KCkgJSAyMDAwKSAtIDEwMDApIC8gMTAwMCkgLSAwLjUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNlZWRTdGF0ZS5GUkVFIHx8IHRoaXMuc3RhdGUgPT09IFNlZWRTdGF0ZS5TV0lNTUlORykge1xyXG4gICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLnNjZW5lLnBsYXllcjtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NhcnJpZWQoKSAmJiB0aGlzLmRpc3RhbmNlVG8ocGxheWVyKSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY2FycnkodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgIXRoaXMuaXNDYXJyaWVkKClcclxuICAgICAgICAgICAgICAgICYmIHRoaXMuc2NlbmUud29ybGQuY29sbGlkZXNXaXRoKHRoaXMueCwgdGhpcy55IC0gOCkgPT09IEVudmlyb25tZW50LlNPSUxcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWVkUG9zaXRpb24gPSB0aGlzLnNjZW5lLnBvaW50c09mSW50ZXJlc3QuZmluZChwb2kgPT4gcG9pLm5hbWUgPT09IFwic2VlZHBvc2l0aW9uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghc2VlZFBvc2l0aW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJTZWVkIHBvc2l0aW9uIGlzIG1pc3NpbmcgaW4gcG9pbnRzIG9mIGludGVyZXN0IGFycmF5XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTZWVkU3RhdGUuUExBTlRFRDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFF1ZXN0QVRyaWdnZXIuUExBTlRFRF9TRUVEKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmxvYXRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnggPSBzZWVkUG9zaXRpb24ueDtcclxuICAgICAgICAgICAgICAgIHRoaXMueSA9IHNlZWRQb3NpdGlvbi55O1xyXG5cclxuICAgICAgICAgICAgICAgIFNlZWQuc3VjY2Vzc1NvdW5kLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIENvbnZlcnNhdGlvbi5zZXRHbG9iYWwoXCJzZWVkcGxhbnRlZFwiLCBcInRydWVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICF0aGlzLmlzQ2FycmllZCgpXHJcbiAgICAgICAgICAgICAgICAmJiB0aGlzLnN0YXRlICE9PSBTZWVkU3RhdGUuU1dJTU1JTkdcclxuICAgICAgICAgICAgICAgICYmIHRoaXMuc2NlbmUud29ybGQuY29sbGlkZXNXaXRoKHRoaXMueCwgdGhpcy55IC0gNSkgPT09IEVudmlyb25tZW50LldBVEVSXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNlZWRTdGF0ZS5TV0lNTUlORztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZsb2F0aW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ID0gdGhpcy5mbG9hdGluZ1Bvc2l0aW9uLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFNlZWRTdGF0ZS5QTEFOVEVEKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjZW5lLndvcmxkLmlzUmFpbmluZygpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU2VlZFN0YXRlLkdST1dOKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8gU3BlY2lhbCB1cGRhdGUgYmVoYXZpb3Igd2hlbiBncm93blxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3Bhd25Xb29kKCk6IFdvb2Qge1xyXG4gICAgICAgIGlmICghdGhpcy5zY2VuZS5nYW1lT2JqZWN0cy5pbmNsdWRlcyh0aGlzLndvb2QpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkR2FtZU9iamVjdCh0aGlzLndvb2QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndvb2QueCA9IHRoaXMueDtcclxuICAgICAgICB0aGlzLndvb2QueSA9IHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICB0aGlzLndvb2Quc2V0VmVsb2NpdHkoLTUsIDApO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy53b29kO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydERpYWxvZygpOiB2b2lkIHt9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVdBO0FBQ0E7QUFMQTtBQU1BO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBNUlBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFMQTtBQURBO0FBWUE7QUFYQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/Seed.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/ShadowPresence.js":
    /*!****************************************!*\
      !*** ./lib/entities/ShadowPresence.js ***!
      \****************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar ShadowPresence_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShadowPresence = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nconst SoundEmitter_1 = __webpack_require__(/*! ../SoundEmitter */ \"./lib/SoundEmitter.js\");\nvar AnimationTag;\n(function (AnimationTag) {\n    AnimationTag[\"INVISIBLE\"] = \"invisible\";\n    AnimationTag[\"IDLE\"] = \"idle\";\n})(AnimationTag || (AnimationTag = {}));\nlet ShadowPresence = ShadowPresence_1 = class ShadowPresence extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 12, 46);\n        this.isNearPlayer = false;\n        this.direction = -1;\n        this.lookAtPlayer = false;\n        this.soundEmitter = new SoundEmitter_1.SoundEmitter(this.scene, this.x, this.y, ShadowPresence_1.caveAmbience, 0.3, 1);\n    }\n    showDialoguePrompt() {\n        if (!super.showDialoguePrompt()) {\n            return false;\n        }\n        return (this.isNearPlayer\n            && this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).isTriggered(Quests_1.QuestATrigger.TALKED_TO_FIRE)\n            && !this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).isTriggered(Quests_1.QuestATrigger.GOT_RUNNING_ABILITY));\n    }\n    draw(ctx) {\n        const scale = this.direction < 0 ? { x: -1, y: 1 } : undefined;\n        const animationTag = this.isNearPlayer ? AnimationTag.IDLE : AnimationTag.INVISIBLE;\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.ASEPRITE,\n            layer: Renderer_1.RenderingLayer.ENTITIES,\n            translation: { x: this.x, y: -this.y },\n            position: {\n                x: -ShadowPresence_1.sprite.width >> 1,\n                y: -ShadowPresence_1.sprite.height\n            },\n            scale,\n            asset: ShadowPresence_1.sprite,\n            animationTag,\n            time: this.scene.gameTime * 1000\n        });\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        if (this.showDialoguePrompt()) {\n            this.drawDialoguePrompt();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    checkPlayerDistance() {\n        this.isNearPlayer = false;\n        if (this.distanceTo(this.scene.player) < 60) {\n            this.isNearPlayer = true;\n        }\n    }\n    update(dt) {\n        super.update(dt);\n        this.checkPlayerDistance();\n        this.dialoguePrompt.update(dt, this.x, this.y + 48);\n        this.speechBubble.update(this.x, this.y + 12);\n        this.soundEmitter.update();\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/shadowpresence.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], ShadowPresence, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/ambient/cave.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], ShadowPresence, \"caveAmbience\", void 0);\nShadowPresence = ShadowPresence_1 = tslib_1.__decorate([\n    Entity_1.entity(\"shadowpresence\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], ShadowPresence);\nexports.ShadowPresence = ShadowPresence;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU2hhZG93UHJlc2VuY2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvU2hhZG93UHJlc2VuY2UudHM/YTJmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgZW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBOUEMgfSBmcm9tIFwiLi9OUENcIjtcclxuaW1wb3J0IHsgUXVlc3RBVHJpZ2dlciwgUXVlc3RLZXkgfSBmcm9tIFwiLi4vUXVlc3RzXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyLCBSZW5kZXJpbmdUeXBlIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFNvdW5kIH0gZnJvbSBcIi4uL1NvdW5kXCI7XHJcbmltcG9ydCB7IFNvdW5kRW1pdHRlciB9IGZyb20gXCIuLi9Tb3VuZEVtaXR0ZXJcIjtcclxuXHJcbmVudW0gQW5pbWF0aW9uVGFnIHtcclxuICAgIElOVklTSUJMRSA9IFwiaW52aXNpYmxlXCIsXHJcbiAgICBJRExFID0gXCJpZGxlXCJcclxufVxyXG5cclxuQGVudGl0eShcInNoYWRvd3ByZXNlbmNlXCIpXHJcbmV4cG9ydCBjbGFzcyBTaGFkb3dQcmVzZW5jZSBleHRlbmRzIE5QQyB7XHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL3NoYWRvd3ByZXNlbmNlLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNwcml0ZTogQXNlcHJpdGU7XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL2FtYmllbnQvY2F2ZS5vZ2dcIilcclxuICAgIHByaXZhdGUgc3RhdGljIGNhdmVBbWJpZW5jZTogU291bmQ7XHJcbiAgICBwcml2YXRlIHNvdW5kRW1pdHRlcjogU291bmRFbWl0dGVyO1xyXG5cclxuICAgIHByaXZhdGUgaXNOZWFyUGxheWVyID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNjZW5lOiBHYW1lU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHksIDEyLCA0Nik7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAtMTtcclxuICAgICAgICB0aGlzLmxvb2tBdFBsYXllciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc291bmRFbWl0dGVyID0gbmV3IFNvdW5kRW1pdHRlcih0aGlzLnNjZW5lLCB0aGlzLngsIHRoaXMueSwgU2hhZG93UHJlc2VuY2UuY2F2ZUFtYmllbmNlLCAwLjMsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzaG93RGlhbG9ndWVQcm9tcHQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFzdXBlci5zaG93RGlhbG9ndWVQcm9tcHQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLmlzTmVhclBsYXllclxyXG4gICAgICAgICAgICAmJiB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkuaXNUcmlnZ2VyZWQoUXVlc3RBVHJpZ2dlci5UQUxLRURfVE9fRklSRSlcclxuICAgICAgICAgICAgJiYgIXRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS5pc1RyaWdnZXJlZChRdWVzdEFUcmlnZ2VyLkdPVF9SVU5OSU5HX0FCSUxJVFkpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5kaXJlY3Rpb24gPCAwID8geyB4OiAtMSwgeTogMSB9IDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGFuaW1hdGlvblRhZyA9IHRoaXMuaXNOZWFyUGxheWVyID8gQW5pbWF0aW9uVGFnLklETEUgOiBBbmltYXRpb25UYWcuSU5WSVNJQkxFO1xyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZCh7XHJcbiAgICAgICAgICAgIHR5cGU6IFJlbmRlcmluZ1R5cGUuQVNFUFJJVEUsXHJcbiAgICAgICAgICAgIGxheWVyOiBSZW5kZXJpbmdMYXllci5FTlRJVElFUyxcclxuICAgICAgICAgICAgdHJhbnNsYXRpb246IHsgeDogdGhpcy54LCB5OiAtdGhpcy55IH0sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICB4OiAtU2hhZG93UHJlc2VuY2Uuc3ByaXRlLndpZHRoID4+IDEsXHJcbiAgICAgICAgICAgICAgICB5OiAtU2hhZG93UHJlc2VuY2Uuc3ByaXRlLmhlaWdodFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzY2FsZSxcclxuICAgICAgICAgICAgYXNzZXQ6IFNoYWRvd1ByZXNlbmNlLnNwcml0ZSxcclxuICAgICAgICAgICAgYW5pbWF0aW9uVGFnLFxyXG4gICAgICAgICAgICB0aW1lOiB0aGlzLnNjZW5lLmdhbWVUaW1lICogMTAwMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0RpYWxvZ3VlUHJvbXB0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3RGlhbG9ndWVQcm9tcHQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3BlZWNoQnViYmxlLmRyYXcoY3R4KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2hlY2tQbGF5ZXJEaXN0YW5jZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlzTmVhclBsYXllciA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmRpc3RhbmNlVG8odGhpcy5zY2VuZS5wbGF5ZXIpIDwgNjApIHtcclxuICAgICAgICAgICAgdGhpcy5pc05lYXJQbGF5ZXIgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci51cGRhdGUoZHQpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrUGxheWVyRGlzdGFuY2UoKTtcclxuICAgICAgICB0aGlzLmRpYWxvZ3VlUHJvbXB0LnVwZGF0ZShkdCwgdGhpcy54LCB0aGlzLnkgKyA0OCk7XHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55ICsgMTIpO1xyXG4gICAgICAgIHRoaXMuc291bmRFbWl0dGVyLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFVQTtBQUNBO0FBSEE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkVBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFMQTtBQURBO0FBV0E7QUFWQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/ShadowPresence.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Shiba.js":
    /*!*******************************!*\
      !*** ./lib/entities/Shiba.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Shiba_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Shiba = exports.ShibaState = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst bird_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../../assets/dialog/bird.dialog.json */ \"./assets/dialog/bird.dialog.json\"));\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst Face_1 = __webpack_require__(/*! ../Face */ \"./lib/Face.js\");\nconst Fire_1 = __webpack_require__(/*! ./Fire */ \"./lib/entities/Fire.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Particles_1 = __webpack_require__(/*! ../Particles */ \"./lib/Particles.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst ScriptableNPC_1 = __webpack_require__(/*! ./ScriptableNPC */ \"./lib/entities/ScriptableNPC.js\");\nconst shiba1_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../../assets/dialog/shiba1.dialog.json */ \"./assets/dialog/shiba1.dialog.json\"));\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nconst IDLE_DURATION = [2, 3, 4];\nconst WALK_DURATION = [0.5, 1, 1.2, 1.5];\nconst ACCELERATION = 15;\nvar ShibaState;\n(function (ShibaState) {\n    ShibaState[ShibaState[\"ON_TREE\"] = 0] = \"ON_TREE\";\n    ShibaState[ShibaState[\"FLYING_AWAY\"] = 1] = \"FLYING_AWAY\";\n    ShibaState[ShibaState[\"ON_MOUNTAIN\"] = 2] = \"ON_MOUNTAIN\";\n    ShibaState[ShibaState[\"GOING_TO_FIRE\"] = 3] = \"GOING_TO_FIRE\";\n    ShibaState[ShibaState[\"KILLING_FIRE\"] = 4] = \"KILLING_FIRE\";\n    ShibaState[ShibaState[\"FIRE_KILLED\"] = 5] = \"FIRE_KILLED\";\n})(ShibaState = exports.ShibaState || (exports.ShibaState = {}));\nconst FLYING_DURATION = 8;\nconst JUMP_INTERVAL = 0.3;\nconst HEART_PARTICLE_DELAY = 0.5;\nlet Shiba = Shiba_1 = class Shiba extends ScriptableNPC_1.ScriptableNPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 28, 24);\n        this.state = ShibaState.ON_TREE;\n        this.idleTimer = util_1.rndItem(IDLE_DURATION);\n        this.walkTimer = null;\n        this.autoMoveDirection = 1;\n        this.jumpHeight = 1.5;\n        this.jumpTimer = 0;\n        this.flyingTime = 0;\n        this.saidFarewell = false;\n        this.peeing = false;\n        this.isBeingPetted = false;\n        this.nextHeartParticle = HEART_PARTICLE_DELAY;\n        this.minAltitude = y;\n        this.conversation = new Conversation_1.Conversation(bird_dialog_json_1.default, this);\n        this.setMaxVelocity(2);\n        this.conversation = new Conversation_1.Conversation(shiba1_dialog_json_1.default, this);\n        this.doubleJumpEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x, y: this.y },\n            velocity: () => ({ x: util_1.rnd(-1, 1) * 90, y: util_1.rnd(-1, 0) * 100 }),\n            color: () => util_1.rndItem(constants_1.DOUBLE_JUMP_COLORS),\n            size: util_1.rnd(1, 2),\n            gravity: { x: 0, y: -120 },\n            lifetime: () => util_1.rnd(0.4, 0.6),\n            alphaCurve: Particles_1.valueCurves.trapeze(0.05, 0.2)\n        });\n        this.heartEmitter = this.scene.particles.createEmitter({\n            position: { x: this.x, y: this.y },\n            offset: () => ({ x: util_1.rnd(-8, 8), y: 18 }),\n            velocity: () => ({ x: 0, y: 5 }),\n            color: () => Shiba_1.heartImage,\n            size: 3,\n            gravity: { x: 0, y: 0 },\n            lifetime: () => util_1.rnd(1.5, 3),\n            blendMode: \"source-over\",\n            alphaCurve: Particles_1.valueCurves.cos(0.1, 0.5),\n        });\n    }\n    setState(state) {\n        this.state = state;\n    }\n    getState() {\n        return this.state;\n    }\n    nextState() {\n        this.state++;\n        if (this.state === ShibaState.FLYING_AWAY) {\n            this.lookAtPlayer = false;\n            this.scene.player.disableMultiJump();\n            this.setMaxVelocity(3);\n        }\n        else if (this.state === ShibaState.ON_MOUNTAIN) {\n            this.move = 0;\n            const spawn = this.scene.pointsOfInterest.find(poi => poi.name === \"shiba_mountain_spawn\");\n            if (!spawn)\n                throw new Error(\"Shiba mountain spawn missing\");\n            this.x = spawn.x;\n            this.y = spawn.y;\n            this.scene.game.campaign.runAction(\"enable\", null, [\"shiba\", \"shiba4\"]);\n            this.scene.powerShiba.nextState();\n        }\n        else if (this.state === ShibaState.GOING_TO_FIRE) {\n            this.scene.camera.setCinematicBar(1);\n            const shibaSpawnPos = this.scene.pointsOfInterest.find(poi => poi.name === \"friendship_shiba_spawn\");\n            this.lookAtPlayer = false;\n            this.setMaxVelocity(2);\n            this.scene.startFriendshipMusic();\n            if (!shibaSpawnPos)\n                throw new Error(\"'friendship_shiba_spawn' point in map is missing\");\n            this.x = shibaSpawnPos.x;\n            this.y = shibaSpawnPos.y;\n        }\n        else if (this.state === ShibaState.KILLING_FIRE) {\n            this.move = 0;\n            setTimeout(() => this.think(\"Wow!\", 1500), 500);\n            setTimeout(() => (this.direction = 1), 1000);\n            setTimeout(() => {\n                this.think(\"Bad fire!\", 2000);\n                this.scene.fire.setState(Fire_1.FireState.BEING_PUT_OUT);\n                this.scene.fire.growthTarget = Fire_1.SHRINK_SIZE;\n                this.peeing = true;\n                Shiba_1.putOutSound.setVolume(.3);\n                Shiba_1.putOutSound.play();\n            }, 2000);\n            setTimeout(() => this.scene.fire.think(\"Oh God…\", 2000), 4500);\n            setTimeout(() => this.scene.fire.think(\"Disgusting…\", 3000), 8000);\n        }\n        else if (this.state === ShibaState.FIRE_KILLED) {\n            this.peeing = false;\n            this.scene.fire.state = Fire_1.FireState.PUT_OUT;\n            Shiba_1.putOutSound.stop();\n            setTimeout(() => (this.direction = -1), 1000);\n            setTimeout(() => this.think(\"I help friend!\", 1500), 1500);\n            setTimeout(() => {\n                var _a;\n                this.scene.fire.think(\"Yeah, great.\", 2000);\n                (_a = this.scene.fire.face) === null || _a === void 0 ? void 0 : _a.setMode(Face_1.FaceModes.BORED);\n                this.scene.player.isControllable = true;\n                this.scene.friendshipCutscene = false;\n                this.lookAtPlayer = true;\n                this.scene.game.campaign.runAction(\"enable\", null, [\"fire\", \"fire4\"]);\n                this.scene.game.campaign.runAction(\"enable\", null, [\"shiba\", \"shiba5\"]);\n                this.scene.game.campaign.getQuest(Quests_1.QuestKey.B).finish();\n            }, 3500);\n        }\n    }\n    jump() {\n        this.jumpTimer = JUMP_INTERVAL;\n        this.setVelocityY(Math.sqrt(2 * this.jumpHeight * constants_1.GRAVITY));\n        this.doubleJumpEmitter.setPosition(this.x, this.y + 20);\n        this.doubleJumpEmitter.emit(20);\n        const vol = util_1.calculateVolume(this.distanceToPlayer, 0.4);\n        if (vol > 0) {\n            Shiba_1.jumpSound.setVolume(vol);\n            Shiba_1.jumpSound.stop();\n            Shiba_1.jumpSound.play();\n        }\n    }\n    canJump() {\n        return this.jumpTimer === 0;\n    }\n    startBeingPetted() {\n        this.isBeingPetted = true;\n        const x = this.direction > 0 ? this.x + 5 : this.x - 5;\n        this.heartEmitter.setPosition(x, this.y);\n    }\n    stopBeingPetted() {\n        this.isBeingPetted = false;\n    }\n    getAnimationTag() {\n        if (this.peeing)\n            return \"peeing\";\n        if (this.isBeingPetted)\n            return \"petted\";\n        return \"idle\";\n    }\n    draw(ctx) {\n        if (this.move === 0) {\n            this.scene.renderer.addAseprite(Shiba_1.sprite, this.getAnimationTag(), this.x, this.y, Renderer_1.RenderingLayer.ENTITIES, this.direction);\n        }\n        else {\n            this.scene.renderer.addAseprite(Shiba_1.sprite, \"walk\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES, this.direction);\n        }\n        if (this.scene.showBounds)\n            this.drawBounds();\n        if (this.showDialoguePrompt()) {\n            this.drawDialoguePrompt();\n        }\n        if (this.thinkBubble) {\n            this.thinkBubble.draw(ctx);\n        }\n        this.speechBubble.draw(ctx);\n    }\n    showDialoguePrompt() {\n        if (!super.showDialoguePrompt())\n            return false;\n        return false;\n    }\n    update(dt) {\n        super.update(dt);\n        // Heart Emitter\n        if (this.isBeingPetted) {\n            this.nextHeartParticle -= dt;\n            if (this.nextHeartParticle < 0) {\n                this.heartEmitter.emit(1);\n                this.nextHeartParticle = HEART_PARTICLE_DELAY;\n            }\n            this.heartEmitter.update(dt);\n        }\n        // Triggers\n        const triggerCollisions = this.scene.world.getTriggerCollisions(this);\n        if (this.hasActiveConversation() || this.isBeingPetted) {\n            this.move = 0;\n        }\n        else {\n            if (this.state === ShibaState.ON_TREE) {\n                this.onTreeUpdateLogic(triggerCollisions, dt);\n            }\n            else if (this.state === ShibaState.FLYING_AWAY) {\n                this.flyingAwayUpdateLogic(dt);\n            }\n            else if (this.state === ShibaState.GOING_TO_FIRE) {\n                this.walkToFireLogic(triggerCollisions);\n            }\n        }\n        if (this.move !== 0) {\n            this.direction = this.move;\n            this.accelerateX(ACCELERATION * dt * this.move);\n        }\n        else {\n            if (this.getVelocityX() > 0) {\n                this.decelerateX(ACCELERATION * dt);\n            }\n            else {\n                this.decelerateX(-ACCELERATION * dt);\n            }\n        }\n        this.dialoguePrompt.update(dt, this.x, this.y + 20);\n        this.speechBubble.update(this.x, this.y);\n        if (this.thinkBubble) {\n            this.thinkBubble.update(this.x, this.y);\n        }\n    }\n    isReadyForConversation() {\n        const superResult = super.isReadyForConversation();\n        return (superResult && this.state !== ShibaState.FLYING_AWAY && !this.isBeingPetted);\n    }\n    walkToFireLogic(triggerCollisions) {\n        this.move = -1;\n        if (this.scene.world.collidesWithVerticalLine(this.x - (this.width / 2), this.y + this.height, this.height, [this], [World_1.Environment.PLATFORM, World_1.Environment.WATER])) {\n            this.jump();\n        }\n        if (triggerCollisions.length > 0) {\n            const event = triggerCollisions.find(t => t.name === \"shiba_stop\");\n            if (event) {\n                this.nextState();\n            }\n        }\n    }\n    onTreeUpdateLogic(triggerCollisions, dt) {\n        if (triggerCollisions.length > 0) {\n            const event = triggerCollisions.find(t => t.name === \"shiba_action\");\n            if (event && event.properties.velocity) {\n                this.autoMoveDirection = event.properties.velocity > 0 ? 1 : -1;\n                this.move = this.autoMoveDirection;\n            }\n        }\n        if (this.idleTimer !== null && this.idleTimer >= 0) {\n            this.idleTimer -= dt;\n        }\n        if (this.walkTimer !== null && this.walkTimer >= 0) {\n            this.walkTimer -= dt;\n        }\n        if (this.idleTimer && this.idleTimer <= 0 && this.walkTimer === null) {\n            this.walkTimer = util_1.rndItem(WALK_DURATION);\n            this.idleTimer = null;\n            this.move = this.autoMoveDirection;\n        }\n        if (this.walkTimer && this.walkTimer <= 0 && this.idleTimer === null) {\n            this.idleTimer = util_1.rndItem(IDLE_DURATION);\n            this.walkTimer = null;\n            this.move = 0;\n        }\n        // Check if bone is near\n        if (Conversation_1.Conversation.getGlobals()[\"$gotBoneQuest\"]\n            && !Conversation_1.Conversation.getGlobals()[\"$broughtBone\"]\n            && this.distanceTo(this.scene.bone) < 100) {\n            Conversation_1.Conversation.setGlobal(\"broughtBone\", \"true\");\n            this.think(\"Wow! Bone!!!\", 2000);\n            this.scene.game.campaign.runAction(\"enable\", null, [\"shiba\", \"shiba2\"]);\n        }\n    }\n    flyingAwayUpdateLogic(dt) {\n        this.move = 1;\n        this.minAltitude += 20 * dt;\n        if (this.jumpTimer > 0) {\n            this.jumpTimer -= dt;\n            if (this.jumpTimer < 0) {\n                this.jumpTimer = 0;\n            }\n        }\n        if (this.y < this.minAltitude && this.canJump()) {\n            this.jump();\n        }\n        this.flyingTime += dt;\n        if (!this.saidFarewell && this.flyingTime > 2) {\n            this.saidFarewell = true;\n            this.think(\"See you on the mountain!\", 3000);\n        }\n        if (this.flyingTime >= FLYING_DURATION) {\n            this.nextState();\n        }\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/shiba.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Shiba, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/ending/putout.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Shiba, \"putOutSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/jumping/jump_neutral.ogg\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Shiba, \"jumpSound\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/heart.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], Shiba, \"heartImage\", void 0);\nShiba = Shiba_1 = tslib_1.__decorate([\n    Entity_1.entity(\"shiba\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Shiba);\nexports.Shiba = Shiba;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU2hpYmEuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvU2hpYmEudHM/N2E3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgY2FsY3VsYXRlVm9sdW1lLCBybmQsIHJuZEl0ZW0gfSBmcm9tIFwiLi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBDb252ZXJzYXRpb24gfSBmcm9tIFwiLi4vQ29udmVyc2F0aW9uXCI7XHJcbmltcG9ydCBjb252ZXJzYXRpb24gZnJvbSBcIi4uLy4uL2Fzc2V0cy9kaWFsb2cvYmlyZC5kaWFsb2cuanNvblwiO1xyXG5pbXBvcnQgeyBET1VCTEVfSlVNUF9DT0xPUlMsIEdSQVZJVFkgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vV29ybGRcIjtcclxuaW1wb3J0IHsgRmFjZU1vZGVzIH0gZnJvbSBcIi4uL0ZhY2VcIjtcclxuaW1wb3J0IHsgRmlyZVN0YXRlLCBTSFJJTktfU0laRSB9IGZyb20gXCIuL0ZpcmVcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdEluZm8gfSBmcm9tIFwiLi4vTWFwSW5mb1wiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBQYXJ0aWNsZUVtaXR0ZXIsIHZhbHVlQ3VydmVzIH0gZnJvbSBcIi4uL1BhcnRpY2xlc1wiO1xyXG5pbXBvcnQgeyBRdWVzdEtleSB9IGZyb20gXCIuLi9RdWVzdHNcIjtcclxuaW1wb3J0IHsgUmVuZGVyaW5nTGF5ZXIgfSBmcm9tIFwiLi4vUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgU2NyaXB0YWJsZU5QQyB9IGZyb20gXCIuL1NjcmlwdGFibGVOUENcIjtcclxuaW1wb3J0IHNoaWJhMSBmcm9tIFwiLi4vLi4vYXNzZXRzL2RpYWxvZy9zaGliYTEuZGlhbG9nLmpzb25cIjtcclxuaW1wb3J0IHsgU291bmQgfSBmcm9tIFwiLi4vU291bmRcIjtcclxuXHJcbmNvbnN0IElETEVfRFVSQVRJT04gPSBbMiwgMywgNF07XHJcbmNvbnN0IFdBTEtfRFVSQVRJT04gPSBbMC41LCAxLCAxLjIsIDEuNV07XHJcbmNvbnN0IEFDQ0VMRVJBVElPTiA9IDE1O1xyXG5cclxuZXhwb3J0IGVudW0gU2hpYmFTdGF0ZSB7XHJcbiAgICBPTl9UUkVFLFxyXG4gICAgRkxZSU5HX0FXQVksXHJcbiAgICBPTl9NT1VOVEFJTixcclxuICAgIEdPSU5HX1RPX0ZJUkUsXHJcbiAgICBLSUxMSU5HX0ZJUkUsXHJcbiAgICBGSVJFX0tJTExFRFxyXG59XHJcblxyXG5jb25zdCBGTFlJTkdfRFVSQVRJT04gPSA4O1xyXG5jb25zdCBKVU1QX0lOVEVSVkFMID0gMC4zO1xyXG5jb25zdCBIRUFSVF9QQVJUSUNMRV9ERUxBWSA9IDAuNTtcclxuXHJcbkBlbnRpdHkoXCJzaGliYVwiKVxyXG5leHBvcnQgY2xhc3MgU2hpYmEgZXh0ZW5kcyBTY3JpcHRhYmxlTlBDIHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvc2hpYmEuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBAYXNzZXQoXCJzb3VuZHMvZW5kaW5nL3B1dG91dC5tcDNcIilcclxuICAgIHByaXZhdGUgc3RhdGljIHB1dE91dFNvdW5kOiBTb3VuZDtcclxuXHJcbiAgICBAYXNzZXQoXCJzb3VuZHMvanVtcGluZy9qdW1wX25ldXRyYWwub2dnXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBqdW1wU291bmQ6IFNvdW5kO1xyXG5cclxuICAgIEBhc3NldChcInNwcml0ZXMvaGVhcnQucG5nXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBoZWFydEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGUgPSBTaGliYVN0YXRlLk9OX1RSRUU7XHJcbiAgICBwcml2YXRlIGlkbGVUaW1lcjogbnVtYmVyIHwgbnVsbCA9IHJuZEl0ZW0oSURMRV9EVVJBVElPTik7XHJcbiAgICBwcml2YXRlIHdhbGtUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGF1dG9Nb3ZlRGlyZWN0aW9uOiAxIHwgLTEgPSAxO1xyXG5cclxuICAgIHByaXZhdGUgZG91YmxlSnVtcEVtaXR0ZXI6IFBhcnRpY2xlRW1pdHRlcjtcclxuICAgIHByaXZhdGUgaGVhcnRFbWl0dGVyOiBQYXJ0aWNsZUVtaXR0ZXI7XHJcbiAgICBwcml2YXRlIG1pbkFsdGl0dWRlOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGp1bXBIZWlnaHQgPSAxLjU7XHJcbiAgICBwcml2YXRlIGp1bXBUaW1lciA9IDA7XHJcbiAgICBwcml2YXRlIGZseWluZ1RpbWUgPSAwO1xyXG4gICAgcHJpdmF0ZSBzYWlkRmFyZXdlbGwgPSBmYWxzZTtcclxuICAgIHB1YmxpYyBwZWVpbmcgPSBmYWxzZTtcclxuICAgIHB1YmxpYyBpc0JlaW5nUGV0dGVkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIG5leHRIZWFydFBhcnRpY2xlID0gSEVBUlRfUEFSVElDTEVfREVMQVk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNjZW5lOiBHYW1lU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHksIDI4LCAyNCk7XHJcblxyXG4gICAgICAgIHRoaXMubWluQWx0aXR1ZGUgPSB5O1xyXG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uID0gbmV3IENvbnZlcnNhdGlvbihjb252ZXJzYXRpb24sIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2V0TWF4VmVsb2NpdHkoMik7XHJcbiAgICAgICAgdGhpcy5jb252ZXJzYXRpb24gPSBuZXcgQ29udmVyc2F0aW9uKHNoaWJhMSwgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZG91YmxlSnVtcEVtaXR0ZXIgPSB0aGlzLnNjZW5lLnBhcnRpY2xlcy5jcmVhdGVFbWl0dGVyKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IHt4OiB0aGlzLngsIHk6IHRoaXMueX0sXHJcbiAgICAgICAgICAgIHZlbG9jaXR5OiAoKSA9PiAoeyB4OiBybmQoLTEsIDEpICogOTAsIHk6IHJuZCgtMSwgMCkgKiAxMDAgfSksXHJcbiAgICAgICAgICAgIGNvbG9yOiAoKSA9PiBybmRJdGVtKERPVUJMRV9KVU1QX0NPTE9SUyksXHJcbiAgICAgICAgICAgIHNpemU6IHJuZCgxLCAyKSxcclxuICAgICAgICAgICAgZ3Jhdml0eToge3g6IDAsIHk6IC0xMjB9LFxyXG4gICAgICAgICAgICBsaWZldGltZTogKCkgPT4gcm5kKDAuNCwgMC42KSxcclxuICAgICAgICAgICAgYWxwaGFDdXJ2ZTogdmFsdWVDdXJ2ZXMudHJhcGV6ZSgwLjA1LCAwLjIpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaGVhcnRFbWl0dGVyID0gdGhpcy5zY2VuZS5wYXJ0aWNsZXMuY3JlYXRlRW1pdHRlcih7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7eDogdGhpcy54LCB5OiB0aGlzLnl9LFxyXG4gICAgICAgICAgICBvZmZzZXQ6ICgpID0+ICh7eDogcm5kKC04LCA4KSwgeTogMTh9KSxcclxuICAgICAgICAgICAgdmVsb2NpdHk6ICgpID0+ICh7IHg6IDAsIHk6IDUgfSksXHJcbiAgICAgICAgICAgIGNvbG9yOiAoKSA9PiBTaGliYS5oZWFydEltYWdlLFxyXG4gICAgICAgICAgICBzaXplOiAzLFxyXG4gICAgICAgICAgICBncmF2aXR5OiB7eDogMCwgeTogMH0sXHJcbiAgICAgICAgICAgIGxpZmV0aW1lOiAoKSA9PiBybmQoMS41LCAzKSxcclxuICAgICAgICAgICAgYmxlbmRNb2RlOiBcInNvdXJjZS1vdmVyXCIsXHJcbiAgICAgICAgICAgIGFscGhhQ3VydmU6IHZhbHVlQ3VydmVzLmNvcygwLjEsIDAuNSksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFN0YXRlKHN0YXRlOiBTaGliYVN0YXRlKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTdGF0ZSgpOiBTaGliYVN0YXRlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbmV4dFN0YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RhdGUrKztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNoaWJhU3RhdGUuRkxZSU5HX0FXQVkpIHtcclxuICAgICAgICAgICAgdGhpcy5sb29rQXRQbGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5wbGF5ZXIuZGlzYWJsZU11bHRpSnVtcCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldE1heFZlbG9jaXR5KDMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU2hpYmFTdGF0ZS5PTl9NT1VOVEFJTikge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmUgPSAwO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3Bhd24gPSB0aGlzLnNjZW5lLnBvaW50c09mSW50ZXJlc3QuZmluZChcclxuICAgICAgICAgICAgICAgIHBvaSA9PiBwb2kubmFtZSA9PT0gXCJzaGliYV9tb3VudGFpbl9zcGF3blwiXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNwYXduKSB0aHJvdyBuZXcgRXJyb3IoXCJTaGliYSBtb3VudGFpbiBzcGF3biBtaXNzaW5nXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnggPSBzcGF3bi54O1xyXG4gICAgICAgICAgICB0aGlzLnkgPSBzcGF3bi55O1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24ucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcInNoaWJhXCIsIFwic2hpYmE0XCJdKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5wb3dlclNoaWJhLm5leHRTdGF0ZSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU2hpYmFTdGF0ZS5HT0lOR19UT19GSVJFKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuY2FtZXJhLnNldENpbmVtYXRpY0JhcigxKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNoaWJhU3Bhd25Qb3MgPSB0aGlzLnNjZW5lLnBvaW50c09mSW50ZXJlc3QuZmluZChcclxuICAgICAgICAgICAgICAgIHBvaSA9PiBwb2kubmFtZSA9PT0gXCJmcmllbmRzaGlwX3NoaWJhX3NwYXduXCJcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubG9va0F0UGxheWVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TWF4VmVsb2NpdHkoMik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0RnJpZW5kc2hpcE11c2ljKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNoaWJhU3Bhd25Qb3MpIHRocm93IG5ldyBFcnJvcihcIidmcmllbmRzaGlwX3NoaWJhX3NwYXduJyBwb2ludCBpbiBtYXAgaXMgbWlzc2luZ1wiKTtcclxuICAgICAgICAgICAgdGhpcy54ID0gc2hpYmFTcGF3blBvcy54O1xyXG4gICAgICAgICAgICB0aGlzLnkgPSBzaGliYVNwYXduUG9zLnk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTaGliYVN0YXRlLktJTExJTkdfRklSRSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmUgPSAwO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnRoaW5rKFwiV293IVwiLCAxNTAwKSwgNTAwKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiAodGhpcy5kaXJlY3Rpb24gPSAxKSwgMTAwMCk7XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGhpbmsoXCJCYWQgZmlyZSFcIiwgMjAwMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmZpcmUuc2V0U3RhdGUoRmlyZVN0YXRlLkJFSU5HX1BVVF9PVVQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5maXJlLmdyb3d0aFRhcmdldCA9IFNIUklOS19TSVpFO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wZWVpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgU2hpYmEucHV0T3V0U291bmQuc2V0Vm9sdW1lKC4zKTtcclxuICAgICAgICAgICAgICAgIFNoaWJhLnB1dE91dFNvdW5kLnBsYXkoKTtcclxuICAgICAgICAgICAgfSwgMjAwMCk7XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2NlbmUuZmlyZS50aGluayhcIk9oIEdvZOKAplwiLCAyMDAwKSwgNDUwMCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zY2VuZS5maXJlLnRoaW5rKFwiRGlzZ3VzdGluZ+KAplwiLCAzMDAwKSwgODAwMCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTaGliYVN0YXRlLkZJUkVfS0lMTEVEKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVlaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuZmlyZS5zdGF0ZSA9IEZpcmVTdGF0ZS5QVVRfT1VUO1xyXG4gICAgICAgICAgICBTaGliYS5wdXRPdXRTb3VuZC5zdG9wKCk7XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+ICh0aGlzLmRpcmVjdGlvbiA9IC0xKSwgMTAwMCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy50aGluayhcIkkgaGVscCBmcmllbmQhXCIsIDE1MDApLCAxNTAwKTtcclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5maXJlLnRoaW5rKFwiWWVhaCwgZ3JlYXQuXCIsIDIwMDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5maXJlLmZhY2U/LnNldE1vZGUoRmFjZU1vZGVzLkJPUkVEKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUucGxheWVyLmlzQ29udHJvbGxhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZnJpZW5kc2hpcEN1dHNjZW5lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2tBdFBsYXllciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24ucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcImZpcmVcIiwgXCJmaXJlNFwiXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24ucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcInNoaWJhXCIsIFwic2hpYmE1XCJdKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5CKS5maW5pc2goKTtcclxuICAgICAgICAgICAgfSwgMzUwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBqdW1wKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuanVtcFRpbWVyID0gSlVNUF9JTlRFUlZBTDtcclxuICAgICAgICB0aGlzLnNldFZlbG9jaXR5WShNYXRoLnNxcnQoMiAqIHRoaXMuanVtcEhlaWdodCAqIEdSQVZJVFkpKTtcclxuICAgICAgICB0aGlzLmRvdWJsZUp1bXBFbWl0dGVyLnNldFBvc2l0aW9uKHRoaXMueCwgdGhpcy55ICsgMjApO1xyXG4gICAgICAgIHRoaXMuZG91YmxlSnVtcEVtaXR0ZXIuZW1pdCgyMCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHZvbCA9IGNhbGN1bGF0ZVZvbHVtZSh0aGlzLmRpc3RhbmNlVG9QbGF5ZXIsIDAuNCk7XHJcblxyXG4gICAgICAgIGlmICh2b2wgPiAwKSB7XHJcbiAgICAgICAgICAgIFNoaWJhLmp1bXBTb3VuZC5zZXRWb2x1bWUodm9sKTtcclxuICAgICAgICAgICAgU2hpYmEuanVtcFNvdW5kLnN0b3AoKTtcclxuICAgICAgICAgICAgU2hpYmEuanVtcFNvdW5kLnBsYXkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNhbkp1bXAoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuanVtcFRpbWVyID09PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydEJlaW5nUGV0dGVkICgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlzQmVpbmdQZXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHggPSB0aGlzLmRpcmVjdGlvbiA+IDAgPyB0aGlzLnggKyA1IDogdGhpcy54IC0gNTtcclxuICAgICAgICB0aGlzLmhlYXJ0RW1pdHRlci5zZXRQb3NpdGlvbih4LCB0aGlzLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdG9wQmVpbmdQZXR0ZWQgKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaXNCZWluZ1BldHRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRBbmltYXRpb25UYWcgKCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMucGVlaW5nKSByZXR1cm4gXCJwZWVpbmdcIjtcclxuICAgICAgICBpZiAodGhpcy5pc0JlaW5nUGV0dGVkKSByZXR1cm4gXCJwZXR0ZWRcIjtcclxuICAgICAgICByZXR1cm4gXCJpZGxlXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5tb3ZlID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoXHJcbiAgICAgICAgICAgICAgICBTaGliYS5zcHJpdGUsIHRoaXMuZ2V0QW5pbWF0aW9uVGFnKCksIHRoaXMueCwgdGhpcy55LCBSZW5kZXJpbmdMYXllci5FTlRJVElFUywgdGhpcy5kaXJlY3Rpb25cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLmFkZEFzZXByaXRlKFxyXG4gICAgICAgICAgICAgICAgU2hpYmEuc3ByaXRlLCBcIndhbGtcIiwgdGhpcy54LCB0aGlzLnksIFJlbmRlcmluZ0xheWVyLkVOVElUSUVTLCB0aGlzLmRpcmVjdGlvblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykgdGhpcy5kcmF3Qm91bmRzKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dEaWFsb2d1ZVByb21wdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0RpYWxvZ3VlUHJvbXB0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy50aGlua0J1YmJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRoaW5rQnViYmxlLmRyYXcoY3R4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3BlZWNoQnViYmxlLmRyYXcoY3R4KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd0RpYWxvZ3VlUHJvbXB0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghc3VwZXIuc2hvd0RpYWxvZ3VlUHJvbXB0KCkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShkdCk7XHJcblxyXG4gICAgICAgIC8vIEhlYXJ0IEVtaXR0ZXJcclxuICAgICAgICBpZiAodGhpcy5pc0JlaW5nUGV0dGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dEhlYXJ0UGFydGljbGUgLT0gZHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5uZXh0SGVhcnRQYXJ0aWNsZSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVhcnRFbWl0dGVyLmVtaXQoMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRIZWFydFBhcnRpY2xlID0gSEVBUlRfUEFSVElDTEVfREVMQVk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5oZWFydEVtaXR0ZXIudXBkYXRlKGR0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRyaWdnZXJzXHJcbiAgICAgICAgY29uc3QgdHJpZ2dlckNvbGxpc2lvbnMgPSB0aGlzLnNjZW5lLndvcmxkLmdldFRyaWdnZXJDb2xsaXNpb25zKHRoaXMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5oYXNBY3RpdmVDb252ZXJzYXRpb24oKSB8fCB0aGlzLmlzQmVpbmdQZXR0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU2hpYmFTdGF0ZS5PTl9UUkVFKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVHJlZVVwZGF0ZUxvZ2ljKHRyaWdnZXJDb2xsaXNpb25zLCBkdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU2hpYmFTdGF0ZS5GTFlJTkdfQVdBWSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mbHlpbmdBd2F5VXBkYXRlTG9naWMoZHQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFNoaWJhU3RhdGUuR09JTkdfVE9fRklSRSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YWxrVG9GaXJlTG9naWModHJpZ2dlckNvbGxpc2lvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tb3ZlICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gdGhpcy5tb3ZlO1xyXG4gICAgICAgICAgICB0aGlzLmFjY2VsZXJhdGVYKEFDQ0VMRVJBVElPTiAqIGR0ICogdGhpcy5tb3ZlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRWZWxvY2l0eVgoKSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVjZWxlcmF0ZVgoQUNDRUxFUkFUSU9OICogZHQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWNlbGVyYXRlWCgtQUNDRUxFUkFUSU9OICogZHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRpYWxvZ3VlUHJvbXB0LnVwZGF0ZShkdCwgdGhpcy54LCB0aGlzLnkgKyAyMCk7XHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGhpbmtCdWJibGUpIHtcclxuICAgICAgICAgICAgdGhpcy50aGlua0J1YmJsZS51cGRhdGUodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNSZWFkeUZvckNvbnZlcnNhdGlvbigpOiBib29sZWFuIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3Qgc3VwZXJSZXN1bHQgPSBzdXBlci5pc1JlYWR5Rm9yQ29udmVyc2F0aW9uKCk7XHJcbiAgICAgICAgcmV0dXJuIChzdXBlclJlc3VsdCAmJiB0aGlzLnN0YXRlICE9PSBTaGliYVN0YXRlLkZMWUlOR19BV0FZICYmICF0aGlzLmlzQmVpbmdQZXR0ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgd2Fsa1RvRmlyZUxvZ2ljKHRyaWdnZXJDb2xsaXNpb25zOiBHYW1lT2JqZWN0SW5mb1tdKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tb3ZlID0gLTE7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS53b3JsZC5jb2xsaWRlc1dpdGhWZXJ0aWNhbExpbmUoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnggLSAodGhpcy53aWR0aCAvIDIpLCB0aGlzLnkgKyB0aGlzLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgWyB0aGlzIF0sXHJcbiAgICAgICAgICAgICAgICBbIEVudmlyb25tZW50LlBMQVRGT1JNLCBFbnZpcm9ubWVudC5XQVRFUiBdXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5qdW1wKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHJpZ2dlckNvbGxpc2lvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHRyaWdnZXJDb2xsaXNpb25zLmZpbmQodCA9PiB0Lm5hbWUgPT09IFwic2hpYmFfc3RvcFwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVHJlZVVwZGF0ZUxvZ2ljKHRyaWdnZXJDb2xsaXNpb25zOiBHYW1lT2JqZWN0SW5mb1tdLCBkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRyaWdnZXJDb2xsaXNpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB0cmlnZ2VyQ29sbGlzaW9ucy5maW5kKHQgPT4gdC5uYW1lID09PSBcInNoaWJhX2FjdGlvblwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChldmVudCAmJiBldmVudC5wcm9wZXJ0aWVzLnZlbG9jaXR5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dG9Nb3ZlRGlyZWN0aW9uID0gZXZlbnQucHJvcGVydGllcy52ZWxvY2l0eSA+IDAgPyAxIDogLTE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmUgPSB0aGlzLmF1dG9Nb3ZlRGlyZWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pZGxlVGltZXIgIT09IG51bGwgJiYgdGhpcy5pZGxlVGltZXIgPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmlkbGVUaW1lciAtPSBkdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLndhbGtUaW1lciAhPT0gbnVsbCAmJiB0aGlzLndhbGtUaW1lciA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2Fsa1RpbWVyIC09IGR0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaWRsZVRpbWVyICYmIHRoaXMuaWRsZVRpbWVyIDw9IDAgJiYgdGhpcy53YWxrVGltZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy53YWxrVGltZXIgPSBybmRJdGVtKFdBTEtfRFVSQVRJT04pO1xyXG4gICAgICAgICAgICB0aGlzLmlkbGVUaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZSA9IHRoaXMuYXV0b01vdmVEaXJlY3Rpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy53YWxrVGltZXIgJiYgdGhpcy53YWxrVGltZXIgPD0gMCAmJiB0aGlzLmlkbGVUaW1lciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmlkbGVUaW1lciA9IHJuZEl0ZW0oSURMRV9EVVJBVElPTik7XHJcbiAgICAgICAgICAgIHRoaXMud2Fsa1RpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIGJvbmUgaXMgbmVhclxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgQ29udmVyc2F0aW9uLmdldEdsb2JhbHMoKVtcIiRnb3RCb25lUXVlc3RcIl1cclxuICAgICAgICAgICAgJiYgIUNvbnZlcnNhdGlvbi5nZXRHbG9iYWxzKClbXCIkYnJvdWdodEJvbmVcIl1cclxuICAgICAgICAgICAgJiYgdGhpcy5kaXN0YW5jZVRvKHRoaXMuc2NlbmUuYm9uZSkgPCAxMDBcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgQ29udmVyc2F0aW9uLnNldEdsb2JhbChcImJyb3VnaHRCb25lXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgdGhpcy50aGluayhcIldvdyEgQm9uZSEhIVwiLCAyMDAwKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLnJ1bkFjdGlvbihcImVuYWJsZVwiLCBudWxsLCBbXCJzaGliYVwiLCBcInNoaWJhMlwiXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmx5aW5nQXdheVVwZGF0ZUxvZ2ljKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1vdmUgPSAxO1xyXG4gICAgICAgIHRoaXMubWluQWx0aXR1ZGUgKz0gMjAgKiBkdDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuanVtcFRpbWVyID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmp1bXBUaW1lciAtPSBkdDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuanVtcFRpbWVyIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5qdW1wVGltZXIgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy55IDwgdGhpcy5taW5BbHRpdHVkZSAmJiB0aGlzLmNhbkp1bXAoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmp1bXAoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZmx5aW5nVGltZSArPSBkdDtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNhaWRGYXJld2VsbCAmJiB0aGlzLmZseWluZ1RpbWUgPiAyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2FpZEZhcmV3ZWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy50aGluayhcIlNlZSB5b3Ugb24gdGhlIG1vdW50YWluIVwiLCAzMDAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZseWluZ1RpbWUgPj0gRkxZSU5HX0RVUkFUSU9OKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUE2QkE7QUFDQTtBQWpCQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzVkE7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFYQTtBQURBO0FBOEJBO0FBN0JBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/entities/Shiba.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Sign.js":
    /*!******************************!*\
      !*** ./lib/entities/Sign.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Sign_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sign = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet Sign = Sign_1 = class Sign extends NPC_1.NPC {\n    constructor(scene, x, y, properties) {\n        super(scene, x, y, 16, 16);\n        this.conversation = this.generateConversation(this.prepareContent(properties.content));\n    }\n    prepareContent(content) {\n        if (!content) {\n            return [\"The sign is empty.\"];\n        }\n        return content.split(\":::\");\n    }\n    getInteractionText() {\n        return \"Read sign\";\n    }\n    generateConversation(lines) {\n        const json = { \"entry\": [] };\n        lines.forEach((line, index) => {\n            if (index === lines.length - 1) {\n                line += \" @entry !end\";\n            }\n            json.entry.push(line);\n        });\n        return new Conversation_1.Conversation(json, this);\n    }\n    draw(ctx) {\n        this.scene.renderer.add({\n            type: Renderer_1.RenderingType.ASEPRITE,\n            layer: Renderer_1.RenderingLayer.ENTITIES,\n            translation: { x: this.x, y: -this.y },\n            position: {\n                x: -Sign_1.sprite.width >> 1,\n                y: -Sign_1.sprite.height\n            },\n            asset: Sign_1.sprite,\n            animationTag: \"idle\",\n            time: this.scene.gameTime * 1000\n        });\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update() { }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/sign.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Sign, \"sprite\", void 0);\nSign = Sign_1 = tslib_1.__decorate([\n    Entity_1.entity(\"sign\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number, Object])\n], Sign);\nexports.Sign = Sign;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU2lnbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9TaWduLnRzP2Y0ZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgZW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBHYW1lT2JqZWN0UHJvcGVydGllcyB9IGZyb20gXCIuLi9NYXBJbmZvXCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IE5QQyB9IGZyb20gXCIuL05QQ1wiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciwgUmVuZGVyaW5nVHlwZSB9IGZyb20gXCIuLi9SZW5kZXJlclwiO1xyXG5cclxuQGVudGl0eShcInNpZ25cIilcclxuZXhwb3J0IGNsYXNzIFNpZ24gZXh0ZW5kcyBOUEMge1xyXG4gICAgQGFzc2V0KFwic3ByaXRlcy9zaWduLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNwcml0ZTogQXNlcHJpdGU7XHJcbiAgICBwdWJsaWMgY29udmVyc2F0aW9uOiBDb252ZXJzYXRpb247XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNjZW5lOiBHYW1lU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyLCBwcm9wZXJ0aWVzOiBHYW1lT2JqZWN0UHJvcGVydGllcykge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCAxNiwgMTYpO1xyXG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uID0gdGhpcy5nZW5lcmF0ZUNvbnZlcnNhdGlvbih0aGlzLnByZXBhcmVDb250ZW50KHByb3BlcnRpZXMuY29udGVudCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHJlcGFyZUNvbnRlbnQoY29udGVudD86IHN0cmluZyApOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXCJUaGUgc2lnbiBpcyBlbXB0eS5cIl07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29udGVudC5zcGxpdChcIjo6OlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW50ZXJhY3Rpb25UZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiUmVhZCBzaWduXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUNvbnZlcnNhdGlvbihsaW5lczogc3RyaW5nW10pOiBDb252ZXJzYXRpb24ge1xyXG4gICAgICAgIGNvbnN0IGpzb246IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHsgXCJlbnRyeVwiOiBbXSB9O1xyXG5cclxuICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IGxpbmVzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGxpbmUgKz0gXCIgQGVudHJ5ICFlbmRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBqc29uLmVudHJ5LnB1c2gobGluZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgQ29udmVyc2F0aW9uKGpzb24sIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGQoe1xyXG4gICAgICAgICAgICB0eXBlOiBSZW5kZXJpbmdUeXBlLkFTRVBSSVRFLFxyXG4gICAgICAgICAgICBsYXllcjogUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMsXHJcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uOiB7IHg6IHRoaXMueCwgeTogLXRoaXMueSB9LFxyXG4gICAgICAgICAgICBwb3NpdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgeDogLVNpZ24uc3ByaXRlLndpZHRoID4+IDEsXHJcbiAgICAgICAgICAgICAgICB5OiAtU2lnbi5zcHJpdGUuaGVpZ2h0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFzc2V0OiBTaWduLnNwcml0ZSxcclxuICAgICAgICAgICAgYW5pbWF0aW9uVGFnOiBcImlkbGVcIixcclxuICAgICAgICAgICAgdGltZTogdGhpcy5zY2VuZS5nYW1lVGltZSAqIDEwMDBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3BlZWNoQnViYmxlLmRyYXcoY3R4KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge31cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBdkRBO0FBREE7QUFDQTtBQUFBO0FBRkE7QUFEQTtBQU1BO0FBTEE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Sign.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Skull.js":
    /*!*******************************!*\
      !*** ./lib/entities/Skull.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Skull_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Skull = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst PhysicsEntity_1 = __webpack_require__(/*! ./PhysicsEntity */ \"./lib/entities/PhysicsEntity.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet Skull = Skull_1 = class Skull extends PhysicsEntity_1.PhysicsEntity {\n    constructor(scene, x, y) {\n        super(scene, x, y, 16, 16);\n    }\n    draw() {\n        this.scene.renderer.addAseprite(Skull_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n    }\n    isCarried() {\n        return this.scene.player.isCarrying(this);\n    }\n    update(dt) {\n        super.update(dt);\n        const player = this.scene.player;\n        if (!this.isCarried() && this.distanceTo(player) < 20) {\n            player.carry(this);\n        }\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/skull.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Skull, \"sprite\", void 0);\nSkull = Skull_1 = tslib_1.__decorate([\n    Entity_1.entity(\"skull\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Skull);\nexports.Skull = Skull;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU2t1bGwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvU2t1bGwudHM/ODI0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgZW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBQaHlzaWNzRW50aXR5IH0gZnJvbSBcIi4vUGh5c2ljc0VudGl0eVwiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciB9IGZyb20gXCIuLi9SZW5kZXJlclwiO1xyXG5cclxuQGVudGl0eShcInNrdWxsXCIpXHJcbmV4cG9ydCBjbGFzcyBTa3VsbCBleHRlbmRzIFBoeXNpY3NFbnRpdHkge1xyXG4gICAgQGFzc2V0KFwic3ByaXRlcy9za3VsbC5hc2Vwcml0ZS5qc29uXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzcHJpdGU6IEFzZXByaXRlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCAxNiwgMTYpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoU2t1bGwuc3ByaXRlLCBcImlkbGVcIiwgdGhpcy54LCB0aGlzLnksIFJlbmRlcmluZ0xheWVyLkVOVElUSUVTKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzQ2FycmllZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZS5wbGF5ZXIuaXNDYXJyeWluZyh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci51cGRhdGUoZHQpO1xyXG5cclxuICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLnNjZW5lLnBsYXllcjtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2FycmllZCgpICYmIHRoaXMuZGlzdGFuY2VUbyhwbGF5ZXIpIDwgMjApIHtcclxuICAgICAgICAgICAgcGxheWVyLmNhcnJ5KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0JBO0FBREE7QUFDQTtBQUFBO0FBRkE7QUFEQTtBQUtBO0FBSkE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Skull.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Snowball.js":
    /*!**********************************!*\
      !*** ./lib/entities/Snowball.js ***!
      \**********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Snowball = void 0;\nconst PhysicsEntity_1 = __webpack_require__(/*! ./PhysicsEntity */ \"./lib/entities/PhysicsEntity.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nclass Snowball extends PhysicsEntity_1.PhysicsEntity {\n    constructor(scene, x, y, velocityX, velocityY) {\n        super(scene, x, y, 0.25 * constants_1.PIXEL_PER_METER, 0.25 * constants_1.PIXEL_PER_METER);\n        this.setVelocity(velocityX, velocityY);\n    }\n    draw(ctx) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.translate(this.x, -this.y);\n        ctx.strokeStyle = \"black\";\n        ctx.fillStyle = \"white\";\n        ctx.beginPath();\n        ctx.arc(0, -this.height / 2, this.width / 2, 0, Math.PI * 2, false);\n        ctx.fill();\n        ctx.stroke();\n        ctx.restore();\n    }\n}\nexports.Snowball = Snowball;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU25vd2JhbGwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvU25vd2JhbGwudHM/ZDQzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBQaHlzaWNzRW50aXR5IH0gZnJvbSBcIi4vUGh5c2ljc0VudGl0eVwiO1xyXG5pbXBvcnQgeyBQSVhFTF9QRVJfTUVURVIgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU25vd2JhbGwgZXh0ZW5kcyBQaHlzaWNzRW50aXR5IHtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlciwgdmVsb2NpdHlYOiBudW1iZXIsIHZlbG9jaXR5WTogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIHgsIHksIDAuMjUgKiBQSVhFTF9QRVJfTUVURVIsIDAuMjUgKiBQSVhFTF9QRVJfTUVURVIpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFZlbG9jaXR5KHZlbG9jaXR5WCwgdmVsb2NpdHlZKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC50cmFuc2xhdGUodGhpcy54LCAtdGhpcy55KTtcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LmFyYygwLCAtdGhpcy5oZWlnaHQgLyAyLCB0aGlzLndpZHRoIC8gMiwgMCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5CQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Snowball.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Stone.js":
    /*!*******************************!*\
      !*** ./lib/entities/Stone.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Stone_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Stone = exports.StoneState = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst Face_1 = __webpack_require__(/*! ../Face */ \"./lib/Face.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nvar StoneState;\n(function (StoneState) {\n    StoneState[StoneState[\"DEFAULT\"] = 0] = \"DEFAULT\";\n    StoneState[StoneState[\"SWIMMING\"] = 1] = \"SWIMMING\";\n    StoneState[StoneState[\"FLOATING\"] = 2] = \"FLOATING\";\n})(StoneState = exports.StoneState || (exports.StoneState = {}));\nlet Stone = Stone_1 = class Stone extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 26, 50);\n        this.state = StoneState.DEFAULT;\n        this.direction = -1;\n        this.face = new Face_1.Face(scene, this, Face_1.EyeType.STONE, 0, 21);\n        this.lookAtPlayer = false;\n        this.carryHeight = 16;\n        const floatingPosition = this.scene.pointsOfInterest.find(poi => poi.name === \"stone_floating_position\");\n        if (!floatingPosition) {\n            throw new Error(\"Could not find \\\"stone_floating_position\\\" point of interest in game scene\");\n        }\n        this.floatingPosition = floatingPosition;\n    }\n    showDialoguePrompt() {\n        if (!super.showDialoguePrompt()) {\n            return false;\n        }\n        return (this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() >= Quests_1.QuestATrigger.PLANTED_SEED &&\n            this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() < Quests_1.QuestATrigger.GOT_STONE);\n    }\n    draw(ctx) {\n        this.scene.renderer.addAseprite(Stone_1.sprite, \"idle\", this.x, this.y - 1, Renderer_1.RenderingLayer.ENTITIES, this.direction);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        this.drawFace(ctx, false);\n        if (this.showDialoguePrompt()) {\n            this.drawDialoguePrompt();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        if (this.state === StoneState.DEFAULT) {\n            if (this.scene.world.collidesWith(this.x, this.y - 5) === World_1.Environment.WATER) {\n                this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.THROWN_STONE_INTO_WATER);\n                this.state = StoneState.SWIMMING;\n                this.setVelocity(0, 0);\n                this.setFloating(true);\n                this.y = this.floatingPosition.y;\n                Stone_1.successSound.play();\n                this.scene.game.campaign.runAction(\"enable\", null, [\"stone\", \"stone2\"]);\n                this.scene.game.campaign.runAction(\"enable\", null, [\"flameboy\", \"flameboy2\"]);\n                this.scene.game.campaign.runAction(\"enable\", null, [\"caveman\", \"caveman2\"]);\n            }\n        }\n        else if (this.state === StoneState.SWIMMING) {\n            const diffX = this.floatingPosition.x - this.x;\n            this.direction = Math.sign(diffX);\n            const moveX = Math.min(20, Math.abs(diffX)) * Math.sign(diffX);\n            this.x += moveX * dt;\n            if (Math.abs(moveX) < 2) {\n                this.state = StoneState.FLOATING;\n            }\n            this.setVelocityY(Math.abs(((util_1.now() % 2000) - 1000) / 1000) - 0.5);\n        }\n        else if (this.state === StoneState.FLOATING) {\n            this.x = this.floatingPosition.x;\n            this.direction = -1;\n            this.setVelocityY(Math.abs(((util_1.now() % 2000) - 1000) / 1000) - 0.5);\n        }\n        this.dialoguePrompt.update(dt, this.x, this.y + 48);\n        this.speechBubble.update(this.x, this.y);\n    }\n    collidesWith(x, y) {\n        if (this.state === StoneState.FLOATING || this.state === StoneState.SWIMMING) {\n            if (x >= this.x - this.width / 2\n                && x <= this.x + this.width / 2\n                && y >= this.y\n                && y <= this.y + this.height) {\n                return World_1.Environment.SOLID;\n            }\n        }\n        return World_1.Environment.AIR;\n    }\n    isCarried() {\n        return this.scene.player.isCarrying(this);\n    }\n    pickUp() {\n        var _a;\n        (_a = this.face) === null || _a === void 0 ? void 0 : _a.setMode(Face_1.FaceModes.AMUSED);\n        this.scene.player.carry(this);\n        this.scene.game.campaign.runAction(\"enable\", null, [\"flameboy\", \"flameboy4\"]);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/stone.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Stone, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/throwing/success.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Stone, \"successSound\", void 0);\nStone = Stone_1 = tslib_1.__decorate([\n    Entity_1.entity(\"stone\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Stone);\nexports.Stone = Stone;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU3RvbmUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50aXRpZXMvU3RvbmUudHM/ZTA5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgQ29sbGlkYWJsZUdhbWVPYmplY3QsIEdhbWVTY2VuZSB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vV29ybGRcIjtcclxuaW1wb3J0IHsgRXllVHlwZSwgRmFjZSwgRmFjZU1vZGVzIH0gZnJvbSBcIi4uL0ZhY2VcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdEluZm8gfSBmcm9tIFwiLi4vTWFwSW5mb1wiO1xyXG5pbXBvcnQgeyBub3cgfSBmcm9tIFwiLi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBOUEMgfSBmcm9tIFwiLi9OUENcIjtcclxuaW1wb3J0IHsgUXVlc3RBVHJpZ2dlciwgUXVlc3RLZXkgfSBmcm9tIFwiLi4vUXVlc3RzXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFNvdW5kIH0gZnJvbSBcIi4uL1NvdW5kXCI7XHJcblxyXG5leHBvcnQgZW51bSBTdG9uZVN0YXRlIHtcclxuICAgIERFRkFVTFQgPSAwLFxyXG4gICAgU1dJTU1JTkcgPSAxLFxyXG4gICAgRkxPQVRJTkcgPSAyXHJcbn1cclxuXHJcbkBlbnRpdHkoXCJzdG9uZVwiKVxyXG5leHBvcnQgY2xhc3MgU3RvbmUgZXh0ZW5kcyBOUEMgaW1wbGVtZW50cyBDb2xsaWRhYmxlR2FtZU9iamVjdCB7XHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL3N0b25lLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNwcml0ZTogQXNlcHJpdGU7XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL3Rocm93aW5nL3N1Y2Nlc3MubXAzXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzdWNjZXNzU291bmQ6IFNvdW5kO1xyXG5cclxuICAgIHByaXZhdGUgZmxvYXRpbmdQb3NpdGlvbjogR2FtZU9iamVjdEluZm87XHJcblxyXG4gICAgcHVibGljIHN0YXRlOiBTdG9uZVN0YXRlID0gU3RvbmVTdGF0ZS5ERUZBVUxUO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCAyNiwgNTApO1xyXG5cclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IC0xO1xyXG4gICAgICAgIHRoaXMuZmFjZSA9IG5ldyBGYWNlKHNjZW5lLCB0aGlzLCBFeWVUeXBlLlNUT05FLCAwLCAyMSk7XHJcbiAgICAgICAgdGhpcy5sb29rQXRQbGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNhcnJ5SGVpZ2h0ID0gMTY7XHJcblxyXG4gICAgICAgIGNvbnN0IGZsb2F0aW5nUG9zaXRpb24gPSB0aGlzLnNjZW5lLnBvaW50c09mSW50ZXJlc3QuZmluZChcclxuICAgICAgICAgICAgcG9pID0+IHBvaS5uYW1lID09PSBcInN0b25lX2Zsb2F0aW5nX3Bvc2l0aW9uXCJcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoIWZsb2F0aW5nUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yIChcIkNvdWxkIG5vdCBmaW5kIFxcXCJzdG9uZV9mbG9hdGluZ19wb3NpdGlvblxcXCIgcG9pbnQgb2YgaW50ZXJlc3QgaW4gZ2FtZSBzY2VuZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZmxvYXRpbmdQb3NpdGlvbiA9IGZsb2F0aW5nUG9zaXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNob3dEaWFsb2d1ZVByb21wdCgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXN1cGVyLnNob3dEaWFsb2d1ZVByb21wdCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS5nZXRIaWdoZXN0VHJpZ2dlckluZGV4KCkgPj0gUXVlc3RBVHJpZ2dlci5QTEFOVEVEX1NFRUQgJiZcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA8IFF1ZXN0QVRyaWdnZXIuR09UX1NUT05FXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoXHJcbiAgICAgICAgICAgIFN0b25lLnNwcml0ZSxcclxuICAgICAgICAgICAgXCJpZGxlXCIsXHJcbiAgICAgICAgICAgIHRoaXMueCwgdGhpcy55IC0gMSxcclxuICAgICAgICAgICAgUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMsXHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd0ZhY2UoY3R4LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dEaWFsb2d1ZVByb21wdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0RpYWxvZ3VlUHJvbXB0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS5kcmF3KGN0eCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFN0b25lU3RhdGUuREVGQVVMVCkge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLndvcmxkLmNvbGxpZGVzV2l0aCh0aGlzLngsIHRoaXMueSAtIDUpID09PSBFbnZpcm9ubWVudC5XQVRFUlxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS50cmlnZ2VyKFxyXG4gICAgICAgICAgICAgICAgICAgIFF1ZXN0QVRyaWdnZXIuVEhST1dOX1NUT05FX0lOVE9fV0FURVJcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0b25lU3RhdGUuU1dJTU1JTkc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZlbG9jaXR5KDAsIDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGbG9hdGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMueSA9IHRoaXMuZmxvYXRpbmdQb3NpdGlvbi55O1xyXG4gICAgICAgICAgICAgICAgU3RvbmUuc3VjY2Vzc1NvdW5kLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5ydW5BY3Rpb24oXCJlbmFibGVcIiwgbnVsbCwgW1wic3RvbmVcIiwgXCJzdG9uZTJcIl0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLnJ1bkFjdGlvbihcImVuYWJsZVwiLCBudWxsLCBbXCJmbGFtZWJveVwiLCBcImZsYW1lYm95MlwiXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24ucnVuQWN0aW9uKFwiZW5hYmxlXCIsIG51bGwsIFtcImNhdmVtYW5cIiwgXCJjYXZlbWFuMlwiXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFN0b25lU3RhdGUuU1dJTU1JTkcpIHtcclxuICAgICAgICAgICAgY29uc3QgZGlmZlggPSB0aGlzLmZsb2F0aW5nUG9zaXRpb24ueCAtIHRoaXMueDtcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBNYXRoLnNpZ24oZGlmZlgpO1xyXG4gICAgICAgICAgICBjb25zdCBtb3ZlWCA9IE1hdGgubWluKDIwLCBNYXRoLmFicyhkaWZmWCkpICogTWF0aC5zaWduKGRpZmZYKTtcclxuICAgICAgICAgICAgdGhpcy54ICs9IG1vdmVYICogZHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMobW92ZVgpIDwgMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0b25lU3RhdGUuRkxPQVRJTkc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlZKE1hdGguYWJzKCgobm93KCkgJSAyMDAwKSAtIDEwMDApIC8gMTAwMCkgLSAwLjUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU3RvbmVTdGF0ZS5GTE9BVElORykge1xyXG4gICAgICAgICAgICB0aGlzLnggPSB0aGlzLmZsb2F0aW5nUG9zaXRpb24ueDtcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAtMTtcclxuICAgICAgICAgICAgdGhpcy5zZXRWZWxvY2l0eVkoTWF0aC5hYnMoKChub3coKSAlIDIwMDApIC0gMTAwMCkgLyAxMDAwKSAtIDAuNSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRpYWxvZ3VlUHJvbXB0LnVwZGF0ZShkdCwgdGhpcy54LCB0aGlzLnkgKyA0OCk7XHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29sbGlkZXNXaXRoKHg6IG51bWJlciwgeTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU3RvbmVTdGF0ZS5GTE9BVElORyB8fCB0aGlzLnN0YXRlID09PSBTdG9uZVN0YXRlLlNXSU1NSU5HKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHggPj0gdGhpcy54IC0gdGhpcy53aWR0aCAvIDJcclxuICAgICAgICAgICAgICAgICYmIHggPD0gdGhpcy54ICsgdGhpcy53aWR0aCAvIDJcclxuICAgICAgICAgICAgICAgICYmIHkgPj0gdGhpcy55XHJcbiAgICAgICAgICAgICAgICAmJiB5IDw9IHRoaXMueSArIHRoaXMuaGVpZ2h0XHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVudmlyb25tZW50LlNPTElEO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gRW52aXJvbm1lbnQuQUlSO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0NhcnJpZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUucGxheWVyLmlzQ2FycnlpbmcodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBpY2tVcCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZhY2U/LnNldE1vZGUoRmFjZU1vZGVzLkFNVVNFRCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5wbGF5ZXIuY2FycnkodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLnJ1bkFjdGlvbihcImVuYWJsZVwiLCBudWxsLCBbXCJmbGFtZWJveVwiLCBcImZsYW1lYm95NFwiXSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVdBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5SEE7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUxBO0FBREE7QUFZQTtBQVhBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/entities/Stone.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/StoneDisciple.js":
    /*!***************************************!*\
      !*** ./lib/entities/StoneDisciple.js ***!
      \***************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar StoneDisciple_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StoneDisciple = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst Face_1 = __webpack_require__(/*! ../Face */ \"./lib/Face.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet StoneDisciple = StoneDisciple_1 = class StoneDisciple extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 32, 26);\n        this.direction = -1;\n        this.lookAtPlayer = true;\n        this.face = new Face_1.Face(scene, this, Face_1.EyeType.STONEDISCIPLE, 0, 0);\n    }\n    showDialoguePrompt() {\n        if (!super.showDialoguePrompt()) {\n            return false;\n        }\n        const talkedToStoneDisciple = Conversation_1.Conversation.getGlobals()[\"$talkedToStoneDisciple\"];\n        const talkedToStoneDiscipleAgain = Conversation_1.Conversation.getGlobals()[\"$talkedToStoneDiscipleAgain\"];\n        const gotTeleported = Conversation_1.Conversation.getGlobals()[\"$gotTeleported\"];\n        return (talkedToStoneDisciple === undefined\n            || (gotTeleported !== undefined && talkedToStoneDiscipleAgain === undefined));\n    }\n    draw(ctx) {\n        this.scene.renderer.addAseprite(StoneDisciple_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES, this.direction);\n        this.drawFace(ctx, false);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        if (this.showDialoguePrompt()) {\n            this.drawDialoguePrompt();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        this.dialoguePrompt.update(dt, this.x, this.y + this.height);\n        this.speechBubble.update(this.x, this.y);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/stonedisciple.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], StoneDisciple, \"sprite\", void 0);\nStoneDisciple = StoneDisciple_1 = tslib_1.__decorate([\n    Entity_1.entity(\"stonedisciple\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], StoneDisciple);\nexports.StoneDisciple = StoneDisciple;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU3RvbmVEaXNjaXBsZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9TdG9uZURpc2NpcGxlLnRzPzFlY2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgZW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBFeWVUeXBlLCBGYWNlIH0gZnJvbSBcIi4uL0ZhY2VcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4uL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgTlBDIH0gZnJvbSBcIi4vTlBDXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcblxyXG5AZW50aXR5KFwic3RvbmVkaXNjaXBsZVwiKVxyXG5leHBvcnQgY2xhc3MgU3RvbmVEaXNjaXBsZSBleHRlbmRzIE5QQyB7XHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL3N0b25lZGlzY2lwbGUuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMzIsIDI2KTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IC0xO1xyXG4gICAgICAgIHRoaXMubG9va0F0UGxheWVyID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmZhY2UgPSBuZXcgRmFjZShzY2VuZSwgdGhpcywgRXllVHlwZS5TVE9ORURJU0NJUExFLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc2hvd0RpYWxvZ3VlUHJvbXB0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghc3VwZXIuc2hvd0RpYWxvZ3VlUHJvbXB0KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGFsa2VkVG9TdG9uZURpc2NpcGxlID0gQ29udmVyc2F0aW9uLmdldEdsb2JhbHMoKVtcIiR0YWxrZWRUb1N0b25lRGlzY2lwbGVcIl07XHJcbiAgICAgICAgY29uc3QgdGFsa2VkVG9TdG9uZURpc2NpcGxlQWdhaW4gPSBDb252ZXJzYXRpb24uZ2V0R2xvYmFscygpW1wiJHRhbGtlZFRvU3RvbmVEaXNjaXBsZUFnYWluXCJdO1xyXG4gICAgICAgIGNvbnN0IGdvdFRlbGVwb3J0ZWQgPSBDb252ZXJzYXRpb24uZ2V0R2xvYmFscygpW1wiJGdvdFRlbGVwb3J0ZWRcIl07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRhbGtlZFRvU3RvbmVEaXNjaXBsZSA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIHx8IChnb3RUZWxlcG9ydGVkICE9PSB1bmRlZmluZWQgJiYgdGFsa2VkVG9TdG9uZURpc2NpcGxlQWdhaW4gPT09IHVuZGVmaW5lZClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShcclxuICAgICAgICAgICAgU3RvbmVEaXNjaXBsZS5zcHJpdGUsIFwiaWRsZVwiLCB0aGlzLngsIHRoaXMueSwgUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMsIHRoaXMuZGlyZWN0aW9uXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5kcmF3RmFjZShjdHgsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dEaWFsb2d1ZVByb21wdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0RpYWxvZ3VlUHJvbXB0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS5kcmF3KGN0eCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuXHJcbiAgICAgICAgdGhpcy5kaWFsb2d1ZVByb21wdC51cGRhdGUoZHQsIHRoaXMueCwgdGhpcy55ICsgdGhpcy5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuc3BlZWNoQnViYmxlLnVwZGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQWhEQTtBQURBO0FBQ0E7QUFBQTtBQUZBO0FBREE7QUFLQTtBQUpBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/entities/StoneDisciple.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/SuperThrow.js":
    /*!************************************!*\
      !*** ./lib/entities/SuperThrow.js ***!
      \************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar SuperThrow_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SuperThrow = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst superthrow_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ../../assets/dialog/superthrow.dialog.json */ \"./assets/dialog/superthrow.dialog.json\"));\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet SuperThrow = SuperThrow_1 = class SuperThrow extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 18, 22);\n        this.floatAmount = 4;\n        this.floatSpeed = 2;\n        this.lookAtPlayer = false;\n        this.conversation = new Conversation_1.Conversation(superthrow_dialog_json_1.default, this);\n    }\n    getInteractionText() {\n        if (!this.met) {\n            return \"Touch\";\n        }\n        else {\n            return \"Talk\";\n        }\n    }\n    draw(ctx) {\n        const floatOffsetY = Math.sin(this.timeAlive * this.floatSpeed) * this.floatAmount;\n        this.scene.renderer.addAseprite(SuperThrow_1.sprite, \"idle\", this.x, this.y - floatOffsetY, Renderer_1.RenderingLayer.ENTITIES, this.direction);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        this.speechBubble.update(this.x, this.y);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/superthrow.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], SuperThrow, \"sprite\", void 0);\nSuperThrow = SuperThrow_1 = tslib_1.__decorate([\n    Entity_1.entity(\"superthrow\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], SuperThrow);\nexports.SuperThrow = SuperThrow;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvU3VwZXJUaHJvdy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9TdXBlclRocm93LnRzPzI0ZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IGNvbnZlcnNhdGlvbiBmcm9tIFwiLi4vLi4vYXNzZXRzL2RpYWxvZy9zdXBlcnRocm93LmRpYWxvZy5qc29uXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4uL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgTlBDIH0gZnJvbSBcIi4vTlBDXCI7XHJcbmltcG9ydCB7IFJlbmRlcmluZ0xheWVyIH0gZnJvbSBcIi4uL1JlbmRlcmVyXCI7XHJcblxyXG5AZW50aXR5KFwic3VwZXJ0aHJvd1wiKVxyXG5leHBvcnQgY2xhc3MgU3VwZXJUaHJvdyBleHRlbmRzIE5QQyB7XHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL3N1cGVydGhyb3cuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuICAgIHByaXZhdGUgZmxvYXRBbW91bnQgPSA0O1xyXG4gICAgcHJpdmF0ZSBmbG9hdFNwZWVkID0gMjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMTgsIDIyKTtcclxuICAgICAgICB0aGlzLmxvb2tBdFBsYXllciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uID0gbmV3IENvbnZlcnNhdGlvbihjb252ZXJzYXRpb24sIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRJbnRlcmFjdGlvblRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIXRoaXMubWV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlRvdWNoXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiVGFsa1wiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGZsb2F0T2Zmc2V0WSA9IE1hdGguc2luKHRoaXMudGltZUFsaXZlICogdGhpcy5mbG9hdFNwZWVkKSAqIHRoaXMuZmxvYXRBbW91bnQ7XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoXHJcbiAgICAgICAgICAgIFN1cGVyVGhyb3cuc3ByaXRlLFxyXG4gICAgICAgICAgICBcImlkbGVcIixcclxuICAgICAgICAgICAgdGhpcy54LCB0aGlzLnkgLSBmbG9hdE9mZnNldFksXHJcbiAgICAgICAgICAgIFJlbmRlcmluZ0xheWVyLkVOVElUSUVTLFxyXG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvblxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnNob3dCb3VuZHMpIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3Qm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS5kcmF3KGN0eCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBTUE7QUFDQTtBQUpBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUF6Q0E7QUFEQTtBQUNBO0FBQUE7QUFGQTtBQURBO0FBT0E7QUFOQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/entities/SuperThrow.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Tree.js":
    /*!******************************!*\
      !*** ./lib/entities/Tree.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Tree_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Tree = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst Face_1 = __webpack_require__(/*! ../Face */ \"./lib/Face.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst Seed_1 = __webpack_require__(/*! ./Seed */ \"./lib/entities/Seed.js\");\nconst Wood_1 = __webpack_require__(/*! ./Wood */ \"./lib/entities/Wood.js\");\nlet Tree = Tree_1 = class Tree extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 78, 140);\n        this.face = new Face_1.Face(scene, this, Face_1.EyeType.TREE, 5, 94);\n        this.seed = new Seed_1.Seed(scene, x, y);\n        this.wood = new Wood_1.Wood(scene, x, y);\n        this.startDialog();\n    }\n    showDialoguePrompt() {\n        if (!super.showDialoguePrompt()) {\n            return false;\n        }\n        return (this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() >= Quests_1.QuestATrigger.GOT_QUEST_FROM_FIRE\n            && this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() < Quests_1.QuestATrigger.GOT_QUEST_FROM_TREE) || (this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() >= Quests_1.QuestATrigger.MADE_RAIN\n            && this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).getHighestTriggerIndex() < Quests_1.QuestATrigger.TREE_DROPPED_WOOD);\n    }\n    draw(ctx) {\n        this.scene.renderer.addAseprite(Tree_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        this.drawFace(ctx);\n        if (this.showDialoguePrompt()) {\n            this.drawDialoguePrompt();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        if (this.showDialoguePrompt()) {\n            this.dialoguePrompt.update(dt, this.x + 4, this.y + 128);\n        }\n    }\n    startDialog() {\n        this.speechBubble.update(this.x, this.y);\n    }\n    spawnSeed() {\n        if (!this.scene.gameObjects.includes(this.seed)) {\n            this.scene.addGameObject(this.seed);\n        }\n        this.seed.resetState();\n        this.seed.x = this.x;\n        this.seed.y = this.y + this.height / 2;\n        this.seed.setVelocity(5, 0);\n        return this.seed;\n    }\n    spawnWood() {\n        if (!this.scene.gameObjects.includes(this.wood)) {\n            this.scene.addGameObject(this.wood);\n        }\n        this.wood.resetState();\n        this.wood.x = this.x;\n        this.wood.y = this.y + this.height / 2;\n        this.wood.setVelocity(5, 0);\n        return this.wood;\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/tree.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Tree, \"sprite\", void 0);\nTree = Tree_1 = tslib_1.__decorate([\n    Entity_1.entity(\"tree\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Tree);\nexports.Tree = Tree;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvVHJlZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9UcmVlLnRzPzliMzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgRXllVHlwZSwgRmFjZSB9IGZyb20gXCIuLi9GYWNlXCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuLi9zY2VuZXMvR2FtZVNjZW5lXCI7XHJcbmltcG9ydCB7IE5QQyB9IGZyb20gXCIuL05QQ1wiO1xyXG5pbXBvcnQgeyBRdWVzdEFUcmlnZ2VyLCBRdWVzdEtleSB9IGZyb20gXCIuLi9RdWVzdHNcIjtcclxuaW1wb3J0IHsgUmVuZGVyaW5nTGF5ZXIgfSBmcm9tIFwiLi4vUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgU2VlZCB9IGZyb20gXCIuL1NlZWRcIjtcclxuaW1wb3J0IHsgV29vZCB9IGZyb20gXCIuL1dvb2RcIjtcclxuXHJcbkBlbnRpdHkoXCJ0cmVlXCIpXHJcbmV4cG9ydCBjbGFzcyBUcmVlIGV4dGVuZHMgTlBDIHtcclxuICAgIEBhc3NldChcInNwcml0ZXMvdHJlZS5hc2Vwcml0ZS5qc29uXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzcHJpdGU6IEFzZXByaXRlO1xyXG5cclxuICAgIHB1YmxpYyBzZWVkOiBTZWVkO1xyXG4gICAgcHJpdmF0ZSB3b29kOiBXb29kO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCA3OCwgMTQwKTtcclxuXHJcbiAgICAgICAgdGhpcy5mYWNlID0gbmV3IEZhY2Uoc2NlbmUsIHRoaXMsIEV5ZVR5cGUuVFJFRSwgNSwgOTQpO1xyXG4gICAgICAgIHRoaXMuc2VlZCA9IG5ldyBTZWVkKHNjZW5lLCB4LCB5KTtcclxuICAgICAgICB0aGlzLndvb2QgPSBuZXcgV29vZChzY2VuZSwgeCwgeSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnREaWFsb2coKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd0RpYWxvZ3VlUHJvbXB0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghc3VwZXIuc2hvd0RpYWxvZ3VlUHJvbXB0KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA+PSBRdWVzdEFUcmlnZ2VyLkdPVF9RVUVTVF9GUk9NX0ZJUkVcclxuICAgICAgICAgICAgJiYgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLmdldEhpZ2hlc3RUcmlnZ2VySW5kZXgoKSA8IFF1ZXN0QVRyaWdnZXIuR09UX1FVRVNUX0ZST01fVFJFRVxyXG4gICAgICAgICkgfHwgKFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkuZ2V0SGlnaGVzdFRyaWdnZXJJbmRleCgpID49IFF1ZXN0QVRyaWdnZXIuTUFERV9SQUlOXHJcbiAgICAgICAgICAgICYmIHRoaXMuc2NlbmUuZ2FtZS5jYW1wYWlnbi5nZXRRdWVzdChRdWVzdEtleS5BKS5nZXRIaWdoZXN0VHJpZ2dlckluZGV4KCkgPCBRdWVzdEFUcmlnZ2VyLlRSRUVfRFJPUFBFRF9XT09EXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoVHJlZS5zcHJpdGUsIFwiaWRsZVwiLCB0aGlzLngsIHRoaXMueSwgUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kcmF3RmFjZShjdHgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93RGlhbG9ndWVQcm9tcHQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdEaWFsb2d1ZVByb21wdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUuZHJhdyhjdHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShkdCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dEaWFsb2d1ZVByb21wdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9ndWVQcm9tcHQudXBkYXRlKGR0LCB0aGlzLnggKyA0LCB0aGlzLnkgKyAxMjgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnREaWFsb2coKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zcGVlY2hCdWJibGUudXBkYXRlKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3Bhd25TZWVkKCk6IFNlZWQge1xyXG4gICAgICAgIGlmICghdGhpcy5zY2VuZS5nYW1lT2JqZWN0cy5pbmNsdWRlcyh0aGlzLnNlZWQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkR2FtZU9iamVjdCh0aGlzLnNlZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWVkLnJlc2V0U3RhdGUoKTtcclxuICAgICAgICB0aGlzLnNlZWQueCA9IHRoaXMueDtcclxuICAgICAgICB0aGlzLnNlZWQueSA9IHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICB0aGlzLnNlZWQuc2V0VmVsb2NpdHkoNSwgMCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnNlZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNwYXduV29vZCgpOiBXb29kIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2NlbmUuZ2FtZU9iamVjdHMuaW5jbHVkZXModGhpcy53b29kKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmFkZEdhbWVPYmplY3QodGhpcy53b29kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMud29vZC5yZXNldFN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy53b29kLnggPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy53b29kLnkgPSB0aGlzLnkgKyB0aGlzLmhlaWdodCAvIDI7XHJcbiAgICAgICAgdGhpcy53b29kLnNldFZlbG9jaXR5KDUsIDApO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy53b29kO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQWxGQTtBQURBO0FBQ0E7QUFBQTtBQUZBO0FBREE7QUFRQTtBQVBBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/entities/Tree.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Wall.js":
    /*!******************************!*\
      !*** ./lib/entities/Wall.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Wall_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Wall = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nvar WallState;\n(function (WallState) {\n    WallState[WallState[\"SOLID\"] = 0] = \"SOLID\";\n    WallState[WallState[\"CRUMBLED\"] = 1] = \"CRUMBLED\";\n})(WallState || (WallState = {}));\nlet Wall = Wall_1 = class Wall extends Entity_1.Entity {\n    constructor(scene, x, y, properties) {\n        super(scene, x, y, 24, 72, false);\n        this.state = WallState.SOLID;\n        if (!properties.identifier) {\n            throw new Error(\"Cannot create Wall entity with no identifier property\");\n        }\n        this.identifier = properties.identifier;\n    }\n    draw() {\n        const animationTag = this.state === WallState.SOLID ? \"solid\" : \"crumbled\";\n        this.scene.renderer.addAseprite(Wall_1.sprite, animationTag, this.x, this.y, Renderer_1.RenderingLayer.ENTITIES);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n    }\n    update() { }\n    crumble() {\n        this.state = WallState.CRUMBLED;\n    }\n    collidesWith(x, y) {\n        if (this.state === WallState.SOLID\n            && x >= this.x - this.width / 2\n            && x <= this.x + this.width / 2\n            && y >= this.y\n            && y <= this.y + this.height) {\n            return World_1.Environment.SOLID;\n        }\n        return World_1.Environment.AIR;\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/wall.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Wall, \"sprite\", void 0);\nWall = Wall_1 = tslib_1.__decorate([\n    Entity_1.entity(\"wall\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number, Object])\n], Wall);\nexports.Wall = Wall;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvV2FsbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9XYWxsLnRzPzA4MmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IENvbGxpZGFibGVHYW1lT2JqZWN0LCBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBlbnRpdHksIEVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vV29ybGRcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdFByb3BlcnRpZXMgfSBmcm9tIFwiLi4vTWFwSW5mb1wiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciB9IGZyb20gXCIuLi9SZW5kZXJlclwiO1xyXG5cclxuZW51bSBXYWxsU3RhdGUgeyBTT0xJRCwgQ1JVTUJMRUQgfVxyXG5cclxuQGVudGl0eShcIndhbGxcIilcclxuZXhwb3J0IGNsYXNzIFdhbGwgZXh0ZW5kcyBFbnRpdHkgaW1wbGVtZW50cyBDb2xsaWRhYmxlR2FtZU9iamVjdCB7XHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL3dhbGwuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3ByaXRlOiBBc2Vwcml0ZTtcclxuICAgIHB1YmxpYyByZWFkb25seSBpZGVudGlmaWVyOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHN0YXRlID0gV2FsbFN0YXRlLlNPTElEO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlciwgcHJvcGVydGllczogR2FtZU9iamVjdFByb3BlcnRpZXMpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMjQsIDcyLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIGlmICghcHJvcGVydGllcy5pZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciAoXCJDYW5ub3QgY3JlYXRlIFdhbGwgZW50aXR5IHdpdGggbm8gaWRlbnRpZmllciBwcm9wZXJ0eVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaWRlbnRpZmllciA9IHByb3BlcnRpZXMuaWRlbnRpZmllcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBhbmltYXRpb25UYWcgPSB0aGlzLnN0YXRlID09PSBXYWxsU3RhdGUuU09MSUQgPyBcInNvbGlkXCIgOiBcImNydW1ibGVkXCI7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShXYWxsLnNwcml0ZSwgYW5pbWF0aW9uVGFnLCB0aGlzLngsIHRoaXMueSwgUmVuZGVyaW5nTGF5ZXIuRU5USVRJRVMpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge31cclxuXHJcbiAgICBwdWJsaWMgY3J1bWJsZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0YXRlID0gV2FsbFN0YXRlLkNSVU1CTEVEO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbGxpZGVzV2l0aCh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID09PSBXYWxsU3RhdGUuU09MSURcclxuICAgICAgICAgICAgJiYgeCA+PSB0aGlzLnggLSB0aGlzLndpZHRoIC8gMlxyXG4gICAgICAgICAgICAmJiB4IDw9IHRoaXMueCArIHRoaXMud2lkdGggLyAyXHJcbiAgICAgICAgICAgICYmIHkgPj0gdGhpcy55XHJcbiAgICAgICAgICAgICYmIHkgPD0gdGhpcy55ICsgdGhpcy5oZWlnaHRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudmlyb25tZW50LlNPTElEO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIEVudmlyb25tZW50LkFJUjtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBTUE7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBMUNBO0FBREE7QUFDQTtBQUFBO0FBRkE7QUFEQTtBQU9BO0FBTkE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Wall.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Window.js":
    /*!********************************!*\
      !*** ./lib/entities/Window.js ***!
      \********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Window = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst window_dialog_json_1 = tslib_1.__importDefault(__webpack_require__(/*! ./../../assets/dialog/window.dialog.json */ \"./assets/dialog/window.dialog.json\"));\nlet Window = class Window extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 16, 16);\n        this.conversation = new Conversation_1.Conversation(window_dialog_json_1.default, this);\n    }\n    getInteractionText() {\n        return \"Check window\";\n    }\n    draw(ctx) {\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update() { }\n};\nWindow = tslib_1.__decorate([\n    Entity_1.entity(\"window\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Window);\nexports.Window = Window;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvV2luZG93LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2VudGl0aWVzL1dpbmRvdy50cz85MjE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnZlcnNhdGlvbiB9IGZyb20gXCIuLi9Db252ZXJzYXRpb25cIjtcclxuaW1wb3J0IHsgZW50aXR5IH0gZnJvbSBcIi4uL0VudGl0eVwiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBOUEMgfSBmcm9tIFwiLi9OUENcIjtcclxuaW1wb3J0IGNvbnZlcnNhdGlvbiBmcm9tIFwiLi8uLi8uLi9hc3NldHMvZGlhbG9nL3dpbmRvdy5kaWFsb2cuanNvblwiO1xyXG5cclxuQGVudGl0eShcIndpbmRvd1wiKVxyXG5leHBvcnQgY2xhc3MgV2luZG93IGV4dGVuZHMgTlBDIHtcclxuICAgIHB1YmxpYyBjb252ZXJzYXRpb246IENvbnZlcnNhdGlvbjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMTYsIDE2KTtcclxuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbiA9IG5ldyBDb252ZXJzYXRpb24oY29udmVyc2F0aW9uLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW50ZXJhY3Rpb25UZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ2hlY2sgd2luZG93XCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZS5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS5kcmF3KGN0eCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHt9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBcEJBO0FBREE7QUFJQTtBQUhBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/entities/Window.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Wing.js":
    /*!******************************!*\
      !*** ./lib/entities/Wing.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Wing_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Wing = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst NPC_1 = __webpack_require__(/*! ./NPC */ \"./lib/entities/NPC.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nlet Wing = Wing_1 = class Wing extends NPC_1.NPC {\n    constructor(scene, x, y) {\n        super(scene, x, y, 24, 24);\n        this.floatAmount = 4;\n        this.floatSpeed = 2;\n    }\n    showDialoguePrompt() {\n        if (!super.showDialoguePrompt()) {\n            return false;\n        }\n        return (this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).isTriggered(Quests_1.QuestATrigger.PLANTED_SEED)\n            && !this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).isTriggered(Quests_1.QuestATrigger.LEARNED_RAIN_DANCE));\n    }\n    draw(ctx) {\n        const floatOffsetY = Math.sin(this.timeAlive * this.floatSpeed) * this.floatAmount;\n        this.scene.renderer.addAseprite(Wing_1.sprite, \"idle\", this.x, this.y - floatOffsetY, Renderer_1.RenderingLayer.ENTITIES);\n        if (this.scene.showBounds) {\n            this.drawBounds();\n        }\n        if (this.showDialoguePrompt()) {\n            this.drawDialoguePrompt();\n        }\n        this.speechBubble.draw(ctx);\n    }\n    update(dt) {\n        super.update(dt);\n        this.dialoguePrompt.update(dt, this.x, this.y + 16);\n        this.speechBubble.update(this.x, this.y);\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/wing.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Wing, \"sprite\", void 0);\nWing = Wing_1 = tslib_1.__decorate([\n    Entity_1.entity(\"wing\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Wing);\nexports.Wing = Wing;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvV2luZy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9XaW5nLnRzP2MxMDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSBcIi4uL3NjZW5lcy9HYW1lU2NlbmVcIjtcclxuaW1wb3J0IHsgTlBDIH0gZnJvbSBcIi4vTlBDXCI7XHJcbmltcG9ydCB7IFF1ZXN0QVRyaWdnZXIsIFF1ZXN0S2V5IH0gZnJvbSBcIi4uL1F1ZXN0c1wiO1xyXG5pbXBvcnQgeyBSZW5kZXJpbmdMYXllciB9IGZyb20gXCIuLi9SZW5kZXJlclwiO1xyXG5cclxuQGVudGl0eShcIndpbmdcIilcclxuZXhwb3J0IGNsYXNzIFdpbmcgZXh0ZW5kcyBOUEMge1xyXG4gICAgQGFzc2V0KFwic3ByaXRlcy93aW5nLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNwcml0ZTogQXNlcHJpdGU7XHJcblxyXG4gICAgcHJpdmF0ZSBmbG9hdEFtb3VudCA9IDQ7XHJcbiAgICBwcml2YXRlIGZsb2F0U3BlZWQgPSAyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzY2VuZTogR2FtZVNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCB4LCB5LCAyNCwgMjQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzaG93RGlhbG9ndWVQcm9tcHQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFzdXBlci5zaG93RGlhbG9ndWVQcm9tcHQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkuaXNUcmlnZ2VyZWQoUXVlc3RBVHJpZ2dlci5QTEFOVEVEX1NFRUQpXHJcbiAgICAgICAgICAgICYmICF0aGlzLnNjZW5lLmdhbWUuY2FtcGFpZ24uZ2V0UXVlc3QoUXVlc3RLZXkuQSkuaXNUcmlnZ2VyZWQoUXVlc3RBVHJpZ2dlci5MRUFSTkVEX1JBSU5fREFOQ0UpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGZsb2F0T2Zmc2V0WSA9IE1hdGguc2luKHRoaXMudGltZUFsaXZlICogdGhpcy5mbG9hdFNwZWVkKSAqIHRoaXMuZmxvYXRBbW91bnQ7XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUucmVuZGVyZXIuYWRkQXNlcHJpdGUoXHJcbiAgICAgICAgICAgIFdpbmcuc3ByaXRlLFxyXG4gICAgICAgICAgICBcImlkbGVcIixcclxuICAgICAgICAgICAgdGhpcy54LCB0aGlzLnkgLSBmbG9hdE9mZnNldFksXHJcbiAgICAgICAgICAgIFJlbmRlcmluZ0xheWVyLkVOVElUSUVTXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUuc2hvd0JvdW5kcykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdCb3VuZHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dEaWFsb2d1ZVByb21wdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0RpYWxvZ3VlUHJvbXB0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwZWVjaEJ1YmJsZS5kcmF3KGN0eCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuXHJcbiAgICAgICAgdGhpcy5kaWFsb2d1ZVByb21wdC51cGRhdGUoZHQsIHRoaXMueCwgdGhpcy55ICsgMTYpO1xyXG4gICAgICAgIHRoaXMuc3BlZWNoQnViYmxlLnVwZGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFPQTtBQUNBO0FBSkE7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBL0NBO0FBREE7QUFDQTtBQUFBO0FBRkE7QUFEQTtBQVFBO0FBUEE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Wing.js\n");
    
    /***/ }),
    
    /***/ "./lib/entities/Wood.js":
    /*!******************************!*\
      !*** ./lib/entities/Wood.js ***!
      \******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nvar Wood_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Wood = exports.WoodState = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst GameScene_1 = __webpack_require__(/*! ../scenes/GameScene */ \"./lib/scenes/GameScene.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst PhysicsEntity_1 = __webpack_require__(/*! ./PhysicsEntity */ \"./lib/entities/PhysicsEntity.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nvar WoodState;\n(function (WoodState) {\n    WoodState[WoodState[\"FREE\"] = 0] = \"FREE\";\n    WoodState[WoodState[\"SWIMMING\"] = 1] = \"SWIMMING\";\n})(WoodState = exports.WoodState || (exports.WoodState = {}));\nlet Wood = Wood_1 = class Wood extends PhysicsEntity_1.PhysicsEntity {\n    constructor(scene, x, y) {\n        super(scene, x, y, 26, 16);\n        this.state = WoodState.FREE;\n        const floatingPosition = this.scene.pointsOfInterest.find(poi => poi.name === \"recover_floating_position\");\n        if (!floatingPosition) {\n            throw new Error(\"Could not find \\\"recover_floating_position\\\" point of interest in game scene.\");\n        }\n        this.floatingPosition = floatingPosition;\n    }\n    resetState() {\n        this.setFloating(false);\n        this.state = WoodState.FREE;\n    }\n    draw() {\n        this.scene.renderer.addAseprite(Wood_1.sprite, \"idle\", this.x, this.y, Renderer_1.RenderingLayer.ENTITIES);\n        if (this.scene.showBounds)\n            this.drawBounds();\n    }\n    isCarried() {\n        return this.scene.player.isCarrying(this);\n    }\n    update(dt) {\n        super.update(dt);\n        if (this.state === WoodState.SWIMMING) {\n            const diffX = this.floatingPosition.x - this.x;\n            const moveX = Math.min(20, Math.abs(diffX)) * Math.sign(diffX);\n            this.x += moveX * dt;\n            this.setVelocityY(Math.abs(((util_1.now() % 2000) - 1000) / 1000) - 0.5);\n        }\n        if (this.state === WoodState.FREE || this.state === WoodState.SWIMMING) {\n            const player = this.scene.player;\n            if (!this.isCarried() && this.distanceTo(player) < 20) {\n                player.carry(this);\n            }\n            if (!this.isCarried()\n                && this.state !== WoodState.SWIMMING\n                && this.scene.world.collidesWith(this.x, this.y - 5) === World_1.Environment.WATER) {\n                this.state = WoodState.SWIMMING;\n                this.setVelocity(0, 0);\n                this.setFloating(true);\n                this.y = this.floatingPosition.y + 8;\n            }\n        }\n        if (!this.isCarried() && this.distanceTo(this.scene.fire) < 20) {\n            this.scene.fire.feed(this);\n            this.scene.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.THROWN_WOOD_INTO_FIRE);\n            Wood_1.successSound.play();\n        }\n        if (!this.isCarried() && this.distanceTo(this.scene.flameboy) < 20) {\n            this.scene.flameboy.feed(this);\n            Wood_1.successSound.play();\n        }\n    }\n};\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/wood.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], Wood, \"sprite\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/throwing/success.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], Wood, \"successSound\", void 0);\nWood = Wood_1 = tslib_1.__decorate([\n    Entity_1.entity(\"wood\"),\n    tslib_1.__metadata(\"design:paramtypes\", [GameScene_1.GameScene, Number, Number])\n], Wood);\nexports.Wood = Wood;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZW50aXRpZXMvV29vZC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9lbnRpdGllcy9Xb29kLnRzP2JiNjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IGVudGl0eSB9IGZyb20gXCIuLi9FbnRpdHlcIjtcclxuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vV29ybGRcIjtcclxuaW1wb3J0IHsgR2FtZU9iamVjdEluZm8gfSBmcm9tIFwiLi4vTWFwSW5mb1wiO1xyXG5pbXBvcnQgeyBHYW1lU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmVzL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBub3cgfSBmcm9tIFwiLi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBQaHlzaWNzRW50aXR5IH0gZnJvbSBcIi4vUGh5c2ljc0VudGl0eVwiO1xyXG5pbXBvcnQgeyBRdWVzdEFUcmlnZ2VyLCBRdWVzdEtleSB9IGZyb20gXCIuLi9RdWVzdHNcIjtcclxuaW1wb3J0IHsgUmVuZGVyaW5nTGF5ZXIgfSBmcm9tIFwiLi4vUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgU291bmQgfSBmcm9tIFwiLi4vU291bmRcIjtcclxuXHJcbmV4cG9ydCBlbnVtIFdvb2RTdGF0ZSB7XHJcbiAgICBGUkVFID0gMCxcclxuICAgIFNXSU1NSU5HID0gMVxyXG59XHJcblxyXG5AZW50aXR5KFwid29vZFwiKVxyXG5leHBvcnQgY2xhc3MgV29vZCBleHRlbmRzIFBoeXNpY3NFbnRpdHkge1xyXG4gICAgQGFzc2V0KFwic3ByaXRlcy93b29kLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIHNwcml0ZTogQXNlcHJpdGU7XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL3Rocm93aW5nL3N1Y2Nlc3MubXAzXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzdWNjZXNzU291bmQ6IFNvdW5kO1xyXG4gICAgcHJpdmF0ZSBmbG9hdGluZ1Bvc2l0aW9uOiBHYW1lT2JqZWN0SW5mbztcclxuXHJcbiAgICBwdWJsaWMgc3RhdGUgPSBXb29kU3RhdGUuRlJFRTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmU6IEdhbWVTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgeCwgeSwgMjYsIDE2KTtcclxuXHJcbiAgICAgICAgY29uc3QgZmxvYXRpbmdQb3NpdGlvbiA9IHRoaXMuc2NlbmUucG9pbnRzT2ZJbnRlcmVzdC5maW5kKFxyXG4gICAgICAgICAgICBwb2kgPT4gcG9pLm5hbWUgPT09IFwicmVjb3Zlcl9mbG9hdGluZ19wb3NpdGlvblwiXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKCFmbG9hdGluZ1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciAoXCJDb3VsZCBub3QgZmluZCBcXFwicmVjb3Zlcl9mbG9hdGluZ19wb3NpdGlvblxcXCIgcG9pbnQgb2YgaW50ZXJlc3QgaW4gZ2FtZSBzY2VuZS5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZsb2F0aW5nUG9zaXRpb24gPSBmbG9hdGluZ1Bvc2l0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldFN0YXRlICgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNldEZsb2F0aW5nKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gV29vZFN0YXRlLkZSRUU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW5kZXJlci5hZGRBc2Vwcml0ZShXb29kLnNwcml0ZSwgXCJpZGxlXCIsIHRoaXMueCwgdGhpcy55LCBSZW5kZXJpbmdMYXllci5FTlRJVElFUyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lLnNob3dCb3VuZHMpIHRoaXMuZHJhd0JvdW5kcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0NhcnJpZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUucGxheWVyLmlzQ2FycnlpbmcodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIudXBkYXRlKGR0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFdvb2RTdGF0ZS5TV0lNTUlORykge1xyXG4gICAgICAgICAgICBjb25zdCBkaWZmWCA9IHRoaXMuZmxvYXRpbmdQb3NpdGlvbi54IC0gdGhpcy54O1xyXG4gICAgICAgICAgICBjb25zdCBtb3ZlWCA9IE1hdGgubWluKDIwLCBNYXRoLmFicyhkaWZmWCkpICogTWF0aC5zaWduKGRpZmZYKTtcclxuICAgICAgICAgICAgdGhpcy54ICs9IG1vdmVYICogZHQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHlZKE1hdGguYWJzKCgobm93KCkgJSAyMDAwKSAtIDEwMDApIC8gMTAwMCkgLSAwLjUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFdvb2RTdGF0ZS5GUkVFIHx8IHRoaXMuc3RhdGUgPT09IFdvb2RTdGF0ZS5TV0lNTUlORykge1xyXG4gICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLnNjZW5lLnBsYXllcjtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NhcnJpZWQoKSAmJiB0aGlzLmRpc3RhbmNlVG8ocGxheWVyKSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY2FycnkodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICF0aGlzLmlzQ2FycmllZCgpXHJcbiAgICAgICAgICAgICAgICAmJiB0aGlzLnN0YXRlICE9PSBXb29kU3RhdGUuU1dJTU1JTkdcclxuICAgICAgICAgICAgICAgICYmIHRoaXMuc2NlbmUud29ybGQuY29sbGlkZXNXaXRoKHRoaXMueCwgdGhpcy55IC0gNSkgPT09IEVudmlyb25tZW50LldBVEVSXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFdvb2RTdGF0ZS5TV0lNTUlORztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZsb2F0aW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ID0gdGhpcy5mbG9hdGluZ1Bvc2l0aW9uLnkgKyA4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNDYXJyaWVkKCkgJiYgdGhpcy5kaXN0YW5jZVRvKHRoaXMuc2NlbmUuZmlyZSkgPCAyMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmZpcmUuZmVlZCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5nYW1lLmNhbXBhaWduLmdldFF1ZXN0KFF1ZXN0S2V5LkEpLnRyaWdnZXIoUXVlc3RBVHJpZ2dlci5USFJPV05fV09PRF9JTlRPX0ZJUkUpO1xyXG4gICAgICAgICAgICBXb29kLnN1Y2Nlc3NTb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNDYXJyaWVkKCkgJiYgdGhpcy5kaXN0YW5jZVRvKHRoaXMuc2NlbmUuZmxhbWVib3kpIDwgMjApIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5mbGFtZWJveS5mZWVkKHRoaXMpO1xyXG4gICAgICAgICAgICBXb29kLnN1Y2Nlc3NTb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVVBO0FBQ0E7QUFIQTtBQUtBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdFQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBTEE7QUFEQTtBQVdBO0FBVkE7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/entities/Wood.js\n");
    
    /***/ }),
    
    /***/ "./lib/geom/Direction.js":
    /*!*******************************!*\
      !*** ./lib/geom/Direction.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Direction = void 0;\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"CENTER\"] = 0] = \"CENTER\";\n    Direction[Direction[\"LEFT\"] = 1] = \"LEFT\";\n    Direction[Direction[\"RIGHT\"] = 2] = \"RIGHT\";\n    Direction[Direction[\"TOP\"] = 4] = \"TOP\";\n    Direction[Direction[\"BOTTOM\"] = 8] = \"BOTTOM\";\n    Direction[Direction[\"TOP_LEFT\"] = 5] = \"TOP_LEFT\";\n    Direction[Direction[\"BOTTOM_LEFT\"] = 9] = \"BOTTOM_LEFT\";\n    Direction[Direction[\"TOP_RIGHT\"] = 6] = \"TOP_RIGHT\";\n    Direction[Direction[\"BOTTOM_RIGHT\"] = 10] = \"BOTTOM_RIGHT\";\n})(Direction = exports.Direction || (exports.Direction = {}));\n(function (Direction) {\n    function isLeft(direction) {\n        return (direction & Direction.LEFT) !== 0;\n    }\n    Direction.isLeft = isLeft;\n    function isRight(direction) {\n        return (direction & Direction.RIGHT) !== 0;\n    }\n    Direction.isRight = isRight;\n    function isTop(direction) {\n        return (direction & Direction.TOP) !== 0;\n    }\n    Direction.isTop = isTop;\n    function isBottom(direction) {\n        return (direction & Direction.BOTTOM) !== 0;\n    }\n    Direction.isBottom = isBottom;\n    function isHorizontal(direction) {\n        return isLeft(direction) || isRight(direction);\n    }\n    Direction.isHorizontal = isHorizontal;\n    function isVertical(direction) {\n        return isLeft(direction) || isRight(direction);\n    }\n    Direction.isVertical = isVertical;\n    function isEdge(direction) {\n        return direction === Direction.LEFT\n            || direction === Direction.RIGHT\n            || direction === Direction.TOP\n            || direction === Direction.BOTTOM;\n    }\n    Direction.isEdge = isEdge;\n    function isCorner(direction) {\n        return direction === Direction.TOP_LEFT\n            || direction === Direction.TOP_RIGHT\n            || direction === Direction.BOTTOM_LEFT\n            || direction === Direction.BOTTOM_RIGHT;\n    }\n    Direction.isCorner = isCorner;\n    function getX(direction) {\n        return isLeft(direction) ? -1 : isRight(direction) ? 1 : 0;\n    }\n    Direction.getX = getX;\n    function getY(direction) {\n        return isTop(direction) ? -1 : isBottom(direction) ? 1 : 0;\n    }\n    Direction.getY = getY;\n})(Direction = exports.Direction || (exports.Direction = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZ2VvbS9EaXJlY3Rpb24uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZ2VvbS9EaXJlY3Rpb24udHM/YzE1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBEaXJlY3Rpb24ge1xyXG4gICAgQ0VOVEVSID0gMCxcclxuICAgIExFRlQgPSAxLFxyXG4gICAgUklHSFQgPSAyLFxyXG4gICAgVE9QID0gNCxcclxuICAgIEJPVFRPTSA9IDgsXHJcbiAgICBUT1BfTEVGVCA9IFRPUCB8IExFRlQsXHJcbiAgICBCT1RUT01fTEVGVCA9IEJPVFRPTSB8IExFRlQsXHJcbiAgICBUT1BfUklHSFQgPSBUT1AgfCBSSUdIVCxcclxuICAgIEJPVFRPTV9SSUdIVCA9IEJPVFRPTSB8IFJJR0hUXHJcbn1cclxuXHJcbmV4cG9ydCBuYW1lc3BhY2UgRGlyZWN0aW9uIHtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0xlZnQoZGlyZWN0aW9uOiBEaXJlY3Rpb24pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKGRpcmVjdGlvbiAmIERpcmVjdGlvbi5MRUZUKSAhPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaXNSaWdodChkaXJlY3Rpb246IERpcmVjdGlvbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoZGlyZWN0aW9uICYgRGlyZWN0aW9uLlJJR0hUKSAhPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaXNUb3AoZGlyZWN0aW9uOiBEaXJlY3Rpb24pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKGRpcmVjdGlvbiAmIERpcmVjdGlvbi5UT1ApICE9PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0JvdHRvbShkaXJlY3Rpb246IERpcmVjdGlvbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoZGlyZWN0aW9uICYgRGlyZWN0aW9uLkJPVFRPTSkgIT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzSG9yaXpvbnRhbChkaXJlY3Rpb246IERpcmVjdGlvbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBpc0xlZnQoZGlyZWN0aW9uKSB8fCBpc1JpZ2h0KGRpcmVjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzVmVydGljYWwoZGlyZWN0aW9uOiBEaXJlY3Rpb24pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gaXNMZWZ0KGRpcmVjdGlvbikgfHwgaXNSaWdodChkaXJlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0VkZ2UoZGlyZWN0aW9uOiBEaXJlY3Rpb24pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTEVGVFxyXG4gICAgICAgICAgICB8fCBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SSUdIVFxyXG4gICAgICAgICAgICB8fCBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5UT1BcclxuICAgICAgICAgICAgfHwgZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQk9UVE9NO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0Nvcm5lcihkaXJlY3Rpb246IERpcmVjdGlvbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5UT1BfTEVGVFxyXG4gICAgICAgICAgICB8fCBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5UT1BfUklHSFRcclxuICAgICAgICAgICAgfHwgZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQk9UVE9NX0xFRlRcclxuICAgICAgICAgICAgfHwgZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQk9UVE9NX1JJR0hUO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRYKGRpcmVjdGlvbjogRGlyZWN0aW9uKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gaXNMZWZ0KGRpcmVjdGlvbikgPyAtMSA6IGlzUmlnaHQoZGlyZWN0aW9uKSA/IDEgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRZKGRpcmVjdGlvbjogRGlyZWN0aW9uKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gaXNUb3AoZGlyZWN0aW9uKSA/IC0xIDogaXNCb3R0b20oZGlyZWN0aW9uKSA/IDEgOiAwO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUdBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/geom/Direction.js\n");
    
    /***/ }),
    
    /***/ "./lib/graphics.js":
    /*!*************************!*\
      !*** ./lib/graphics.js ***!
      \*************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getImageData = exports.createContext2D = exports.getRenderingContext = exports.createCanvas = exports.loadImage = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nfunction loadImage(source) {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n        const img = new Image();\n        return new Promise((resolve, reject) => {\n            img.onload = () => {\n                resolve(img);\n            };\n            img.onerror = () => {\n                reject(new Error(`Unable to load image '${source}'`));\n            };\n            img.src = source instanceof URL ? source.href : `assets/${source}`;\n        });\n    });\n}\nexports.loadImage = loadImage;\nfunction createCanvas(width, height) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n}\nexports.createCanvas = createCanvas;\nfunction getRenderingContext(canvas, contextId, options) {\n    const ctx = canvas.getContext(contextId, options);\n    if (ctx == null) {\n        throw new Error(`Canvas doesn't support context with id '${contextId}'`);\n    }\n    return ctx;\n}\nexports.getRenderingContext = getRenderingContext;\nfunction createContext2D(width, height) {\n    return getRenderingContext(createCanvas(width, height), \"2d\");\n}\nexports.createContext2D = createContext2D;\nfunction getImageData(image) {\n    const ctx = createContext2D(image.width, image.height);\n    ctx.drawImage(image, 0, 0, image.width, image.height);\n    return ctx.getImageData(0, 0, image.width, image.height);\n}\nexports.getImageData = getImageData;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZ3JhcGhpY3MuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZ3JhcGhpY3MudHM/MzZlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZEltYWdlKHNvdXJjZTogc3RyaW5nIHwgVVJMKTogUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PiB7XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVzb2x2ZShpbWcpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFVuYWJsZSB0byBsb2FkIGltYWdlICcke3NvdXJjZX0nYCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaW1nLnNyYyA9IHNvdXJjZSBpbnN0YW5jZW9mIFVSTCA/IHNvdXJjZS5ocmVmIDogYGFzc2V0cy8ke3NvdXJjZX1gO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW52YXMod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpITtcclxuXHJcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgcmV0dXJuIGNhbnZhcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlbmRlcmluZ0NvbnRleHQoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgY29udGV4dElkOiBcIjJkXCIsXHJcbiAgICBvcHRpb25zPzogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEU2V0dGluZ3MpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZW5kZXJpbmdDb250ZXh0KGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIGNvbnRleHRJZDogc3RyaW5nLCBvcHRpb25zPzogdW5rbm93bik6IFJlbmRlcmluZ0NvbnRleHQge1xyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoY29udGV4dElkLCBvcHRpb25zKTtcclxuICAgIGlmIChjdHggPT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FudmFzIGRvZXNuJ3Qgc3VwcG9ydCBjb250ZXh0IHdpdGggaWQgJyR7Y29udGV4dElkfSdgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjdHg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb250ZXh0MkQod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xyXG4gICAgcmV0dXJuIGdldFJlbmRlcmluZ0NvbnRleHQoY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpLCBcIjJkXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW1hZ2VEYXRhKGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50KTogSW1hZ2VEYXRhIHtcclxuICAgIGNvbnN0IGN0eCA9IGNyZWF0ZUNvbnRleHQyRChpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTtcclxuICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpO1xyXG5cclxuICAgIHJldHVybiBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpO1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVhBO0FBYUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBUEE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/graphics.js\n");
    
    /***/ }),
    
    /***/ "./lib/graphics/AffineTransform.js":
    /*!*****************************************!*\
      !*** ./lib/graphics/AffineTransform.js ***!
      \*****************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AffineTransform = void 0;\n/**\n * Affine transformation matrix. It behaves like a 3x3 matrix where the third row is always assumed to be 0 0 1.\n * This matrix is useful for 2D transformations and is compatible to the transformations done in a Canvas for example.\n */\nclass AffineTransform {\n    constructor(m11 = 1, m12 = 0, m21 = 0, m22 = 1, dx = 0, dy = 0) {\n        this.m11 = m11;\n        this.m12 = m12;\n        this.m21 = m21;\n        this.m22 = m22;\n        this.dx = dx;\n        this.dy = dy;\n    }\n    /**\n     * Creates a new affine transformation from the given DOM matrix object.\n     *\n     * @aram domMatrix - The DOM matrix object. Must be a 2D matrix.\n     * @return The created affine transformation.\n     */\n    static fromDOMMatrix(domMatrix) {\n        if (!domMatrix.is2D) {\n            throw new Error(\"Can only create Matrix3 from 2D DOMMatrix\");\n        }\n        return new AffineTransform(domMatrix.a, domMatrix.b, domMatrix.c, domMatrix.d, domMatrix.e, domMatrix.f);\n    }\n    /**\n     * Returns a clone of this matrix.\n     *\n     * @return The cloned matrix.\n     */\n    clone() {\n        return new AffineTransform(this.m11, this.m12, this.m21, this.m22, this.dx, this.dy);\n    }\n    /**\n     * Converts this matrix into a DOM matrix.\n     *\n     * @return The created DOM matrix.\n     */\n    toDOMMatrix() {\n        return new DOMMatrix([this.m11, this.m12, this.m21, this.m22, this.dx, this.dy]);\n    }\n    /**\n     * Returns a human-readable string representation of the matrix.\n     *\n     * @return The human-readable string representation of the matrix.\n     */\n    toString() {\n        return `[ ${this.m11}, ${this.m12}, ${this.m21}, ${this.m22}, ${this.dx}, ${this.dy} ]`;\n    }\n    /**\n     * Sets the matrix component values.\n     *\n     * @param m11 - The horizontal scaling. A value of 1 results in no scaling.\n     * @param m12 - The vertical skewing.\n     * @param m21 - The horizontal skewing.\n     * @param m22 - The vertical scaling. A value of 1 results in no scaling.\n     * @param dx  - The horizontal translation (moving).\n     * @param dy  - The vertical translation (moving).\n     */\n    setComponents(m11, m12, m21, m22, dx, dy) {\n        this.m11 = m11;\n        this.m12 = m12;\n        this.m21 = m21;\n        this.m22 = m22;\n        this.dx = dx;\n        this.dy = dy;\n        return this;\n    }\n    /**\n     * Sets the matrix component values from another matrix.\n     *\n     * @param matrix - The matrix to copy the component values from.\n     */\n    setMatrix(matrix) {\n        this.m11 = matrix.m11;\n        this.m12 = matrix.m12;\n        this.m21 = matrix.m21;\n        this.m22 = matrix.m22;\n        this.dx = matrix.dx;\n        this.dy = matrix.dy;\n        return this;\n    }\n    /**\n     * Checks if matrix is identity.\n     *\n     * @return True if identity, false if not.\n     */\n    isIdentity() {\n        return this.m11 === 1\n            && this.m12 === 0\n            && this.m21 === 0\n            && this.m22 === 1\n            && this.dx === 0\n            && this.dy === 0;\n    }\n    /**\n     * Resets this matrix to identity.\n     */\n    reset() {\n        this.m11 = 1;\n        this.m12 = 0;\n        this.m21 = 0;\n        this.m22 = 1;\n        this.dx = 0;\n        this.dy = 0;\n        return this;\n    }\n    /**\n     * Multiplies this matrix with the specified matrix (`this = this * other`).\n     *\n     * @param other - The other matrix to multiply this one with.\n     */\n    mul(other) {\n        const a11 = this.m11, a12 = this.m12;\n        const a21 = this.m21, a22 = this.m22;\n        const a31 = this.dx, a32 = this.dy;\n        const b11 = other.m11, b12 = other.m12;\n        const b21 = other.m21, b22 = other.m22;\n        const b31 = other.dx, b32 = other.dy;\n        this.m11 = a11 * b11 + a21 * b12;\n        this.m12 = a12 * b11 + a22 * b12;\n        this.m21 = a11 * b21 + a21 * b22;\n        this.m22 = a12 * b21 + a22 * b22;\n        this.dx = a11 * b31 + a21 * b32 + a31;\n        this.dy = a12 * b31 + a22 * b32 + a32;\n        return this;\n    }\n    /**\n     * Divides this matrix by the specified matrix (`this = this / other` which is the same as\n     * `this = this * inverse(other)`).\n     *\n     * @param other - The other matrix to divide this one by.\n     */\n    div(other) {\n        // a = this, b = other\n        const a11 = this.m11, a12 = this.m12;\n        const a21 = this.m21, a22 = this.m22;\n        const a31 = this.dx, a32 = this.dy;\n        const b11 = other.m11, b12 = other.m12;\n        const b21 = other.m21, b22 = other.m22;\n        const b31 = other.dx, b32 = other.dy;\n        // d = determinant(b)\n        const d = b11 * b22 - b21 * b12;\n        // c = invert(b)\n        const c11 = b22 / d;\n        const c12 = -b12 / d;\n        const c21 = -b21 / d;\n        const c22 = b11 / d;\n        const c31 = (b21 * b32 - b31 * b22) / d;\n        const c32 = (b31 * b12 - b11 * b32) / d;\n        // this = this * c\n        this.m11 = a11 * c11 + a21 * c12;\n        this.m12 = a12 * c11 + a22 * c12;\n        this.m21 = a11 * c21 + a21 * c22;\n        this.m22 = a12 * c21 + a22 * c22;\n        this.dx = a11 * c31 + a21 * c32 + a31;\n        this.dy = a12 * c31 + a22 * c32 + a32;\n        return this;\n    }\n    /**\n     * Returns the determinant of this matrix.\n     *\n     * @return The determinant of this matrix.\n     */\n    getDeterminant() {\n        return this.m11 * this.m22 - this.m21 * this.m12;\n    }\n    /**\n     * Inverts this matrix.\n     */\n    invert() {\n        const m11 = this.m11, m12 = this.m12;\n        const m21 = this.m21, m22 = this.m22;\n        const m31 = this.dx, m32 = this.dy;\n        const d = m11 * m22 - m21 * m12;\n        this.m11 = m22 / d;\n        this.m12 = -m12 / d;\n        this.m21 = -m21 / d;\n        this.m22 = m11 / d;\n        this.dx = (m21 * m32 - m31 * m22) / d;\n        this.dy = (m31 * m12 - m11 * m32) / d;\n        return this;\n    }\n    /**\n     * Translates this matrix by the specified values.\n     *\n     * @param dx - The X translation.\n     * @param dy - The Y translation.\n     */\n    translate(dx, dy) {\n        this.dx += dx * this.m11 + dy * this.m21;\n        this.dy += dx * this.m12 + dy * this.m22;\n        return this;\n    }\n    /**\n     * Translates this matrix by the specified X delta.\n     *\n     * @param d - The X translation delta.\n     */\n    translateX(d) {\n        this.dx += d * this.m11;\n        this.dy += d * this.m12;\n        return this;\n    }\n    /**\n     * Returns the X translation of the matrix.\n     *\n     * @return The X translation.\n     */\n    getTranslationX() {\n        return this.dx;\n    }\n    /**\n     * Translates this matrix by the specified Y delta.\n     *\n     * @param d - The Y translation delta.\n     */\n    translateY(d) {\n        this.dx += d * this.m21;\n        this.dy += d * this.m22;\n        return this;\n    }\n    /**\n     * Returns the Y translation of the matrix.\n     *\n     * @return The Y translation.\n     */\n    getTranslationY() {\n        return this.dy;\n    }\n    /**\n     * Sets matrix to a translation matrix.\n     *\n     * @param dx - The X translation.\n     * @param dy - The Y translation.\n     */\n    setTranslation(dx, dy) {\n        this.m11 = 1;\n        this.m12 = 0;\n        this.m21 = 0;\n        this.m22 = 1;\n        this.dx = dx;\n        this.dy = dy;\n        return this;\n    }\n    /**\n     * Creates matrix initialized to a translation matrix.\n     *\n     * @param dx - The X translation.\n     * @param dy - The Y translation.\n     */\n    static createTranslation(dx, dy) {\n        return new AffineTransform().setTranslation(dx, dy);\n    }\n    /**\n     * Scales this matrix by the specified factor.\n     *\n     * @param sx - The X scale factor.\n     * @param sy - The Y scale factor. Defaults to X scale factor.\n     */\n    scale(sx, sy = sx) {\n        this.m11 *= sx;\n        this.m12 *= sx;\n        this.m21 *= sy;\n        this.m22 *= sy;\n        return this;\n    }\n    /**\n     * Sets matrix to a scale matrix.\n     *\n     * @param sx - The X scale factor.\n     * @param sy - The Y scale factor. Defaults to X scale factor.\n     */\n    setScale(sx, sy = sx) {\n        this.m11 = sx;\n        this.m12 = 0;\n        this.m21 = 0;\n        this.m22 = sy;\n        this.dx = 0;\n        this.dy = 0;\n        return this;\n    }\n    /**\n     * Scales this matrix by the specified factor along the X axis.\n     *\n     * @param s - The scale factor.\n     */\n    scaleX(s) {\n        this.m11 *= s;\n        this.m12 *= s;\n        return this;\n    }\n    /**\n     * Returns the X scale factor of the matrix.\n     *\n     * @return The X scale factor of the matrix.\n     */\n    getScaleX() {\n        return Math.hypot(this.m11, this.m21);\n    }\n    /**\n     * Scales this matrix by the specified factor along the Y axis.\n     *\n     * @param s - The scale factor.\n     */\n    scaleY(s) {\n        this.m21 *= s;\n        this.m22 *= s;\n        return this;\n    }\n    /**\n     * Returns the Y scale factor of the matrix.\n     *\n     * @return The Y scale factor of the matrix.\n     */\n    getScaleY() {\n        return Math.hypot(this.m12, this.m22);\n    }\n    /**\n     * Creates matrix initialized to a scale matrix.\n     *\n     * @param sx - The X scale factor.\n     * @param sy - The Y scale factor. Defaults to X scale factor.\n     */\n    static createScale(sx, sy) {\n        return new AffineTransform().setScale(sx, sy);\n    }\n    /**\n     * Rotates this matrix by the given angle.\n     *\n     * @param angle - The rotation angle in RAD.\n     */\n    rotate(angle) {\n        const m11 = this.m11, m12 = this.m12;\n        const m21 = this.m21, m22 = this.m22;\n        const s = Math.sin(angle), c = Math.cos(angle);\n        this.m11 = c * m11 + s * m21;\n        this.m12 = c * m12 + s * m22;\n        this.m21 = c * m21 - s * m11;\n        this.m22 = c * m22 - s * m12;\n        return this;\n    }\n    /**\n     * Returns the rotation of this matrix in radians.\n     *\n     * @return The rotation angle in radians.\n     */\n    getRotation() {\n        const m11 = this.m11, m12 = this.m12;\n        const m21 = this.m21, m22 = this.m22;\n        if (m11 !== 0 || m21 !== 0) {\n            const acos = Math.acos(m11 / Math.hypot(m11, m21));\n            return m21 > 0 ? -acos : acos;\n        }\n        else if (m12 !== 0 || m22 !== 0) {\n            const acos = Math.acos(m12 / Math.hypot(m12, m22));\n            return Math.PI / 2 + (m22 > 0 ? -acos : acos);\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * Sets matrix to a rotation matrix.\n     *\n     * @param angle - The rotation angle in RAD.\n     */\n    setRotation(angle) {\n        const s = Math.sin(angle), c = Math.cos(angle);\n        this.m11 = c;\n        this.m12 = s;\n        this.m21 = -s;\n        this.m22 = c;\n        this.dx = 0;\n        this.dy = 0;\n        return this;\n    }\n    /**\n     * Create new matrix initialized to a rotation matrix.\n     *\n     * @param angle - The rotation angle in RAD.\n     */\n    static createRotation(angle) {\n        return new AffineTransform().setRotation(angle);\n    }\n    /**\n     * Transforms the given 2D canvas rendering context.\n     *\n     * @param ctx - The 2D canvas rendering context to transform.\n     */\n    transformCanvas(ctx) {\n        ctx.transform(this.m11, this.m12, this.m21, this.m22, this.dx, this.dy);\n        return this;\n    }\n    /**\n     * Sets the transformation of the given 2D canvas rendering context.\n     *\n     * @param ctx - The 2D canvas rendering context to set the transformation on.\n     */\n    setCanvasTransform(ctx) {\n        ctx.setTransform(this.m11, this.m12, this.m21, this.m22, this.dx, this.dy);\n        return this;\n    }\n}\nexports.AffineTransform = AffineTransform;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZ3JhcGhpY3MvQWZmaW5lVHJhbnNmb3JtLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2dyYXBoaWNzL0FmZmluZVRyYW5zZm9ybS50cz8wZThmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBBZmZpbmUgdHJhbnNmb3JtYXRpb24gbWF0cml4LiBJdCBiZWhhdmVzIGxpa2UgYSAzeDMgbWF0cml4IHdoZXJlIHRoZSB0aGlyZCByb3cgaXMgYWx3YXlzIGFzc3VtZWQgdG8gYmUgMCAwIDEuXHJcbiAqIFRoaXMgbWF0cml4IGlzIHVzZWZ1bCBmb3IgMkQgdHJhbnNmb3JtYXRpb25zIGFuZCBpcyBjb21wYXRpYmxlIHRvIHRoZSB0cmFuc2Zvcm1hdGlvbnMgZG9uZSBpbiBhIENhbnZhcyBmb3IgZXhhbXBsZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBZmZpbmVUcmFuc2Zvcm0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbWF0cml4IGluaXRpYWxpemVkIHRvIGFuIGlkZW50aXR5IG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG1hdHJpeCBpbml0aWFsaXplZCB0byB0aGUgZ2l2ZW4gY29tcG9uZW50IHZhbHVlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbTExIC0gVGhlIGhvcml6b250YWwgc2NhbGluZy4gQSB2YWx1ZSBvZiAxIHJlc3VsdHMgaW4gbm8gc2NhbGluZy5cclxuICAgICAqIEBwYXJhbSBtMTIgLSBUaGUgdmVydGljYWwgc2tld2luZy5cclxuICAgICAqIEBwYXJhbSBtMjEgLSBUaGUgaG9yaXpvbnRhbCBza2V3aW5nLlxyXG4gICAgICogQHBhcmFtIG0yMiAtIFRoZSB2ZXJ0aWNhbCBzY2FsaW5nLiBBIHZhbHVlIG9mIDEgcmVzdWx0cyBpbiBubyBzY2FsaW5nLlxyXG4gICAgICogQHBhcmFtIGR4ICAtIFRoZSBob3Jpem9udGFsIHRyYW5zbGF0aW9uIChtb3ZpbmcpLlxyXG4gICAgICogQHBhcmFtIGR5ICAtIFRoZSB2ZXJ0aWNhbCB0cmFuc2xhdGlvbiAobW92aW5nKS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKG0xMTogbnVtYmVyLCBtMTI6IG51bWJlciwgbTIxOiBudW1iZXIsIG0yMjogbnVtYmVyLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIG0xMTogbnVtYmVyID0gMSxcclxuICAgICAgICBwdWJsaWMgbTEyOiBudW1iZXIgPSAwLFxyXG4gICAgICAgIHB1YmxpYyBtMjE6IG51bWJlciA9IDAsXHJcbiAgICAgICAgcHVibGljIG0yMjogbnVtYmVyID0gMSxcclxuICAgICAgICBwdWJsaWMgZHg6IG51bWJlciA9IDAsXHJcbiAgICAgICAgcHVibGljIGR5OiBudW1iZXIgPSAwLFxyXG4gICAgKSB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBhZmZpbmUgdHJhbnNmb3JtYXRpb24gZnJvbSB0aGUgZ2l2ZW4gRE9NIG1hdHJpeCBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICogQGFyYW0gZG9tTWF0cml4IC0gVGhlIERPTSBtYXRyaXggb2JqZWN0LiBNdXN0IGJlIGEgMkQgbWF0cml4LlxyXG4gICAgICogQHJldHVybiBUaGUgY3JlYXRlZCBhZmZpbmUgdHJhbnNmb3JtYXRpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbURPTU1hdHJpeChkb21NYXRyaXg6IERPTU1hdHJpeCk6IEFmZmluZVRyYW5zZm9ybSB7XHJcbiAgICAgICAgaWYgKCFkb21NYXRyaXguaXMyRCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4gb25seSBjcmVhdGUgTWF0cml4MyBmcm9tIDJEIERPTU1hdHJpeFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBZmZpbmVUcmFuc2Zvcm0oXHJcbiAgICAgICAgICAgIGRvbU1hdHJpeC5hLCBkb21NYXRyaXguYixcclxuICAgICAgICAgICAgZG9tTWF0cml4LmMsIGRvbU1hdHJpeC5kLFxyXG4gICAgICAgICAgICBkb21NYXRyaXguZSwgZG9tTWF0cml4LmZcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGNsb25lIG9mIHRoaXMgbWF0cml4LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIGNsb25lZCBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjbG9uZSgpOiBBZmZpbmVUcmFuc2Zvcm0ge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWZmaW5lVHJhbnNmb3JtKHRoaXMubTExLCB0aGlzLm0xMiwgdGhpcy5tMjEsIHRoaXMubTIyLCB0aGlzLmR4LCB0aGlzLmR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoaXMgbWF0cml4IGludG8gYSBET00gbWF0cml4LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIGNyZWF0ZWQgRE9NIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvRE9NTWF0cml4KCk6IERPTU1hdHJpeCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBET01NYXRyaXgoWyB0aGlzLm0xMSwgdGhpcy5tMTIsIHRoaXMubTIxLCB0aGlzLm0yMiwgdGhpcy5keCwgdGhpcy5keSBdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBodW1hbi1yZWFkYWJsZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBodW1hbi1yZWFkYWJsZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGBbICR7dGhpcy5tMTF9LCAke3RoaXMubTEyfSwgJHt0aGlzLm0yMX0sICR7dGhpcy5tMjJ9LCAke3RoaXMuZHh9LCAke3RoaXMuZHl9IF1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgbWF0cml4IGNvbXBvbmVudCB2YWx1ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG0xMSAtIFRoZSBob3Jpem9udGFsIHNjYWxpbmcuIEEgdmFsdWUgb2YgMSByZXN1bHRzIGluIG5vIHNjYWxpbmcuXHJcbiAgICAgKiBAcGFyYW0gbTEyIC0gVGhlIHZlcnRpY2FsIHNrZXdpbmcuXHJcbiAgICAgKiBAcGFyYW0gbTIxIC0gVGhlIGhvcml6b250YWwgc2tld2luZy5cclxuICAgICAqIEBwYXJhbSBtMjIgLSBUaGUgdmVydGljYWwgc2NhbGluZy4gQSB2YWx1ZSBvZiAxIHJlc3VsdHMgaW4gbm8gc2NhbGluZy5cclxuICAgICAqIEBwYXJhbSBkeCAgLSBUaGUgaG9yaXpvbnRhbCB0cmFuc2xhdGlvbiAobW92aW5nKS5cclxuICAgICAqIEBwYXJhbSBkeSAgLSBUaGUgdmVydGljYWwgdHJhbnNsYXRpb24gKG1vdmluZykuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRDb21wb25lbnRzKG0xMTogbnVtYmVyLCBtMTI6IG51bWJlciwgbTIxOiBudW1iZXIsIG0yMjogbnVtYmVyLCBkeDogbnVtYmVyLCBkeTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5tMTEgPSBtMTE7XHJcbiAgICAgICAgdGhpcy5tMTIgPSBtMTI7XHJcbiAgICAgICAgdGhpcy5tMjEgPSBtMjE7XHJcbiAgICAgICAgdGhpcy5tMjIgPSBtMjI7XHJcbiAgICAgICAgdGhpcy5keCA9IGR4O1xyXG4gICAgICAgIHRoaXMuZHkgPSBkeTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIG1hdHJpeCBjb21wb25lbnQgdmFsdWVzIGZyb20gYW5vdGhlciBtYXRyaXguXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG1hdHJpeCAtIFRoZSBtYXRyaXggdG8gY29weSB0aGUgY29tcG9uZW50IHZhbHVlcyBmcm9tLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0TWF0cml4KG1hdHJpeDogQWZmaW5lVHJhbnNmb3JtKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5tMTEgPSBtYXRyaXgubTExO1xyXG4gICAgICAgIHRoaXMubTEyID0gbWF0cml4Lm0xMjtcclxuICAgICAgICB0aGlzLm0yMSA9IG1hdHJpeC5tMjE7XHJcbiAgICAgICAgdGhpcy5tMjIgPSBtYXRyaXgubTIyO1xyXG4gICAgICAgIHRoaXMuZHggPSBtYXRyaXguZHg7XHJcbiAgICAgICAgdGhpcy5keSA9IG1hdHJpeC5keTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiBtYXRyaXggaXMgaWRlbnRpdHkuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUcnVlIGlmIGlkZW50aXR5LCBmYWxzZSBpZiBub3QuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0lkZW50aXR5KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm0xMSA9PT0gMVxyXG4gICAgICAgICAgICAmJiB0aGlzLm0xMiA9PT0gMFxyXG4gICAgICAgICAgICAmJiB0aGlzLm0yMSA9PT0gMFxyXG4gICAgICAgICAgICAmJiB0aGlzLm0yMiA9PT0gMVxyXG4gICAgICAgICAgICAmJiB0aGlzLmR4ID09PSAwXHJcbiAgICAgICAgICAgICYmIHRoaXMuZHkgPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhpcyBtYXRyaXggdG8gaWRlbnRpdHkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZXNldCgpOiB0aGlzIHtcclxuICAgICAgICB0aGlzLm0xMSA9IDE7XHJcbiAgICAgICAgdGhpcy5tMTIgPSAwO1xyXG4gICAgICAgIHRoaXMubTIxID0gMDtcclxuICAgICAgICB0aGlzLm0yMiA9IDE7XHJcbiAgICAgICAgdGhpcy5keCA9IDA7XHJcbiAgICAgICAgdGhpcy5keSA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNdWx0aXBsaWVzIHRoaXMgbWF0cml4IHdpdGggdGhlIHNwZWNpZmllZCBtYXRyaXggKGB0aGlzID0gdGhpcyAqIG90aGVyYCkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIG1hdHJpeCB0byBtdWx0aXBseSB0aGlzIG9uZSB3aXRoLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbXVsKG90aGVyOiBBZmZpbmVUcmFuc2Zvcm0pOiB0aGlzIHtcclxuICAgICAgICBjb25zdCBhMTEgPSB0aGlzLm0xMSwgYTEyID0gdGhpcy5tMTI7XHJcbiAgICAgICAgY29uc3QgYTIxID0gdGhpcy5tMjEsIGEyMiA9IHRoaXMubTIyO1xyXG4gICAgICAgIGNvbnN0IGEzMSA9IHRoaXMuZHgsIGEzMiA9IHRoaXMuZHk7XHJcbiAgICAgICAgY29uc3QgYjExID0gb3RoZXIubTExLCBiMTIgPSBvdGhlci5tMTI7XHJcbiAgICAgICAgY29uc3QgYjIxID0gb3RoZXIubTIxLCBiMjIgPSBvdGhlci5tMjI7XHJcbiAgICAgICAgY29uc3QgYjMxID0gb3RoZXIuZHgsIGIzMiA9IG90aGVyLmR5O1xyXG4gICAgICAgIHRoaXMubTExID0gYTExICogYjExICsgYTIxICogYjEyO1xyXG4gICAgICAgIHRoaXMubTEyID0gYTEyICogYjExICsgYTIyICogYjEyO1xyXG4gICAgICAgIHRoaXMubTIxID0gYTExICogYjIxICsgYTIxICogYjIyO1xyXG4gICAgICAgIHRoaXMubTIyID0gYTEyICogYjIxICsgYTIyICogYjIyO1xyXG4gICAgICAgIHRoaXMuZHggPSBhMTEgKiBiMzEgKyBhMjEgKiBiMzIgKyBhMzE7XHJcbiAgICAgICAgdGhpcy5keSA9IGExMiAqIGIzMSArIGEyMiAqIGIzMiArIGEzMjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpdmlkZXMgdGhpcyBtYXRyaXggYnkgdGhlIHNwZWNpZmllZCBtYXRyaXggKGB0aGlzID0gdGhpcyAvIG90aGVyYCB3aGljaCBpcyB0aGUgc2FtZSBhc1xyXG4gICAgICogYHRoaXMgPSB0aGlzICogaW52ZXJzZShvdGhlcilgKS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgbWF0cml4IHRvIGRpdmlkZSB0aGlzIG9uZSBieS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRpdihvdGhlcjogQWZmaW5lVHJhbnNmb3JtKTogdGhpcyB7XHJcbiAgICAgICAgLy8gYSA9IHRoaXMsIGIgPSBvdGhlclxyXG4gICAgICAgIGNvbnN0IGExMSA9IHRoaXMubTExLCBhMTIgPSB0aGlzLm0xMjtcclxuICAgICAgICBjb25zdCBhMjEgPSB0aGlzLm0yMSwgYTIyID0gdGhpcy5tMjI7XHJcbiAgICAgICAgY29uc3QgYTMxID0gdGhpcy5keCwgYTMyID0gdGhpcy5keTtcclxuICAgICAgICBjb25zdCBiMTEgPSBvdGhlci5tMTEsIGIxMiA9IG90aGVyLm0xMjtcclxuICAgICAgICBjb25zdCBiMjEgPSBvdGhlci5tMjEsIGIyMiA9IG90aGVyLm0yMjtcclxuICAgICAgICBjb25zdCBiMzEgPSBvdGhlci5keCwgYjMyID0gb3RoZXIuZHk7XHJcblxyXG4gICAgICAgIC8vIGQgPSBkZXRlcm1pbmFudChiKVxyXG4gICAgICAgIGNvbnN0IGQgPSBiMTEgKiBiMjIgLSBiMjEgKiBiMTI7XHJcblxyXG4gICAgICAgIC8vIGMgPSBpbnZlcnQoYilcclxuICAgICAgICBjb25zdCBjMTEgPSBiMjIgLyBkO1xyXG4gICAgICAgIGNvbnN0IGMxMiA9IC1iMTIgLyBkO1xyXG4gICAgICAgIGNvbnN0IGMyMSA9IC1iMjEgLyBkO1xyXG4gICAgICAgIGNvbnN0IGMyMiA9IGIxMSAvIGQ7XHJcbiAgICAgICAgY29uc3QgYzMxID0gKGIyMSAqIGIzMiAtIGIzMSAqIGIyMikgLyBkO1xyXG4gICAgICAgIGNvbnN0IGMzMiA9IChiMzEgKiBiMTIgLSBiMTEgKiBiMzIpIC8gZDtcclxuXHJcbiAgICAgICAgLy8gdGhpcyA9IHRoaXMgKiBjXHJcbiAgICAgICAgdGhpcy5tMTEgPSBhMTEgKiBjMTEgKyBhMjEgKiBjMTI7XHJcbiAgICAgICAgdGhpcy5tMTIgPSBhMTIgKiBjMTEgKyBhMjIgKiBjMTI7XHJcbiAgICAgICAgdGhpcy5tMjEgPSBhMTEgKiBjMjEgKyBhMjEgKiBjMjI7XHJcbiAgICAgICAgdGhpcy5tMjIgPSBhMTIgKiBjMjEgKyBhMjIgKiBjMjI7XHJcbiAgICAgICAgdGhpcy5keCA9IGExMSAqIGMzMSArIGEyMSAqIGMzMiArIGEzMTtcclxuICAgICAgICB0aGlzLmR5ID0gYTEyICogYzMxICsgYTIyICogYzMyICsgYTMyO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGRldGVybWluYW50IG9mIHRoaXMgbWF0cml4LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIGRldGVybWluYW50IG9mIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RGV0ZXJtaW5hbnQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tMTEgKiB0aGlzLm0yMiAtIHRoaXMubTIxICogdGhpcy5tMTI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZlcnRzIHRoaXMgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW52ZXJ0KCk6IHRoaXMge1xyXG4gICAgICAgIGNvbnN0IG0xMSA9IHRoaXMubTExLCBtMTIgPSB0aGlzLm0xMjtcclxuICAgICAgICBjb25zdCBtMjEgPSB0aGlzLm0yMSwgbTIyID0gdGhpcy5tMjI7XHJcbiAgICAgICAgY29uc3QgbTMxID0gdGhpcy5keCwgbTMyID0gdGhpcy5keTtcclxuXHJcbiAgICAgICAgY29uc3QgZCA9IG0xMSAqIG0yMiAtIG0yMSAqIG0xMjtcclxuXHJcbiAgICAgICAgdGhpcy5tMTEgPSBtMjIgLyBkO1xyXG4gICAgICAgIHRoaXMubTEyID0gLW0xMiAvIGQ7XHJcbiAgICAgICAgdGhpcy5tMjEgPSAtbTIxIC8gZDtcclxuICAgICAgICB0aGlzLm0yMiA9IG0xMSAvIGQ7XHJcbiAgICAgICAgdGhpcy5keCA9IChtMjEgKiBtMzIgLSBtMzEgKiBtMjIpIC8gZDtcclxuICAgICAgICB0aGlzLmR5ID0gKG0zMSAqIG0xMiAtIG0xMSAqIG0zMikgLyBkO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zbGF0ZXMgdGhpcyBtYXRyaXggYnkgdGhlIHNwZWNpZmllZCB2YWx1ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGR4IC0gVGhlIFggdHJhbnNsYXRpb24uXHJcbiAgICAgKiBAcGFyYW0gZHkgLSBUaGUgWSB0cmFuc2xhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZShkeDogbnVtYmVyLCBkeTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5keCArPSBkeCAqIHRoaXMubTExICsgZHkgKiB0aGlzLm0yMTtcclxuICAgICAgICB0aGlzLmR5ICs9IGR4ICogdGhpcy5tMTIgKyBkeSAqIHRoaXMubTIyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhbnNsYXRlcyB0aGlzIG1hdHJpeCBieSB0aGUgc3BlY2lmaWVkIFggZGVsdGEuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGQgLSBUaGUgWCB0cmFuc2xhdGlvbiBkZWx0YS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZVgoZDogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5keCArPSBkICogdGhpcy5tMTE7XHJcbiAgICAgICAgdGhpcy5keSArPSBkICogdGhpcy5tMTI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBYIHRyYW5zbGF0aW9uIG9mIHRoZSBtYXRyaXguXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgWCB0cmFuc2xhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFRyYW5zbGF0aW9uWCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmR4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhbnNsYXRlcyB0aGlzIG1hdHJpeCBieSB0aGUgc3BlY2lmaWVkIFkgZGVsdGEuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGQgLSBUaGUgWSB0cmFuc2xhdGlvbiBkZWx0YS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZVkoZDogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5keCArPSBkICogdGhpcy5tMjE7XHJcbiAgICAgICAgdGhpcy5keSArPSBkICogdGhpcy5tMjI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBZIHRyYW5zbGF0aW9uIG9mIHRoZSBtYXRyaXguXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgWSB0cmFuc2xhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFRyYW5zbGF0aW9uWSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmR5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBtYXRyaXggdG8gYSB0cmFuc2xhdGlvbiBtYXRyaXguXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGR4IC0gVGhlIFggdHJhbnNsYXRpb24uXHJcbiAgICAgKiBAcGFyYW0gZHkgLSBUaGUgWSB0cmFuc2xhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFRyYW5zbGF0aW9uKGR4OiBudW1iZXIsIGR5OiBudW1iZXIpOiB0aGlzIHtcclxuICAgICAgICB0aGlzLm0xMSA9ICAxOyB0aGlzLm0xMiA9ICAwO1xyXG4gICAgICAgIHRoaXMubTIxID0gIDA7IHRoaXMubTIyID0gIDE7XHJcbiAgICAgICAgdGhpcy5keCA9IGR4OyB0aGlzLmR5ID0gZHk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIG1hdHJpeCBpbml0aWFsaXplZCB0byBhIHRyYW5zbGF0aW9uIG1hdHJpeC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZHggLSBUaGUgWCB0cmFuc2xhdGlvbi5cclxuICAgICAqIEBwYXJhbSBkeSAtIFRoZSBZIHRyYW5zbGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZVRyYW5zbGF0aW9uKGR4OiBudW1iZXIsIGR5OiBudW1iZXIpOiBBZmZpbmVUcmFuc2Zvcm0ge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWZmaW5lVHJhbnNmb3JtKCkuc2V0VHJhbnNsYXRpb24oZHgsIGR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNjYWxlcyB0aGlzIG1hdHJpeCBieSB0aGUgc3BlY2lmaWVkIGZhY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc3ggLSBUaGUgWCBzY2FsZSBmYWN0b3IuXHJcbiAgICAgKiBAcGFyYW0gc3kgLSBUaGUgWSBzY2FsZSBmYWN0b3IuIERlZmF1bHRzIHRvIFggc2NhbGUgZmFjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGUoc3g6IG51bWJlciwgc3kgPSBzeCk6IHRoaXMge1xyXG4gICAgICAgIHRoaXMubTExICo9IHN4O1xyXG4gICAgICAgIHRoaXMubTEyICo9IHN4O1xyXG4gICAgICAgIHRoaXMubTIxICo9IHN5O1xyXG4gICAgICAgIHRoaXMubTIyICo9IHN5O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBtYXRyaXggdG8gYSBzY2FsZSBtYXRyaXguXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHN4IC0gVGhlIFggc2NhbGUgZmFjdG9yLlxyXG4gICAgICogQHBhcmFtIHN5IC0gVGhlIFkgc2NhbGUgZmFjdG9yLiBEZWZhdWx0cyB0byBYIHNjYWxlIGZhY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFNjYWxlKHN4OiBudW1iZXIsIHN5ID0gc3gpOiB0aGlzIHtcclxuICAgICAgICB0aGlzLm0xMSA9IHN4OyB0aGlzLm0xMiA9ICAwO1xyXG4gICAgICAgIHRoaXMubTIxID0gIDA7IHRoaXMubTIyID0gc3k7XHJcbiAgICAgICAgdGhpcy5keCA9ICAwOyB0aGlzLmR5ID0gIDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTY2FsZXMgdGhpcyBtYXRyaXggYnkgdGhlIHNwZWNpZmllZCBmYWN0b3IgYWxvbmcgdGhlIFggYXhpcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcyAtIFRoZSBzY2FsZSBmYWN0b3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzY2FsZVgoczogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5tMTEgKj0gcztcclxuICAgICAgICB0aGlzLm0xMiAqPSBzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgWCBzY2FsZSBmYWN0b3Igb2YgdGhlIG1hdHJpeC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBYIHNjYWxlIGZhY3RvciBvZiB0aGUgbWF0cml4LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U2NhbGVYKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguaHlwb3QodGhpcy5tMTEsIHRoaXMubTIxKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNjYWxlcyB0aGlzIG1hdHJpeCBieSB0aGUgc3BlY2lmaWVkIGZhY3RvciBhbG9uZyB0aGUgWSBheGlzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzIC0gVGhlIHNjYWxlIGZhY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNjYWxlWShzOiBudW1iZXIpOiB0aGlzIHtcclxuICAgICAgICB0aGlzLm0yMSAqPSBzO1xyXG4gICAgICAgIHRoaXMubTIyICo9IHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBZIHNjYWxlIGZhY3RvciBvZiB0aGUgbWF0cml4LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIFkgc2NhbGUgZmFjdG9yIG9mIHRoZSBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTY2FsZVkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5oeXBvdCh0aGlzLm0xMiwgdGhpcy5tMjIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBtYXRyaXggaW5pdGlhbGl6ZWQgdG8gYSBzY2FsZSBtYXRyaXguXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHN4IC0gVGhlIFggc2NhbGUgZmFjdG9yLlxyXG4gICAgICogQHBhcmFtIHN5IC0gVGhlIFkgc2NhbGUgZmFjdG9yLiBEZWZhdWx0cyB0byBYIHNjYWxlIGZhY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVTY2FsZShzeDogbnVtYmVyLCBzeT86IG51bWJlcik6IEFmZmluZVRyYW5zZm9ybSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBZmZpbmVUcmFuc2Zvcm0oKS5zZXRTY2FsZShzeCwgc3kpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUm90YXRlcyB0aGlzIG1hdHJpeCBieSB0aGUgZ2l2ZW4gYW5nbGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFuZ2xlIC0gVGhlIHJvdGF0aW9uIGFuZ2xlIGluIFJBRC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJvdGF0ZShhbmdsZTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgY29uc3QgbTExID0gdGhpcy5tMTEsIG0xMiA9IHRoaXMubTEyO1xyXG4gICAgICAgIGNvbnN0IG0yMSA9IHRoaXMubTIxLCBtMjIgPSB0aGlzLm0yMjtcclxuICAgICAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGUpLCBjID0gTWF0aC5jb3MoYW5nbGUpO1xyXG4gICAgICAgIHRoaXMubTExID0gYyAqIG0xMSArIHMgKiBtMjE7XHJcbiAgICAgICAgdGhpcy5tMTIgPSBjICogbTEyICsgcyAqIG0yMjtcclxuICAgICAgICB0aGlzLm0yMSA9IGMgKiBtMjEgLSBzICogbTExO1xyXG4gICAgICAgIHRoaXMubTIyID0gYyAqIG0yMiAtIHMgKiBtMTI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSByb3RhdGlvbiBvZiB0aGlzIG1hdHJpeCBpbiByYWRpYW5zLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIHJvdGF0aW9uIGFuZ2xlIGluIHJhZGlhbnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRSb3RhdGlvbigpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IG0xMSA9IHRoaXMubTExLCBtMTIgPSB0aGlzLm0xMjtcclxuICAgICAgICBjb25zdCBtMjEgPSB0aGlzLm0yMSwgbTIyID0gdGhpcy5tMjI7XHJcbiAgICAgICAgaWYgKG0xMSAhPT0gMCB8fCBtMjEgIT09IDApIHtcclxuICAgICAgICAgICAgY29uc3QgYWNvcyA9IE1hdGguYWNvcyhtMTEgLyBNYXRoLmh5cG90KG0xMSwgbTIxKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBtMjEgPiAwID8gLWFjb3MgOiBhY29zO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobTEyICE9PSAwIHx8IG0yMiAhPT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBhY29zID0gTWF0aC5hY29zKG0xMiAvIE1hdGguaHlwb3QobTEyLCBtMjIpKTtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguUEkgLyAyICsgKG0yMiA+IDAgPyAtYWNvcyA6IGFjb3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgbWF0cml4IHRvIGEgcm90YXRpb24gbWF0cml4LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhbmdsZSAtIFRoZSByb3RhdGlvbiBhbmdsZSBpbiBSQUQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRSb3RhdGlvbihhbmdsZTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlKSwgYyA9IE1hdGguY29zKGFuZ2xlKTtcclxuICAgICAgICB0aGlzLm0xMSA9ICBjOyB0aGlzLm0xMiA9IHM7XHJcbiAgICAgICAgdGhpcy5tMjEgPSAtczsgdGhpcy5tMjIgPSBjO1xyXG4gICAgICAgIHRoaXMuZHggPSAgMDsgdGhpcy5keSA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgbmV3IG1hdHJpeCBpbml0aWFsaXplZCB0byBhIHJvdGF0aW9uIG1hdHJpeC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYW5nbGUgLSBUaGUgcm90YXRpb24gYW5nbGUgaW4gUkFELlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZVJvdGF0aW9uKGFuZ2xlOiBudW1iZXIpOiBBZmZpbmVUcmFuc2Zvcm0ge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWZmaW5lVHJhbnNmb3JtKCkuc2V0Um90YXRpb24oYW5nbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gMkQgY2FudmFzIHJlbmRlcmluZyBjb250ZXh0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjdHggLSBUaGUgMkQgY2FudmFzIHJlbmRlcmluZyBjb250ZXh0IHRvIHRyYW5zZm9ybS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zZm9ybUNhbnZhcyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHRoaXMge1xyXG4gICAgICAgIGN0eC50cmFuc2Zvcm0odGhpcy5tMTEsIHRoaXMubTEyLCB0aGlzLm0yMSwgdGhpcy5tMjIsIHRoaXMuZHgsIHRoaXMuZHkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdHJhbnNmb3JtYXRpb24gb2YgdGhlIGdpdmVuIDJEIGNhbnZhcyByZW5kZXJpbmcgY29udGV4dC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3R4IC0gVGhlIDJEIGNhbnZhcyByZW5kZXJpbmcgY29udGV4dCB0byBzZXQgdGhlIHRyYW5zZm9ybWF0aW9uIG9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0Q2FudmFzVHJhbnNmb3JtKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdGhpcyB7XHJcbiAgICAgICAgY3R4LnNldFRyYW5zZm9ybSh0aGlzLm0xMSwgdGhpcy5tMTIsIHRoaXMubTIxLCB0aGlzLm0yMiwgdGhpcy5keCwgdGhpcy5keSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTs7O0FBR0E7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoY0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/graphics/AffineTransform.js\n");
    
    /***/ }),
    
    /***/ "./lib/graphics/Line2.js":
    /*!*******************************!*\
      !*** ./lib/graphics/Line2.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Line2 = void 0;\nconst Vector2_1 = __webpack_require__(/*! ./Vector2 */ \"./lib/graphics/Vector2.js\");\n/**\n * A line connecting two vertices.\n */\nclass Line2 {\n    /**\n     * Creates a new line from vertex a to vertex b.\n     *\n     * @param start - The start of the line.\n     * @param end   - The end of the line.\n     */\n    constructor(start, end) {\n        this.start = start;\n        this.end = end;\n        this.normal = null;\n        this.center = null;\n    }\n    /**\n     * Returns the normal of the line. For a line in a clock-wise polygon this normal points to the outside of the\n     * polygon.\n     *\n     * @return The line normal. Normalized to a unit vector.\n     */\n    getNormal() {\n        var _a;\n        return ((_a = this.normal) !== null && _a !== void 0 ? _a : (this.normal = new Vector2_1.Vector2())).setComponents(this.end.y - this.start.y, this.start.x - this.end.x).normalize();\n    }\n    /**\n     * Returns the center of the line.\n     *\n     * @return The center of the line.\n     */\n    getCenter() {\n        var _a;\n        return ((_a = this.center) !== null && _a !== void 0 ? _a : (this.center = new Vector2_1.Vector2())).setComponents((this.start.x + this.end.x) / 2, (this.start.y + this.end.y) / 2);\n    }\n    /**\n     * Draws the line to the given 2D canvas rendering context. This only applies the line geometry,\n     * you have to stroke it yourself.\n     *\n     * @param ctx - The canvas rendering context.\n     */\n    draw(ctx) {\n        const { start: a, end: b } = this;\n        ctx.moveTo(a.x, a.x);\n        ctx.lineTo(b.x, a.y);\n        return this;\n    }\n    /**\n     * Draws the line normal to the given 2D canvas rendering context. This only applies the line geometry,\n     * you have to stroke it yourself.\n     *\n     * @param ctx - The canvas rendering context.\n     * @param len - Optional custom normal line length.\n     */\n    drawNormal(ctx, len = 25) {\n        const normal = this.getNormal();\n        const center = this.getCenter();\n        ctx.moveTo(center.x, center.y);\n        ctx.lineTo(center.x + normal.x * len, center.y + normal.y * len);\n        return this;\n    }\n}\nexports.Line2 = Line2;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZ3JhcGhpY3MvTGluZTIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZ3JhcGhpY3MvTGluZTIudHM/Y2ZhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWFkb25seVZlY3RvcjIsIFZlY3RvcjIgfSBmcm9tIFwiLi9WZWN0b3IyXCI7XHJcblxyXG4vKipcclxuICogQSBsaW5lIGNvbm5lY3RpbmcgdHdvIHZlcnRpY2VzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIExpbmUyIHtcclxuICAgIHByaXZhdGUgbm9ybWFsOiBWZWN0b3IyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGNlbnRlcjogVmVjdG9yMiB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBsaW5lIGZyb20gdmVydGV4IGEgdG8gdmVydGV4IGIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHN0YXJ0IC0gVGhlIHN0YXJ0IG9mIHRoZSBsaW5lLlxyXG4gICAgICogQHBhcmFtIGVuZCAgIC0gVGhlIGVuZCBvZiB0aGUgbGluZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBzdGFydDogVmVjdG9yMixcclxuICAgICAgICBwdWJsaWMgZW5kOiBWZWN0b3IyXHJcbiAgICApIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBub3JtYWwgb2YgdGhlIGxpbmUuIEZvciBhIGxpbmUgaW4gYSBjbG9jay13aXNlIHBvbHlnb24gdGhpcyBub3JtYWwgcG9pbnRzIHRvIHRoZSBvdXRzaWRlIG9mIHRoZVxyXG4gICAgICogcG9seWdvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBsaW5lIG5vcm1hbC4gTm9ybWFsaXplZCB0byBhIHVuaXQgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Tm9ybWFsKCk6IFJlYWRvbmx5VmVjdG9yMiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm5vcm1hbCA/PyAodGhpcy5ub3JtYWwgPSBuZXcgVmVjdG9yMigpKSkuc2V0Q29tcG9uZW50cyhcclxuICAgICAgICAgICAgdGhpcy5lbmQueSAtIHRoaXMuc3RhcnQueSxcclxuICAgICAgICAgICAgdGhpcy5zdGFydC54IC0gdGhpcy5lbmQueFxyXG4gICAgICAgICkubm9ybWFsaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjZW50ZXIgb2YgdGhlIGxpbmUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgY2VudGVyIG9mIHRoZSBsaW5lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q2VudGVyKCk6IFJlYWRvbmx5VmVjdG9yMiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmNlbnRlciA/PyAodGhpcy5jZW50ZXIgPSBuZXcgVmVjdG9yMigpKSkuc2V0Q29tcG9uZW50cyhcclxuICAgICAgICAgICAgKHRoaXMuc3RhcnQueCArIHRoaXMuZW5kLngpIC8gMixcclxuICAgICAgICAgICAgKHRoaXMuc3RhcnQueSArIHRoaXMuZW5kLnkpIC8gMlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgbGluZSB0byB0aGUgZ2l2ZW4gMkQgY2FudmFzIHJlbmRlcmluZyBjb250ZXh0LiBUaGlzIG9ubHkgYXBwbGllcyB0aGUgbGluZSBnZW9tZXRyeSxcclxuICAgICAqIHlvdSBoYXZlIHRvIHN0cm9rZSBpdCB5b3Vyc2VsZi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3R4IC0gVGhlIGNhbnZhcyByZW5kZXJpbmcgY29udGV4dC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB0aGlzIHtcclxuICAgICAgICBjb25zdCB7IHN0YXJ0OiBhLCBlbmQ6IGIgfSA9IHRoaXM7XHJcbiAgICAgICAgY3R4Lm1vdmVUbyhhLngsIGEueCk7XHJcbiAgICAgICAgY3R4LmxpbmVUbyhiLngsIGEueSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgbGluZSBub3JtYWwgdG8gdGhlIGdpdmVuIDJEIGNhbnZhcyByZW5kZXJpbmcgY29udGV4dC4gVGhpcyBvbmx5IGFwcGxpZXMgdGhlIGxpbmUgZ2VvbWV0cnksXHJcbiAgICAgKiB5b3UgaGF2ZSB0byBzdHJva2UgaXQgeW91cnNlbGYuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGN0eCAtIFRoZSBjYW52YXMgcmVuZGVyaW5nIGNvbnRleHQuXHJcbiAgICAgKiBAcGFyYW0gbGVuIC0gT3B0aW9uYWwgY3VzdG9tIG5vcm1hbCBsaW5lIGxlbmd0aC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRyYXdOb3JtYWwoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGxlbiA9IDI1KTogdGhpcyB7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsID0gdGhpcy5nZXROb3JtYWwoKTtcclxuICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLmdldENlbnRlcigpO1xyXG4gICAgICAgIGN0eC5tb3ZlVG8oY2VudGVyLngsIGNlbnRlci55KTtcclxuICAgICAgICBjdHgubGluZVRvKGNlbnRlci54ICsgbm9ybWFsLnggKiBsZW4sIGNlbnRlci55ICsgbm9ybWFsLnkgKiBsZW4pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFFQTs7QUFFQTtBQUNBO0FBSUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBV0E7QUFFQTs7Ozs7QUFLQTtBQUNBOztBQUNBO0FBSUE7QUFFQTs7OztBQUlBO0FBQ0E7O0FBQ0E7QUFJQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5FQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/graphics/Line2.js\n");
    
    /***/ }),
    
    /***/ "./lib/graphics/Polygon2.js":
    /*!**********************************!*\
      !*** ./lib/graphics/Polygon2.js ***!
      \**********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Polygon2 = void 0;\nconst Line2_1 = __webpack_require__(/*! ./Line2 */ \"./lib/graphics/Line2.js\");\nconst Vector2_1 = __webpack_require__(/*! ./Vector2 */ \"./lib/graphics/Vector2.js\");\n/**\n * A polygon with any number of vertices.\n */\nclass Polygon2 {\n    /**\n     * Creates a polygon with the given initial vertices.\n     *\n     * @param vertices - The polygon vertices.\n     */\n    constructor(...vertices) {\n        var _a;\n        this.edges = [];\n        this.normals = [];\n        this.vertices = vertices;\n        for (let i = 0, max = vertices.length; i < max; ++i) {\n            this.edges.push(new Line2_1.Line2(vertices[i], (_a = vertices[i + 1]) !== null && _a !== void 0 ? _a : vertices[0]));\n        }\n    }\n    /**\n     * Checks if polygon has at least one vertex.\n     *\n     * @return True if polygon has at least on vertex, false if not.\n     */\n    hasVertices() {\n        return this.vertices.length > 0;\n    }\n    /**\n     * Adds the given vertex at the given index. Polygon edges are automatically corrected.\n     *\n     * @param vertex - The vertex to add.\n     * @param index  - Optional insertion index. If not specified then vertex is added at the end of the polygon.\n     */\n    addVertex(vertex, index = this.vertices.length) {\n        const edge = new Line2_1.Line2(vertex, vertex);\n        this.vertices.splice(index, 0, vertex);\n        const previousEdge = this.edges[index - 1];\n        this.edges.splice(index, 0, edge);\n        if (previousEdge != null) {\n            edge.end = previousEdge.end;\n            previousEdge.end = vertex;\n        }\n        else {\n            edge.end = this.vertices[0];\n        }\n        return this;\n    }\n    /**\n     * Removes the vertex at the given index. Polygon edges are automatically corrected.\n     *\n     * @param index - The index of the vertex to remove.\n     */\n    removeVertex(index) {\n        var _a, _b;\n        const edges = this.edges;\n        const edge = edges[index];\n        if (edge != null) {\n            const previousEdge = (_a = edges[index - 1]) !== null && _a !== void 0 ? _a : edges[edges.length - 1];\n            const nextEdge = (_b = edges[index + 1]) !== null && _b !== void 0 ? _b : edges[0];\n            if (previousEdge !== edge && nextEdge !== edge) {\n                nextEdge.start = edge.end;\n                previousEdge.end = edge.end;\n            }\n            this.vertices.splice(index, 1);\n            this.edges.splice(index, 1);\n        }\n        return this;\n    }\n    /**\n     * Removes all vertices from the polygon.\n     */\n    clear() {\n        this.vertices.length = 0;\n        this.edges.length = 0;\n        this.normals.length = 0;\n        return this;\n    }\n    /**\n     * Returns the vertex normal for the vertex with the given index.\n     *\n     * @param index - The vertex index.\n     * @return The vertex normal.\n     */\n    getVertexNormal(index) {\n        var _a, _b, _c;\n        const normal = (_b = (_a = this.normals[index]) === null || _a === void 0 ? void 0 : _a.reset()) !== null && _b !== void 0 ? _b : (this.normals[index] = new Vector2_1.Vector2());\n        const edges = this.edges;\n        const edge = edges[index];\n        if (edge != null) {\n            normal.add(edge.getNormal());\n            const previousEdge = (_c = edges[index - 1]) !== null && _c !== void 0 ? _c : edges[edges.length - 1];\n            if (previousEdge != null) {\n                normal.add(previousEdge.getNormal());\n            }\n        }\n        return normal.normalize();\n    }\n    /**\n     * Draws the polygon to the given 2D canvas rendering context. This only applies the closed geometry, you have to\n     * fill/stroke/clip it yourself.\n     *\n     * @param ctx - The 2D canvas rendering context to render to.\n     */\n    draw(ctx) {\n        const vertices = this.vertices;\n        if (vertices.length > 0) {\n            const first = vertices[0];\n            ctx.moveTo(first.x, first.y);\n            for (let i = 1, max = vertices.length; i < max; ++i) {\n                const next = vertices[i];\n                ctx.lineTo(next.x, next.y);\n            }\n        }\n        ctx.closePath();\n        return this;\n    }\n    /**\n     * Draws the polygon edge normals to the given 2D canvas rendering context. This only applies the line geometries,\n     * you have to stroke it yourself.\n     *\n     * @param ctx - The canvas rendering context.\n     * @param len - Optional custom normal line length.\n     */\n    drawNormals(ctx, len) {\n        for (const edge of this.edges) {\n            edge.drawNormal(ctx, len);\n        }\n        return this;\n    }\n    /**\n     * Draws the vertex normals to the given 2D canvas rendering context. This only applies the line geometries,\n     * you have to stroke it yourself.\n     *\n     * @param ctx - The canvas rendering context.\n     * @param len - Optional custom normal line length.\n     */\n    drawVertexNormals(ctx, len = 25) {\n        this.vertices.forEach((vertex, index) => {\n            ctx.moveTo(vertex.x, vertex.y);\n            const normal = this.getVertexNormal(index);\n            ctx.lineTo(vertex.x + normal.x * len, vertex.y + normal.y * len);\n        });\n        return this;\n    }\n}\nexports.Polygon2 = Polygon2;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZ3JhcGhpY3MvUG9seWdvbjIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZ3JhcGhpY3MvUG9seWdvbjIudHM/YzdmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMaW5lMiB9IGZyb20gXCIuL0xpbmUyXCI7XHJcbmltcG9ydCB7IFJlYWRvbmx5VmVjdG9yMiwgVmVjdG9yMiB9IGZyb20gXCIuL1ZlY3RvcjJcIjtcclxuXHJcbi8qKlxyXG4gKiBBIHBvbHlnb24gd2l0aCBhbnkgbnVtYmVyIG9mIHZlcnRpY2VzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBvbHlnb24yIHtcclxuICAgIHB1YmxpYyByZWFkb25seSB2ZXJ0aWNlczogVmVjdG9yMltdO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGVkZ2VzOiBMaW5lMltdID0gW107XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG5vcm1hbHM6IFZlY3RvcjJbXSA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHBvbHlnb24gd2l0aCB0aGUgZ2l2ZW4gaW5pdGlhbCB2ZXJ0aWNlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmVydGljZXMgLSBUaGUgcG9seWdvbiB2ZXJ0aWNlcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKC4uLnZlcnRpY2VzOiBWZWN0b3IyW10pIHtcclxuICAgICAgICB0aGlzLnZlcnRpY2VzID0gdmVydGljZXM7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIG1heCA9IHZlcnRpY2VzLmxlbmd0aDsgaSA8IG1heDsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRnZXMucHVzaChuZXcgTGluZTIodmVydGljZXNbaV0sIHZlcnRpY2VzW2kgKyAxXSA/PyB2ZXJ0aWNlc1swXSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiBwb2x5Z29uIGhhcyBhdCBsZWFzdCBvbmUgdmVydGV4LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBwb2x5Z29uIGhhcyBhdCBsZWFzdCBvbiB2ZXJ0ZXgsIGZhbHNlIGlmIG5vdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGhhc1ZlcnRpY2VzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZlcnRpY2VzLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBnaXZlbiB2ZXJ0ZXggYXQgdGhlIGdpdmVuIGluZGV4LiBQb2x5Z29uIGVkZ2VzIGFyZSBhdXRvbWF0aWNhbGx5IGNvcnJlY3RlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmVydGV4IC0gVGhlIHZlcnRleCB0byBhZGQuXHJcbiAgICAgKiBAcGFyYW0gaW5kZXggIC0gT3B0aW9uYWwgaW5zZXJ0aW9uIGluZGV4LiBJZiBub3Qgc3BlY2lmaWVkIHRoZW4gdmVydGV4IGlzIGFkZGVkIGF0IHRoZSBlbmQgb2YgdGhlIHBvbHlnb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRWZXJ0ZXgodmVydGV4OiBWZWN0b3IyLCBpbmRleDogbnVtYmVyID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGgpOiB0aGlzIHtcclxuICAgICAgICBjb25zdCBlZGdlID0gbmV3IExpbmUyKHZlcnRleCwgdmVydGV4KTtcclxuICAgICAgICB0aGlzLnZlcnRpY2VzLnNwbGljZShpbmRleCwgMCwgdmVydGV4KTtcclxuICAgICAgICBjb25zdCBwcmV2aW91c0VkZ2UgPSB0aGlzLmVkZ2VzW2luZGV4IC0gMV07XHJcbiAgICAgICAgdGhpcy5lZGdlcy5zcGxpY2UoaW5kZXgsIDAsIGVkZ2UpO1xyXG4gICAgICAgIGlmIChwcmV2aW91c0VkZ2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBlZGdlLmVuZCA9IHByZXZpb3VzRWRnZS5lbmQ7XHJcbiAgICAgICAgICAgIHByZXZpb3VzRWRnZS5lbmQgPSB2ZXJ0ZXg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWRnZS5lbmQgPSB0aGlzLnZlcnRpY2VzWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIHZlcnRleCBhdCB0aGUgZ2l2ZW4gaW5kZXguIFBvbHlnb24gZWRnZXMgYXJlIGF1dG9tYXRpY2FsbHkgY29ycmVjdGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbmRleCAtIFRoZSBpbmRleCBvZiB0aGUgdmVydGV4IHRvIHJlbW92ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbW92ZVZlcnRleChpbmRleDogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgY29uc3QgZWRnZXMgPSB0aGlzLmVkZ2VzO1xyXG4gICAgICAgIGNvbnN0IGVkZ2UgPSBlZGdlc1tpbmRleF07XHJcbiAgICAgICAgaWYgKGVkZ2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c0VkZ2UgPSBlZGdlc1tpbmRleCAtIDFdID8/IGVkZ2VzW2VkZ2VzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0RWRnZSA9IGVkZ2VzW2luZGV4ICsgMV0gPz8gZWRnZXNbMF07XHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0VkZ2UgIT09IGVkZ2UgJiYgbmV4dEVkZ2UgIT09IGVkZ2UpIHtcclxuICAgICAgICAgICAgICAgIG5leHRFZGdlLnN0YXJ0ID0gZWRnZS5lbmQ7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c0VkZ2UuZW5kID0gZWRnZS5lbmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy52ZXJ0aWNlcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB0aGlzLmVkZ2VzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbGwgdmVydGljZXMgZnJvbSB0aGUgcG9seWdvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNsZWFyKCk6IHRoaXMge1xyXG4gICAgICAgIHRoaXMudmVydGljZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmVkZ2VzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5ub3JtYWxzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB2ZXJ0ZXggbm9ybWFsIGZvciB0aGUgdmVydGV4IHdpdGggdGhlIGdpdmVuIGluZGV4LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbmRleCAtIFRoZSB2ZXJ0ZXggaW5kZXguXHJcbiAgICAgKiBAcmV0dXJuIFRoZSB2ZXJ0ZXggbm9ybWFsLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VmVydGV4Tm9ybWFsKGluZGV4OiBudW1iZXIpOiBSZWFkb25seVZlY3RvcjIge1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbCA9IHRoaXMubm9ybWFsc1tpbmRleF0/LnJlc2V0KCkgPz8gKHRoaXMubm9ybWFsc1tpbmRleF0gPSBuZXcgVmVjdG9yMigpKTtcclxuICAgICAgICBjb25zdCBlZGdlcyA9IHRoaXMuZWRnZXM7XHJcbiAgICAgICAgY29uc3QgZWRnZSA9IGVkZ2VzW2luZGV4XTtcclxuICAgICAgICBpZiAoZWRnZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIG5vcm1hbC5hZGQoZWRnZS5nZXROb3JtYWwoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzRWRnZSA9IGVkZ2VzW2luZGV4IC0gMV0gPz8gZWRnZXNbZWRnZXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0VkZ2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgbm9ybWFsLmFkZChwcmV2aW91c0VkZ2UuZ2V0Tm9ybWFsKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub3JtYWwubm9ybWFsaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgcG9seWdvbiB0byB0aGUgZ2l2ZW4gMkQgY2FudmFzIHJlbmRlcmluZyBjb250ZXh0LiBUaGlzIG9ubHkgYXBwbGllcyB0aGUgY2xvc2VkIGdlb21ldHJ5LCB5b3UgaGF2ZSB0b1xyXG4gICAgICogZmlsbC9zdHJva2UvY2xpcCBpdCB5b3Vyc2VsZi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3R4IC0gVGhlIDJEIGNhbnZhcyByZW5kZXJpbmcgY29udGV4dCB0byByZW5kZXIgdG8uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdGhpcyB7XHJcbiAgICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xyXG4gICAgICAgIGlmICh2ZXJ0aWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0ID0gdmVydGljZXNbMF07XHJcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oZmlyc3QueCwgZmlyc3QueSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxLCBtYXggPSB2ZXJ0aWNlcy5sZW5ndGg7IGkgPCBtYXg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHZlcnRpY2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhuZXh0LngsIG5leHQueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhd3MgdGhlIHBvbHlnb24gZWRnZSBub3JtYWxzIHRvIHRoZSBnaXZlbiAyRCBjYW52YXMgcmVuZGVyaW5nIGNvbnRleHQuIFRoaXMgb25seSBhcHBsaWVzIHRoZSBsaW5lIGdlb21ldHJpZXMsXHJcbiAgICAgKiB5b3UgaGF2ZSB0byBzdHJva2UgaXQgeW91cnNlbGYuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGN0eCAtIFRoZSBjYW52YXMgcmVuZGVyaW5nIGNvbnRleHQuXHJcbiAgICAgKiBAcGFyYW0gbGVuIC0gT3B0aW9uYWwgY3VzdG9tIG5vcm1hbCBsaW5lIGxlbmd0aC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRyYXdOb3JtYWxzKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBsZW4/OiBudW1iZXIpOiB0aGlzIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGVkZ2Ugb2YgdGhpcy5lZGdlcykge1xyXG4gICAgICAgICAgICBlZGdlLmRyYXdOb3JtYWwoY3R4LCBsZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSB2ZXJ0ZXggbm9ybWFscyB0byB0aGUgZ2l2ZW4gMkQgY2FudmFzIHJlbmRlcmluZyBjb250ZXh0LiBUaGlzIG9ubHkgYXBwbGllcyB0aGUgbGluZSBnZW9tZXRyaWVzLFxyXG4gICAgICogeW91IGhhdmUgdG8gc3Ryb2tlIGl0IHlvdXJzZWxmLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjdHggLSBUaGUgY2FudmFzIHJlbmRlcmluZyBjb250ZXh0LlxyXG4gICAgICogQHBhcmFtIGxlbiAtIE9wdGlvbmFsIGN1c3RvbSBub3JtYWwgbGluZSBsZW5ndGguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkcmF3VmVydGV4Tm9ybWFscyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgbGVuOiBudW1iZXIgPSAyNSk6IHRoaXMge1xyXG4gICAgICAgIHRoaXMudmVydGljZXMuZm9yRWFjaCgodmVydGV4LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjdHgubW92ZVRvKHZlcnRleC54LCB2ZXJ0ZXgueSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbCA9IHRoaXMuZ2V0VmVydGV4Tm9ybWFsKGluZGV4KTtcclxuICAgICAgICAgICAgY3R4LmxpbmVUbyh2ZXJ0ZXgueCArIG5vcm1hbC54ICogbGVuLCB2ZXJ0ZXgueSArIG5vcm1hbC55ICogbGVuKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBS0E7Ozs7QUFJQTtBQUNBOztBQVJBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsSkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/graphics/Polygon2.js\n");
    
    /***/ }),
    
    /***/ "./lib/graphics/Vector2.js":
    /*!*********************************!*\
      !*** ./lib/graphics/Vector2.js ***!
      \*********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Vector2 = void 0;\n/**\n * Vector with two floating point components.\n */\nclass Vector2 {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    /** @inheritDoc */\n    toString() {\n        return `[ ${this.x}, ${this.y} ]`;\n    }\n    /**\n     * Sets the vector component values.\n     *\n     * @param x - The X component value to set.\n     * @param y - The Y component value to set.\n     */\n    setComponents(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n    /**\n     * Sets the vector component values by copying them from the given vector.\n     *\n     * @param vector - The vector to copy the X and Y component values from.\n     */\n    setVector(vector) {\n        this.x = vector.x;\n        this.y = vector.y;\n        return this;\n    }\n    /** @inheritDoc */\n    clone() {\n        return new Vector2(this.x, this.y);\n    }\n    /** @inheritDoc */\n    getSquareLength() {\n        return Math.pow(this.x, 2) + Math.pow(this.y, 2);\n    }\n    /** @inheritDoc */\n    getLength() {\n        return Math.sqrt(this.getSquareLength());\n    }\n    /** @inheritDoc */\n    getSquareDistance(v) {\n        return Math.pow((this.x - v.x), 2) + Math.pow((this.y - v.y), 2);\n    }\n    /** @inheritDoc */\n    getDistance(v) {\n        return Math.sqrt(this.getSquareDistance(v));\n    }\n    /** @inheritDoc */\n    dot(v) {\n        return this.x * v.x + this.y * v.y;\n    }\n    /**\n     * Negates this vector.\n     */\n    negate() {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    }\n    /**\n     * Resets all components of this vector to 0.\n     */\n    reset() {\n        this.x = this.y = 0;\n        return this;\n    }\n    /**\n     * Translates the vector by the given deltas.\n     *\n     * @param x - The x delta.\n     * @param y - The y delta.\n     */\n    translate(x, y) {\n        this.x += x;\n        this.y += y;\n        return this;\n    }\n    /**\n     * Adds the given vector to this vector.\n     *\n     * @param summand - The vector to add.\n     */\n    add(summand) {\n        this.x += summand.x;\n        this.y += summand.y;\n        return this;\n    }\n    /**\n     * Subtracts the given vector from this vector.\n     *\n     * @param subtrahend - The vector to subtract from this vector.\n     */\n    sub(subtrahend) {\n        this.x -= subtrahend.x;\n        this.y -= subtrahend.y;\n        return this;\n    }\n    /**\n     * Multiplies this vector with the specified matrix (In GLSL: `this = matrix * this`).\n     *\n     * @param matrix - The matrix to multiply this vector with.\n     */\n    mul(arg) {\n        const x = this.x;\n        const y = this.y;\n        this.x = x * arg.m11 + y * arg.m21 + arg.dx;\n        this.y = x * arg.m12 + y * arg.m22 + arg.dy;\n        return this;\n    }\n    /**\n     * Multiplies this vector with the inverse of the specified matrix (In GLSL: `this = matrix / this`).\n     *\n     * @param matrix - The matrix to divide this vector by.\n     */\n    div(arg) {\n        const b11 = arg.m11, b12 = arg.m12;\n        const b21 = arg.m21, b22 = arg.m22;\n        const x = this.x;\n        const y = this.y;\n        const d = b11 * b22 - b12 * b21;\n        const c11 = b22 / d;\n        const c12 = -b12 / d;\n        const c21 = -b21 / d;\n        const c22 = b11 / d;\n        const b31 = arg.dx, b32 = arg.dy;\n        this.x = x * c11 + y * c21 + (b21 * b32 - b31 * b22) / d;\n        this.y = x * c12 + y * c22 + (b31 * b12 - b11 * b32) / d;\n        return this;\n    }\n    /**\n     * Normalizes this vector to a length of 1.\n     */\n    normalize() {\n        const len = this.getLength();\n        this.x /= len;\n        this.y /= len;\n        return this;\n    }\n}\nexports.Vector2 = Vector2;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvZ3JhcGhpY3MvVmVjdG9yMi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ncmFwaGljcy9WZWN0b3IyLnRzPzM0YmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZmaW5lVHJhbnNmb3JtIH0gZnJvbSBcIi4vQWZmaW5lVHJhbnNmb3JtXCI7XHJcblxyXG4vKipcclxuICogTWluaW1hbCBpbnRlcmZhY2Ugb2YgYSAyRCB2ZWN0b3IuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFZlY3RvcjJMaWtlIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZWFkb25seVZlY3RvcjJMaWtlIHtcclxuICAgIHJlYWRvbmx5IHg6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZWFkb25seVZlY3RvcjIgZXh0ZW5kcyBSZWFkb25seVZlY3RvcjJMaWtlIHtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IuIElmIHlvdSBvbmx5IG5lZWQgdG8gY29tcGFyZSB2ZWN0b3IgbGVuZ3RocyBzbyB0aGUgcmVhbCBsZW5ndGggZG9lc24ndCBtYXR0ZXJcclxuICAgICAqIHRoZW4gY29uc2lkZXIgdXNpbmcgdGhlIGZhc3RlciBbW2dldFNxdWFyZUxlbmd0aF1dIG1ldGhvZCB3aGljaCBvbWl0cyB0aGUgZXhwZW5zaXZlIHNxdWFyZSByb290IGNhbGN1bGF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIHZlY3RvciBsZW5ndGguXHJcbiAgICAgKi9cclxuICAgIGdldExlbmd0aCgpOiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLiBJbiBzb21lIGNhc2VzIChMaWtlIGNvbXBhcmluZyB2ZWN0b3IgbGVuZ3RocykgaXQgaXMgbm90IG5lY2Vzc2FyeSB0b1xyXG4gICAgICogY29tcGFyZSB0aGUgcmVhbCBsZW5ndGgsIGl0IGlzIGVub3VnaCB0byBjb21wYXJlIHRoZSBzcXVhcmVkIGxlbmd0aC4gVGhpcyBpcyBmYXN0ZXIgYmVjYXVzZSBpdCBvbmx5IGRvZXNcclxuICAgICAqIGFkZGl0aW9uIGFuZCBtdWx0aXBsaWNhdGlvbiB3aXRob3V0IGEgc3F1YXJlIHJvb3QuIElmIHlvdSBuZWVkIHRoZSByZWFsIHZlY3RvciBsZW5ndGggdGhlbiB1c2UgdGhlXHJcbiAgICAgKiBbW2dldExlbmd0aF1dIG1ldGhvZCBpbnN0ZWFkLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIHNxdWFyZWQgdmVjdG9yIGxlbmd0aC5cclxuICAgICAqL1xyXG4gICAgZ2V0U3F1YXJlTGVuZ3RoKCk6IG51bWJlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIHRoZSBzcGVjaWZpZWQgb25lLiBJZiB5b3Ugb25seSBuZWVkIHRvIGNvbXBhcmUgdmVjdG9yIGRpc3RhbmNlcyBzb1xyXG4gICAgICogdGhlIHJlYWwgZGlzdGFuY2UgZG9lc24ndCBtYXR0ZXIgdGhlbiBjb25zaWRlciB1c2luZyB0aGUgZmFzdGVyIFtbZ2V0U3F1YXJlRGlzdGFuY2VdXSBtZXRob2Qgd2hpY2ggb21pdHMgdGhlXHJcbiAgICAgKiBleHBlbnNpdmUgc3F1YXJlIHJvb3QgY2FsY3VsYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHYgLSBUaGUgb3RoZXIgdmVjdG9yLlxyXG4gICAgICogQHJldHVybiBUaGUgZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgdGhlIHNwZWNpZmllZCBvbmUuXHJcbiAgICAgKi9cclxuICAgIGdldERpc3RhbmNlKHY6IFJlYWRvbmx5VmVjdG9yMkxpa2UpOiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIHRoZSBzcGVjaWZpZWQgb25lLiBJbiBzb21lIGNhc2VzIChMaWtlIGNvbXBhcmluZ1xyXG4gICAgICogdmVjdG9yIGRpc3RhbmNlcykgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byBjb21wYXJlIHRoZSByZWFsIGRpc3RhbmNlLCBpdCBpcyBlbm91Z2ggdG8gY29tcGFyZSB0aGUgc3F1YXJlZFxyXG4gICAgICogZGlzdGFuY2UuIFRoaXMgaXMgZmFzdGVyIGJlY2F1c2UgaXQgb25seSBkb2VzIGFkZGl0aW9uIGFuZCBtdWx0aXBsaWNhdGlvbiB3aXRob3V0IGEgc3F1YXJlIHJvb3QuIElmIHlvdSBuZWVkXHJcbiAgICAgKiB0aGUgcmVhbCB2ZWN0b3IgZGlzdGFuY2UgdGhlbiB1c2UgdGhlIFtbZ2V0RGlzdGFuY2VdXSBtZXRob2QgaW5zdGVhZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdiAtIFRoZSBvdGhlciB2ZWN0b3IuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byB2ZWN0b3JzLlxyXG4gICAgICovXHJcbiAgICBnZXRTcXVhcmVEaXN0YW5jZSh2OiBSZWFkb25seVZlY3RvcjJMaWtlKTogbnVtYmVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZG90IHByb2R1Y3Qgb2YgdGhpcyB2ZWN0b3IgYW5kIHRoZSBzcGVjaWZpZWQgb25lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2IC0gVGhlIG90aGVyIHZlY3Rvci5cclxuICAgICAqIEByZXR1cm4gVGhlIGRvdCBwcm9kdWN0LlxyXG4gICAgICovXHJcbiAgICBkb3QodjogUmVhZG9ubHlWZWN0b3IyTGlrZSk6IG51bWJlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBodW1hbi1yZWFkYWJsZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbWF4RnJhY3Rpb25EaWdpdHMgLSBPcHRpb25hbCBudW1iZXIgb2YgbWF4aW11bSBmcmFjdGlvbiBkaWdpdHMgdG8gdXNlIGluIHRoZSBzdHJpbmcuIERlZmF1bHRzIHRvIDUuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBodW1hbi1yZWFkYWJsZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3Rvci5cclxuICAgICAqL1xyXG4gICAgdG9TdHJpbmcobWF4RnJhY3Rpb25EaWdpdHM/OiBudW1iZXIpOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWZWN0b3Igd2l0aCB0d28gZmxvYXRpbmcgcG9pbnQgY29tcG9uZW50cy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBWZWN0b3IyIGltcGxlbWVudHMgUmVhZG9ubHlWZWN0b3IyTGlrZSwgVmVjdG9yMkxpa2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHZlY3RvciB3aXRoIGFsbCBjb21wb25lbnRzIHNldCB0byAwLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgdmVjdG9yIHdpdGggdGhlIGdpdmVuIGNvbXBvbmVudCB2YWx1ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHggLSBUaGUgaW5pdGlhbCBYIGNvbXBvbmVudCB2YWx1ZS5cclxuICAgICAqIEBwYXJhbSB5IC0gVGhlIGluaXRpYWwgWSBjb21wb25lbnQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcik7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyB4OiBudW1iZXIgPSAwLFxyXG4gICAgICAgIHB1YmxpYyB5OiBudW1iZXIgPSAwXHJcbiAgICApIHt9XHJcblxyXG4gICAgLyoqIEBpbmhlcml0RG9jICovXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYFsgJHt0aGlzLnh9LCAke3RoaXMueX0gXWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB2ZWN0b3IgY29tcG9uZW50IHZhbHVlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geCAtIFRoZSBYIGNvbXBvbmVudCB2YWx1ZSB0byBzZXQuXHJcbiAgICAgKiBAcGFyYW0geSAtIFRoZSBZIGNvbXBvbmVudCB2YWx1ZSB0byBzZXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRDb21wb25lbnRzKHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdmVjdG9yIGNvbXBvbmVudCB2YWx1ZXMgYnkgY29weWluZyB0aGVtIGZyb20gdGhlIGdpdmVuIHZlY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmVjdG9yIC0gVGhlIHZlY3RvciB0byBjb3B5IHRoZSBYIGFuZCBZIGNvbXBvbmVudCB2YWx1ZXMgZnJvbS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFZlY3Rvcih2ZWN0b3I6IFZlY3RvcjJMaWtlKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy54ID0gdmVjdG9yLng7XHJcbiAgICAgICAgdGhpcy55ID0gdmVjdG9yLnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEBpbmhlcml0RG9jICovXHJcbiAgICBwdWJsaWMgY2xvbmUoKTogVmVjdG9yMiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCwgdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgIHB1YmxpYyBnZXRTcXVhcmVMZW5ndGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ICoqIDIgKyB0aGlzLnkgKiogMjtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgIHB1YmxpYyBnZXRMZW5ndGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZ2V0U3F1YXJlTGVuZ3RoKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xyXG4gICAgcHVibGljIGdldFNxdWFyZURpc3RhbmNlKHY6IFZlY3RvcjJMaWtlKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMueCAtIHYueCkgKiogMiArICh0aGlzLnkgLSB2LnkpICoqIDI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEBpbmhlcml0RG9jICovXHJcbiAgICBwdWJsaWMgZ2V0RGlzdGFuY2UodjogVmVjdG9yMkxpa2UpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5nZXRTcXVhcmVEaXN0YW5jZSh2KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEBpbmhlcml0RG9jICovXHJcbiAgICBwdWJsaWMgZG90KHY6IFZlY3RvcjJMaWtlKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTmVnYXRlcyB0aGlzIHZlY3Rvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIG5lZ2F0ZSgpOiB0aGlzIHtcclxuICAgICAgICB0aGlzLnggPSAtdGhpcy54O1xyXG4gICAgICAgIHRoaXMueSA9IC10aGlzLnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgYWxsIGNvbXBvbmVudHMgb2YgdGhpcyB2ZWN0b3IgdG8gMC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc2V0KCk6IHRoaXMge1xyXG4gICAgICAgIHRoaXMueCA9IHRoaXMueSA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2xhdGVzIHRoZSB2ZWN0b3IgYnkgdGhlIGdpdmVuIGRlbHRhcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geCAtIFRoZSB4IGRlbHRhLlxyXG4gICAgICogQHBhcmFtIHkgLSBUaGUgeSBkZWx0YS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXMge1xyXG4gICAgICAgIHRoaXMueCArPSB4O1xyXG4gICAgICAgIHRoaXMueSArPSB5O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgZ2l2ZW4gdmVjdG9yIHRvIHRoaXMgdmVjdG9yLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzdW1tYW5kIC0gVGhlIHZlY3RvciB0byBhZGQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGQoc3VtbWFuZDogVmVjdG9yMkxpa2UpOiB0aGlzIHtcclxuICAgICAgICB0aGlzLnggKz0gc3VtbWFuZC54O1xyXG4gICAgICAgIHRoaXMueSArPSBzdW1tYW5kLnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJ0cmFjdHMgdGhlIGdpdmVuIHZlY3RvciBmcm9tIHRoaXMgdmVjdG9yLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzdWJ0cmFoZW5kIC0gVGhlIHZlY3RvciB0byBzdWJ0cmFjdCBmcm9tIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3ViKHN1YnRyYWhlbmQ6IFZlY3RvcjJMaWtlKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy54IC09IHN1YnRyYWhlbmQueDtcclxuICAgICAgICB0aGlzLnkgLT0gc3VidHJhaGVuZC55O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTXVsdGlwbGllcyB0aGlzIHZlY3RvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWF0cml4IChJbiBHTFNMOiBgdGhpcyA9IG1hdHJpeCAqIHRoaXNgKS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbWF0cml4IC0gVGhlIG1hdHJpeCB0byBtdWx0aXBseSB0aGlzIHZlY3RvciB3aXRoLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbXVsKGFyZzogQWZmaW5lVHJhbnNmb3JtKTogdGhpcyB7XHJcbiAgICAgICAgY29uc3QgeCA9IHRoaXMueDtcclxuICAgICAgICBjb25zdCB5ID0gdGhpcy55O1xyXG4gICAgICAgIHRoaXMueCA9IHggKiBhcmcubTExICsgeSAqIGFyZy5tMjEgKyBhcmcuZHg7XHJcbiAgICAgICAgdGhpcy55ID0geCAqIGFyZy5tMTIgKyB5ICogYXJnLm0yMiArIGFyZy5keTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE11bHRpcGxpZXMgdGhpcyB2ZWN0b3Igd2l0aCB0aGUgaW52ZXJzZSBvZiB0aGUgc3BlY2lmaWVkIG1hdHJpeCAoSW4gR0xTTDogYHRoaXMgPSBtYXRyaXggLyB0aGlzYCkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG1hdHJpeCAtIFRoZSBtYXRyaXggdG8gZGl2aWRlIHRoaXMgdmVjdG9yIGJ5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGl2KGFyZzogQWZmaW5lVHJhbnNmb3JtKTogdGhpcyB7XHJcbiAgICAgICAgY29uc3QgYjExID0gYXJnLm0xMSwgYjEyID0gYXJnLm0xMjtcclxuICAgICAgICBjb25zdCBiMjEgPSBhcmcubTIxLCBiMjIgPSBhcmcubTIyO1xyXG4gICAgICAgIGNvbnN0IHggPSB0aGlzLng7XHJcbiAgICAgICAgY29uc3QgeSA9IHRoaXMueTtcclxuICAgICAgICBjb25zdCBkID0gYjExICogYjIyIC0gYjEyICogYjIxO1xyXG4gICAgICAgIGNvbnN0IGMxMSA9IGIyMiAvIGQ7XHJcbiAgICAgICAgY29uc3QgYzEyID0gLWIxMiAvIGQ7XHJcbiAgICAgICAgY29uc3QgYzIxID0gLWIyMSAvIGQ7XHJcbiAgICAgICAgY29uc3QgYzIyID0gYjExIC8gZDtcclxuICAgICAgICBjb25zdCBiMzEgPSBhcmcuZHgsIGIzMiA9IGFyZy5keTtcclxuICAgICAgICB0aGlzLnggPSB4ICogYzExICsgeSAqIGMyMSArIChiMjEgKiBiMzIgLSBiMzEgKiBiMjIpIC8gZDtcclxuICAgICAgICB0aGlzLnkgPSB4ICogYzEyICsgeSAqIGMyMiArIChiMzEgKiBiMTIgLSBiMTEgKiBiMzIpIC8gZDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vcm1hbGl6ZXMgdGhpcyB2ZWN0b3IgdG8gYSBsZW5ndGggb2YgMS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIG5vcm1hbGl6ZSgpOiB0aGlzIHtcclxuICAgICAgICBjb25zdCBsZW4gPSB0aGlzLmdldExlbmd0aCgpO1xyXG4gICAgICAgIHRoaXMueCAvPSBsZW47XHJcbiAgICAgICAgdGhpcy55IC89IGxlbjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7OztBQXdFQTs7QUFFQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNLQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/graphics/Vector2.js\n");
    
    /***/ }),
    
    /***/ "./lib/input/ControllerEvent.js":
    /*!**************************************!*\
      !*** ./lib/input/ControllerEvent.js ***!
      \**************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GamepadControllerEvent = exports.ControllerEvent = void 0;\nconst ControllerFamily_1 = __webpack_require__(/*! ./ControllerFamily */ \"./lib/input/ControllerFamily.js\");\nconst ControllerIntent_1 = __webpack_require__(/*! ./ControllerIntent */ \"./lib/input/ControllerIntent.js\");\nconst controllerFamilySymbol = Symbol(\"controllerFamily\");\nconst intentsSymbol = Symbol(\"intent\");\nconst eventTypeSymbol = Symbol(\"eventType\");\nconst repeatSymbol = Symbol(\"repeat\");\nclass ControllerEvent extends Object {\n    constructor(controllerFamily, eventType, intents, repeat = false) {\n        super();\n        this[controllerFamilySymbol] = controllerFamily;\n        this[intentsSymbol] = intents.reduce((prev, curr) => prev | curr);\n        this[eventTypeSymbol] = eventType;\n        this[repeatSymbol] = repeat;\n    }\n    get controllerFamily() {\n        return this[controllerFamilySymbol];\n    }\n    get eventType() {\n        return this[eventTypeSymbol];\n    }\n    get repeat() {\n        return this[repeatSymbol];\n    }\n    get isMenuLeft() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.MENU_LEFT) === ControllerIntent_1.ControllerIntent.MENU_LEFT;\n    }\n    get isMenuRight() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.MENU_RIGHT) === ControllerIntent_1.ControllerIntent.MENU_RIGHT;\n    }\n    get isMenuUp() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.MENU_UP) === ControllerIntent_1.ControllerIntent.MENU_UP;\n    }\n    get isMenuDown() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.MENU_DOWN) === ControllerIntent_1.ControllerIntent.MENU_DOWN;\n    }\n    get isPlayerMoveLeft() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_MOVE_LEFT) === ControllerIntent_1.ControllerIntent.PLAYER_MOVE_LEFT;\n    }\n    get isPlayerMoveRight() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_MOVE_RIGHT) === ControllerIntent_1.ControllerIntent.PLAYER_MOVE_RIGHT;\n    }\n    get isPlayerJump() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_JUMP) === ControllerIntent_1.ControllerIntent.PLAYER_JUMP;\n    }\n    get isPlayerDrop() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_DROP) === ControllerIntent_1.ControllerIntent.PLAYER_DROP;\n    }\n    get isPlayerEnterDoor() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_ENTER_DOOR) === ControllerIntent_1.ControllerIntent.PLAYER_ENTER_DOOR;\n    }\n    get isPlayerInteract() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_INTERACT) === ControllerIntent_1.ControllerIntent.PLAYER_INTERACT;\n    }\n    get isPlayerAction() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_ACTION) === ControllerIntent_1.ControllerIntent.PLAYER_ACTION;\n    }\n    get isPlayerRun() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_RUN) === ControllerIntent_1.ControllerIntent.PLAYER_RUN;\n    }\n    get isPlayerDance1() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_DANCE_1) === ControllerIntent_1.ControllerIntent.PLAYER_DANCE_1;\n    }\n    get isPlayerDance2() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PLAYER_DANCE_2) === ControllerIntent_1.ControllerIntent.PLAYER_DANCE_2;\n    }\n    get isPause() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.PAUSE) === ControllerIntent_1.ControllerIntent.PAUSE;\n    }\n    get isConfirm() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.CONFIRM) === ControllerIntent_1.ControllerIntent.CONFIRM;\n    }\n    get isAbort() {\n        return (this[intentsSymbol] & ControllerIntent_1.ControllerIntent.ABORT) === ControllerIntent_1.ControllerIntent.ABORT;\n    }\n}\nexports.ControllerEvent = ControllerEvent;\nconst gamepadModelSymbol = Symbol(\"gamepadModel\");\nclass GamepadControllerEvent extends ControllerEvent {\n    constructor(gamepadModel, eventType, intents, repeat = false) {\n        super(ControllerFamily_1.ControllerFamily.GAMEPAD, eventType, intents, repeat);\n        this[gamepadModelSymbol] = gamepadModel;\n    }\n    get gamepadModel() {\n        return this[gamepadModelSymbol];\n    }\n}\nexports.GamepadControllerEvent = GamepadControllerEvent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaW5wdXQvQ29udHJvbGxlckV2ZW50LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2lucHV0L0NvbnRyb2xsZXJFdmVudC50cz80MmM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRyb2xsZXJFdmVudFR5cGUgfSBmcm9tIFwiLi9Db250cm9sbGVyRXZlbnRUeXBlXCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJGYW1pbHkgfSBmcm9tIFwiLi9Db250cm9sbGVyRmFtaWx5XCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJJbnRlbnQgfSBmcm9tIFwiLi9Db250cm9sbGVySW50ZW50XCI7XHJcbmltcG9ydCB7IEdhbWVwYWRNb2RlbCB9IGZyb20gXCIuL0dhbWVwYWRNb2RlbFwiO1xyXG5cclxuY29uc3QgY29udHJvbGxlckZhbWlseVN5bWJvbCA9IFN5bWJvbChcImNvbnRyb2xsZXJGYW1pbHlcIik7XHJcbmNvbnN0IGludGVudHNTeW1ib2wgPSBTeW1ib2woXCJpbnRlbnRcIik7XHJcbmNvbnN0IGV2ZW50VHlwZVN5bWJvbCA9IFN5bWJvbChcImV2ZW50VHlwZVwiKTtcclxuY29uc3QgcmVwZWF0U3ltYm9sID0gU3ltYm9sKFwicmVwZWF0XCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRyb2xsZXJFdmVudCBleHRlbmRzIE9iamVjdCB7XHJcbiAgICBwcml2YXRlIFtjb250cm9sbGVyRmFtaWx5U3ltYm9sXTogQ29udHJvbGxlckZhbWlseTtcclxuICAgIHByaXZhdGUgW2ludGVudHNTeW1ib2xdOiBDb250cm9sbGVySW50ZW50O1xyXG4gICAgcHJpdmF0ZSBbZXZlbnRUeXBlU3ltYm9sXTogQ29udHJvbGxlckV2ZW50VHlwZTtcclxuICAgIHByaXZhdGUgW3JlcGVhdFN5bWJvbF06IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgY29udHJvbGxlckZhbWlseTogQ29udHJvbGxlckZhbWlseSwgZXZlbnRUeXBlOiBDb250cm9sbGVyRXZlbnRUeXBlLFxyXG4gICAgICAgIGludGVudHM6IENvbnRyb2xsZXJJbnRlbnRbXSwgcmVwZWF0OiBib29sZWFuID0gZmFsc2VcclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXNbY29udHJvbGxlckZhbWlseVN5bWJvbF0gPSBjb250cm9sbGVyRmFtaWx5O1xyXG4gICAgICAgIHRoaXNbaW50ZW50c1N5bWJvbF0gPSBpbnRlbnRzLnJlZHVjZSgocHJldiwgY3VycikgPT4gcHJldiB8IGN1cnIpO1xyXG4gICAgICAgIHRoaXNbZXZlbnRUeXBlU3ltYm9sXSA9IGV2ZW50VHlwZTtcclxuICAgICAgICB0aGlzW3JlcGVhdFN5bWJvbF0gPSByZXBlYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbnRyb2xsZXJGYW1pbHkoKTogQ29udHJvbGxlckZhbWlseSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXNbY29udHJvbGxlckZhbWlseVN5bWJvbF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGV2ZW50VHlwZSgpOiBDb250cm9sbGVyRXZlbnRUeXBlIHtcclxuICAgICAgICByZXR1cm4gdGhpc1tldmVudFR5cGVTeW1ib2xdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZXBlYXQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXNbcmVwZWF0U3ltYm9sXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNNZW51TGVmdCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXNbaW50ZW50c1N5bWJvbF0gJiBDb250cm9sbGVySW50ZW50Lk1FTlVfTEVGVCkgPT09IENvbnRyb2xsZXJJbnRlbnQuTUVOVV9MRUZUO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc01lbnVSaWdodCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXNbaW50ZW50c1N5bWJvbF0gJiBDb250cm9sbGVySW50ZW50Lk1FTlVfUklHSFQpID09PSBDb250cm9sbGVySW50ZW50Lk1FTlVfUklHSFQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzTWVudVVwKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpc1tpbnRlbnRzU3ltYm9sXSAmIENvbnRyb2xsZXJJbnRlbnQuTUVOVV9VUCkgPT09IENvbnRyb2xsZXJJbnRlbnQuTUVOVV9VUDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNNZW51RG93bigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXNbaW50ZW50c1N5bWJvbF0gJiBDb250cm9sbGVySW50ZW50Lk1FTlVfRE9XTikgPT09IENvbnRyb2xsZXJJbnRlbnQuTUVOVV9ET1dOO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc1BsYXllck1vdmVMZWZ0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpc1tpbnRlbnRzU3ltYm9sXSAmIENvbnRyb2xsZXJJbnRlbnQuUExBWUVSX01PVkVfTEVGVCkgPT09IENvbnRyb2xsZXJJbnRlbnQuUExBWUVSX01PVkVfTEVGVDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNQbGF5ZXJNb3ZlUmlnaHQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzW2ludGVudHNTeW1ib2xdICYgQ29udHJvbGxlckludGVudC5QTEFZRVJfTU9WRV9SSUdIVCkgPT09IENvbnRyb2xsZXJJbnRlbnQuUExBWUVSX01PVkVfUklHSFQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzUGxheWVySnVtcCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXNbaW50ZW50c1N5bWJvbF0gJiBDb250cm9sbGVySW50ZW50LlBMQVlFUl9KVU1QKSA9PT0gQ29udHJvbGxlckludGVudC5QTEFZRVJfSlVNUDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNQbGF5ZXJEcm9wKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpc1tpbnRlbnRzU3ltYm9sXSAmIENvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0RST1ApID09PSBDb250cm9sbGVySW50ZW50LlBMQVlFUl9EUk9QO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc1BsYXllckVudGVyRG9vcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXNbaW50ZW50c1N5bWJvbF0gJiBDb250cm9sbGVySW50ZW50LlBMQVlFUl9FTlRFUl9ET09SKSA9PT0gQ29udHJvbGxlckludGVudC5QTEFZRVJfRU5URVJfRE9PUjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNQbGF5ZXJJbnRlcmFjdCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXNbaW50ZW50c1N5bWJvbF0gJiBDb250cm9sbGVySW50ZW50LlBMQVlFUl9JTlRFUkFDVCkgPT09IENvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0lOVEVSQUNUO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc1BsYXllckFjdGlvbigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKHRoaXNbaW50ZW50c1N5bWJvbF0gJiBDb250cm9sbGVySW50ZW50LlBMQVlFUl9BQ1RJT04pID09PSBDb250cm9sbGVySW50ZW50LlBMQVlFUl9BQ1RJT047XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzUGxheWVyUnVuKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpc1tpbnRlbnRzU3ltYm9sXSAmIENvbnRyb2xsZXJJbnRlbnQuUExBWUVSX1JVTikgPT09IENvbnRyb2xsZXJJbnRlbnQuUExBWUVSX1JVTjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNQbGF5ZXJEYW5jZTEoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzW2ludGVudHNTeW1ib2xdICYgQ29udHJvbGxlckludGVudC5QTEFZRVJfREFOQ0VfMSkgPT09IENvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0RBTkNFXzE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzUGxheWVyRGFuY2UyKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpc1tpbnRlbnRzU3ltYm9sXSAmIENvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0RBTkNFXzIpID09PSBDb250cm9sbGVySW50ZW50LlBMQVlFUl9EQU5DRV8yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc1BhdXNlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpc1tpbnRlbnRzU3ltYm9sXSAmIENvbnRyb2xsZXJJbnRlbnQuUEFVU0UpID09PSBDb250cm9sbGVySW50ZW50LlBBVVNFO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc0NvbmZpcm0oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzW2ludGVudHNTeW1ib2xdICYgQ29udHJvbGxlckludGVudC5DT05GSVJNKSA9PT0gQ29udHJvbGxlckludGVudC5DT05GSVJNO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc0Fib3J0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpc1tpbnRlbnRzU3ltYm9sXSAmIENvbnRyb2xsZXJJbnRlbnQuQUJPUlQpID09PSBDb250cm9sbGVySW50ZW50LkFCT1JUO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBnYW1lcGFkTW9kZWxTeW1ib2wgPSBTeW1ib2woXCJnYW1lcGFkTW9kZWxcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZXBhZENvbnRyb2xsZXJFdmVudCBleHRlbmRzIENvbnRyb2xsZXJFdmVudCB7XHJcbiAgICBwcml2YXRlIFtnYW1lcGFkTW9kZWxTeW1ib2xdOiBHYW1lcGFkTW9kZWw7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lcGFkTW9kZWw6IEdhbWVwYWRNb2RlbCwgZXZlbnRUeXBlOiBDb250cm9sbGVyRXZlbnRUeXBlLCBpbnRlbnRzOiBDb250cm9sbGVySW50ZW50W10sIHJlcGVhdDogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIoQ29udHJvbGxlckZhbWlseS5HQU1FUEFELCBldmVudFR5cGUsIGludGVudHMsIHJlcGVhdCk7XHJcbiAgICAgICAgdGhpc1tnYW1lcGFkTW9kZWxTeW1ib2xdID0gZ2FtZXBhZE1vZGVsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGdhbWVwYWRNb2RlbCgpOiBHYW1lcGFkTW9kZWwge1xyXG4gICAgICAgIHJldHVybiB0aGlzW2dhbWVwYWRNb2RlbFN5bWJvbF07XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFqR0E7QUFtR0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/input/ControllerEvent.js\n");
    
    /***/ }),
    
    /***/ "./lib/input/ControllerEventType.js":
    /*!******************************************!*\
      !*** ./lib/input/ControllerEventType.js ***!
      \******************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControllerEventType = void 0;\nvar ControllerEventType;\n(function (ControllerEventType) {\n    ControllerEventType[\"UP\"] = \"up\";\n    ControllerEventType[\"DOWN\"] = \"down\";\n    ControllerEventType[\"PRESS\"] = \"press\";\n})(ControllerEventType = exports.ControllerEventType || (exports.ControllerEventType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaW5wdXQvQ29udHJvbGxlckV2ZW50VHlwZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9pbnB1dC9Db250cm9sbGVyRXZlbnRUeXBlLnRzPzgwMzciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gQ29udHJvbGxlckV2ZW50VHlwZSB7XHJcbiAgICBVUCA9IFwidXBcIixcclxuICAgIERPV04gPSBcImRvd25cIixcclxuICAgIFBSRVNTID0gXCJwcmVzc1wiXHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/input/ControllerEventType.js\n");
    
    /***/ }),
    
    /***/ "./lib/input/ControllerFamily.js":
    /*!***************************************!*\
      !*** ./lib/input/ControllerFamily.js ***!
      \***************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControllerAnimationTags = exports.ControllerSpriteMap = exports.ControllerFamily = void 0;\n/**\n * This enumeration is used to classify the various known input methods.\n */\nvar ControllerFamily;\n(function (ControllerFamily) {\n    ControllerFamily[\"KEYBOARD\"] = \"keyboard\";\n    ControllerFamily[\"GAMEPAD\"] = \"gamepad\";\n})(ControllerFamily = exports.ControllerFamily || (exports.ControllerFamily = {}));\n/**\n * This enum consists of all supported button aseprite sheets\n */\nvar ControllerSpriteMap;\n(function (ControllerSpriteMap) {\n    ControllerSpriteMap[\"KEYBOARD\"] = \"keyboard\";\n    ControllerSpriteMap[\"XBOX\"] = \"xbox\";\n    ControllerSpriteMap[\"PLAYSTATION\"] = \"playstation\";\n})(ControllerSpriteMap = exports.ControllerSpriteMap || (exports.ControllerSpriteMap = {}));\n/**\n * This enum consists of all available animation tags supported by the button aseprite sheets\n */\nvar ControllerAnimationTags;\n(function (ControllerAnimationTags) {\n    ControllerAnimationTags[\"CONFIRM\"] = \"confirm\";\n    ControllerAnimationTags[\"JUMP\"] = \"jump\";\n    ControllerAnimationTags[\"ACTION\"] = \"action\";\n    ControllerAnimationTags[\"INTERACT\"] = \"interact\";\n    ControllerAnimationTags[\"OPEN_DOOR\"] = \"up\";\n    ControllerAnimationTags[\"BACK\"] = \"back\";\n})(ControllerAnimationTags = exports.ControllerAnimationTags || (exports.ControllerAnimationTags = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaW5wdXQvQ29udHJvbGxlckZhbWlseS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9pbnB1dC9Db250cm9sbGVyRmFtaWx5LnRzP2I3YTMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRoaXMgZW51bWVyYXRpb24gaXMgdXNlZCB0byBjbGFzc2lmeSB0aGUgdmFyaW91cyBrbm93biBpbnB1dCBtZXRob2RzLlxyXG4gKi9cclxuZXhwb3J0IGVudW0gQ29udHJvbGxlckZhbWlseSB7XHJcbiAgICBLRVlCT0FSRCA9IFwia2V5Ym9hcmRcIixcclxuICAgIEdBTUVQQUQgPSBcImdhbWVwYWRcIlxyXG59XHJcblxyXG4vKipcclxuICogVGhpcyBlbnVtIGNvbnNpc3RzIG9mIGFsbCBzdXBwb3J0ZWQgYnV0dG9uIGFzZXByaXRlIHNoZWV0c1xyXG4gKi9cclxuZXhwb3J0IGVudW0gQ29udHJvbGxlclNwcml0ZU1hcCB7XHJcbiAgICBLRVlCT0FSRCA9IFwia2V5Ym9hcmRcIixcclxuICAgIFhCT1ggPSBcInhib3hcIixcclxuICAgIFBMQVlTVEFUSU9OID0gXCJwbGF5c3RhdGlvblwiXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGlzIGVudW0gY29uc2lzdHMgb2YgYWxsIGF2YWlsYWJsZSBhbmltYXRpb24gdGFncyBzdXBwb3J0ZWQgYnkgdGhlIGJ1dHRvbiBhc2Vwcml0ZSBzaGVldHNcclxuICovXHJcbmV4cG9ydCBlbnVtIENvbnRyb2xsZXJBbmltYXRpb25UYWdzIHtcclxuICAgIENPTkZJUk0gPSBcImNvbmZpcm1cIixcclxuICAgIEpVTVAgPSBcImp1bXBcIixcclxuICAgIEFDVElPTiA9IFwiYWN0aW9uXCIsXHJcbiAgICBJTlRFUkFDVCA9IFwiaW50ZXJhY3RcIixcclxuICAgIE9QRU5fRE9PUiA9IFwidXBcIixcclxuICAgIEJBQ0sgPSBcImJhY2tcIlxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/input/ControllerFamily.js\n");
    
    /***/ }),
    
    /***/ "./lib/input/ControllerIntent.js":
    /*!***************************************!*\
      !*** ./lib/input/ControllerIntent.js ***!
      \***************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControllerIntent = void 0;\n/**\n * Enumeration of the different intents that may be emitted by a single button,\n * whereas a button might either be a physical key on a keyboard, a mapped axis\n * on a gamepad or a touch screen event.\n *\n * Right now, these events are stored in a bit mask to be extra efficient, …\n * …maybe that's not really necessary and should be changed to improve\n * readability at some point…\n */\nvar ControllerIntent;\n(function (ControllerIntent) {\n    /** Used for unknown / unmapped buttons. */\n    ControllerIntent[ControllerIntent[\"NONE\"] = 0] = \"NONE\";\n    /** Player movement: left */\n    ControllerIntent[ControllerIntent[\"PLAYER_MOVE_LEFT\"] = 1] = \"PLAYER_MOVE_LEFT\";\n    /** Player movement: right */\n    ControllerIntent[ControllerIntent[\"PLAYER_MOVE_RIGHT\"] = 2] = \"PLAYER_MOVE_RIGHT\";\n    /** Player movement: jump */\n    ControllerIntent[ControllerIntent[\"PLAYER_JUMP\"] = 4] = \"PLAYER_JUMP\";\n    /** Player movement: DROP (or: duck/crouch) */\n    ControllerIntent[ControllerIntent[\"PLAYER_DROP\"] = 8] = \"PLAYER_DROP\";\n    /** Talk to NPCs, read signs etc */\n    ControllerIntent[ControllerIntent[\"PLAYER_INTERACT\"] = 16] = \"PLAYER_INTERACT\";\n    /** Action, throw stuff */\n    ControllerIntent[ControllerIntent[\"PLAYER_ACTION\"] = 32] = \"PLAYER_ACTION\";\n    /** Dance move no. 1 */\n    ControllerIntent[ControllerIntent[\"PLAYER_DANCE_1\"] = 64] = \"PLAYER_DANCE_1\";\n    /** Dance move no. 2 */\n    ControllerIntent[ControllerIntent[\"PLAYER_DANCE_2\"] = 128] = \"PLAYER_DANCE_2\";\n    // Menu navigation\n    ControllerIntent[ControllerIntent[\"MENU_LEFT\"] = 256] = \"MENU_LEFT\";\n    ControllerIntent[ControllerIntent[\"MENU_RIGHT\"] = 512] = \"MENU_RIGHT\";\n    ControllerIntent[ControllerIntent[\"MENU_UP\"] = 1024] = \"MENU_UP\";\n    ControllerIntent[ControllerIntent[\"MENU_DOWN\"] = 2048] = \"MENU_DOWN\";\n    /** The key usually known as \"enter\" or something alike. */\n    ControllerIntent[ControllerIntent[\"CONFIRM\"] = 4096] = \"CONFIRM\";\n    /** Go through doors */\n    ControllerIntent[ControllerIntent[\"PLAYER_ENTER_DOOR\"] = 8192] = \"PLAYER_ENTER_DOOR\";\n    /** Pause/unpause. */\n    ControllerIntent[ControllerIntent[\"PAUSE\"] = 16384] = \"PAUSE\";\n    /** Back / abort / get-me-the-hell-out-of-here. */\n    ControllerIntent[ControllerIntent[\"ABORT\"] = 32768] = \"ABORT\";\n    /** Run modifier */\n    ControllerIntent[ControllerIntent[\"PLAYER_RUN\"] = 65536] = \"PLAYER_RUN\";\n    ControllerIntent[ControllerIntent[\"UNUSED_1\"] = 131072] = \"UNUSED_1\";\n    ControllerIntent[ControllerIntent[\"UNUSED_2\"] = 262144] = \"UNUSED_2\";\n    ControllerIntent[ControllerIntent[\"UNUSED_3\"] = 524288] = \"UNUSED_3\";\n})(ControllerIntent = exports.ControllerIntent || (exports.ControllerIntent = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaW5wdXQvQ29udHJvbGxlckludGVudC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9pbnB1dC9Db250cm9sbGVySW50ZW50LnRzP2NiM2QiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHRoZSBkaWZmZXJlbnQgaW50ZW50cyB0aGF0IG1heSBiZSBlbWl0dGVkIGJ5IGEgc2luZ2xlIGJ1dHRvbixcclxuICogd2hlcmVhcyBhIGJ1dHRvbiBtaWdodCBlaXRoZXIgYmUgYSBwaHlzaWNhbCBrZXkgb24gYSBrZXlib2FyZCwgYSBtYXBwZWQgYXhpc1xyXG4gKiBvbiBhIGdhbWVwYWQgb3IgYSB0b3VjaCBzY3JlZW4gZXZlbnQuXHJcbiAqXHJcbiAqIFJpZ2h0IG5vdywgdGhlc2UgZXZlbnRzIGFyZSBzdG9yZWQgaW4gYSBiaXQgbWFzayB0byBiZSBleHRyYSBlZmZpY2llbnQsIOKAplxyXG4gKiDigKZtYXliZSB0aGF0J3Mgbm90IHJlYWxseSBuZWNlc3NhcnkgYW5kIHNob3VsZCBiZSBjaGFuZ2VkIHRvIGltcHJvdmVcclxuICogcmVhZGFiaWxpdHkgYXQgc29tZSBwb2ludOKAplxyXG4gKi9cclxuZXhwb3J0IGVudW0gQ29udHJvbGxlckludGVudCB7XHJcbiAgICAvKiogVXNlZCBmb3IgdW5rbm93biAvIHVubWFwcGVkIGJ1dHRvbnMuICovXHJcbiAgICBOT05FID0gMCxcclxuXHJcbiAgICAvKiogUGxheWVyIG1vdmVtZW50OiBsZWZ0ICovXHJcbiAgICBQTEFZRVJfTU9WRV9MRUZUID0gMGIwMDAwXzAwMDBfMDAwMF8wMDAwXzAwMDEsXHJcbiAgICAvKiogUGxheWVyIG1vdmVtZW50OiByaWdodCAqL1xyXG4gICAgUExBWUVSX01PVkVfUklHSFQgPSAwYjAwMDBfMDAwMF8wMDAwXzAwMDBfMDAxMCxcclxuICAgIC8qKiBQbGF5ZXIgbW92ZW1lbnQ6IGp1bXAgKi9cclxuICAgIFBMQVlFUl9KVU1QID0gMGIwMDAwXzAwMDBfMDAwMF8wMDAwXzAxMDAsXHJcbiAgICAvKiogUGxheWVyIG1vdmVtZW50OiBEUk9QIChvcjogZHVjay9jcm91Y2gpICovXHJcbiAgICBQTEFZRVJfRFJPUCA9IDBiMDAwMF8wMDAwXzAwMDBfMDAwMF8xMDAwLFxyXG5cclxuICAgIC8qKiBUYWxrIHRvIE5QQ3MsIHJlYWQgc2lnbnMgZXRjICovXHJcbiAgICBQTEFZRVJfSU5URVJBQ1QgPSAwYjAwMDBfMDAwMF8wMDAwXzAwMDFfMDAwMCxcclxuXHJcbiAgICAvKiogQWN0aW9uLCB0aHJvdyBzdHVmZiAqL1xyXG4gICAgUExBWUVSX0FDVElPTiA9IDBiMDAwMF8wMDAwXzAwMDBfMDAxMF8wMDAwLFxyXG5cclxuICAgIC8qKiBEYW5jZSBtb3ZlIG5vLiAxICovXHJcbiAgICBQTEFZRVJfREFOQ0VfMSA9IDBiMDAwMF8wMDAwXzAwMDBfMDEwMF8wMDAwLFxyXG5cclxuICAgIC8qKiBEYW5jZSBtb3ZlIG5vLiAyICovXHJcbiAgICBQTEFZRVJfREFOQ0VfMiA9IDBiMDAwMF8wMDAwXzAwMDBfMTAwMF8wMDAwLFxyXG5cclxuICAgIC8vIE1lbnUgbmF2aWdhdGlvblxyXG4gICAgTUVOVV9MRUZUID0gMGIwMDAwXzAwMDBfMDAwMV8wMDAwXzAwMDAsXHJcbiAgICBNRU5VX1JJR0hUID0gMGIwMDAwXzAwMDBfMDAxMF8wMDAwXzAwMDAsXHJcbiAgICBNRU5VX1VQID0gMGIwMDAwXzAwMDBfMDEwMF8wMDAwXzAwMDAsXHJcbiAgICBNRU5VX0RPV04gPSAwYjAwMDBfMDAwMF8xMDAwXzAwMDBfMDAwMCxcclxuXHJcbiAgICAvKiogVGhlIGtleSB1c3VhbGx5IGtub3duIGFzIFwiZW50ZXJcIiBvciBzb21ldGhpbmcgYWxpa2UuICovXHJcbiAgICBDT05GSVJNID0gMGIwMDAwXzAwMDFfMDAwMF8wMDAwXzAwMDAsXHJcblxyXG4gICAgLyoqIEdvIHRocm91Z2ggZG9vcnMgKi9cclxuICAgIFBMQVlFUl9FTlRFUl9ET09SID0gMGIwMDAwXzAwMTBfMDAwMF8wMDAwXzAwMDAsXHJcblxyXG4gICAgLyoqIFBhdXNlL3VucGF1c2UuICovXHJcbiAgICBQQVVTRSA9IDBiMDAwMF8wMTAwXzAwMDBfMDAwMF8wMDAwLFxyXG5cclxuICAgIC8qKiBCYWNrIC8gYWJvcnQgLyBnZXQtbWUtdGhlLWhlbGwtb3V0LW9mLWhlcmUuICovXHJcbiAgICBBQk9SVCA9IDBiMDAwMF8xMDAwXzAwMDBfMDAwMF8wMDAwLFxyXG5cclxuICAgIC8qKiBSdW4gbW9kaWZpZXIgKi9cclxuICAgIFBMQVlFUl9SVU4gPSAwYjAwMDFfMDAwMF8wMDAwXzAwMDBfMDAwMCxcclxuXHJcbiAgICBVTlVTRURfMSA9IDBiMDAxMF8wMDAwXzAwMDBfMDAwMF8wMDAwLFxyXG4gICAgVU5VU0VEXzIgPSAwYjAxMDBfMDAwMF8wMDAwXzAwMDBfMDAwMCxcclxuICAgIFVOVVNFRF8zID0gMGIxMDAwXzAwMDBfMDAwMF8wMDAwXzAwMDAsXHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/input/ControllerIntent.js\n");
    
    /***/ }),
    
    /***/ "./lib/input/ControllerManager.js":
    /*!****************************************!*\
      !*** ./lib/input/ControllerManager.js ***!
      \****************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControllerManager = void 0;\nconst ControllerFamily_1 = __webpack_require__(/*! ./ControllerFamily */ \"./lib/input/ControllerFamily.js\");\nconst GamepadStyle_1 = __webpack_require__(/*! ./GamepadStyle */ \"./lib/input/GamepadStyle.js\");\nconst Signal_1 = __webpack_require__(/*! ../Signal */ \"./lib/Signal.js\");\n/** Symbol to identify the current/active controller family */\nconst currentControllerFamilySymbol = Symbol(\"currentControllerFamily\");\nclass ControllerManager {\n    constructor(initialControllerFamily = ControllerFamily_1.ControllerFamily.KEYBOARD) {\n        this.onButtonDown = new Signal_1.Signal();\n        this.onButtonUp = new Signal_1.Signal();\n        this.onButtonPress = new Signal_1.Signal();\n        this.onControllerFamilyChange = new Signal_1.Signal();\n        this.selectedGamepadStyle = GamepadStyle_1.GamepadStyle.XBOX;\n        this.currentControllerFamily = initialControllerFamily;\n        this.onButtonDown.connect(e => {\n            if (this.currentControllerFamily !== e.controllerFamily) {\n                this.currentControllerFamily = e.controllerFamily;\n            }\n        });\n    }\n    static getInstance() {\n        return ControllerManager.INSTANCE;\n    }\n    set currentControllerFamily(controllerFamily) {\n        if (controllerFamily !== this[currentControllerFamilySymbol]) {\n            this[currentControllerFamilySymbol] = controllerFamily;\n            this.onControllerFamilyChange.emit(controllerFamily);\n        }\n    }\n    /**\n     * Returns the current (a.k.a. most recently used!) controller family.\n     * Can be used to determine which tooltips (gamepad buttons or keyboard indicators) to show.\n     */\n    get currentControllerFamily() {\n        return this[currentControllerFamilySymbol];\n    }\n    toggleSelectedGamepadStyle() {\n        this.selectedGamepadStyle = this.selectedGamepadStyle === GamepadStyle_1.GamepadStyle.XBOX ? GamepadStyle_1.GamepadStyle.PLAYSTATION : GamepadStyle_1.GamepadStyle.XBOX;\n    }\n    get controllerSprite() {\n        if (this.currentControllerFamily === ControllerFamily_1.ControllerFamily.GAMEPAD) {\n            switch (ControllerManager.getInstance().selectedGamepadStyle) {\n                case GamepadStyle_1.GamepadStyle.PLAYSTATION:\n                    return ControllerFamily_1.ControllerSpriteMap.PLAYSTATION;\n                case GamepadStyle_1.GamepadStyle.XBOX:\n                    return ControllerFamily_1.ControllerSpriteMap.XBOX;\n            }\n        }\n        // Fallback to Keyboard\n        return ControllerFamily_1.ControllerSpriteMap.KEYBOARD;\n    }\n}\nexports.ControllerManager = ControllerManager;\nControllerManager.INSTANCE = new ControllerManager();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaW5wdXQvQ29udHJvbGxlck1hbmFnZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5wdXQvQ29udHJvbGxlck1hbmFnZXIudHM/OTJlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb250cm9sbGVyRXZlbnQgfSBmcm9tIFwiLi9Db250cm9sbGVyRXZlbnRcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckZhbWlseSwgQ29udHJvbGxlclNwcml0ZU1hcCB9IGZyb20gXCIuL0NvbnRyb2xsZXJGYW1pbHlcIjtcclxuaW1wb3J0IHsgR2FtZXBhZFN0eWxlIH0gZnJvbSBcIi4vR2FtZXBhZFN0eWxlXCI7XHJcbmltcG9ydCB7IFNpZ25hbCB9IGZyb20gXCIuLi9TaWduYWxcIjtcclxuXHJcbi8qKiBTeW1ib2wgdG8gaWRlbnRpZnkgdGhlIGN1cnJlbnQvYWN0aXZlIGNvbnRyb2xsZXIgZmFtaWx5ICovXHJcbmNvbnN0IGN1cnJlbnRDb250cm9sbGVyRmFtaWx5U3ltYm9sID0gU3ltYm9sKFwiY3VycmVudENvbnRyb2xsZXJGYW1pbHlcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udHJvbGxlck1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgSU5TVEFOQ0UgPSBuZXcgQ29udHJvbGxlck1hbmFnZXIoKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IENvbnRyb2xsZXJNYW5hZ2VyIHtcclxuICAgICAgICByZXR1cm4gQ29udHJvbGxlck1hbmFnZXIuSU5TVEFOQ0U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IG9uQnV0dG9uRG93biA9IG5ldyBTaWduYWw8Q29udHJvbGxlckV2ZW50PigpO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG9uQnV0dG9uVXAgPSBuZXcgU2lnbmFsPENvbnRyb2xsZXJFdmVudD4oKTtcclxuICAgIHB1YmxpYyByZWFkb25seSBvbkJ1dHRvblByZXNzID0gbmV3IFNpZ25hbDxDb250cm9sbGVyRXZlbnQ+KCk7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgb25Db250cm9sbGVyRmFtaWx5Q2hhbmdlID0gbmV3IFNpZ25hbDxDb250cm9sbGVyRmFtaWx5PigpO1xyXG5cclxuICAgIHB1YmxpYyBzZWxlY3RlZEdhbWVwYWRTdHlsZSA9IEdhbWVwYWRTdHlsZS5YQk9YO1xyXG5cclxuICAgIHByaXZhdGUgW2N1cnJlbnRDb250cm9sbGVyRmFtaWx5U3ltYm9sXTogQ29udHJvbGxlckZhbWlseTtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKGluaXRpYWxDb250cm9sbGVyRmFtaWx5OiBDb250cm9sbGVyRmFtaWx5ID0gQ29udHJvbGxlckZhbWlseS5LRVlCT0FSRCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudENvbnRyb2xsZXJGYW1pbHkgPSBpbml0aWFsQ29udHJvbGxlckZhbWlseTtcclxuXHJcbiAgICAgICAgdGhpcy5vbkJ1dHRvbkRvd24uY29ubmVjdChlID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENvbnRyb2xsZXJGYW1pbHkgIT09IGUuY29udHJvbGxlckZhbWlseSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29udHJvbGxlckZhbWlseSA9IGUuY29udHJvbGxlckZhbWlseTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgY3VycmVudENvbnRyb2xsZXJGYW1pbHkoY29udHJvbGxlckZhbWlseTogQ29udHJvbGxlckZhbWlseSkge1xyXG4gICAgICAgIGlmIChjb250cm9sbGVyRmFtaWx5ICE9PSB0aGlzW2N1cnJlbnRDb250cm9sbGVyRmFtaWx5U3ltYm9sXSkge1xyXG4gICAgICAgICAgICB0aGlzW2N1cnJlbnRDb250cm9sbGVyRmFtaWx5U3ltYm9sXSA9IGNvbnRyb2xsZXJGYW1pbHk7XHJcbiAgICAgICAgICAgIHRoaXMub25Db250cm9sbGVyRmFtaWx5Q2hhbmdlLmVtaXQoY29udHJvbGxlckZhbWlseSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCAoYS5rLmEuIG1vc3QgcmVjZW50bHkgdXNlZCEpIGNvbnRyb2xsZXIgZmFtaWx5LlxyXG4gICAgICogQ2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIHRvb2x0aXBzIChnYW1lcGFkIGJ1dHRvbnMgb3Iga2V5Ym9hcmQgaW5kaWNhdG9ycykgdG8gc2hvdy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjdXJyZW50Q29udHJvbGxlckZhbWlseSgpOiBDb250cm9sbGVyRmFtaWx5IHtcclxuICAgICAgICByZXR1cm4gdGhpc1tjdXJyZW50Q29udHJvbGxlckZhbWlseVN5bWJvbF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvZ2dsZVNlbGVjdGVkR2FtZXBhZFN0eWxlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRHYW1lcGFkU3R5bGUgPSB0aGlzLnNlbGVjdGVkR2FtZXBhZFN0eWxlID09PSBHYW1lcGFkU3R5bGUuWEJPWCA/IEdhbWVwYWRTdHlsZS5QTEFZU1RBVElPTiA6IEdhbWVwYWRTdHlsZS5YQk9YO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgY29udHJvbGxlclNwcml0ZSgpOiBDb250cm9sbGVyU3ByaXRlTWFwIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q29udHJvbGxlckZhbWlseSA9PT0gQ29udHJvbGxlckZhbWlseS5HQU1FUEFEKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoQ29udHJvbGxlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5zZWxlY3RlZEdhbWVwYWRTdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBHYW1lcGFkU3R5bGUuUExBWVNUQVRJT046XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnRyb2xsZXJTcHJpdGVNYXAuUExBWVNUQVRJT047XHJcbiAgICAgICAgICAgICAgICBjYXNlIEdhbWVwYWRTdHlsZS5YQk9YOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb250cm9sbGVyU3ByaXRlTWFwLlhCT1g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIEtleWJvYXJkXHJcbiAgICAgICAgcmV0dXJuIENvbnRyb2xsZXJTcHJpdGVNYXAuS0VZQk9BUkQ7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFnQkE7QUFUQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQkE7QUFDQTtBQUNBO0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUF6REE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/input/ControllerManager.js\n");
    
    /***/ }),
    
    /***/ "./lib/input/GamepadInput.js":
    /*!***********************************!*\
      !*** ./lib/input/GamepadInput.js ***!
      \***********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GamepadInput = void 0;\nconst ControllerManager_1 = __webpack_require__(/*! ./ControllerManager */ \"./lib/input/ControllerManager.js\");\nconst ControllerIntent_1 = __webpack_require__(/*! ./ControllerIntent */ \"./lib/input/ControllerIntent.js\");\nconst ControllerEventType_1 = __webpack_require__(/*! ./ControllerEventType */ \"./lib/input/ControllerEventType.js\");\nconst ControllerEvent_1 = __webpack_require__(/*! ./ControllerEvent */ \"./lib/input/ControllerEvent.js\");\nconst GamepadModel_1 = __webpack_require__(/*! ./GamepadModel */ \"./lib/input/GamepadModel.js\");\n/**\n * Game Pad Buttons\n */\nvar GamePadButtonId;\n(function (GamePadButtonId) {\n    /** Button A / Cross*/\n    GamePadButtonId[GamePadButtonId[\"BUTTON_1\"] = 0] = \"BUTTON_1\";\n    /** Button B / Circle*/\n    GamePadButtonId[GamePadButtonId[\"BUTTON_2\"] = 1] = \"BUTTON_2\";\n    /** Button X / Square*/\n    GamePadButtonId[GamePadButtonId[\"BUTTON_3\"] = 2] = \"BUTTON_3\";\n    /** Button Y / Triangle */\n    GamePadButtonId[GamePadButtonId[\"BUTTON_4\"] = 3] = \"BUTTON_4\";\n    GamePadButtonId[GamePadButtonId[\"SHOULDER_TOP_LEFT\"] = 4] = \"SHOULDER_TOP_LEFT\";\n    GamePadButtonId[GamePadButtonId[\"SHOULDER_TOP_RIGHT\"] = 5] = \"SHOULDER_TOP_RIGHT\";\n    GamePadButtonId[GamePadButtonId[\"SHOULDER_BOTTOM_LEFT\"] = 6] = \"SHOULDER_BOTTOM_LEFT\";\n    GamePadButtonId[GamePadButtonId[\"SHOULDER_BOTTOM_RIGHT\"] = 7] = \"SHOULDER_BOTTOM_RIGHT\";\n    GamePadButtonId[GamePadButtonId[\"SELECT\"] = 8] = \"SELECT\";\n    GamePadButtonId[GamePadButtonId[\"START\"] = 9] = \"START\";\n    GamePadButtonId[GamePadButtonId[\"STICK_BUTTON_LEFT\"] = 10] = \"STICK_BUTTON_LEFT\";\n    GamePadButtonId[GamePadButtonId[\"STICK_BUTTON_RIGHT\"] = 11] = \"STICK_BUTTON_RIGHT\";\n    GamePadButtonId[GamePadButtonId[\"D_PAD_UP\"] = 12] = \"D_PAD_UP\";\n    GamePadButtonId[GamePadButtonId[\"D_PAD_DOWN\"] = 13] = \"D_PAD_DOWN\";\n    GamePadButtonId[GamePadButtonId[\"D_PAD_LEFT\"] = 14] = \"D_PAD_LEFT\";\n    GamePadButtonId[GamePadButtonId[\"D_PAD_RIGHT\"] = 15] = \"D_PAD_RIGHT\";\n    GamePadButtonId[GamePadButtonId[\"VENDOR\"] = 16] = \"VENDOR\";\n})(GamePadButtonId || (GamePadButtonId = {}));\nvar StickAxisId;\n(function (StickAxisId) {\n    /** Left stick X axis */\n    StickAxisId[StickAxisId[\"LEFT_LEFT_RIGHT\"] = 0] = \"LEFT_LEFT_RIGHT\";\n    /** Left stick Y axis */\n    StickAxisId[StickAxisId[\"LEFT_UP_DOWN\"] = 1] = \"LEFT_UP_DOWN\";\n    /** Right stick X axis */\n    StickAxisId[StickAxisId[\"RIGHT_LEFT_RIGHT\"] = 2] = \"RIGHT_LEFT_RIGHT\";\n    /** Right stick Y axis */\n    StickAxisId[StickAxisId[\"RIGHT_UP_DOWN\"] = 3] = \"RIGHT_UP_DOWN\";\n})(StickAxisId || (StickAxisId = {}));\nconst axisMapping = new Map();\naxisMapping.set(StickAxisId.LEFT_LEFT_RIGHT, { button1: GamePadButtonId.D_PAD_LEFT, button2: GamePadButtonId.D_PAD_RIGHT });\naxisMapping.set(StickAxisId.LEFT_UP_DOWN, { button1: GamePadButtonId.D_PAD_UP, button2: GamePadButtonId.D_PAD_DOWN });\nconst intentMappings = new Map();\nintentMappings.set(GamePadButtonId.D_PAD_UP, [ControllerIntent_1.ControllerIntent.PLAYER_ENTER_DOOR, ControllerIntent_1.ControllerIntent.MENU_UP]);\nintentMappings.set(GamePadButtonId.D_PAD_DOWN, [ControllerIntent_1.ControllerIntent.PLAYER_DROP, ControllerIntent_1.ControllerIntent.MENU_DOWN]);\nintentMappings.set(GamePadButtonId.D_PAD_LEFT, [ControllerIntent_1.ControllerIntent.PLAYER_MOVE_LEFT, ControllerIntent_1.ControllerIntent.MENU_LEFT]);\nintentMappings.set(GamePadButtonId.D_PAD_RIGHT, [ControllerIntent_1.ControllerIntent.PLAYER_MOVE_RIGHT, ControllerIntent_1.ControllerIntent.MENU_RIGHT]);\nintentMappings.set(GamePadButtonId.BUTTON_1, [ControllerIntent_1.ControllerIntent.PLAYER_JUMP, ControllerIntent_1.ControllerIntent.CONFIRM]);\nintentMappings.set(GamePadButtonId.BUTTON_2, [ControllerIntent_1.ControllerIntent.ABORT]);\nintentMappings.set(GamePadButtonId.BUTTON_3, [ControllerIntent_1.ControllerIntent.PLAYER_RUN]);\nintentMappings.set(GamePadButtonId.BUTTON_4, [ControllerIntent_1.ControllerIntent.PLAYER_INTERACT]);\nintentMappings.set(GamePadButtonId.SHOULDER_TOP_LEFT, [ControllerIntent_1.ControllerIntent.PLAYER_DANCE_1, ControllerIntent_1.ControllerIntent.PLAYER_ACTION]);\nintentMappings.set(GamePadButtonId.SHOULDER_TOP_RIGHT, [ControllerIntent_1.ControllerIntent.PLAYER_DANCE_2, ControllerIntent_1.ControllerIntent.PLAYER_ACTION]);\nintentMappings.set(GamePadButtonId.START, [ControllerIntent_1.ControllerIntent.PAUSE]);\nclass GamepadButtonWrapper {\n    constructor(index, wrapped, gamepad) {\n        this.index = index;\n        this.pressed = wrapped.pressed;\n        this.gamepad = gamepad;\n    }\n    setPressed(pressed) {\n        const controllerManager = ControllerManager_1.ControllerManager.getInstance();\n        const oldPressed = this.pressed;\n        this.pressed = pressed;\n        if (oldPressed !== pressed) {\n            if (pressed) {\n                controllerManager.onButtonDown.emit(new ControllerEvent_1.GamepadControllerEvent(this.gamepad.gamepadModel, ControllerEventType_1.ControllerEventType.DOWN, intentMappings.get(this.index) || [ControllerIntent_1.ControllerIntent.NONE]));\n            }\n            else {\n                controllerManager.onButtonUp.emit(new ControllerEvent_1.GamepadControllerEvent(this.gamepad.gamepadModel, ControllerEventType_1.ControllerEventType.UP, intentMappings.get(this.index) || [ControllerIntent_1.ControllerIntent.NONE]));\n            }\n        }\n    }\n}\nclass GamepadAxisWrapper {\n    constructor(index, gamepad) {\n        /**\n         * Threshold to use to emulate virtual buttons.\n         * Values between 0.1 (slight touches of the axis trigger button presses)\n         * 0.9 (much force needed) can be used here.\n         *\n         * Avoid using 0.0 and 1.0 as they cannot be reached on some gamepads or\n         * might lead to button flibber flubber...\n         */\n        this.threshold = 0.5;\n        this.value = 0.0;\n        this.index = index;\n        this.gamepad = gamepad;\n    }\n    setValue(newValue) {\n        var _a, _b, _c, _d;\n        const controllerManager = ControllerManager_1.ControllerManager.getInstance();\n        const oldValue = this.value;\n        this.value = newValue;\n        let emulatedButtonId = undefined;\n        if (oldValue <= -this.threshold && newValue > -this.threshold) {\n            // Virtual button 1 released\n            emulatedButtonId = (_a = axisMapping.get(this.index)) === null || _a === void 0 ? void 0 : _a.button1;\n            if (emulatedButtonId != null) {\n                controllerManager.onButtonUp.emit(new ControllerEvent_1.GamepadControllerEvent(this.gamepad.gamepadModel, ControllerEventType_1.ControllerEventType.UP, intentMappings.get(emulatedButtonId) || [ControllerIntent_1.ControllerIntent.NONE]));\n            }\n        }\n        else if (oldValue > -this.threshold && newValue <= -this.threshold) {\n            // Virtual button 1 pressed\n            emulatedButtonId = (_b = axisMapping.get(this.index)) === null || _b === void 0 ? void 0 : _b.button1;\n            if (emulatedButtonId != null) {\n                controllerManager.onButtonDown.emit(new ControllerEvent_1.GamepadControllerEvent(this.gamepad.gamepadModel, ControllerEventType_1.ControllerEventType.DOWN, intentMappings.get(emulatedButtonId) || [ControllerIntent_1.ControllerIntent.NONE]));\n            }\n        }\n        if (oldValue > this.threshold && newValue <= this.threshold) {\n            // Virtual button 2 released\n            emulatedButtonId = (_c = axisMapping.get(this.index)) === null || _c === void 0 ? void 0 : _c.button2;\n            if (emulatedButtonId != null) {\n                controllerManager.onButtonUp.emit(new ControllerEvent_1.GamepadControllerEvent(this.gamepad.gamepadModel, ControllerEventType_1.ControllerEventType.UP, intentMappings.get(emulatedButtonId) || [ControllerIntent_1.ControllerIntent.NONE]));\n            }\n        }\n        else if (oldValue < this.threshold && newValue >= this.threshold) {\n            // Virtual button 2 pressed\n            emulatedButtonId = (_d = axisMapping.get(this.index)) === null || _d === void 0 ? void 0 : _d.button2;\n            if (emulatedButtonId != null) {\n                controllerManager.onButtonDown.emit(new ControllerEvent_1.GamepadControllerEvent(this.gamepad.gamepadModel, ControllerEventType_1.ControllerEventType.DOWN, intentMappings.get(emulatedButtonId) || [ControllerIntent_1.ControllerIntent.NONE]));\n            }\n        }\n    }\n}\n/**\n * Some obscure magic to make sure that gamepad buttons and axes are mapped onto unified controller\n * events.\n */\nclass GamepadWrapper {\n    constructor(gamepad) {\n        this.index = gamepad.index;\n        this.id = gamepad.id;\n        this.gamepadModel = GamepadModel_1.GamepadModel.fromString(this.id);\n        this.buttons = new Array(gamepad.buttons.length);\n        for (let i = 0; i < this.buttons.length; i++) {\n            this.buttons[i] = new GamepadButtonWrapper(i, gamepad.buttons[i], this);\n        }\n        this.axes = new Array(gamepad.axes.length);\n        for (let i = 0; i < this.axes.length; i++) {\n            this.axes[i] = new GamepadAxisWrapper(i, this);\n        }\n    }\n    update() {\n        const gamepad = navigator.getGamepads()[this.index];\n        if (gamepad != null) {\n            this.buttons.forEach(button => button.setPressed(gamepad.buttons[button.index].pressed));\n            this.axes.forEach(axis => axis.setValue(gamepad.axes[axis.index]));\n        }\n    }\n    toString() {\n        return `Gamepad (index: ${this.index}, id: ${this.id})`;\n    }\n}\nclass GamepadInput {\n    constructor() {\n        this.gamepads = new Map();\n        window.addEventListener(\"gamepadconnected\", (e) => {\n            console.debug(\"Gamepad connected: \", e);\n            const gamepad = e.gamepad;\n            if (gamepad != null) {\n                this.gamepads.set(gamepad.id, new GamepadWrapper(gamepad));\n            }\n        });\n        window.addEventListener(\"gamepaddisconnected\", (e) => {\n            console.debug(\"Gamepad disconnected: \", e);\n            const gamepad = e.gamepad;\n            if (gamepad != null) {\n                this.gamepads.delete(gamepad.id);\n            }\n        });\n    }\n    update() {\n        this.gamepads.forEach(gamepad => gamepad.update());\n    }\n}\nexports.GamepadInput = GamepadInput;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaW5wdXQvR2FtZXBhZElucHV0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2lucHV0L0dhbWVwYWRJbnB1dC50cz85ZjcxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRyb2xsZXJNYW5hZ2VyIH0gZnJvbSBcIi4vQ29udHJvbGxlck1hbmFnZXJcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckludGVudCB9IGZyb20gXCIuL0NvbnRyb2xsZXJJbnRlbnRcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckV2ZW50VHlwZSB9IGZyb20gXCIuL0NvbnRyb2xsZXJFdmVudFR5cGVcIjtcclxuaW1wb3J0IHsgR2FtZXBhZENvbnRyb2xsZXJFdmVudCB9IGZyb20gXCIuL0NvbnRyb2xsZXJFdmVudFwiO1xyXG5pbXBvcnQgeyBHYW1lcGFkTW9kZWwgfSBmcm9tIFwiLi9HYW1lcGFkTW9kZWxcIjtcclxuXHJcbi8qKlxyXG4gKiBHYW1lIFBhZCBCdXR0b25zXHJcbiAqL1xyXG5lbnVtIEdhbWVQYWRCdXR0b25JZCB7XHJcbiAgICAvKiogQnV0dG9uIEEgLyBDcm9zcyovXHJcbiAgICBCVVRUT05fMSA9IDAsXHJcbiAgICAvKiogQnV0dG9uIEIgLyBDaXJjbGUqL1xyXG4gICAgQlVUVE9OXzIgPSAxLFxyXG4gICAgLyoqIEJ1dHRvbiBYIC8gU3F1YXJlKi9cclxuICAgIEJVVFRPTl8zID0gMixcclxuICAgIC8qKiBCdXR0b24gWSAvIFRyaWFuZ2xlICovXHJcbiAgICBCVVRUT05fNCA9IDMsXHJcbiAgICBTSE9VTERFUl9UT1BfTEVGVCA9IDQsXHJcbiAgICBTSE9VTERFUl9UT1BfUklHSFQgPSA1LFxyXG4gICAgU0hPVUxERVJfQk9UVE9NX0xFRlQgPSA2LFxyXG4gICAgU0hPVUxERVJfQk9UVE9NX1JJR0hUID0gNyxcclxuICAgIFNFTEVDVCA9IDgsXHJcbiAgICBTVEFSVCA9IDksXHJcbiAgICBTVElDS19CVVRUT05fTEVGVCA9IDEwLFxyXG4gICAgU1RJQ0tfQlVUVE9OX1JJR0hUID0gMTEsXHJcbiAgICBEX1BBRF9VUCA9IDEyLFxyXG4gICAgRF9QQURfRE9XTiA9IDEzLFxyXG4gICAgRF9QQURfTEVGVCA9IDE0LFxyXG4gICAgRF9QQURfUklHSFQgPSAxNSxcclxuICAgIFZFTkRPUiA9IDE2XHJcbn1cclxuXHJcbmVudW0gU3RpY2tBeGlzSWQge1xyXG4gICAgLyoqIExlZnQgc3RpY2sgWCBheGlzICovXHJcbiAgICBMRUZUX0xFRlRfUklHSFQgPSAwLFxyXG4gICAgLyoqIExlZnQgc3RpY2sgWSBheGlzICovXHJcbiAgICBMRUZUX1VQX0RPV04gPSAxLFxyXG4gICAgLyoqIFJpZ2h0IHN0aWNrIFggYXhpcyAqL1xyXG4gICAgUklHSFRfTEVGVF9SSUdIVCA9IDIsXHJcbiAgICAvKiogUmlnaHQgc3RpY2sgWSBheGlzICovXHJcbiAgICBSSUdIVF9VUF9ET1dOID0gM1xyXG59XHJcblxyXG5jb25zdCBheGlzTWFwcGluZyA9IG5ldyBNYXA8bnVtYmVyLCB7YnV0dG9uMTogbnVtYmVyfHVuZGVmaW5lZCwgYnV0dG9uMjogbnVtYmVyfHVuZGVmaW5lZH0+KCk7XHJcbmF4aXNNYXBwaW5nLnNldChTdGlja0F4aXNJZC5MRUZUX0xFRlRfUklHSFQsIHsgYnV0dG9uMTogR2FtZVBhZEJ1dHRvbklkLkRfUEFEX0xFRlQsIGJ1dHRvbjI6IEdhbWVQYWRCdXR0b25JZC5EX1BBRF9SSUdIVCB9KTtcclxuYXhpc01hcHBpbmcuc2V0KFN0aWNrQXhpc0lkLkxFRlRfVVBfRE9XTiwgeyBidXR0b24xOiBHYW1lUGFkQnV0dG9uSWQuRF9QQURfVVAsIGJ1dHRvbjI6IEdhbWVQYWRCdXR0b25JZC5EX1BBRF9ET1dOIH0pO1xyXG5cclxuY29uc3QgaW50ZW50TWFwcGluZ3MgPSBuZXcgTWFwPG51bWJlciwgQ29udHJvbGxlckludGVudFtdPigpO1xyXG5pbnRlbnRNYXBwaW5ncy5zZXQoR2FtZVBhZEJ1dHRvbklkLkRfUEFEX1VQLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfRU5URVJfRE9PUiwgQ29udHJvbGxlckludGVudC5NRU5VX1VQXSk7XHJcbmludGVudE1hcHBpbmdzLnNldChHYW1lUGFkQnV0dG9uSWQuRF9QQURfRE9XTiwgW0NvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0RST1AsIENvbnRyb2xsZXJJbnRlbnQuTUVOVV9ET1dOXSk7XHJcbmludGVudE1hcHBpbmdzLnNldChHYW1lUGFkQnV0dG9uSWQuRF9QQURfTEVGVCwgW0NvbnRyb2xsZXJJbnRlbnQuUExBWUVSX01PVkVfTEVGVCwgQ29udHJvbGxlckludGVudC5NRU5VX0xFRlRdKTtcclxuaW50ZW50TWFwcGluZ3Muc2V0KEdhbWVQYWRCdXR0b25JZC5EX1BBRF9SSUdIVCwgW0NvbnRyb2xsZXJJbnRlbnQuUExBWUVSX01PVkVfUklHSFQsIENvbnRyb2xsZXJJbnRlbnQuTUVOVV9SSUdIVF0pO1xyXG5pbnRlbnRNYXBwaW5ncy5zZXQoR2FtZVBhZEJ1dHRvbklkLkJVVFRPTl8xLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfSlVNUCwgQ29udHJvbGxlckludGVudC5DT05GSVJNXSk7XHJcbmludGVudE1hcHBpbmdzLnNldChHYW1lUGFkQnV0dG9uSWQuQlVUVE9OXzIsIFtDb250cm9sbGVySW50ZW50LkFCT1JUXSk7XHJcbmludGVudE1hcHBpbmdzLnNldChHYW1lUGFkQnV0dG9uSWQuQlVUVE9OXzMsIFtDb250cm9sbGVySW50ZW50LlBMQVlFUl9SVU5dKTtcclxuaW50ZW50TWFwcGluZ3Muc2V0KEdhbWVQYWRCdXR0b25JZC5CVVRUT05fNCwgW0NvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0lOVEVSQUNUXSk7XHJcbmludGVudE1hcHBpbmdzLnNldChHYW1lUGFkQnV0dG9uSWQuU0hPVUxERVJfVE9QX0xFRlQsIFtDb250cm9sbGVySW50ZW50LlBMQVlFUl9EQU5DRV8xLCBDb250cm9sbGVySW50ZW50LlBMQVlFUl9BQ1RJT05dKTtcclxuaW50ZW50TWFwcGluZ3Muc2V0KEdhbWVQYWRCdXR0b25JZC5TSE9VTERFUl9UT1BfUklHSFQsIFtDb250cm9sbGVySW50ZW50LlBMQVlFUl9EQU5DRV8yLCBDb250cm9sbGVySW50ZW50LlBMQVlFUl9BQ1RJT05dKTtcclxuaW50ZW50TWFwcGluZ3Muc2V0KEdhbWVQYWRCdXR0b25JZC5TVEFSVCwgW0NvbnRyb2xsZXJJbnRlbnQuUEFVU0VdKTtcclxuXHJcbmNsYXNzIEdhbWVwYWRCdXR0b25XcmFwcGVyIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBpbmRleDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBwcmVzc2VkOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBnYW1lcGFkOiBHYW1lcGFkV3JhcHBlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpbmRleDogbnVtYmVyLCB3cmFwcGVkOiBHYW1lcGFkQnV0dG9uLCBnYW1lcGFkOiBHYW1lcGFkV3JhcHBlcikge1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLnByZXNzZWQgPSB3cmFwcGVkLnByZXNzZWQ7XHJcbiAgICAgICAgdGhpcy5nYW1lcGFkID0gZ2FtZXBhZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UHJlc3NlZChwcmVzc2VkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlck1hbmFnZXIgPSBDb250cm9sbGVyTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGNvbnN0IG9sZFByZXNzZWQgPSB0aGlzLnByZXNzZWQ7XHJcbiAgICAgICAgdGhpcy5wcmVzc2VkID0gcHJlc3NlZDtcclxuXHJcbiAgICAgICAgaWYgKG9sZFByZXNzZWQgIT09IHByZXNzZWQpIHtcclxuICAgICAgICAgICAgaWYgKHByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJNYW5hZ2VyLm9uQnV0dG9uRG93bi5lbWl0KFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBHYW1lcGFkQ29udHJvbGxlckV2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVwYWQuZ2FtZXBhZE1vZGVsLCBDb250cm9sbGVyRXZlbnRUeXBlLkRPV04sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVudE1hcHBpbmdzLmdldCh0aGlzLmluZGV4KSB8fCBbQ29udHJvbGxlckludGVudC5OT05FXVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyTWFuYWdlci5vbkJ1dHRvblVwLmVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEdhbWVwYWRDb250cm9sbGVyRXZlbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZC5nYW1lcGFkTW9kZWwsIENvbnRyb2xsZXJFdmVudFR5cGUuVVAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVudE1hcHBpbmdzLmdldCh0aGlzLmluZGV4KSB8fCBbQ29udHJvbGxlckludGVudC5OT05FXVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBHYW1lcGFkQXhpc1dyYXBwZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaHJlc2hvbGQgdG8gdXNlIHRvIGVtdWxhdGUgdmlydHVhbCBidXR0b25zLlxyXG4gICAgICogVmFsdWVzIGJldHdlZW4gMC4xIChzbGlnaHQgdG91Y2hlcyBvZiB0aGUgYXhpcyB0cmlnZ2VyIGJ1dHRvbiBwcmVzc2VzKVxyXG4gICAgICogMC45IChtdWNoIGZvcmNlIG5lZWRlZCkgY2FuIGJlIHVzZWQgaGVyZS5cclxuICAgICAqXHJcbiAgICAgKiBBdm9pZCB1c2luZyAwLjAgYW5kIDEuMCBhcyB0aGV5IGNhbm5vdCBiZSByZWFjaGVkIG9uIHNvbWUgZ2FtZXBhZHMgb3JcclxuICAgICAqIG1pZ2h0IGxlYWQgdG8gYnV0dG9uIGZsaWJiZXIgZmx1YmJlci4uLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHRocmVzaG9sZCA9IDAuNTtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgaW5kZXg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdmFsdWU6IG51bWJlciA9IDAuMDtcclxuICAgIHByaXZhdGUgZ2FtZXBhZDogR2FtZXBhZFdyYXBwZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaW5kZXg6IG51bWJlciwgZ2FtZXBhZDogR2FtZXBhZFdyYXBwZXIpIHtcclxuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5nYW1lcGFkID0gZ2FtZXBhZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0VmFsdWUobmV3VmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXJNYW5hZ2VyID0gQ29udHJvbGxlck1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIGxldCBlbXVsYXRlZEJ1dHRvbklkOiBudW1iZXJ8dW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBpZiAob2xkVmFsdWUgPD0gLXRoaXMudGhyZXNob2xkICYmIG5ld1ZhbHVlID4gLXRoaXMudGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIC8vIFZpcnR1YWwgYnV0dG9uIDEgcmVsZWFzZWRcclxuICAgICAgICAgICAgZW11bGF0ZWRCdXR0b25JZCA9IGF4aXNNYXBwaW5nLmdldCh0aGlzLmluZGV4KT8uYnV0dG9uMTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlbXVsYXRlZEJ1dHRvbklkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJNYW5hZ2VyLm9uQnV0dG9uVXAuZW1pdChcclxuICAgICAgICAgICAgICAgICAgICBuZXcgR2FtZXBhZENvbnRyb2xsZXJFdmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lcGFkLmdhbWVwYWRNb2RlbCwgQ29udHJvbGxlckV2ZW50VHlwZS5VUCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZW50TWFwcGluZ3MuZ2V0KGVtdWxhdGVkQnV0dG9uSWQpIHx8IFtDb250cm9sbGVySW50ZW50Lk5PTkVdXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAob2xkVmFsdWUgPiAtdGhpcy50aHJlc2hvbGQgJiYgbmV3VmFsdWUgPD0gLXRoaXMudGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIC8vIFZpcnR1YWwgYnV0dG9uIDEgcHJlc3NlZFxyXG4gICAgICAgICAgICBlbXVsYXRlZEJ1dHRvbklkID0gYXhpc01hcHBpbmcuZ2V0KHRoaXMuaW5kZXgpPy5idXR0b24xO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVtdWxhdGVkQnV0dG9uSWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlck1hbmFnZXIub25CdXR0b25Eb3duLmVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEdhbWVwYWRDb250cm9sbGVyRXZlbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZC5nYW1lcGFkTW9kZWwsIENvbnRyb2xsZXJFdmVudFR5cGUuRE9XTixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZW50TWFwcGluZ3MuZ2V0KGVtdWxhdGVkQnV0dG9uSWQpIHx8IFtDb250cm9sbGVySW50ZW50Lk5PTkVdXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9sZFZhbHVlID4gdGhpcy50aHJlc2hvbGQgJiYgbmV3VmFsdWUgPD0gdGhpcy50aHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgLy8gVmlydHVhbCBidXR0b24gMiByZWxlYXNlZFxyXG4gICAgICAgICAgICBlbXVsYXRlZEJ1dHRvbklkID0gYXhpc01hcHBpbmcuZ2V0KHRoaXMuaW5kZXgpPy5idXR0b24yO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVtdWxhdGVkQnV0dG9uSWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlck1hbmFnZXIub25CdXR0b25VcC5lbWl0KFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBHYW1lcGFkQ29udHJvbGxlckV2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVwYWQuZ2FtZXBhZE1vZGVsLCBDb250cm9sbGVyRXZlbnRUeXBlLlVQLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlbnRNYXBwaW5ncy5nZXQoZW11bGF0ZWRCdXR0b25JZCkgfHwgW0NvbnRyb2xsZXJJbnRlbnQuTk9ORV1cclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChvbGRWYWx1ZSA8IHRoaXMudGhyZXNob2xkICYmIG5ld1ZhbHVlID49IHRoaXMudGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIC8vIFZpcnR1YWwgYnV0dG9uIDIgcHJlc3NlZFxyXG4gICAgICAgICAgICBlbXVsYXRlZEJ1dHRvbklkID0gYXhpc01hcHBpbmcuZ2V0KHRoaXMuaW5kZXgpPy5idXR0b24yO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVtdWxhdGVkQnV0dG9uSWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlck1hbmFnZXIub25CdXR0b25Eb3duLmVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEdhbWVwYWRDb250cm9sbGVyRXZlbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZXBhZC5nYW1lcGFkTW9kZWwsIENvbnRyb2xsZXJFdmVudFR5cGUuRE9XTixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZW50TWFwcGluZ3MuZ2V0KGVtdWxhdGVkQnV0dG9uSWQpIHx8IFtDb250cm9sbGVySW50ZW50Lk5PTkVdXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNvbWUgb2JzY3VyZSBtYWdpYyB0byBtYWtlIHN1cmUgdGhhdCBnYW1lcGFkIGJ1dHRvbnMgYW5kIGF4ZXMgYXJlIG1hcHBlZCBvbnRvIHVuaWZpZWQgY29udHJvbGxlclxyXG4gKiBldmVudHMuXHJcbiAqL1xyXG5jbGFzcyBHYW1lcGFkV3JhcHBlciB7XHJcbiAgICBwcml2YXRlIGluZGV4OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGlkOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGJ1dHRvbnM6IEdhbWVwYWRCdXR0b25XcmFwcGVyW107XHJcbiAgICBwcml2YXRlIGF4ZXM6IEdhbWVwYWRBeGlzV3JhcHBlcltdO1xyXG4gICAgcHVibGljIGdhbWVwYWRNb2RlbDogR2FtZXBhZE1vZGVsO1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZXBhZDogR2FtZXBhZCkge1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSBnYW1lcGFkLmluZGV4O1xyXG4gICAgICAgIHRoaXMuaWQgPSBnYW1lcGFkLmlkO1xyXG4gICAgICAgIHRoaXMuZ2FtZXBhZE1vZGVsID0gR2FtZXBhZE1vZGVsLmZyb21TdHJpbmcodGhpcy5pZCk7XHJcbiAgICAgICAgdGhpcy5idXR0b25zID0gbmV3IEFycmF5KGdhbWVwYWQuYnV0dG9ucy5sZW5ndGgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbnNbaV0gPSBuZXcgR2FtZXBhZEJ1dHRvbldyYXBwZXIoaSwgZ2FtZXBhZC5idXR0b25zW2ldLCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYXhlcyA9IG5ldyBBcnJheShnYW1lcGFkLmF4ZXMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmF4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5heGVzW2ldID0gbmV3IEdhbWVwYWRBeGlzV3JhcHBlcihpLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBnYW1lcGFkID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKClbdGhpcy5pbmRleF07XHJcblxyXG4gICAgICAgIGlmIChnYW1lcGFkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5zZXRQcmVzc2VkKGdhbWVwYWQuYnV0dG9uc1tidXR0b24uaW5kZXhdLnByZXNzZWQpKTtcclxuICAgICAgICAgICAgdGhpcy5heGVzLmZvckVhY2goYXhpcyA9PiBheGlzLnNldFZhbHVlKGdhbWVwYWQuYXhlc1theGlzLmluZGV4XSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYEdhbWVwYWQgKGluZGV4OiAke3RoaXMuaW5kZXh9LCBpZDogJHt0aGlzLmlkfSlgO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZXBhZElucHV0IHtcclxuICAgIHByaXZhdGUgZ2FtZXBhZHM6IE1hcDxzdHJpbmcsIEdhbWVwYWRXcmFwcGVyPjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmdhbWVwYWRzID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImdhbWVwYWRjb25uZWN0ZWRcIiwgKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiR2FtZXBhZCBjb25uZWN0ZWQ6IFwiLCBlKTtcclxuICAgICAgICAgICAgY29uc3QgZ2FtZXBhZCA9IChlIGFzIEdhbWVwYWRFdmVudEluaXQpLmdhbWVwYWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoZ2FtZXBhZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVwYWRzLnNldChnYW1lcGFkLmlkLCBuZXcgR2FtZXBhZFdyYXBwZXIoZ2FtZXBhZCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZXBhZGRpc2Nvbm5lY3RlZFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiR2FtZXBhZCBkaXNjb25uZWN0ZWQ6IFwiLCBlKTtcclxuICAgICAgICAgICAgY29uc3QgZ2FtZXBhZCA9IChlIGFzIGFueSBhcyBHYW1lcGFkRXZlbnRJbml0KS5nYW1lcGFkO1xyXG5cclxuICAgICAgICAgICAgaWYgKGdhbWVwYWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lcGFkcy5kZWxldGUoZ2FtZXBhZC5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2FtZXBhZHMuZm9yRWFjaChnYW1lcGFkID0+IGdhbWVwYWQudXBkYXRlKCkpO1xyXG4gICAgfVxyXG5cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFlQTtBQWRBOzs7Ozs7O0FBT0E7QUFDQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBN0JBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/input/GamepadInput.js\n");
    
    /***/ }),
    
    /***/ "./lib/input/GamepadModel.js":
    /*!***********************************!*\
      !*** ./lib/input/GamepadModel.js ***!
      \***********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\n// See https://gamepad-tester.com/controllers for a list of some possible controller IDs.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_GAMEPAD_MODEL = exports.GamepadModel = void 0;\nconst GamepadStyle_1 = __webpack_require__(/*! ./GamepadStyle */ \"./lib/input/GamepadStyle.js\");\nconst typemap = new Map();\n/* spell-checker: disable */\ntypemap.set(/^.*?[Xx][Ii][Nn][Pp][Uu][Tt].*$/, GamepadStyle_1.GamepadStyle.XBOX);\n// Vendor ID of Microsoft Corp.\ntypemap.set(/^.*045e.*$/, GamepadStyle_1.GamepadStyle.XBOX);\ntypemap.set(/^.*?[Ss]tadia\\ [Cc]ontroller.*$/, GamepadStyle_1.GamepadStyle.STADIA);\n// Anything with playstation in its name\ntypemap.set(/^.*?[Pp][Ll][Aa][Yy][Ss][Tt][Aa][Ii][Oo][Nn].*$/, GamepadStyle_1.GamepadStyle.XBOX);\n// Vendor ID of Sony Inc.\ntypemap.set(/^.*054c.*$/, GamepadStyle_1.GamepadStyle.PLAYSTATION);\n/**\n * Regular expression to extract vendor and product identifier.\n */\nconst productAndVendorMatcher = /^.*?[Vv]endor:?\\s*(?<vendorId>.{4}).*?[Pp]roduct:?\\s*(?<productId>.{4}).*?$/;\n/* spell-checker: enable */\nclass GamepadModel {\n    constructor(style, vendorId, productId) {\n        this.style = style;\n    }\n    /**\n     * Parses a gamepad identifier string and returns an object that encapsulates\n     * @param str\n     *   Gamepad identifier string as reported by the Gamepad API.\n     */\n    static fromString(str) {\n        var _a, _b;\n        for (const [key, value] of typemap) {\n            if (key.exec(str)) {\n                const productAndVendorMatch = productAndVendorMatcher.exec(str);\n                let vendorId;\n                let productId;\n                if (productAndVendorMatch !== null) {\n                    vendorId = (_a = productAndVendorMatch.groups) === null || _a === void 0 ? void 0 : _a.vendorId;\n                    productId = (_b = productAndVendorMatch.groups) === null || _b === void 0 ? void 0 : _b.productId;\n                }\n                return new GamepadModel(value, parseInt(vendorId || \"-1\", 16), parseInt(productId || \"-1\"));\n            }\n        }\n        // Nothing matches? Well,... that's bad luck...\n        return exports.DEFAULT_GAMEPAD_MODEL;\n    }\n}\nexports.GamepadModel = GamepadModel;\nexports.DEFAULT_GAMEPAD_MODEL = new GamepadModel(GamepadStyle_1.GamepadStyle.UNKNOWN);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaW5wdXQvR2FtZXBhZE1vZGVsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2lucHV0L0dhbWVwYWRNb2RlbC50cz82MjI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNlZSBodHRwczovL2dhbWVwYWQtdGVzdGVyLmNvbS9jb250cm9sbGVycyBmb3IgYSBsaXN0IG9mIHNvbWUgcG9zc2libGUgY29udHJvbGxlciBJRHMuXHJcblxyXG5pbXBvcnQgeyBHYW1lcGFkU3R5bGUgfSBmcm9tIFwiLi9HYW1lcGFkU3R5bGVcIjtcclxuXHJcbmNvbnN0IHR5cGVtYXA6IE1hcDxSZWdFeHAsR2FtZXBhZFN0eWxlPiA9IG5ldyBNYXAoKTtcclxuXHJcbi8qIHNwZWxsLWNoZWNrZXI6IGRpc2FibGUgKi9cclxudHlwZW1hcC5zZXQoL14uKj9bWHhdW0lpXVtObl1bUHBdW1V1XVtUdF0uKiQvLCBHYW1lcGFkU3R5bGUuWEJPWCk7XHJcbi8vIFZlbmRvciBJRCBvZiBNaWNyb3NvZnQgQ29ycC5cclxudHlwZW1hcC5zZXQoL14uKjA0NWUuKiQvLCBHYW1lcGFkU3R5bGUuWEJPWCk7XHJcbnR5cGVtYXAuc2V0KC9eLio/W1NzXXRhZGlhXFwgW0NjXW9udHJvbGxlci4qJC8sIEdhbWVwYWRTdHlsZS5TVEFESUEpO1xyXG4vLyBBbnl0aGluZyB3aXRoIHBsYXlzdGF0aW9uIGluIGl0cyBuYW1lXHJcbnR5cGVtYXAuc2V0KC9eLio/W1BwXVtMbF1bQWFdW1l5XVtTc11bVHRdW0FhXVtJaV1bT29dW05uXS4qJC8sIEdhbWVwYWRTdHlsZS5YQk9YKTtcclxuLy8gVmVuZG9yIElEIG9mIFNvbnkgSW5jLlxyXG50eXBlbWFwLnNldCgvXi4qMDU0Yy4qJC8sIEdhbWVwYWRTdHlsZS5QTEFZU1RBVElPTik7XHJcblxyXG4vKipcclxuICogUmVndWxhciBleHByZXNzaW9uIHRvIGV4dHJhY3QgdmVuZG9yIGFuZCBwcm9kdWN0IGlkZW50aWZpZXIuXHJcbiAqL1xyXG5jb25zdCBwcm9kdWN0QW5kVmVuZG9yTWF0Y2hlciA9IC9eLio/W1Z2XWVuZG9yOj9cXHMqKD88dmVuZG9ySWQ+Lns0fSkuKj9bUHBdcm9kdWN0Oj9cXHMqKD88cHJvZHVjdElkPi57NH0pLio/JC87XHJcbi8qIHNwZWxsLWNoZWNrZXI6IGVuYWJsZSAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVwYWRNb2RlbCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIHN0eWxlOiBHYW1lcGFkU3R5bGUsIHZlbmRvcklkPzogbnVtYmVyfHVuZGVmaW5lZCwgcHJvZHVjdElkPzogbnVtYmVyfHVuZGVmaW5lZCkge1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgZ2FtZXBhZCBpZGVudGlmaWVyIHN0cmluZyBhbmQgcmV0dXJucyBhbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXNcclxuICAgICAqIEBwYXJhbSBzdHJcclxuICAgICAqICAgR2FtZXBhZCBpZGVudGlmaWVyIHN0cmluZyBhcyByZXBvcnRlZCBieSB0aGUgR2FtZXBhZCBBUEkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbVN0cmluZyhzdHI6IHN0cmluZyk6IEdhbWVwYWRNb2RlbCB7XHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdHlwZW1hcCkge1xyXG4gICAgICAgICAgICBpZiAoa2V5LmV4ZWMoc3RyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdEFuZFZlbmRvck1hdGNoID0gcHJvZHVjdEFuZFZlbmRvck1hdGNoZXIuZXhlYyhzdHIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHZlbmRvcklkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHJvZHVjdElkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RBbmRWZW5kb3JNYXRjaCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlbmRvcklkID0gcHJvZHVjdEFuZFZlbmRvck1hdGNoLmdyb3Vwcz8udmVuZG9ySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdElkID0gcHJvZHVjdEFuZFZlbmRvck1hdGNoLmdyb3Vwcz8ucHJvZHVjdElkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHYW1lcGFkTW9kZWwodmFsdWUsIHBhcnNlSW50KHZlbmRvcklkIHx8IFwiLTFcIiwgMTYpLCBwYXJzZUludChwcm9kdWN0SWQgfHwgXCItMVwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm90aGluZyBtYXRjaGVzPyBXZWxsLC4uLiB0aGF0J3MgYmFkIGx1Y2suLi5cclxuICAgICAgICByZXR1cm4gREVGQVVMVF9HQU1FUEFEX01PREVMO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfR0FNRVBBRF9NT0RFTDogR2FtZXBhZE1vZGVsID0gbmV3IEdhbWVwYWRNb2RlbChHYW1lcGFkU3R5bGUuVU5LTk9XTik7XHJcbiJdLCJtYXBwaW5ncyI6IjtBQUFBOzs7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUEzQkE7QUE2QkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/input/GamepadModel.js\n");
    
    /***/ }),
    
    /***/ "./lib/input/GamepadStyle.js":
    /*!***********************************!*\
      !*** ./lib/input/GamepadStyle.js ***!
      \***********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GamepadStyle = void 0;\n/**\n * Enumeration of the different gamepad styles.\n *\n * Mainly used to adjust button mappings to offer the best possible *expected* gaming\n * experience and to make sure that graphics are displayed in-game that match the\n * controller being used.\n */\nvar GamepadStyle;\n(function (GamepadStyle) {\n    /** Default gamepad type if nothing else matches. */\n    GamepadStyle[\"UNKNOWN\"] = \"unknown\";\n    GamepadStyle[\"XBOX\"] = \"xbox\";\n    GamepadStyle[\"PLAYSTATION\"] = \"playstation\";\n    GamepadStyle[\"STADIA\"] = \"stadia\";\n})(GamepadStyle = exports.GamepadStyle || (exports.GamepadStyle = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaW5wdXQvR2FtZXBhZFN0eWxlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2lucHV0L0dhbWVwYWRTdHlsZS50cz8xOTk4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiB0aGUgZGlmZmVyZW50IGdhbWVwYWQgc3R5bGVzLlxyXG4gKlxyXG4gKiBNYWlubHkgdXNlZCB0byBhZGp1c3QgYnV0dG9uIG1hcHBpbmdzIHRvIG9mZmVyIHRoZSBiZXN0IHBvc3NpYmxlICpleHBlY3RlZCogZ2FtaW5nXHJcbiAqIGV4cGVyaWVuY2UgYW5kIHRvIG1ha2Ugc3VyZSB0aGF0IGdyYXBoaWNzIGFyZSBkaXNwbGF5ZWQgaW4tZ2FtZSB0aGF0IG1hdGNoIHRoZVxyXG4gKiBjb250cm9sbGVyIGJlaW5nIHVzZWQuXHJcbiAqL1xyXG5leHBvcnQgZW51bSBHYW1lcGFkU3R5bGUge1xyXG5cclxuICAgIC8qKiBEZWZhdWx0IGdhbWVwYWQgdHlwZSBpZiBub3RoaW5nIGVsc2UgbWF0Y2hlcy4gKi9cclxuICAgIFVOS05PV04gPSBcInVua25vd25cIixcclxuXHJcbiAgICBYQk9YID0gXCJ4Ym94XCIsXHJcbiAgICBQTEFZU1RBVElPTiA9IFwicGxheXN0YXRpb25cIixcclxuICAgIFNUQURJQSA9IFwic3RhZGlhXCJcclxuXHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTs7Ozs7O0FBTUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/input/GamepadStyle.js\n");
    
    /***/ }),
    
    /***/ "./lib/input/Keyboard.js":
    /*!*******************************!*\
      !*** ./lib/input/Keyboard.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Keyboard = void 0;\nconst ControllerEvent_1 = __webpack_require__(/*! ./ControllerEvent */ \"./lib/input/ControllerEvent.js\");\nconst ControllerEventType_1 = __webpack_require__(/*! ./ControllerEventType */ \"./lib/input/ControllerEventType.js\");\nconst ControllerFamily_1 = __webpack_require__(/*! ./ControllerFamily */ \"./lib/input/ControllerFamily.js\");\nconst ControllerIntent_1 = __webpack_require__(/*! ./ControllerIntent */ \"./lib/input/ControllerIntent.js\");\nconst ControllerManager_1 = __webpack_require__(/*! ./ControllerManager */ \"./lib/input/ControllerManager.js\");\nconst Signal_1 = __webpack_require__(/*! ../Signal */ \"./lib/Signal.js\");\nconst preventDefaultKeyCodes = [\n    \"ArrowUp\", \"ArrowDown\", \"ArrowRight\", \"ArrowLeft\", \"Space\"\n];\nconst keyToIntentMappings = new Map();\nkeyToIntentMappings.set(\"Space\", [ControllerIntent_1.ControllerIntent.PLAYER_JUMP]);\nkeyToIntentMappings.set(\"KeyW\", [ControllerIntent_1.ControllerIntent.PLAYER_ENTER_DOOR, ControllerIntent_1.ControllerIntent.MENU_UP]);\nkeyToIntentMappings.set(\"KeyA\", [ControllerIntent_1.ControllerIntent.PLAYER_MOVE_LEFT, ControllerIntent_1.ControllerIntent.MENU_LEFT]);\nkeyToIntentMappings.set(\"KeyS\", [ControllerIntent_1.ControllerIntent.PLAYER_DROP, ControllerIntent_1.ControllerIntent.MENU_DOWN]);\nkeyToIntentMappings.set(\"KeyD\", [ControllerIntent_1.ControllerIntent.PLAYER_MOVE_RIGHT, ControllerIntent_1.ControllerIntent.MENU_RIGHT]);\nkeyToIntentMappings.set(\"ArrowUp\", [ControllerIntent_1.ControllerIntent.PLAYER_ENTER_DOOR, ControllerIntent_1.ControllerIntent.MENU_UP]);\nkeyToIntentMappings.set(\"ArrowDown\", [ControllerIntent_1.ControllerIntent.PLAYER_DROP, ControllerIntent_1.ControllerIntent.MENU_DOWN]);\nkeyToIntentMappings.set(\"ArrowLeft\", [ControllerIntent_1.ControllerIntent.PLAYER_MOVE_LEFT, ControllerIntent_1.ControllerIntent.MENU_LEFT]);\nkeyToIntentMappings.set(\"ArrowRight\", [ControllerIntent_1.ControllerIntent.PLAYER_MOVE_RIGHT, ControllerIntent_1.ControllerIntent.MENU_RIGHT]);\nkeyToIntentMappings.set(\"Enter\", [ControllerIntent_1.ControllerIntent.PLAYER_INTERACT, ControllerIntent_1.ControllerIntent.CONFIRM]);\nkeyToIntentMappings.set(\"NumpadEnter\", [ControllerIntent_1.ControllerIntent.PLAYER_INTERACT, ControllerIntent_1.ControllerIntent.CONFIRM]);\nkeyToIntentMappings.set(\"Escape\", [ControllerIntent_1.ControllerIntent.ABORT, ControllerIntent_1.ControllerIntent.PAUSE]);\nkeyToIntentMappings.set(\"ShiftLeft\", [ControllerIntent_1.ControllerIntent.PLAYER_RUN]);\nkeyToIntentMappings.set(\"ShiftRight\", [ControllerIntent_1.ControllerIntent.PLAYER_RUN]);\nkeyToIntentMappings.set(\"KeyE\", [ControllerIntent_1.ControllerIntent.PLAYER_INTERACT, ControllerIntent_1.ControllerIntent.CONFIRM]);\nkeyToIntentMappings.set(\"KeyF\", [ControllerIntent_1.ControllerIntent.PLAYER_ACTION]);\nkeyToIntentMappings.set(\"Digit1\", [ControllerIntent_1.ControllerIntent.PLAYER_DANCE_1]);\nkeyToIntentMappings.set(\"Digit2\", [ControllerIntent_1.ControllerIntent.PLAYER_DANCE_2]);\nkeyToIntentMappings.set(\"Numpad1\", [ControllerIntent_1.ControllerIntent.PLAYER_DANCE_1]);\nkeyToIntentMappings.set(\"Numpad2\", [ControllerIntent_1.ControllerIntent.PLAYER_DANCE_2]);\nclass Keyboard {\n    constructor() {\n        this.onKeyDown = new Signal_1.Signal();\n        this.onKeyUp = new Signal_1.Signal();\n        this.onKeyPress = new Signal_1.Signal();\n        this.pressed = new Set();\n        this.controllerManager = ControllerManager_1.ControllerManager.getInstance();\n        document.addEventListener(\"keypress\", event => this.handleKeyPress(event));\n        document.addEventListener(\"keydown\", event => this.handleKeyDown(event));\n        document.addEventListener(\"keyup\", event => this.handleKeyUp(event));\n    }\n    handleKeyPress(event) {\n        this.onKeyPress.emit(event);\n        // Quick workaround to make sure, that modifier keys never trigger a game-related\n        // controller event. Especially necessary to make other non-game related actions\n        // possible. (Shift is used as a modifier key to enable running and is therefore\n        // excluded from the list below)\n        if (event.altKey || event.ctrlKey || event.metaKey) {\n            return;\n        }\n        this.controllerManager.onButtonPress.emit(new ControllerEvent_1.ControllerEvent(ControllerFamily_1.ControllerFamily.KEYBOARD, ControllerEventType_1.ControllerEventType.PRESS, keyToIntentMappings.get(event.code) || [ControllerIntent_1.ControllerIntent.NONE], event.repeat));\n    }\n    handleKeyDown(event) {\n        if (preventDefaultKeyCodes.includes(event.code)) {\n            event.preventDefault();\n        }\n        if (!event.repeat) {\n            this.pressed.add(event.key);\n        }\n        this.onKeyDown.emit(event);\n        if (event.altKey || event.ctrlKey || event.metaKey) {\n            return;\n        }\n        this.controllerManager.onButtonDown.emit(new ControllerEvent_1.ControllerEvent(ControllerFamily_1.ControllerFamily.KEYBOARD, ControllerEventType_1.ControllerEventType.DOWN, keyToIntentMappings.get(event.code) || [ControllerIntent_1.ControllerIntent.NONE], event.repeat));\n    }\n    handleKeyUp(event) {\n        if (!event.repeat) {\n            this.pressed.delete(event.key);\n        }\n        this.onKeyUp.emit(event);\n        if (event.altKey || event.ctrlKey || event.metaKey) {\n            return;\n        }\n        this.controllerManager.onButtonUp.emit(new ControllerEvent_1.ControllerEvent(ControllerFamily_1.ControllerFamily.KEYBOARD, ControllerEventType_1.ControllerEventType.UP, keyToIntentMappings.get(event.code) || [ControllerIntent_1.ControllerIntent.NONE], event.repeat));\n    }\n    isPressed(key) {\n        return this.pressed.has(key);\n    }\n}\nexports.Keyboard = Keyboard;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaW5wdXQvS2V5Ym9hcmQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5wdXQvS2V5Ym9hcmQudHM/NzgyYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb250cm9sbGVyRXZlbnQgfSBmcm9tIFwiLi9Db250cm9sbGVyRXZlbnRcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckV2ZW50VHlwZSB9IGZyb20gXCIuL0NvbnRyb2xsZXJFdmVudFR5cGVcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckZhbWlseSB9IGZyb20gXCIuL0NvbnRyb2xsZXJGYW1pbHlcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckludGVudCB9IGZyb20gXCIuL0NvbnRyb2xsZXJJbnRlbnRcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlck1hbmFnZXIgfSBmcm9tIFwiLi9Db250cm9sbGVyTWFuYWdlclwiO1xyXG5pbXBvcnQgeyBTaWduYWwgfSBmcm9tIFwiLi4vU2lnbmFsXCI7XHJcblxyXG5jb25zdCBwcmV2ZW50RGVmYXVsdEtleUNvZGVzOiBzdHJpbmdbXSA9IFtcclxuICAgIFwiQXJyb3dVcFwiLCBcIkFycm93RG93blwiLCBcIkFycm93UmlnaHRcIiwgXCJBcnJvd0xlZnRcIiwgXCJTcGFjZVwiXHJcbl07XHJcblxyXG5jb25zdCBrZXlUb0ludGVudE1hcHBpbmdzID0gbmV3IE1hcDxzdHJpbmcsIENvbnRyb2xsZXJJbnRlbnRbXT4oKTtcclxuXHJcbmtleVRvSW50ZW50TWFwcGluZ3Muc2V0KFwiU3BhY2VcIiwgW0NvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0pVTVBdKTtcclxua2V5VG9JbnRlbnRNYXBwaW5ncy5zZXQoXCJLZXlXXCIsIFtDb250cm9sbGVySW50ZW50LlBMQVlFUl9FTlRFUl9ET09SLCBDb250cm9sbGVySW50ZW50Lk1FTlVfVVBdKTtcclxua2V5VG9JbnRlbnRNYXBwaW5ncy5zZXQoXCJLZXlBXCIsIFtDb250cm9sbGVySW50ZW50LlBMQVlFUl9NT1ZFX0xFRlQsIENvbnRyb2xsZXJJbnRlbnQuTUVOVV9MRUZUXSk7XHJcbmtleVRvSW50ZW50TWFwcGluZ3Muc2V0KFwiS2V5U1wiLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfRFJPUCwgQ29udHJvbGxlckludGVudC5NRU5VX0RPV05dKTtcclxua2V5VG9JbnRlbnRNYXBwaW5ncy5zZXQoXCJLZXlEXCIsIFtDb250cm9sbGVySW50ZW50LlBMQVlFUl9NT1ZFX1JJR0hULCBDb250cm9sbGVySW50ZW50Lk1FTlVfUklHSFRdKTtcclxua2V5VG9JbnRlbnRNYXBwaW5ncy5zZXQoXCJBcnJvd1VwXCIsIFtDb250cm9sbGVySW50ZW50LlBMQVlFUl9FTlRFUl9ET09SLCBDb250cm9sbGVySW50ZW50Lk1FTlVfVVBdKTtcclxua2V5VG9JbnRlbnRNYXBwaW5ncy5zZXQoXCJBcnJvd0Rvd25cIiwgW0NvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0RST1AsIENvbnRyb2xsZXJJbnRlbnQuTUVOVV9ET1dOXSk7XHJcbmtleVRvSW50ZW50TWFwcGluZ3Muc2V0KFwiQXJyb3dMZWZ0XCIsIFtDb250cm9sbGVySW50ZW50LlBMQVlFUl9NT1ZFX0xFRlQsIENvbnRyb2xsZXJJbnRlbnQuTUVOVV9MRUZUXSk7XHJcbmtleVRvSW50ZW50TWFwcGluZ3Muc2V0KFwiQXJyb3dSaWdodFwiLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfTU9WRV9SSUdIVCwgQ29udHJvbGxlckludGVudC5NRU5VX1JJR0hUXSk7XHJcbmtleVRvSW50ZW50TWFwcGluZ3Muc2V0KFwiRW50ZXJcIiwgW0NvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0lOVEVSQUNULCBDb250cm9sbGVySW50ZW50LkNPTkZJUk1dKTtcclxua2V5VG9JbnRlbnRNYXBwaW5ncy5zZXQoXCJOdW1wYWRFbnRlclwiLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfSU5URVJBQ1QsIENvbnRyb2xsZXJJbnRlbnQuQ09ORklSTV0pO1xyXG5rZXlUb0ludGVudE1hcHBpbmdzLnNldChcIkVzY2FwZVwiLCBbQ29udHJvbGxlckludGVudC5BQk9SVCwgQ29udHJvbGxlckludGVudC5QQVVTRV0pO1xyXG5rZXlUb0ludGVudE1hcHBpbmdzLnNldChcIlNoaWZ0TGVmdFwiLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfUlVOXSk7XHJcbmtleVRvSW50ZW50TWFwcGluZ3Muc2V0KFwiU2hpZnRSaWdodFwiLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfUlVOXSk7XHJcbmtleVRvSW50ZW50TWFwcGluZ3Muc2V0KFwiS2V5RVwiLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfSU5URVJBQ1QsIENvbnRyb2xsZXJJbnRlbnQuQ09ORklSTV0pO1xyXG5rZXlUb0ludGVudE1hcHBpbmdzLnNldChcIktleUZcIiwgW0NvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0FDVElPTl0pO1xyXG5rZXlUb0ludGVudE1hcHBpbmdzLnNldChcIkRpZ2l0MVwiLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfREFOQ0VfMV0pO1xyXG5rZXlUb0ludGVudE1hcHBpbmdzLnNldChcIkRpZ2l0MlwiLCBbQ29udHJvbGxlckludGVudC5QTEFZRVJfREFOQ0VfMl0pO1xyXG5rZXlUb0ludGVudE1hcHBpbmdzLnNldChcIk51bXBhZDFcIiwgW0NvbnRyb2xsZXJJbnRlbnQuUExBWUVSX0RBTkNFXzFdKTtcclxua2V5VG9JbnRlbnRNYXBwaW5ncy5zZXQoXCJOdW1wYWQyXCIsIFtDb250cm9sbGVySW50ZW50LlBMQVlFUl9EQU5DRV8yXSk7XHJcblxyXG5leHBvcnQgY2xhc3MgS2V5Ym9hcmQge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG9uS2V5RG93biA9IG5ldyBTaWduYWw8S2V5Ym9hcmRFdmVudD4oKTtcclxuICAgIHB1YmxpYyByZWFkb25seSBvbktleVVwID0gbmV3IFNpZ25hbDxLZXlib2FyZEV2ZW50PigpO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG9uS2V5UHJlc3MgPSBuZXcgU2lnbmFsPEtleWJvYXJkRXZlbnQ+KCk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHByZXNzZWQgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY29udHJvbGxlck1hbmFnZXIgPSBDb250cm9sbGVyTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgZXZlbnQgPT4gdGhpcy5oYW5kbGVLZXlQcmVzcyhldmVudCkpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGV2ZW50ID0+IHRoaXMuaGFuZGxlS2V5RG93bihldmVudCkpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBldmVudCA9PiB0aGlzLmhhbmRsZUtleVVwKGV2ZW50KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVLZXlQcmVzcyhldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMub25LZXlQcmVzcy5lbWl0KGV2ZW50KTtcclxuXHJcbiAgICAgICAgLy8gUXVpY2sgd29ya2Fyb3VuZCB0byBtYWtlIHN1cmUsIHRoYXQgbW9kaWZpZXIga2V5cyBuZXZlciB0cmlnZ2VyIGEgZ2FtZS1yZWxhdGVkXHJcbiAgICAgICAgLy8gY29udHJvbGxlciBldmVudC4gRXNwZWNpYWxseSBuZWNlc3NhcnkgdG8gbWFrZSBvdGhlciBub24tZ2FtZSByZWxhdGVkIGFjdGlvbnNcclxuICAgICAgICAvLyBwb3NzaWJsZS4gKFNoaWZ0IGlzIHVzZWQgYXMgYSBtb2RpZmllciBrZXkgdG8gZW5hYmxlIHJ1bm5pbmcgYW5kIGlzIHRoZXJlZm9yZVxyXG4gICAgICAgIC8vIGV4Y2x1ZGVkIGZyb20gdGhlIGxpc3QgYmVsb3cpXHJcbiAgICAgICAgaWYgKGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyTWFuYWdlci5vbkJ1dHRvblByZXNzLmVtaXQoXHJcbiAgICAgICAgICAgIG5ldyBDb250cm9sbGVyRXZlbnQoXHJcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyRmFtaWx5LktFWUJPQVJELCBDb250cm9sbGVyRXZlbnRUeXBlLlBSRVNTLFxyXG4gICAgICAgICAgICAgICAga2V5VG9JbnRlbnRNYXBwaW5ncy5nZXQoZXZlbnQuY29kZSkgfHwgW0NvbnRyb2xsZXJJbnRlbnQuTk9ORV0sIGV2ZW50LnJlcGVhdFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZUtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAocHJldmVudERlZmF1bHRLZXlDb2Rlcy5pbmNsdWRlcyhldmVudC5jb2RlKSkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFldmVudC5yZXBlYXQpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmVzc2VkLmFkZChldmVudC5rZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vbktleURvd24uZW1pdChldmVudCk7XHJcblxyXG4gICAgICAgIGlmIChldmVudC5hbHRLZXkgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29udHJvbGxlck1hbmFnZXIub25CdXR0b25Eb3duLmVtaXQoXHJcbiAgICAgICAgICAgIG5ldyBDb250cm9sbGVyRXZlbnQoXHJcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyRmFtaWx5LktFWUJPQVJELCBDb250cm9sbGVyRXZlbnRUeXBlLkRPV04sXHJcbiAgICAgICAgICAgICAgICBrZXlUb0ludGVudE1hcHBpbmdzLmdldChldmVudC5jb2RlKSB8fCBbQ29udHJvbGxlckludGVudC5OT05FXSwgZXZlbnQucmVwZWF0XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIWV2ZW50LnJlcGVhdCkge1xyXG4gICAgICAgICAgICB0aGlzLnByZXNzZWQuZGVsZXRlKGV2ZW50LmtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm9uS2V5VXAuZW1pdChldmVudCk7XHJcblxyXG4gICAgICAgIGlmIChldmVudC5hbHRLZXkgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29udHJvbGxlck1hbmFnZXIub25CdXR0b25VcC5lbWl0KFxyXG4gICAgICAgICAgICBuZXcgQ29udHJvbGxlckV2ZW50KFxyXG4gICAgICAgICAgICAgICAgQ29udHJvbGxlckZhbWlseS5LRVlCT0FSRCwgQ29udHJvbGxlckV2ZW50VHlwZS5VUCxcclxuICAgICAgICAgICAgICAgIGtleVRvSW50ZW50TWFwcGluZ3MuZ2V0KGV2ZW50LmNvZGUpIHx8IFtDb250cm9sbGVySW50ZW50Lk5PTkVdLCBldmVudC5yZXBlYXRcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzUHJlc3NlZChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByZXNzZWQuaGFzKGtleSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTdFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/input/Keyboard.js\n");
    
    /***/ }),
    
    /***/ "./lib/scene/AsepriteNode.js":
    /*!***********************************!*\
      !*** ./lib/scene/AsepriteNode.js ***!
      \***********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AsepriteNode = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst SceneNode_1 = __webpack_require__(/*! ./SceneNode */ \"./lib/scene/SceneNode.js\");\n/**\n * Scene node for displaying an [[Aseprite]].\n *\n * @param T - Optional owner game class.\n */\nclass AsepriteNode extends SceneNode_1.SceneNode {\n    /**\n     * Creates a new scene node displaying the given Aseprite.\n     */\n    constructor(_a) {\n        var _b;\n        var { aseprite } = _a, args = tslib_1.__rest(_a, [\"aseprite\"]);\n        super(Object.assign({ width: aseprite.width, height: aseprite.height }, args));\n        /** The current time index of the animation. */\n        this.time = 0;\n        this.aseprite = aseprite;\n        this.tag = (_b = args.tag) !== null && _b !== void 0 ? _b : null;\n    }\n    /**\n     * Returns the displayed Aseprite.\n     *\n     * @return The displayed Aseprite.\n     */\n    getAseprite() {\n        return this.aseprite;\n    }\n    /**\n     * Sets the Aseprite.\n     *\n     * @param aseprite - The Aseprite to draw.\n     */\n    setAseprite(aseprite) {\n        if (aseprite !== this.aseprite) {\n            this.aseprite = aseprite;\n            this.resizeTo(aseprite.width, aseprite.height);\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns the current animation tag. Null if whole animation is displayed.\n     *\n     * @return The current animation tag or null for whole animation.\n     */\n    getTag() {\n        return this.tag;\n    }\n    /**\n     * Sets the animation tag. Null to display whole animation.\n     *\n     * @param tag - The animation tag to set. Null to unset.\n     */\n    setTag(tag) {\n        if (tag !== this.tag) {\n            this.tag = tag;\n            this.invalidate();\n        }\n        return this;\n    }\n    /** @inheritDoc */\n    update(dt) {\n        this.time += dt;\n    }\n    /** @inheritDoc */\n    draw(ctx) {\n        if (this.tag != null) {\n            this.aseprite.drawTag(ctx, this.tag, 0, 0, this.time * 1000);\n        }\n        else {\n            this.aseprite.draw(ctx, 0, 0, this.time * 1000);\n        }\n    }\n}\nexports.AsepriteNode = AsepriteNode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmUvQXNlcHJpdGVOb2RlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lL0FzZXByaXRlTm9kZS50cz9hMzQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi4vR2FtZVwiO1xyXG5pbXBvcnQgeyBTY2VuZU5vZGUsIFNjZW5lTm9kZUFyZ3MgfSBmcm9tIFwiLi9TY2VuZU5vZGVcIjtcclxuaW1wb3J0IHsgQXNlcHJpdGUgfSBmcm9tIFwiLi4vQXNlcHJpdGVcIjtcclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RvciBhcmd1bWVudHMgZm9yIFtbQXNlcHJpdGVOb2RlXV0uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFzZXByaXRlTm9kZUFyZ3MgZXh0ZW5kcyBTY2VuZU5vZGVBcmdzIHtcclxuICAgIC8qKiBUaGUgQXNlcHJpdGUgdG8gZGlzcGxheS4gKi9cclxuICAgIGFzZXByaXRlOiBBc2Vwcml0ZTtcclxuXHJcbiAgICAvKiogT3B0aW9uYWwgYW5pbWF0aW9uIHRhZyB0byBkcmF3LiAqL1xyXG4gICAgdGFnPzogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogU2NlbmUgbm9kZSBmb3IgZGlzcGxheWluZyBhbiBbW0FzZXByaXRlXV0uXHJcbiAqXHJcbiAqIEBwYXJhbSBUIC0gT3B0aW9uYWwgb3duZXIgZ2FtZSBjbGFzcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBc2Vwcml0ZU5vZGU8VCBleHRlbmRzIEdhbWUgPSBHYW1lPiBleHRlbmRzIFNjZW5lTm9kZTxUPiB7XHJcbiAgICAvKiogVGhlIGRpc3BsYXllZCBhc2Vwcml0ZS4gKi9cclxuICAgIHByaXZhdGUgYXNlcHJpdGU6IEFzZXByaXRlO1xyXG5cclxuICAgIC8qKiBUaGUgYW5pbWF0aW9uIHRhZyB0byBkcmF3LiBOdWxsIHRvIGRyYXcgd2hvbGUgYW5pbWF0aW9uLiAqL1xyXG4gICAgcHJpdmF0ZSB0YWc6IHN0cmluZyB8IG51bGw7XHJcblxyXG4gICAgLyoqIFRoZSBjdXJyZW50IHRpbWUgaW5kZXggb2YgdGhlIGFuaW1hdGlvbi4gKi9cclxuICAgIHByaXZhdGUgdGltZSA9IDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHNjZW5lIG5vZGUgZGlzcGxheWluZyB0aGUgZ2l2ZW4gQXNlcHJpdGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih7IGFzZXByaXRlLCAuLi5hcmdzIH06IEFzZXByaXRlTm9kZUFyZ3MpIHtcclxuICAgICAgICBzdXBlcih7XHJcbiAgICAgICAgICAgIHdpZHRoOiBhc2Vwcml0ZS53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBhc2Vwcml0ZS5oZWlnaHQsXHJcbiAgICAgICAgICAgIC4uLmFyZ3NcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFzZXByaXRlID0gYXNlcHJpdGU7XHJcbiAgICAgICAgdGhpcy50YWcgPSBhcmdzLnRhZyA/PyBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZGlzcGxheWVkIEFzZXByaXRlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIGRpc3BsYXllZCBBc2Vwcml0ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEFzZXByaXRlKCk6IEFzZXByaXRlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc2Vwcml0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIEFzZXByaXRlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhc2Vwcml0ZSAtIFRoZSBBc2Vwcml0ZSB0byBkcmF3LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0QXNlcHJpdGUoYXNlcHJpdGU6IEFzZXByaXRlKTogdGhpcyB7XHJcbiAgICAgICAgaWYgKGFzZXByaXRlICE9PSB0aGlzLmFzZXByaXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNlcHJpdGUgPSBhc2Vwcml0ZTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVUbyhhc2Vwcml0ZS53aWR0aCwgYXNlcHJpdGUuaGVpZ2h0KTtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBhbmltYXRpb24gdGFnLiBOdWxsIGlmIHdob2xlIGFuaW1hdGlvbiBpcyBkaXNwbGF5ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgY3VycmVudCBhbmltYXRpb24gdGFnIG9yIG51bGwgZm9yIHdob2xlIGFuaW1hdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFRhZygpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50YWc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBhbmltYXRpb24gdGFnLiBOdWxsIHRvIGRpc3BsYXkgd2hvbGUgYW5pbWF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0YWcgLSBUaGUgYW5pbWF0aW9uIHRhZyB0byBzZXQuIE51bGwgdG8gdW5zZXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRUYWcodGFnOiBzdHJpbmcgfCBudWxsKTogdGhpcyB7XHJcbiAgICAgICAgaWYgKHRhZyAhPT0gdGhpcy50YWcpIHtcclxuICAgICAgICAgICAgdGhpcy50YWcgPSB0YWc7XHJcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMudGltZSArPSBkdDtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgIHB1YmxpYyBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFnICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5hc2Vwcml0ZS5kcmF3VGFnKGN0eCwgdGhpcy50YWcsIDAsIDAsIHRoaXMudGltZSAqIDEwMDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNlcHJpdGUuZHJhdyhjdHgsIDAsIDAsIHRoaXMudGltZSAqIDEwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQWNBOzs7O0FBSUE7QUFDQTtBQVVBOztBQUVBO0FBQ0E7O0FBQUE7QUFDQTtBQVBBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpGQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/scene/AsepriteNode.js\n");
    
    /***/ }),
    
    /***/ "./lib/scene/ControlTooltipNode.js":
    /*!*****************************************!*\
      !*** ./lib/scene/ControlTooltipNode.js ***!
      \*****************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlTooltipNode = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst SceneNode_1 = __webpack_require__(/*! ./SceneNode */ \"./lib/scene/SceneNode.js\");\nconst ControllerFamily_1 = __webpack_require__(/*! ../input/ControllerFamily */ \"./lib/input/ControllerFamily.js\");\nconst ControllerManager_1 = __webpack_require__(/*! ../input/ControllerManager */ \"./lib/input/ControllerManager.js\");\nconst AsepriteNode_1 = __webpack_require__(/*! ./AsepriteNode */ \"./lib/scene/AsepriteNode.js\");\nconst TextNode_1 = __webpack_require__(/*! ./TextNode */ \"./lib/scene/TextNode.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Direction_1 = __webpack_require__(/*! ../geom/Direction */ \"./lib/geom/Direction.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst BitmapFont_1 = __webpack_require__(/*! ../BitmapFont */ \"./lib/BitmapFont.js\");\nclass ControlTooltipNode extends SceneNode_1.SceneNode {\n    constructor(_a) {\n        var { control: key, label } = _a, args = tslib_1.__rest(_a, [\"control\", \"label\"]);\n        super(Object.assign({ childAnchor: Direction_1.Direction.LEFT }, args));\n        this.controllerSpriteMapRecords = {\n            [ControllerFamily_1.ControllerSpriteMap.KEYBOARD]: ControlTooltipNode.buttons[0],\n            [ControllerFamily_1.ControllerSpriteMap.XBOX]: ControlTooltipNode.buttons[1],\n            [ControllerFamily_1.ControllerSpriteMap.PLAYSTATION]: ControlTooltipNode.buttons[2]\n        };\n        this.controllerManager = ControllerManager_1.ControllerManager.getInstance();\n        this.gap = 6;\n        this.icon = new AsepriteNode_1.AsepriteNode({\n            aseprite: this.controllerSpriteMapRecords[this.controllerManager.controllerSprite],\n            tag: key,\n            anchor: Direction_1.Direction.LEFT\n        }).appendTo(this);\n        this.label = new TextNode_1.TextNode({\n            font: ControlTooltipNode.font,\n            anchor: Direction_1.Direction.LEFT,\n            text: label,\n            color: \"white\",\n            outlineColor: \"black\",\n            y: -1\n        }).appendTo(this);\n        this.updateLayout();\n    }\n    /** @inheritDoc */\n    activate() {\n        this.controllerManager.onControllerFamilyChange.connect(this.updateControllerFamily, this);\n    }\n    /** @inheritDoc */\n    deactivate() {\n        this.controllerManager.onControllerFamilyChange.disconnect(this.updateControllerFamily, this);\n    }\n    updateControllerFamily() {\n        this.icon.setAseprite(this.controllerSpriteMapRecords[this.controllerManager.controllerSprite]);\n        this.updateLayout();\n    }\n    updateLayout() {\n        const iconWidth = this.icon.getWidth();\n        this.label.setX(iconWidth + this.gap);\n        this.resizeTo(iconWidth + this.gap + this.label.getWidth(), Math.max(this.icon.getHeight(), this.label.getHeight()));\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(constants_1.DIALOG_FONT),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], ControlTooltipNode, \"font\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"sprites/buttons_keyboard.aseprite.json\",\n        \"sprites/buttons_xbox.aseprite.json\",\n        \"sprites/buttons_playstation.aseprite.json\"\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], ControlTooltipNode, \"buttons\", void 0);\nexports.ControlTooltipNode = ControlTooltipNode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmUvQ29udHJvbFRvb2x0aXBOb2RlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lL0NvbnRyb2xUb29sdGlwTm9kZS50cz85YzZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjZW5lTm9kZSwgU2NlbmVOb2RlQXJncyB9IGZyb20gXCIuL1NjZW5lTm9kZVwiO1xyXG5pbXBvcnQgeyBGcmllbmRseUZpcmUgfSBmcm9tIFwiLi4vRnJpZW5kbHlGaXJlXCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJBbmltYXRpb25UYWdzLCBDb250cm9sbGVyU3ByaXRlTWFwIH0gZnJvbSBcIi4uL2lucHV0L0NvbnRyb2xsZXJGYW1pbHlcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlck1hbmFnZXIgfSBmcm9tIFwiLi4vaW5wdXQvQ29udHJvbGxlck1hbmFnZXJcIjtcclxuaW1wb3J0IHsgQXNlcHJpdGVOb2RlIH0gZnJvbSBcIi4vQXNlcHJpdGVOb2RlXCI7XHJcbmltcG9ydCB7IFRleHROb2RlIH0gZnJvbSBcIi4vVGV4dE5vZGVcIjtcclxuaW1wb3J0IHsgYXNzZXQgfSBmcm9tIFwiLi4vQXNzZXRzXCI7XHJcbmltcG9ydCB7IEFzZXByaXRlIH0gZnJvbSBcIi4uL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gXCIuLi9nZW9tL0RpcmVjdGlvblwiO1xyXG5pbXBvcnQgeyBESUFMT0dfRk9OVCB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcclxuaW1wb3J0IHsgQml0bWFwRm9udCB9IGZyb20gXCIuLi9CaXRtYXBGb250XCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbnRyb2xUb29sdGlwQXJncyBleHRlbmRzIFNjZW5lTm9kZUFyZ3Mge1xyXG4gICAgY29udHJvbDogQ29udHJvbGxlckFuaW1hdGlvblRhZ3MsXHJcbiAgICBsYWJlbDogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb250cm9sVG9vbHRpcE5vZGUgZXh0ZW5kcyBTY2VuZU5vZGU8RnJpZW5kbHlGaXJlPiB7XHJcbiAgICBAYXNzZXQoRElBTE9HX0ZPTlQpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBmb250OiBCaXRtYXBGb250O1xyXG5cclxuICAgIEBhc3NldChbXHJcbiAgICAgICAgXCJzcHJpdGVzL2J1dHRvbnNfa2V5Ym9hcmQuYXNlcHJpdGUuanNvblwiLFxyXG4gICAgICAgIFwic3ByaXRlcy9idXR0b25zX3hib3guYXNlcHJpdGUuanNvblwiLFxyXG4gICAgICAgIFwic3ByaXRlcy9idXR0b25zX3BsYXlzdGF0aW9uLmFzZXByaXRlLmpzb25cIlxyXG4gICAgXSlcclxuICAgIHByaXZhdGUgc3RhdGljIGJ1dHRvbnM6IEFzZXByaXRlW107XHJcbiAgICBwcml2YXRlIGNvbnRyb2xsZXJTcHJpdGVNYXBSZWNvcmRzOiBSZWNvcmQ8Q29udHJvbGxlclNwcml0ZU1hcCwgQXNlcHJpdGU+ID0ge1xyXG4gICAgICAgIFtDb250cm9sbGVyU3ByaXRlTWFwLktFWUJPQVJEXTogQ29udHJvbFRvb2x0aXBOb2RlLmJ1dHRvbnNbMF0sXHJcbiAgICAgICAgW0NvbnRyb2xsZXJTcHJpdGVNYXAuWEJPWF06IENvbnRyb2xUb29sdGlwTm9kZS5idXR0b25zWzFdLFxyXG4gICAgICAgIFtDb250cm9sbGVyU3ByaXRlTWFwLlBMQVlTVEFUSU9OXTogQ29udHJvbFRvb2x0aXBOb2RlLmJ1dHRvbnNbMl1cclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBjb250cm9sbGVyTWFuYWdlciA9IENvbnRyb2xsZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGljb246IEFzZXByaXRlTm9kZTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbGFiZWw6IFRleHROb2RlO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBnYXAgPSA2O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih7IGNvbnRyb2w6IGtleSwgbGFiZWwsIC4uLmFyZ3MgfTogQ29udHJvbFRvb2x0aXBBcmdzKSB7XHJcbiAgICAgICAgc3VwZXIoe1xyXG4gICAgICAgICAgICBjaGlsZEFuY2hvcjogRGlyZWN0aW9uLkxFRlQsXHJcbiAgICAgICAgICAgIC4uLmFyZ3NcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmljb24gPSBuZXcgQXNlcHJpdGVOb2RlKHtcclxuICAgICAgICAgICAgYXNlcHJpdGU6IHRoaXMuY29udHJvbGxlclNwcml0ZU1hcFJlY29yZHNbdGhpcy5jb250cm9sbGVyTWFuYWdlci5jb250cm9sbGVyU3ByaXRlXSxcclxuICAgICAgICAgICAgdGFnOiBrZXksXHJcbiAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLkxFRlRcclxuICAgICAgICB9KS5hcHBlbmRUbyh0aGlzKTtcclxuICAgICAgICB0aGlzLmxhYmVsID0gbmV3IFRleHROb2RlKHtcclxuICAgICAgICAgICAgZm9udDogQ29udHJvbFRvb2x0aXBOb2RlLmZvbnQsXHJcbiAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLkxFRlQsXHJcbiAgICAgICAgICAgIHRleHQ6IGxhYmVsLFxyXG4gICAgICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICBvdXRsaW5lQ29sb3I6IFwiYmxhY2tcIixcclxuICAgICAgICAgICAgeTogLTFcclxuICAgICAgICB9KS5hcHBlbmRUbyh0aGlzKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xyXG4gICAgcHJvdGVjdGVkIGFjdGl2YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlck1hbmFnZXIub25Db250cm9sbGVyRmFtaWx5Q2hhbmdlLmNvbm5lY3QodGhpcy51cGRhdGVDb250cm9sbGVyRmFtaWx5LCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQGluaGVyaXREb2MgKi9cclxuICAgIHByb3RlY3RlZCBkZWFjdGl2YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlck1hbmFnZXIub25Db250cm9sbGVyRmFtaWx5Q2hhbmdlLmRpc2Nvbm5lY3QodGhpcy51cGRhdGVDb250cm9sbGVyRmFtaWx5LCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNvbnRyb2xsZXJGYW1pbHkoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pY29uLnNldEFzZXByaXRlKHRoaXMuY29udHJvbGxlclNwcml0ZU1hcFJlY29yZHNbdGhpcy5jb250cm9sbGVyTWFuYWdlci5jb250cm9sbGVyU3ByaXRlXSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUxheW91dCgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBpY29uV2lkdGggPSB0aGlzLmljb24uZ2V0V2lkdGgoKTtcclxuICAgICAgICB0aGlzLmxhYmVsLnNldFgoaWNvbldpZHRoICsgdGhpcy5nYXApO1xyXG4gICAgICAgIHRoaXMucmVzaXplVG8oXHJcbiAgICAgICAgICAgIGljb25XaWR0aCArIHRoaXMuZ2FwICsgdGhpcy5sYWJlbC5nZXRXaWR0aCgpLFxyXG4gICAgICAgICAgICBNYXRoLm1heCh0aGlzLmljb24uZ2V0SGVpZ2h0KCksIHRoaXMubGFiZWwuZ2V0SGVpZ2h0KCkpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQXFCQTtBQUFBO0FBQ0E7QUFaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQS9EQTtBQURBO0FBQ0E7QUFBQTtBQU9BO0FBTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQVRBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/scene/ControlTooltipNode.js\n");
    
    /***/ }),
    
    /***/ "./lib/scene/ImageNode.js":
    /*!********************************!*\
      !*** ./lib/scene/ImageNode.js ***!
      \********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImageNode = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst SceneNode_1 = __webpack_require__(/*! ./SceneNode */ \"./lib/scene/SceneNode.js\");\n/**\n * Scene node for displaying an HTMLImageElement.\n *\n * @param T - Optional owner game class.\n */\nclass ImageNode extends SceneNode_1.SceneNode {\n    /**\n     * Creates a new scene node displaying the given image.\n     */\n    constructor(_a) {\n        var { image } = _a, args = tslib_1.__rest(_a, [\"image\"]);\n        super(Object.assign({ width: image.width, height: image.height }, args));\n        this.image = image;\n    }\n    /**\n     * Returns the displayed image.\n     *\n     * @return The displayed image.\n     */\n    getImage() {\n        return this.image;\n    }\n    /** @inheritDoc */\n    draw(ctx) {\n        ctx.drawImage(this.image, 0, 0);\n    }\n}\nexports.ImageNode = ImageNode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmUvSW1hZ2VOb2RlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lL0ltYWdlTm9kZS50cz81Y2E2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi4vR2FtZVwiO1xyXG5pbXBvcnQgeyBTY2VuZU5vZGUsIFNjZW5lTm9kZUFyZ3MgfSBmcm9tIFwiLi9TY2VuZU5vZGVcIjtcclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RvciBhcmd1bWVudHMgZm9yIFtbSW1hZ2VOb2RlXV0uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlTm9kZUFyZ3MgZXh0ZW5kcyBTY2VuZU5vZGVBcmdzIHtcclxuICAgIC8qKiBUaGUgaW1hZ2UgdG8gYmUgZGlzcGxheWVkIGJ5IHRoZSBpbWFnZSBub2RlLiAqL1xyXG4gICAgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTY2VuZSBub2RlIGZvciBkaXNwbGF5aW5nIGFuIEhUTUxJbWFnZUVsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSBUIC0gT3B0aW9uYWwgb3duZXIgZ2FtZSBjbGFzcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbWFnZU5vZGU8VCBleHRlbmRzIEdhbWUgPSBHYW1lPiBleHRlbmRzIFNjZW5lTm9kZTxUPiB7XHJcbiAgICAvKiogVGhlIGltYWdlIHRvIGRpc3BsYXkuICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBzY2VuZSBub2RlIGRpc3BsYXlpbmcgdGhlIGdpdmVuIGltYWdlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoeyBpbWFnZSwgLi4uYXJncyB9OiBJbWFnZU5vZGVBcmdzKSB7XHJcbiAgICAgICAgc3VwZXIoe1xyXG4gICAgICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0LFxyXG4gICAgICAgICAgICAuLi5hcmdzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IGltYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZGlzcGxheWVkIGltYWdlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIGRpc3BsYXllZCBpbWFnZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEltYWdlKCk6IEhUTUxJbWFnZUVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgICAgICBjdHguZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIDAsIDApO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUNBO0FBVUE7Ozs7QUFJQTtBQUNBO0FBSUE7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE3QkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/scene/ImageNode.js\n");
    
    /***/ }),
    
    /***/ "./lib/scene/ProgressBarNode.js":
    /*!**************************************!*\
      !*** ./lib/scene/ProgressBarNode.js ***!
      \**************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressBarNode = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst SceneNode_1 = __webpack_require__(/*! ./SceneNode */ \"./lib/scene/SceneNode.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst DEFAULT_BACKGROUND_STYLE = \"#111\";\nconst DEFAULT_BORDER_STYLE = \"#222\";\nconst DEFAULT_PROGRESS_STYLE = \"#888\";\nconst DEFAULT_WIDTH = 200;\nconst DEFAULT_HEIGHT = 8;\n/**\n * Scene node for displaying a progress bar.\n *\n * @param T - Optional owner game class.\n */\nclass ProgressBarNode extends SceneNode_1.SceneNode {\n    /**\n     * Creates a new scene node displaying the given image.\n     */\n    constructor(_a = {}) {\n        var { backgroundStyle = DEFAULT_BACKGROUND_STYLE, borderStyle = DEFAULT_BORDER_STYLE, progressStyle = DEFAULT_PROGRESS_STYLE } = _a, args = tslib_1.__rest(_a, [\"backgroundStyle\", \"borderStyle\", \"progressStyle\"]);\n        super(Object.assign({ width: DEFAULT_WIDTH, height: DEFAULT_HEIGHT }, args));\n        this.progress = 0;\n        this.backgroundStyle = backgroundStyle;\n        this.borderStyle = borderStyle;\n        this.progressStyle = progressStyle;\n    }\n    setProgress(progress) {\n        progress = util_1.clamp(progress, 0, 1);\n        if (progress !== this.progress) {\n            this.progress = progress;\n            this.invalidate();\n        }\n        return this;\n    }\n    getProgress() {\n        return this.progress;\n    }\n    /** @inheritDoc */\n    draw(ctx) {\n        ctx.save();\n        const width = this.getWidth();\n        const height = this.getHeight();\n        // Draw background\n        ctx.fillStyle = this.backgroundStyle;\n        ctx.fillRect(0, 0, width, height);\n        // Draw progress bar\n        ctx.fillStyle = this.progressStyle;\n        ctx.fillRect(0, 0, width * this.progress, height);\n        // Draw border\n        ctx.save();\n        ctx.strokeStyle = this.borderStyle;\n        ctx.lineWidth = 2;\n        ctx.rect(0, 0, width, height);\n        ctx.clip();\n        ctx.stroke();\n        ctx.restore();\n        ctx.restore();\n    }\n}\nexports.ProgressBarNode = ProgressBarNode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmUvUHJvZ3Jlc3NCYXJOb2RlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lL1Byb2dyZXNzQmFyTm9kZS50cz8yNmFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi4vR2FtZVwiO1xyXG5pbXBvcnQgeyBTY2VuZU5vZGUsIFNjZW5lTm9kZUFyZ3MgfSBmcm9tIFwiLi9TY2VuZU5vZGVcIjtcclxuaW1wb3J0IHsgY2xhbXAgfSBmcm9tIFwiLi4vdXRpbFwiO1xyXG5cclxuY29uc3QgREVGQVVMVF9CQUNLR1JPVU5EX1NUWUxFID0gXCIjMTExXCI7XHJcbmNvbnN0IERFRkFVTFRfQk9SREVSX1NUWUxFID0gXCIjMjIyXCI7XHJcbmNvbnN0IERFRkFVTFRfUFJPR1JFU1NfU1RZTEUgPSBcIiM4ODhcIjtcclxuY29uc3QgREVGQVVMVF9XSURUSCA9IDIwMDtcclxuY29uc3QgREVGQVVMVF9IRUlHSFQgPSA4O1xyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdG9yIGFyZ3VtZW50cyBmb3IgW1tQcm9ncmVzc0Jhck5vZGVdXS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvZ3Jlc3NCYXJOb2RlQXJncyBleHRlbmRzIFNjZW5lTm9kZUFyZ3Mge1xyXG4gICAgYmFja2dyb3VuZFN0eWxlPzogc3RyaW5nO1xyXG4gICAgYm9yZGVyU3R5bGU/OiBzdHJpbmdcclxuICAgIHByb2dyZXNzU3R5bGU/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTY2VuZSBub2RlIGZvciBkaXNwbGF5aW5nIGEgcHJvZ3Jlc3MgYmFyLlxyXG4gKlxyXG4gKiBAcGFyYW0gVCAtIE9wdGlvbmFsIG93bmVyIGdhbWUgY2xhc3MuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3NCYXJOb2RlPFQgZXh0ZW5kcyBHYW1lID0gR2FtZT4gZXh0ZW5kcyBTY2VuZU5vZGU8VD4ge1xyXG4gICAgcHJpdmF0ZSBiYWNrZ3JvdW5kU3R5bGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgYm9yZGVyU3R5bGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcHJvZ3Jlc3NTdHlsZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBwcm9ncmVzczogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgc2NlbmUgbm9kZSBkaXNwbGF5aW5nIHRoZSBnaXZlbiBpbWFnZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHsgYmFja2dyb3VuZFN0eWxlID0gREVGQVVMVF9CQUNLR1JPVU5EX1NUWUxFLCBib3JkZXJTdHlsZSA9IERFRkFVTFRfQk9SREVSX1NUWUxFLFxyXG4gICAgICAgICAgICBwcm9ncmVzc1N0eWxlID0gREVGQVVMVF9QUk9HUkVTU19TVFlMRSwgLi4uYXJncyB9OiBQcm9ncmVzc0Jhck5vZGVBcmdzID0ge30pIHtcclxuICAgICAgICBzdXBlcih7XHJcbiAgICAgICAgICAgIHdpZHRoOiBERUZBVUxUX1dJRFRILFxyXG4gICAgICAgICAgICBoZWlnaHQ6IERFRkFVTFRfSEVJR0hULFxyXG4gICAgICAgICAgICAuLi5hcmdzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU3R5bGUgPSBiYWNrZ3JvdW5kU3R5bGU7XHJcbiAgICAgICAgdGhpcy5ib3JkZXJTdHlsZSA9IGJvcmRlclN0eWxlO1xyXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NTdHlsZSA9IHByb2dyZXNzU3R5bGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFByb2dyZXNzKHByb2dyZXNzOiBudW1iZXIpOiB0aGlzIHtcclxuICAgICAgICBwcm9ncmVzcyA9IGNsYW1wKHByb2dyZXNzLCAwLCAxKTtcclxuICAgICAgICBpZiAocHJvZ3Jlc3MgIT09IHRoaXMucHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHByb2dyZXNzO1xyXG4gICAgICAgICAgICB0aGlzLmludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFByb2dyZXNzKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEBpbmhlcml0RG9jICovXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5nZXRXaWR0aCgpO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIC8vIERyYXcgYmFja2dyb3VuZFxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmJhY2tncm91bmRTdHlsZTtcclxuICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIERyYXcgcHJvZ3Jlc3MgYmFyXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMucHJvZ3Jlc3NTdHlsZTtcclxuICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGggKiB0aGlzLnByb2dyZXNzLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBEcmF3IGJvcmRlclxyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5ib3JkZXJTdHlsZTtcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gMjtcclxuICAgICAgICBjdHgucmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICBjdHguY2xpcCgpO1xyXG4gICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG5cclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7Ozs7QUFJQTtBQUNBO0FBTUE7O0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFQQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBNURBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/scene/ProgressBarNode.js\n");
    
    /***/ }),
    
    /***/ "./lib/scene/RootNode.js":
    /*!*******************************!*\
      !*** ./lib/scene/RootNode.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RootNode = void 0;\nconst SceneNode_1 = __webpack_require__(/*! ./SceneNode */ \"./lib/scene/SceneNode.js\");\nconst Direction_1 = __webpack_require__(/*! ../geom/Direction */ \"./lib/geom/Direction.js\");\n/**\n * The root node of a scene.\n *\n * @param T - Optional owner game class.\n */\nclass RootNode extends SceneNode_1.SceneNode {\n    /**\n     * Creates a new root scene node for the given scene. Functions for updating and drawing the root node (and its\n     * child nodes) is exposed to the scene through the second parameter. Only the scene can use these exposed\n     * functions, no one else can by accident.\n     *\n     * @param scene - The scene this root node is meant for.\n     * @param expose - Callback for exposing the update/draw methods of the root node to the scene so the scene can\n     *                 call it without making the methods public.\n     */\n    constructor(scene, expose) {\n        super({ anchor: Direction_1.Direction.TOP_LEFT, childAnchor: Direction_1.Direction.TOP_LEFT });\n        this.scene = scene;\n        expose(this.updateAll.bind(this), this.drawAllWithBounds.bind(this));\n    }\n    /**\n     * Draws this node and its child nodes recursively and then renders the node bounds when enabled.\n     *\n     * @param ctx    - The rendering context.\n     * @param width  - The scene width.\n     * @param height - The scene height.\n     * @return Hints which suggests further actions after drawing.\n     */\n    drawAllWithBounds(ctx, layer, width, height) {\n        const flags = this.drawAll(ctx, layer, width, height);\n        if ((flags & SceneNode_1.PostDrawHints.DRAW_BOUNDS) !== 0) {\n            this.drawBounds(ctx);\n        }\n        return flags;\n    }\n}\nexports.RootNode = RootNode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmUvUm9vdE5vZGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NlbmUvUm9vdE5vZGUudHM/N2UxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYW1lIH0gZnJvbSBcIi4uL0dhbWVcIjtcclxuaW1wb3J0IHsgU2NlbmVOb2RlLCBQb3N0RHJhd0hpbnRzIH0gZnJvbSBcIi4vU2NlbmVOb2RlXCI7XHJcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gXCIuLi9nZW9tL0RpcmVjdGlvblwiO1xyXG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuLi9TY2VuZVwiO1xyXG5cclxuLyoqXHJcbiAqIEZ1bmN0aW9uIHNpZ25hdHVyZSBmb3IgdXBkYXRpbmcgdGhlIHJvb3Qgbm9kZS4gVGhpcyBmdW5jdGlvbiBpcyBleHBvc2VkIHRvIHRoZSBzY2VuZSB0aHJvdWdoIHRoZSBjb25zdHJ1Y3RvciBzb1xyXG4gKiB0aGUgc2NlbmUgY2FuIGNhbGwgaXQgYnV0IG5vIG9uZSBlbHNlIGNhbiBieSBhY2NpZGVudC5cclxuICovXHJcbmV4cG9ydCB0eXBlIFVwZGF0ZVJvb3ROb2RlID0gKGR0OiBudW1iZXIpID0+IG51bWJlcjtcclxuXHJcbi8qKlxyXG4gKiBGdW5jdGlvbiBzaWduYXR1cmUgZm9yIGRyYXdpbmcgdGhlIHJvb3Qgbm9kZS5cclxuICovXHJcbmV4cG9ydCB0eXBlIERyYXdSb290Tm9kZSA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgbGF5ZXI6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpXHJcbiAgICA9PiBQb3N0RHJhd0hpbnRzO1xyXG5cclxuLyoqXHJcbiAqIFRoZSByb290IG5vZGUgb2YgYSBzY2VuZS5cclxuICpcclxuICogQHBhcmFtIFQgLSBPcHRpb25hbCBvd25lciBnYW1lIGNsYXNzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFJvb3ROb2RlPFQgZXh0ZW5kcyBHYW1lID0gR2FtZT4gZXh0ZW5kcyBTY2VuZU5vZGU8VD4ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHJvb3Qgc2NlbmUgbm9kZSBmb3IgdGhlIGdpdmVuIHNjZW5lLiBGdW5jdGlvbnMgZm9yIHVwZGF0aW5nIGFuZCBkcmF3aW5nIHRoZSByb290IG5vZGUgKGFuZCBpdHNcclxuICAgICAqIGNoaWxkIG5vZGVzKSBpcyBleHBvc2VkIHRvIHRoZSBzY2VuZSB0aHJvdWdoIHRoZSBzZWNvbmQgcGFyYW1ldGVyLiBPbmx5IHRoZSBzY2VuZSBjYW4gdXNlIHRoZXNlIGV4cG9zZWRcclxuICAgICAqIGZ1bmN0aW9ucywgbm8gb25lIGVsc2UgY2FuIGJ5IGFjY2lkZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzY2VuZSAtIFRoZSBzY2VuZSB0aGlzIHJvb3Qgbm9kZSBpcyBtZWFudCBmb3IuXHJcbiAgICAgKiBAcGFyYW0gZXhwb3NlIC0gQ2FsbGJhY2sgZm9yIGV4cG9zaW5nIHRoZSB1cGRhdGUvZHJhdyBtZXRob2RzIG9mIHRoZSByb290IG5vZGUgdG8gdGhlIHNjZW5lIHNvIHRoZSBzY2VuZSBjYW5cclxuICAgICAqICAgICAgICAgICAgICAgICBjYWxsIGl0IHdpdGhvdXQgbWFraW5nIHRoZSBtZXRob2RzIHB1YmxpYy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNjZW5lOiBTY2VuZTxULCB1bmtub3duPiwgZXhwb3NlOiAodXBkYXRlOiBVcGRhdGVSb290Tm9kZSwgZHJhdzogRHJhd1Jvb3ROb2RlKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoeyBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCwgY2hpbGRBbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCB9KTtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgZXhwb3NlKHRoaXMudXBkYXRlQWxsLmJpbmQodGhpcyksIHRoaXMuZHJhd0FsbFdpdGhCb3VuZHMuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGlzIG5vZGUgYW5kIGl0cyBjaGlsZCBub2RlcyByZWN1cnNpdmVseSBhbmQgdGhlbiByZW5kZXJzIHRoZSBub2RlIGJvdW5kcyB3aGVuIGVuYWJsZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGN0eCAgICAtIFRoZSByZW5kZXJpbmcgY29udGV4dC5cclxuICAgICAqIEBwYXJhbSB3aWR0aCAgLSBUaGUgc2NlbmUgd2lkdGguXHJcbiAgICAgKiBAcGFyYW0gaGVpZ2h0IC0gVGhlIHNjZW5lIGhlaWdodC5cclxuICAgICAqIEByZXR1cm4gSGludHMgd2hpY2ggc3VnZ2VzdHMgZnVydGhlciBhY3Rpb25zIGFmdGVyIGRyYXdpbmcuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZHJhd0FsbFdpdGhCb3VuZHMoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGxheWVyOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTpcclxuICAgICAgICAgICAgUG9zdERyYXdIaW50cyB7XHJcbiAgICAgICAgY29uc3QgZmxhZ3MgPSB0aGlzLmRyYXdBbGwoY3R4LCBsYXllciwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgaWYgKChmbGFncyAmIFBvc3REcmF3SGludHMuRFJBV19CT1VORFMpICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0JvdW5kcyhjdHgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmxhZ3M7XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFDQTtBQUNBO0FBZUE7Ozs7QUFJQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/scene/RootNode.js\n");
    
    /***/ }),
    
    /***/ "./lib/scene/SceneNode.js":
    /*!********************************!*\
      !*** ./lib/scene/SceneNode.js ***!
      \********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SceneNode = exports.PostDrawHints = void 0;\nconst Direction_1 = __webpack_require__(/*! ../geom/Direction */ \"./lib/geom/Direction.js\");\nconst SceneNodeAnimation_1 = __webpack_require__(/*! ./SceneNodeAnimation */ \"./lib/scene/SceneNodeAnimation.js\");\nconst AffineTransform_1 = __webpack_require__(/*! ../graphics/AffineTransform */ \"./lib/graphics/AffineTransform.js\");\nconst Polygon2_1 = __webpack_require__(/*! ../graphics/Polygon2 */ \"./lib/graphics/Polygon2.js\");\nconst Vector2_1 = __webpack_require__(/*! ../graphics/Vector2 */ \"./lib/graphics/Vector2.js\");\n/**\n * Hints which are returned to the scene after drawing the scene graph. These hints can suggest further actions after\n * drawing like requesting continuous drawing because of running animations.\n */\nvar PostDrawHints;\n(function (PostDrawHints) {\n    /** As long as this hint is present the scene must be continuously redrawn to keep animations running. */\n    PostDrawHints[PostDrawHints[\"CONTINUE_DRAWING\"] = 1] = \"CONTINUE_DRAWING\";\n    /**\n     * When this flag is set then at least one node has the showBounds flag set to true. The root node already\n     * handles this flag by drawing the bounds when this hint is present.\n     */\n    PostDrawHints[PostDrawHints[\"DRAW_BOUNDS\"] = 2] = \"DRAW_BOUNDS\";\n})(PostDrawHints = exports.PostDrawHints || (exports.PostDrawHints = {}));\n/**\n * Base scene node. Is used as base class for more specialized scene nodes but can also be used standalone as parent\n * node for other nodes (similar to a DIV element in HTML for example).\n *\n * TODO Implement scene invalidation properly.\n */\nclass SceneNode {\n    /**\n     * Creates a new scene node with the given initial settings.\n     */\n    constructor({ id = null, x = 0, y = 0, width = 0, height = 0, anchor = Direction_1.Direction.CENTER, childAnchor = Direction_1.Direction.CENTER, opacity = 1, showBounds = false, layer = 0 } = {}) {\n        /** The parent node. Null if none. */\n        this.parent = null;\n        /** The next sibling node. Null if none. */\n        this.nextSibling = null;\n        /** The previous sibling node. Null if none. */\n        this.previousSibling = null;\n        /** The first child node. Null if none. */\n        this.firstChild = null;\n        /** The last child node. Null if none. */\n        this.lastChild = null;\n        /** The scene this node is connected to. Null if none. */\n        this.scene = null;\n        /**\n         * The bounds polygon. This is updated on demand and automatically invalidated when node size changes. Node\n         * has to call [[invalidateBounds]] manually when something else influences the bounds.\n         */\n        this.boundsPolygon = new Polygon2_1.Polygon2();\n        /**\n         * The transformation matrix of this node. This transformation is applied to the node before moving the node to\n         * its position (X/Y coordinates). So in simple cases this transformation is not needed at all and its up to you\n         * if you want to use the coordinates and/or the transformation matrix.\n         */\n        this.transformation = new AffineTransform_1.AffineTransform();\n        /**\n         * The transformation matrix combining the nodes transformation with all the parent transformations. This is\n         * calculated on-the-fly when a scene node is updated.\n         */\n        this.sceneTransformation = new AffineTransform_1.AffineTransform();\n        /** Array with currently active animations. Animations are automatically removed from the array when finished.*/\n        this.animations = [];\n        this.id = id;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.opacity = opacity;\n        this.anchor = anchor;\n        this.childAnchor = childAnchor;\n        this.showBounds = showBounds;\n        this.layer = 1 << layer;\n    }\n    /**\n     * Returns the node ID.\n     *\n     * @return The ID of the node or null if none.\n     */\n    getId() {\n        return this.id;\n    }\n    /**\n     * Sets (or removes) the node ID.\n     *\n     * @param id - The id to set or null to unset.\n     */\n    setId(id) {\n        this.id = id;\n        return this;\n    }\n    /**\n     * Returns the X position of the node relative to the parent node.\n     *\n     * @return The X position.\n     */\n    getX() {\n        return this.x;\n    }\n    /**\n     * Sets the horizontal position relative to the parent node.\n     *\n     * @param x - The horizontal position to set.\n     */\n    setX(x) {\n        if (x !== this.x) {\n            this.x = x;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns the Y position of the node relative the parent node.\n     *\n     * @return The Y position.\n     */\n    getY() {\n        return this.y;\n    }\n    /**\n     * Sets the vertical position relative to the parent node.\n     *\n     * @param y - The vertical position to set.\n     */\n    setY(y) {\n        if (y !== this.y) {\n            this.y = y;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Moves the node by the given deltas.\n     *\n     * @param x - The horizontal delta to move the node by.\n     * @param y - The vertical delta to move the node by.\n     */\n    moveBy(x, y) {\n        if (x !== 0 || y !== 0) {\n            this.x += x;\n            this.y += y;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Moves the node to the given position relative to its parent node.\n     *\n     * @param x - The horizontal position to move to.\n     * @param y - The vertical position to move to.\n     */\n    moveTo(x, y) {\n        if (x !== this.x || y !== this.y) {\n            this.x = x;\n            this.y = y;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns the width of the node.\n     *\n     * @return The node width.\n     */\n    getWidth() {\n        return this.width;\n    }\n    /**\n     * Sets the width of the node.\n     *\n     * @param width - The width to set.\n     */\n    setWidth(width) {\n        if (width !== this.width) {\n            this.width = width;\n            this.invalidate();\n            this.invalidateBounds();\n        }\n        return this;\n    }\n    /**\n     * Returns the width of the node.\n     *\n     * @return The node width.\n     */\n    getHeight() {\n        return this.height;\n    }\n    /**\n     * Sets the height of the node.\n     *\n     * @param height - The height to set.\n     */\n    setHeight(height) {\n        if (height !== this.height) {\n            this.height = height;\n            this.invalidate();\n            this.invalidateBounds();\n        }\n        return this;\n    }\n    /**\n     * Resizes the node to the given width and height.\n     *\n     * @param width  - The width to set.\n     * @param height - The height to set.\n     */\n    resizeTo(width, height) {\n        if (width !== this.width || height !== this.height) {\n            this.width = width;\n            this.height = height;\n            this.invalidate();\n            this.invalidateBounds();\n        }\n        return this;\n    }\n    /**\n     * Returns the current opacity of the node.\n     *\n     * @return The opacity. 0.0 means fully transparent, 1.0 means fully opaque.\n     */\n    getOpacity() {\n        return this.opacity;\n    }\n    /**\n     * Sets the nodes opacity.\n     *\n     * @pram opacity - The opacity to set. 0.0 means fully transparent, 1.0 means fully opaque. Can be larger than 1.0\n     *                 to compensate transparency of its parent.\n     */\n    setOpacity(opacity) {\n        opacity = Math.max(0, opacity);\n        if (opacity !== this.opacity) {\n            this.opacity = opacity;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns the effective node opacity which is the nodes opacity multiplied by the parents effective opacity.\n     *\n     * @return The effective node opacity clamped to valid range of 0.0 to 1.0.\n     */\n    getEffectiveOpacity() {\n        var _a, _b;\n        if (this.opacity === Infinity) {\n            return 1;\n        }\n        return Math.max(0, Math.min(1, ((_b = (_a = this.parent) === null || _a === void 0 ? void 0 : _a.getEffectiveOpacity()) !== null && _b !== void 0 ? _b : 1) * this.opacity));\n    }\n    /**\n     * Returns the node anchor which defines the meaning of the X/Y coordinates of the node. CENTER means the X/Y\n     * coordinates define the center of the node. TOP_LEFT means the X/Y coordinates define the upper left corner of\n     * the node.\n     *\n     * @return The node anchor.\n     */\n    getAnchor() {\n        return this.anchor;\n    }\n    /**\n     * Sets the node anchor which defines the meaning of the X/Y coordinates of the node. CENTER means the X/Y\n     * coordinates define the center of the node. TOP_LEFT means the X/Y coordinates define the upper left corner of\n     * the node.\n     *\n     * @param anchor - The node anchor to set.\n     */\n    setAnchor(anchor) {\n        if (anchor !== this.anchor) {\n            this.anchor = anchor;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns the child anchor which defines the origin of the local coordinate system to which the coordinates of\n     * child nodes are relative to.\n     *\n     * @return The child anchor.\n     */\n    getChildAnchor() {\n        return this.childAnchor;\n    }\n    /**\n     * Sets the child anchor which defines the origin of the local coordinate system to which the coordinates of\n     * child nodes are relative to.\n     *\n     * @param childAnchor - The child anchor to set.\n     */\n    setChildAnchor(childAnchor) {\n        if (childAnchor !== this.childAnchor) {\n            this.childAnchor = childAnchor;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns the custom transformation of this node which can be manipulated by the [[transform]] method. This\n     * transformation is applied to the node before it is rendered at its intended position. Transformation and\n     * node position can complement each other or you can only use one of them, that's up to you.\n     *\n     * @return The custom node transformation.\n     */\n    getTransformation() {\n        return this.transformation;\n    }\n    /**\n     * Modifies the custom transformation matrix of this node. Calls the given transformer function which can then\n     * modify the given transformation matrix. After this the node is invalidated to recalculate bounds and redraw it.\n     *\n     * @param transformer - Function to call with transformation matrix as argument.\n     */\n    transform(transformer) {\n        transformer(this.transformation);\n        return this.invalidate();\n    }\n    /**\n     * Returns the scene the node is currently attached to. Null if none.\n     *\n     * @return The current scene or null if none.\n     */\n    getScene() {\n        return this.scene;\n    }\n    /**\n     * Sets the scene this node and all its children belongs to. This is called internally when a node is added to\n     * the scene.\n     *\n     * @param scene - The scene the node belongs to from now on. null to unset the current scene.\n     */\n    setScene(scene) {\n        if (scene !== this.scene) {\n            if (this.scene) {\n                this.deactivate();\n            }\n            this.scene = scene;\n            if (scene) {\n                this.activate();\n            }\n            this.forEachChild(node => node.setScene(scene));\n        }\n    }\n    /**\n     * Called when node is added to scene. Can be overwritten to connect event handlers for example.\n     */\n    activate() { }\n    /**\n     * Called when node is removed from scene. Can be overwritten to disconnect event handlers for example.\n     */\n    deactivate() { }\n    /**\n     * Returns the parent node of this node or null if node is not attached to a parent or is the root node.\n     *\n     * @return The parent node or null if unattached or root element.\n     */\n    getParent() {\n        return this.parent;\n    }\n    /**\n     * Returns the next node at the same level.\n     *\n     * @return The next sibling or null if none.\n     */\n    getNextSibling() {\n        return this.nextSibling;\n    }\n    /**\n     * Returns the previous node at the same level.\n     *\n     * @return The previous sibling or null if none.\n     */\n    getPreviousSibling() {\n        return this.previousSibling;\n    }\n    /**\n     * Returns the first child node.\n     *\n     * @return The first child node or null if none.\n     */\n    getFirstChild() {\n        return this.firstChild;\n    }\n    /**\n     * Returns the last child node.\n     *\n     * @return The last child node or null if none.\n     */\n    getLastChild() {\n        return this.lastChild;\n    }\n    /**\n     * Checks if this node has child nodes.\n     *\n     * @return True if it child nodes are present, false if not.\n     */\n    hasChildNodes() {\n        return this.firstChild != null;\n    }\n    /**\n     * Appends the given child node so it becomes the last child of this node.\n     *\n     * @param node - The child node to append.\n     */\n    appendChild(node) {\n        if (node === this) {\n            throw new Error(\"Node can not be appended to itself\");\n        }\n        // Remove from old parent if there is one\n        const oldParent = node.parent;\n        if (oldParent) {\n            oldParent.removeChild(node);\n        }\n        // Append the child\n        node.previousSibling = this.lastChild;\n        const oldLastChild = this.lastChild;\n        if (oldLastChild) {\n            oldLastChild.nextSibling = node;\n        }\n        this.lastChild = node;\n        if (!this.firstChild) {\n            this.firstChild = node;\n        }\n        node.parent = this;\n        node.setScene(this.scene);\n        node.invalidate();\n        this.invalidate();\n        return this;\n    }\n    /**\n     * Prepends the given child node so it becomes the first child of this node.\n     *\n     * @param node - The child node to prepend.\n     */\n    prependChild(node) {\n        if (this.firstChild != null) {\n            return this.insertBefore(node, this.firstChild);\n        }\n        else {\n            return this.appendChild(node);\n        }\n    }\n    /**\n     * Removes the given child node\n     *\n     * @param child - The child node to remove.\n     */\n    removeChild(node) {\n        if (node.parent !== this) {\n            throw new Error(\"Node must be a child node\");\n        }\n        // Remove node from linked list\n        const next = node.nextSibling;\n        const prev = node.previousSibling;\n        if (next) {\n            next.previousSibling = prev;\n        }\n        if (prev) {\n            prev.nextSibling = next;\n        }\n        // Correct first/last reference\n        if (node === this.firstChild) {\n            this.firstChild = next;\n        }\n        if (node === this.lastChild) {\n            this.lastChild = prev;\n        }\n        // Remove all references from node\n        node.parent = null;\n        node.nextSibling = null;\n        node.previousSibling = null;\n        node.setScene(null);\n        node.invalidate();\n        this.invalidate();\n        return this;\n    }\n    /**\n     * Removes this node from the scene. The node is then a detached node ready to be added to the scene (or some\n     * other scene) again.\n     */\n    remove() {\n        if (this.parent) {\n            this.parent.removeChild(this);\n        }\n        return this;\n    }\n    /**\n     * Removes all child nodes.\n     */\n    clear() {\n        while (this.lastChild) {\n            this.removeChild(this.lastChild);\n        }\n        return this;\n    }\n    /**\n     * Inserts the given child node before the specified reference child node.\n     *\n     * @param newNode - The child node to insert.\n     * @param refNode - The reference node. The child node is inserted before this one.\n     */\n    insertBefore(newNode, refNode) {\n        if (newNode === this) {\n            throw new Error(\"Node can not be inserted into itself\");\n        }\n        if (refNode.parent !== this) {\n            throw new Error(\"Reference node must be a child node\");\n        }\n        // Remove from old parent if there is one\n        const oldParent = newNode.parent;\n        if (oldParent) {\n            oldParent.removeChild(newNode);\n        }\n        // Insert the node\n        const oldPrevious = refNode.previousSibling;\n        if (!oldPrevious) {\n            this.firstChild = newNode;\n        }\n        else {\n            oldPrevious.nextSibling = newNode;\n        }\n        refNode.previousSibling = newNode;\n        newNode.previousSibling = oldPrevious;\n        newNode.nextSibling = refNode;\n        newNode.parent = this;\n        newNode.setScene(this.scene);\n        return this.invalidate();\n    }\n    /**\n     * Replaces the given child node with a new node.\n     *\n     * @param oldNode - The old child node to replace.\n     * @param newNode - The new node to replace the old one with.\n     */\n    replaceChild(oldNode, newNode) {\n        if (newNode === this) {\n            throw new Error(\"newNode must not be the parent node\");\n        }\n        if (oldNode.parent !== this) {\n            throw new Error(\"oldNode must be a child node\");\n        }\n        // If new node is the same as the old node then do nothing\n        if (newNode === oldNode) {\n            return this;\n        }\n        const next = oldNode.nextSibling;\n        this.removeChild(oldNode);\n        if (next) {\n            this.insertBefore(newNode, next);\n        }\n        else {\n            this.appendChild(newNode);\n        }\n        return this;\n    }\n    /**\n     * Replace the given node with this one.\n     *\n     * @param node - The node to replace.\n     */\n    replace(node) {\n        if (this.parent) {\n            this.parent.replaceChild(this, node);\n        }\n        return this;\n    }\n    /**\n     * Appends this node to the given parent node.\n     *\n     * @param node - The parent node to append this node to.\n     */\n    appendTo(node) {\n        node.appendChild(this);\n        return this;\n    }\n    /**\n     * Prepends this node to the given parent node.\n     *\n     * @param node - The parent node to prepend this node to.\n     */\n    prependTo(node) {\n        node.prependChild(this);\n        return this;\n    }\n    /**\n     * Iterates over all child nodes and calls the given callback with the currently iterated node as parameter.\n     *\n     * @param callback - The callback to call for each child node.\n     * @param thisArg  - Optional value to use as `this` when executing `callback`.\n     */\n    forEachChild(callback, thisArg = this) {\n        let index = 0;\n        let node = this.firstChild;\n        while (node) {\n            const next = node.nextSibling;\n            callback.call(thisArg, node, index++);\n            node = next;\n        }\n        return this;\n    }\n    /**\n     * Iterates over all descendant nodes and calls the given callback with the currently iterated node as parameter.\n     *\n     * @param callback - The callback to call for each descendant node.\n     * @param thisArg  - Optional value to use as `this` when executing `callback`.\n     */\n    forEachDescendant(callback, thisArg = this) {\n        var _a, _b;\n        let node = this.firstChild;\n        while (node != null && node !== this) {\n            let next = node.firstChild;\n            if (next == null) {\n                next = node.nextSibling;\n            }\n            if (next == null) {\n                next = (_b = (_a = node.parent) === null || _a === void 0 ? void 0 : _a.nextSibling) !== null && _b !== void 0 ? _b : null;\n            }\n            callback.call(thisArg, node);\n            node = next;\n        }\n        return this;\n    }\n    /**\n     * Returns the first child node for which the given callback returns true.\n     *\n     * @param callback - The callback which checks if the iterated node is the one to look for.\n     * @return The found matching child node or null if none.\n     */\n    findChild(callback, thisArg = this) {\n        let index = 0;\n        let node = this.firstChild;\n        while (node) {\n            const next = node.nextSibling;\n            if (callback.call(thisArg, node, index++)) {\n                return node;\n            }\n            node = next;\n        }\n        return null;\n    }\n    /**\n     * Returns the first descendant node for which the given callback returns true.\n     *\n     * @param callback - The callback which checks if the iterated node is the one to look for.\n     * @return The found matching descendant node or null if none.\n     */\n    findDescendant(callback, thisArg = this) {\n        var _a, _b;\n        let node = this.firstChild;\n        while (node != null && node !== this) {\n            let next = node.firstChild;\n            if (next == null) {\n                next = node.nextSibling;\n            }\n            if (next == null) {\n                next = (_b = (_a = node.parent) === null || _a === void 0 ? void 0 : _a.nextSibling) !== null && _b !== void 0 ? _b : null;\n            }\n            if (callback.call(thisArg, node)) {\n                return node;\n            }\n            node = next;\n        }\n        return null;\n    }\n    /**\n     * Tests whether at least one child node passes the test implemented by the provided function.\n     *\n     * @param callback - The callback to call for each child node returning a boolean.\n     * @param thisArg  - Optional value to use as `this` when executing `callback`.\n     * @return True if at least one child node returned true in the given callback, false if none did.\n     */\n    someChildren(callback, thisArg = this) {\n        let index = 0;\n        let node = this.firstChild;\n        while (node) {\n            const next = node.nextSibling;\n            if (callback.call(thisArg, node, index++)) {\n                return true;\n            }\n            node = next;\n        }\n        return false;\n    }\n    /**\n     * Returns a new array with all child nodes.\n     *\n     * @return All child nodes.\n     */\n    getChildren() {\n        const children = [];\n        let node = this.firstChild;\n        while (node) {\n            children.push(node);\n            node = node.nextSibling;\n        }\n        return children;\n    }\n    /**\n     * Returns the descendant node with the given id.\n     *\n     * @param id - The ID to look for.\n     * @return The matching descendant node or null if none.\n     */\n    getDescendantById(id) {\n        return this.findDescendant(node => node.getId() === id);\n    }\n    /**\n     * Invalidates the bounds of the node. AUtomatically called when node size is changed. Must be called manually\n     * when some other aspect of the node which may influence the bounds is changed.\n     */\n    invalidateBounds() {\n        this.boundsPolygon.clear();\n        return this;\n    }\n    /**\n     * Updates the bounds polygon of the node. The default implementation simply sets a bounding box. Specialized nodes\n     * can overwrite this method to define a more specific polygon.\n     *\n     * @param bounds - The empty bounds polygon to be filled with points by this method.\n     */\n    updateBoundsPolygon(bounds) {\n        bounds.addVertex(new Vector2_1.Vector2(0, 0));\n        bounds.addVertex(new Vector2_1.Vector2(this.width, 0));\n        bounds.addVertex(new Vector2_1.Vector2(this.width, this.height));\n        bounds.addVertex(new Vector2_1.Vector2(0, this.height));\n    }\n    /**\n     * Returns the bounds polygon of the node.\n     *\n     * @return The bounds polygon.\n     */\n    getBoundsPolygon() {\n        if (!this.boundsPolygon.hasVertices()) {\n            this.updateBoundsPolygon(this.boundsPolygon);\n        }\n        return this.boundsPolygon;\n    }\n    /**\n     * Marks this node, all parent nodes and the scene as invalid to trigger a scene revalidation. This must be\n     * called every time when some aspect of the node is changed which requires a redraw of the scene node.\n     *\n     * TODO Not yet implemented, currently the scene is constantly redrawn.\n     */\n    invalidate() {\n        /*\n        if (this.valid) {\n            this.valid = false;\n            if (this.parent) {\n                this.parent.invalidate();\n            } else if (this.scene) {\n                void this.scene.invalidate();\n            }\n        }\n        */\n        return this;\n    }\n    /**\n     * Adds a new animation to the scene.\n     *\n     * @param animationArgs - The arguments defining the animation to add.\n     */\n    animate(animationArgs) {\n        this.animations.push(new SceneNodeAnimation_1.SceneNodeAnimation(this, animationArgs));\n        return this;\n    }\n    /**\n     * Finishes all currently running animations. This calls all animator functions with their last animation index\n     * (1.0) and then removes the animations.\n     */\n    finishAnimations() {\n        for (const animation of this.animations) {\n            animation.finish();\n        }\n        return this.forEachChild(child => child.finishAnimations());\n    }\n    /**\n     * Checks if node has running animations.\n     *\n     * @return True if node has animations, false if not.\n     */\n    hasAnimations() {\n        return this.animations.length > 0 || this.someChildren(child => child.hasAnimations());\n    }\n    /**\n     * Enables or disables showing node bounds. This may be useful for debugging.\n     *\n     * @param showBounds - True to enable showing node bounds, false to disable it.\n     */\n    setShowBounds(showBounds) {\n        if (showBounds !== this.showBounds) {\n            this.showBounds = showBounds;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns true if node bounds are currently shown for debugging purposes.\n     *\n     * @return True if node bounds are shown, false if not.\n     */\n    isShowBounds() {\n        return this.showBounds;\n    }\n    /**\n     * Returns the layer of this node.\n     *\n     * @return The node's layer (0-31).\n     */\n    getLayer() {\n        return Math.log2(this.layer);\n    }\n    /**\n     * Sets the layer this node should appear on.\n     *\n     * @param layer - The layer to set (0-31).\n     */\n    setLayer(layer) {\n        if (layer < 0 || layer > 31) {\n            throw new Error(`Valid layer range is 0-31 but was ${layer}`);\n        }\n        layer = 1 << layer;\n        if (layer !== this.layer) {\n            this.layer = layer;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Updates the animations and removes finished animations.\n     */\n    updateAnimations(dt) {\n        const animations = this.animations;\n        let numAnimations = animations.length;\n        let i = 0;\n        while (i < numAnimations) {\n            if (animations[i].update(dt)) {\n                animations.splice(i, 1);\n                numAnimations--;\n            }\n            else {\n                i++;\n            }\n        }\n    }\n    /**\n     * Updates this node and its child nodes recursively.\n     *\n     * @param dt - The time in seconds since the last update.\n     * @return Bit mask with used layers.\n     */\n    updateAll(dt) {\n        // Update this node and run animations\n        const postUpdate = this.update(dt);\n        this.updateAnimations(dt);\n        // Update the scene transformation for this node\n        const parent = this.parent;\n        if (parent != null) {\n            this.sceneTransformation.setMatrix(parent.sceneTransformation);\n            this.sceneTransformation.translate((Direction_1.Direction.getX(parent.childAnchor) + 1) / 2 * parent.width, (Direction_1.Direction.getY(parent.childAnchor) + 1) / 2 * parent.height);\n        }\n        else {\n            this.sceneTransformation.reset();\n        }\n        this.sceneTransformation.translate(this.x, this.y);\n        this.sceneTransformation.mul(this.transformation);\n        this.sceneTransformation.translate(-(Direction_1.Direction.getX(this.anchor) + 1) / 2 * this.width, -(Direction_1.Direction.getY(this.anchor) + 1) / 2 * this.height);\n        // Update child nodes\n        const layers = this.updateChildren(dt) | this.layer;\n        // When update method returned a post-update function then call it now\n        if (postUpdate != null) {\n            postUpdate();\n        }\n        return layers;\n    }\n    /**\n     * Updates the child nodes of this node recursively.\n     *\n     * @param dt - The time in seconds since the last update.\n     * @return Bit mask with used layers.\n     */\n    updateChildren(dt) {\n        let layers = 0;\n        this.forEachChild(child => {\n            layers |= child.updateAll(dt);\n        });\n        return layers;\n    }\n    /**\n     * Updates this node. This is done before updating the child nodes of this node. The method can return an optional\n     * function which is called after the child nodes are updated so this can be used for post-updating operations.\n     *\n     * @param dt - The time in seconds since the last update.\n     * @return Optional post-update function which is called after updating the child nodes.\n     */\n    update(dt) { }\n    /**\n     * Recursively draws the bounds for this node and alls its child nodes as long as the [[showBounds]] for the node\n     * is set to true.\n     *\n     * @param ctx - The rendering context.\n     */\n    drawBounds(ctx) {\n        if (this.showBounds) {\n            const bounds = this.getBoundsPolygon();\n            ctx.save();\n            this.sceneTransformation.setCanvasTransform(ctx);\n            ctx.beginPath();\n            bounds.draw(ctx);\n            ctx.clip();\n            ctx.save();\n            ctx.lineWidth = 2;\n            ctx.strokeStyle = \"red\";\n            ctx.stroke();\n            ctx.setLineDash([4, 4]);\n            ctx.strokeStyle = \"white\";\n            ctx.lineDashOffset = Math.round(Date.now() / 100) % 8;\n            ctx.stroke();\n            ctx.restore();\n            ctx.restore();\n        }\n        return this.forEachChild(child => child.drawBounds(ctx));\n    }\n    /**\n     * Draws this scene node and its child nodes recursively\n     *\n     * @param ctx    - The rendering context.\n     * @param layer  - The layer to render. Nodes which doesn't belong to this layer are not drawn.\n     * @param width  - The scene width.\n     * @param height - The scene height.\n     * @return Hints which suggests further actions after drawing.\n     */\n    drawAll(ctx, layer, width, height) {\n        ctx.save();\n        ctx.globalAlpha *= this.getEffectiveOpacity();\n        ctx.translate(this.x, this.y);\n        this.transformation.transformCanvas(ctx);\n        ctx.translate(-(Direction_1.Direction.getX(this.anchor) + 1) / 2 * this.width, -(Direction_1.Direction.getY(this.anchor) + 1) / 2 * this.height);\n        const postDraw = layer === this.layer ? this.draw(ctx, width, height) : null;\n        ctx.save();\n        ctx.translate((Direction_1.Direction.getX(this.childAnchor) + 1) / 2 * this.width, (Direction_1.Direction.getY(this.childAnchor) + 1) / 2 * this.height);\n        let flags = this.drawChildren(ctx, layer, width, height);\n        ctx.restore();\n        if (postDraw != null) {\n            if (postDraw === true) {\n                flags |= PostDrawHints.CONTINUE_DRAWING;\n            }\n            else if (postDraw !== false) {\n                postDraw();\n            }\n        }\n        ctx.restore();\n        return this.showBounds ? flags | PostDrawHints.DRAW_BOUNDS | PostDrawHints.CONTINUE_DRAWING : flags;\n    }\n    /**\n     * Draws all child nodes of this scene node recursively.\n     *\n     * @param ctx    - The rendering context.\n     * @param layer  - The layer to render. Nodes which doesn't belong to this layer are not drawn.\n     * @param width  - The scene width.\n     * @param height - The scene height.\n     * @return Hints which suggests further actions after drawing.\n     */\n    drawChildren(ctx, layer, width, height) {\n        let flags = 0;\n        this.forEachChild(child => {\n            flags |= child.drawAll(ctx, layer, width, height);\n        });\n        return flags;\n    }\n    /**\n     * Draws this node. This is done before drawing the child nodes of this node. The method can return a boolean\n     * which indicates if the scene is not finished yet and must be drawn continuously (for animations for example).\n     * The method can also return an optional function which is called after the child nodes are drawn so this can be\n     * used for post-drawing operations. This post-draw function then can again return an optional boolean which\n     * indicates that scene must be continuously draw itself.\n     *\n     * @param ctx    - The rendering context.\n     * @param width  - The scene width.\n     * @param height - The scene height.\n     * @return Optional boolean to indicate if scene must be redrawn continuously (Defaults to false) or a post-draw\n     *         function which is called after drawing the child nodes and which again can return a flag indicating\n     *         continuos redraw.\n     */\n    draw(ctx, width, height) { }\n}\nexports.SceneNode = SceneNode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmUvU2NlbmVOb2RlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lL1NjZW5lTm9kZS50cz9kY2I1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjZW5lIH0gZnJvbSBcIi4uL1NjZW5lXCI7XHJcbmltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi4vR2FtZVwiO1xyXG5pbXBvcnQgeyBEaXJlY3Rpb24gfSBmcm9tIFwiLi4vZ2VvbS9EaXJlY3Rpb25cIjtcclxuaW1wb3J0IHsgQW5pbWF0aW9uQXJncywgU2NlbmVOb2RlQW5pbWF0aW9uIH0gZnJvbSBcIi4vU2NlbmVOb2RlQW5pbWF0aW9uXCI7XHJcbmltcG9ydCB7IEFmZmluZVRyYW5zZm9ybSB9IGZyb20gXCIuLi9ncmFwaGljcy9BZmZpbmVUcmFuc2Zvcm1cIjtcclxuaW1wb3J0IHsgUG9seWdvbjIgfSBmcm9tIFwiLi4vZ3JhcGhpY3MvUG9seWdvbjJcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi9ncmFwaGljcy9WZWN0b3IyXCI7XHJcblxyXG4vKipcclxuICogSGludHMgd2hpY2ggYXJlIHJldHVybmVkIHRvIHRoZSBzY2VuZSBhZnRlciBkcmF3aW5nIHRoZSBzY2VuZSBncmFwaC4gVGhlc2UgaGludHMgY2FuIHN1Z2dlc3QgZnVydGhlciBhY3Rpb25zIGFmdGVyXHJcbiAqIGRyYXdpbmcgbGlrZSByZXF1ZXN0aW5nIGNvbnRpbnVvdXMgZHJhd2luZyBiZWNhdXNlIG9mIHJ1bm5pbmcgYW5pbWF0aW9ucy5cclxuICovXHJcbmV4cG9ydCBlbnVtIFBvc3REcmF3SGludHMge1xyXG4gICAgLyoqIEFzIGxvbmcgYXMgdGhpcyBoaW50IGlzIHByZXNlbnQgdGhlIHNjZW5lIG11c3QgYmUgY29udGludW91c2x5IHJlZHJhd24gdG8ga2VlcCBhbmltYXRpb25zIHJ1bm5pbmcuICovXHJcbiAgICBDT05USU5VRV9EUkFXSU5HID0gMSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gdGhpcyBmbGFnIGlzIHNldCB0aGVuIGF0IGxlYXN0IG9uZSBub2RlIGhhcyB0aGUgc2hvd0JvdW5kcyBmbGFnIHNldCB0byB0cnVlLiBUaGUgcm9vdCBub2RlIGFscmVhZHlcclxuICAgICAqIGhhbmRsZXMgdGhpcyBmbGFnIGJ5IGRyYXdpbmcgdGhlIGJvdW5kcyB3aGVuIHRoaXMgaGludCBpcyBwcmVzZW50LlxyXG4gICAgICovXHJcbiAgICBEUkFXX0JPVU5EUyA9IDJcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdG9yIGFyZ3VtZW50cyBmb3IgW1tTY2VuZU5vZGVdXS5cclxuICpcclxuICogQHBhcmFtIFQgLSBPcHRpb25hbCBvd25lciBnYW1lIGNsYXNzLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTY2VuZU5vZGVBcmdzIHtcclxuICAgIC8qKiBPcHRpb25hbCBpbml0aWFsIHNjZW5lIG5vZGUgSUQuICovXHJcbiAgICBpZD86IHN0cmluZyB8IG51bGw7XHJcblxyXG4gICAgLyoqIE9wdGlvbmFsIGluaXRpYWwgaG9yaXpvbnRhbCBwb3NpdGlvbiBvZiB0aGUgc2NlbmUgbm9kZS4gRGVmYXVsdHMgdG8gMC4gKi9cclxuICAgIHg/OiBudW1iZXI7XHJcblxyXG4gICAgLyoqIE9wdGlvbmFsIGluaXRpYWwgdmVydGljYWwgcG9zaXRpb24gb2YgdGhlIHNjZW5lIG5vZGUuIERlZmF1bHRzIHRvIDAuICovXHJcbiAgICB5PzogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBPcHRpb25hbCBpbml0aWFsIHdpZHRoIG9mIHRoZSBzY2VuZSBub2RlLiBEZWZhdWx0cyB0byAwLiAqL1xyXG4gICAgd2lkdGg/OiBudW1iZXI7XHJcblxyXG4gICAgLyoqIE9wdGlvbmFsIGluaXRpYWwgaGVpZ2h0IG9mIHRoZSBzY2VuZSBub2RlLiBEZWZhdWx0cyB0byAwLiAqL1xyXG4gICAgaGVpZ2h0PzogbnVtYmVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogT3B0aW9uYWwgaW5pdGlhbCBub2RlIGFuY2hvci4gRGVmYXVsdHMgdG8gQ0VOVEVSIHdoaWNoIG1lYW5zIHRoZSBYL1kgY29vcmRpbmF0ZXMgb2YgdGhlIG5vZGUgZGVmaW5lIHdoZXJlXHJcbiAgICAgKiB0aGUgY2VudGVyIG9mIHRoaXMgc2NlbmUgbm9kZSBpcyBkaXNwbGF5ZWQgcmVsYXRpdmUgdG8gdGhlIHBhcmVudCBub2RlLlxyXG4gICAgICovXHJcbiAgICBhbmNob3I/OiBEaXJlY3Rpb247XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPcHRpb25hbCBpbml0aWFsIGNoaWxkIG5vZGUgYW5jaG9yLiBEZWZhdWx0cyB0byBDRU5URVIgd2hpY2ggbWVhbnMgdGhlIGNoaWxkIG5vZGVzIGFyZSBwb3NpdGlvbmVkIHJlbGF0aXZlIHRvXHJcbiAgICAgKiB0aGUgY2VudGVyIG9mIHRoaXMgc2NlbmUgbm9kZS5cclxuICAgICAqL1xyXG4gICAgY2hpbGRBbmNob3I/OiBEaXJlY3Rpb247XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPcHRpb25hbCBpbml0aWFsIG5vZGUgb3BhY2l0eS4gTXVzdCBiZSAwIG9yIGhpZ2hlci4gMC4wIG1lYW5zIGZ1bGx5IHRyYW5zcGFyZW50LiBEZWZhdWx0cyB0byAxLjAgd2hpY2ggbWVhbnNcclxuICAgICAqIGZ1bGx5IG9wYXF1ZS4gQ2FuIGJlIGxhcmdlciB0aGFuIDEuMCB0byBjb21wZW5zYXRlIHRyYW5zcGFyZW5jeSBvZiBpdHMgcGFyZW50LlxyXG4gICAgICovXHJcbiAgICBvcGFjaXR5PzogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBPcHRpb25hbCBpbml0aWFsIGxheWVyICgwLTMxKSB0byBwdXQgdGhlIG5vZGUgb250by4gRGVmYXVsdHMgdG8gMC4gKi9cclxuICAgIGxheWVyPzogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBPcHRpb25hbCBpbml0aWFsIHNob3dCb3VuZHMgZmxhZy4gU2V0IHRvIHRydWUgdG8gc2hvdyBib3VuZHMgYXJvdW5kIHRoZSBub2RlIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuICovXHJcbiAgICBzaG93Qm91bmRzPzogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhc2Ugc2NlbmUgbm9kZS4gSXMgdXNlZCBhcyBiYXNlIGNsYXNzIGZvciBtb3JlIHNwZWNpYWxpemVkIHNjZW5lIG5vZGVzIGJ1dCBjYW4gYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgYXMgcGFyZW50XHJcbiAqIG5vZGUgZm9yIG90aGVyIG5vZGVzIChzaW1pbGFyIHRvIGEgRElWIGVsZW1lbnQgaW4gSFRNTCBmb3IgZXhhbXBsZSkuXHJcbiAqXHJcbiAqIFRPRE8gSW1wbGVtZW50IHNjZW5lIGludmFsaWRhdGlvbiBwcm9wZXJseS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTY2VuZU5vZGU8VCBleHRlbmRzIEdhbWUgPSBHYW1lPiB7XHJcbiAgICAvKiogVGhlIHBhcmVudCBub2RlLiBOdWxsIGlmIG5vbmUuICovXHJcbiAgICBwcml2YXRlIHBhcmVudDogU2NlbmVOb2RlPFQ+IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgLyoqIFRoZSBuZXh0IHNpYmxpbmcgbm9kZS4gTnVsbCBpZiBub25lLiAqL1xyXG4gICAgcHJpdmF0ZSBuZXh0U2libGluZzogU2NlbmVOb2RlPFQ+IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgLyoqIFRoZSBwcmV2aW91cyBzaWJsaW5nIG5vZGUuIE51bGwgaWYgbm9uZS4gKi9cclxuICAgIHByaXZhdGUgcHJldmlvdXNTaWJsaW5nOiBTY2VuZU5vZGU8VD4gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICAvKiogVGhlIGZpcnN0IGNoaWxkIG5vZGUuIE51bGwgaWYgbm9uZS4gKi9cclxuICAgIHByaXZhdGUgZmlyc3RDaGlsZDogU2NlbmVOb2RlPFQ+IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgLyoqIFRoZSBsYXN0IGNoaWxkIG5vZGUuIE51bGwgaWYgbm9uZS4gKi9cclxuICAgIHByaXZhdGUgbGFzdENoaWxkOiBTY2VuZU5vZGU8VD4gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICAvKiogVGhlIHNjZW5lIHRoaXMgbm9kZSBpcyBjb25uZWN0ZWQgdG8uIE51bGwgaWYgbm9uZS4gKi9cclxuICAgIHByb3RlY3RlZCBzY2VuZTogU2NlbmU8VCwgdW5rbm93bj4gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICAvKiogVGhlIElEIG9mIHRoZSBub2RlLiBOdWxsIGlmIG5vbmUuICovXHJcbiAgICBwcml2YXRlIGlkOiBzdHJpbmcgfCBudWxsO1xyXG5cclxuICAgIC8qKiBUaGUgaG9yaXpvbnRhbCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnQgbm9kZS4gKi9cclxuICAgIHByaXZhdGUgeDogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBUaGUgdmVydGljYWwgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50IG5vZGUuICovXHJcbiAgICBwcml2YXRlIHk6IG51bWJlcjtcclxuXHJcbiAgICAvKiogVGhlIG5vZGUgd2lkdGguICovXHJcbiAgICBwcml2YXRlIHdpZHRoOiBudW1iZXI7XHJcblxyXG4gICAgLyoqIFRoZSBub2RlIGhlaWdodC4gKi9cclxuICAgIHByaXZhdGUgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYW5jaG9yIGRlZmluaW5nIHRoZSBvcmlnaW4gb2YgdGhpcyBzY2VuZSBub2RlLiBXaGVuIHNldCB0byBUT1BfTEVGVCBmb3IgZXhhbXBsZSB0aGVuIHRoZSBYL1kgY29vcmRpbmF0ZXMgb2ZcclxuICAgICAqIHRoaXMgbm9kZSBkZWZpbmUgd2hlcmUgdG8gZGlzcGxheSB0aGUgdXBwZXIgbGVmdCBjb3JuZXIgb2YgaXQuIFdoZW4gc2V0IHRvIENFTlRFUiB0aGVuIHRoZSBub2RlIGlzIGNlbnRlcmVkIGF0XHJcbiAgICAgKiBpdHMgWC9ZIGNvb3JkaW5hdGVzLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFuY2hvcjogRGlyZWN0aW9uO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGFuY2hvciBvZiB0aGUgbG9jYWwgY29vcmRpbmF0ZSBzeXN0ZW0uIFdoZW4gc2V0IHRvIENFTlRFUiBmb3IgZXhhbXBsZSB0aGVuIHRoZSBYL1kgY29vcmRpbmF0ZXMgb3IgY2hpbGRcclxuICAgICAqIG5vZGVzIGFyZSByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIHRoaXMgbm9kZS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGlsZEFuY2hvcjogRGlyZWN0aW9uO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGJvdW5kcyBwb2x5Z29uLiBUaGlzIGlzIHVwZGF0ZWQgb24gZGVtYW5kIGFuZCBhdXRvbWF0aWNhbGx5IGludmFsaWRhdGVkIHdoZW4gbm9kZSBzaXplIGNoYW5nZXMuIE5vZGVcclxuICAgICAqIGhhcyB0byBjYWxsIFtbaW52YWxpZGF0ZUJvdW5kc11dIG1hbnVhbGx5IHdoZW4gc29tZXRoaW5nIGVsc2UgaW5mbHVlbmNlcyB0aGUgYm91bmRzLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGJvdW5kc1BvbHlnb246IFBvbHlnb24yID0gbmV3IFBvbHlnb24yKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdHJhbnNmb3JtYXRpb24gbWF0cml4IG9mIHRoaXMgbm9kZS4gVGhpcyB0cmFuc2Zvcm1hdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSBub2RlIGJlZm9yZSBtb3ZpbmcgdGhlIG5vZGUgdG9cclxuICAgICAqIGl0cyBwb3NpdGlvbiAoWC9ZIGNvb3JkaW5hdGVzKS4gU28gaW4gc2ltcGxlIGNhc2VzIHRoaXMgdHJhbnNmb3JtYXRpb24gaXMgbm90IG5lZWRlZCBhdCBhbGwgYW5kIGl0cyB1cCB0byB5b3VcclxuICAgICAqIGlmIHlvdSB3YW50IHRvIHVzZSB0aGUgY29vcmRpbmF0ZXMgYW5kL29yIHRoZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgdHJhbnNmb3JtYXRpb24gPSBuZXcgQWZmaW5lVHJhbnNmb3JtKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdHJhbnNmb3JtYXRpb24gbWF0cml4IGNvbWJpbmluZyB0aGUgbm9kZXMgdHJhbnNmb3JtYXRpb24gd2l0aCBhbGwgdGhlIHBhcmVudCB0cmFuc2Zvcm1hdGlvbnMuIFRoaXMgaXNcclxuICAgICAqIGNhbGN1bGF0ZWQgb24tdGhlLWZseSB3aGVuIGEgc2NlbmUgbm9kZSBpcyB1cGRhdGVkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNjZW5lVHJhbnNmb3JtYXRpb24gPSBuZXcgQWZmaW5lVHJhbnNmb3JtKCk7XHJcblxyXG4gICAgLyoqIEFycmF5IHdpdGggY3VycmVudGx5IGFjdGl2ZSBhbmltYXRpb25zLiBBbmltYXRpb25zIGFyZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgZnJvbSB0aGUgYXJyYXkgd2hlbiBmaW5pc2hlZC4qL1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBhbmltYXRpb25zOiBTY2VuZU5vZGVBbmltYXRpb248VD5bXSA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGN1cnJlbnQgb3BhY2l0eSBvZiB0aGUgbm9kZS4gMC4wIG1lYW5zIGZ1bGx5IHRyYW5zcGFyZW50IGFuZCAxLjAgbWVhbnMgZnVsbHkgb3BhcXVlLiBDYW4gYmUgbGFyZ2VyXHJcbiAgICAgKiB0aGFuIDEuMCB0byBjb21wZW5zYXRlIHRyYW5zcGFyZW5jeSBvZiBpdHMgcGFyZW50LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9wYWNpdHk6IG51bWJlcjtcclxuXHJcbiAgICAvKiogU2V0IHRvIHRydWUgdG8gc2hvdyBib3VuZHMuIFVzZWZ1bCBmb3IgZGVidWdnaW5nLiAqL1xyXG4gICAgcHJpdmF0ZSBzaG93Qm91bmRzOiBib29sZWFuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxheWVyIHRoaXMgbm9kZSBpcyBkcmF3biBvbi4gSW50ZXJuYWwgcmVwcmVzZW50YXRpb24gaXMgc3RvcmVkIGluIGAyXm5gIHdoaWxlIHNldHRlciBhbmQgZ2V0dGVyIHdvcmtzXHJcbiAgICAgKiB3aXRoIGBuYCBpbnN0ZWFkLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGxheWVyaW5nIHN5c3RlbSBpbnRlcm5hbGx5IHdvcmtzIHdpdGggZmFzdCBiaXQgbWFza3MuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbGF5ZXI6IG51bWJlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgc2NlbmUgbm9kZSB3aXRoIHRoZSBnaXZlbiBpbml0aWFsIHNldHRpbmdzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoeyBpZCA9IG51bGwsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwLCBhbmNob3IgPSBEaXJlY3Rpb24uQ0VOVEVSLFxyXG4gICAgICAgICAgICBjaGlsZEFuY2hvciA9IERpcmVjdGlvbi5DRU5URVIsIG9wYWNpdHkgPSAxLCBzaG93Qm91bmRzID0gZmFsc2UsIGxheWVyID0gMCB9OiBTY2VuZU5vZGVBcmdzID0ge30pIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLm9wYWNpdHkgPSBvcGFjaXR5O1xyXG4gICAgICAgIHRoaXMuYW5jaG9yID0gYW5jaG9yO1xyXG4gICAgICAgIHRoaXMuY2hpbGRBbmNob3IgPSBjaGlsZEFuY2hvcjtcclxuICAgICAgICB0aGlzLnNob3dCb3VuZHMgPSBzaG93Qm91bmRzO1xyXG4gICAgICAgIHRoaXMubGF5ZXIgPSAxIDw8IGxheWVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbm9kZSBJRC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBJRCBvZiB0aGUgbm9kZSBvciBudWxsIGlmIG5vbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRJZCgpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgKG9yIHJlbW92ZXMpIHRoZSBub2RlIElELlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZCAtIFRoZSBpZCB0byBzZXQgb3IgbnVsbCB0byB1bnNldC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldElkKGlkOiBzdHJpbmcgfCBudWxsKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgWCBwb3NpdGlvbiBvZiB0aGUgbm9kZSByZWxhdGl2ZSB0byB0aGUgcGFyZW50IG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgWCBwb3NpdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgaG9yaXpvbnRhbCBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgcGFyZW50IG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHggLSBUaGUgaG9yaXpvbnRhbCBwb3NpdGlvbiB0byBzZXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRYKHg6IG51bWJlcik6IHRoaXMge1xyXG4gICAgICAgIGlmICh4ICE9PSB0aGlzLngpIHtcclxuICAgICAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgWSBwb3NpdGlvbiBvZiB0aGUgbm9kZSByZWxhdGl2ZSB0aGUgcGFyZW50IG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgWSBwb3NpdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdmVydGljYWwgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHBhcmVudCBub2RlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB5IC0gVGhlIHZlcnRpY2FsIHBvc2l0aW9uIHRvIHNldC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFkoeTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgaWYgKHkgIT09IHRoaXMueSkge1xyXG4gICAgICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgICAgICB0aGlzLmludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNb3ZlcyB0aGUgbm9kZSBieSB0aGUgZ2l2ZW4gZGVsdGFzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB4IC0gVGhlIGhvcml6b250YWwgZGVsdGEgdG8gbW92ZSB0aGUgbm9kZSBieS5cclxuICAgICAqIEBwYXJhbSB5IC0gVGhlIHZlcnRpY2FsIGRlbHRhIHRvIG1vdmUgdGhlIG5vZGUgYnkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtb3ZlQnkoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzIHtcclxuICAgICAgICBpZiAoeCAhPT0gMCB8fCB5ICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCArPSB4O1xyXG4gICAgICAgICAgICB0aGlzLnkgKz0geTtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW92ZXMgdGhlIG5vZGUgdG8gdGhlIGdpdmVuIHBvc2l0aW9uIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnQgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geCAtIFRoZSBob3Jpem9udGFsIHBvc2l0aW9uIHRvIG1vdmUgdG8uXHJcbiAgICAgKiBAcGFyYW0geSAtIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBtb3ZlIHRvLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbW92ZVRvKHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgaWYgKHggIT09IHRoaXMueCB8fCB5ICE9PSB0aGlzLnkpIHtcclxuICAgICAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgd2lkdGggb2YgdGhlIG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgbm9kZSB3aWR0aC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFdpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB3aWR0aCBvZiB0aGUgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gd2lkdGggLSBUaGUgd2lkdGggdG8gc2V0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0V2lkdGgod2lkdGg6IG51bWJlcik6IHRoaXMge1xyXG4gICAgICAgIGlmICh3aWR0aCAhPT0gdGhpcy53aWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmludmFsaWRhdGVCb3VuZHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB3aWR0aCBvZiB0aGUgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBub2RlIHdpZHRoLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0SGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBub2RlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBUaGUgaGVpZ2h0IHRvIHNldC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEhlaWdodChoZWlnaHQ6IG51bWJlcik6IHRoaXMge1xyXG4gICAgICAgIGlmIChoZWlnaHQgIT09IHRoaXMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLmludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlQm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzaXplcyB0aGUgbm9kZSB0byB0aGUgZ2l2ZW4gd2lkdGggYW5kIGhlaWdodC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gd2lkdGggIC0gVGhlIHdpZHRoIHRvIHNldC5cclxuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBUaGUgaGVpZ2h0IHRvIHNldC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc2l6ZVRvKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgaWYgKHdpZHRoICE9PSB0aGlzLndpZHRoIHx8IGhlaWdodCAhPT0gdGhpcy5oZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZUJvdW5kcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgb3BhY2l0eSBvZiB0aGUgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBvcGFjaXR5LiAwLjAgbWVhbnMgZnVsbHkgdHJhbnNwYXJlbnQsIDEuMCBtZWFucyBmdWxseSBvcGFxdWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRPcGFjaXR5KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BhY2l0eTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIG5vZGVzIG9wYWNpdHkuXHJcbiAgICAgKlxyXG4gICAgICogQHByYW0gb3BhY2l0eSAtIFRoZSBvcGFjaXR5IHRvIHNldC4gMC4wIG1lYW5zIGZ1bGx5IHRyYW5zcGFyZW50LCAxLjAgbWVhbnMgZnVsbHkgb3BhcXVlLiBDYW4gYmUgbGFyZ2VyIHRoYW4gMS4wXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgdG8gY29tcGVuc2F0ZSB0cmFuc3BhcmVuY3kgb2YgaXRzIHBhcmVudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldE9wYWNpdHkob3BhY2l0eTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgb3BhY2l0eSA9IE1hdGgubWF4KDAsIG9wYWNpdHkpO1xyXG4gICAgICAgIGlmIChvcGFjaXR5ICE9PSB0aGlzLm9wYWNpdHkpIHtcclxuICAgICAgICAgICAgdGhpcy5vcGFjaXR5ID0gb3BhY2l0eTtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZWZmZWN0aXZlIG5vZGUgb3BhY2l0eSB3aGljaCBpcyB0aGUgbm9kZXMgb3BhY2l0eSBtdWx0aXBsaWVkIGJ5IHRoZSBwYXJlbnRzIGVmZmVjdGl2ZSBvcGFjaXR5LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIGVmZmVjdGl2ZSBub2RlIG9wYWNpdHkgY2xhbXBlZCB0byB2YWxpZCByYW5nZSBvZiAwLjAgdG8gMS4wLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RWZmZWN0aXZlT3BhY2l0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh0aGlzLm9wYWNpdHkgPT09IEluZmluaXR5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgKHRoaXMucGFyZW50Py5nZXRFZmZlY3RpdmVPcGFjaXR5KCkgPz8gMSkgKiB0aGlzLm9wYWNpdHkpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG5vZGUgYW5jaG9yIHdoaWNoIGRlZmluZXMgdGhlIG1lYW5pbmcgb2YgdGhlIFgvWSBjb29yZGluYXRlcyBvZiB0aGUgbm9kZS4gQ0VOVEVSIG1lYW5zIHRoZSBYL1lcclxuICAgICAqIGNvb3JkaW5hdGVzIGRlZmluZSB0aGUgY2VudGVyIG9mIHRoZSBub2RlLiBUT1BfTEVGVCBtZWFucyB0aGUgWC9ZIGNvb3JkaW5hdGVzIGRlZmluZSB0aGUgdXBwZXIgbGVmdCBjb3JuZXIgb2ZcclxuICAgICAqIHRoZSBub2RlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIG5vZGUgYW5jaG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QW5jaG9yKCk6IERpcmVjdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5jaG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgbm9kZSBhbmNob3Igd2hpY2ggZGVmaW5lcyB0aGUgbWVhbmluZyBvZiB0aGUgWC9ZIGNvb3JkaW5hdGVzIG9mIHRoZSBub2RlLiBDRU5URVIgbWVhbnMgdGhlIFgvWVxyXG4gICAgICogY29vcmRpbmF0ZXMgZGVmaW5lIHRoZSBjZW50ZXIgb2YgdGhlIG5vZGUuIFRPUF9MRUZUIG1lYW5zIHRoZSBYL1kgY29vcmRpbmF0ZXMgZGVmaW5lIHRoZSB1cHBlciBsZWZ0IGNvcm5lciBvZlxyXG4gICAgICogdGhlIG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFuY2hvciAtIFRoZSBub2RlIGFuY2hvciB0byBzZXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRBbmNob3IoYW5jaG9yOiBEaXJlY3Rpb24pOiB0aGlzIHtcclxuICAgICAgICBpZiAoYW5jaG9yICE9PSB0aGlzLmFuY2hvcikge1xyXG4gICAgICAgICAgICB0aGlzLmFuY2hvciA9IGFuY2hvcjtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY2hpbGQgYW5jaG9yIHdoaWNoIGRlZmluZXMgdGhlIG9yaWdpbiBvZiB0aGUgbG9jYWwgY29vcmRpbmF0ZSBzeXN0ZW0gdG8gd2hpY2ggdGhlIGNvb3JkaW5hdGVzIG9mXHJcbiAgICAgKiBjaGlsZCBub2RlcyBhcmUgcmVsYXRpdmUgdG8uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgY2hpbGQgYW5jaG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q2hpbGRBbmNob3IoKTogRGlyZWN0aW9uIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZEFuY2hvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGNoaWxkIGFuY2hvciB3aGljaCBkZWZpbmVzIHRoZSBvcmlnaW4gb2YgdGhlIGxvY2FsIGNvb3JkaW5hdGUgc3lzdGVtIHRvIHdoaWNoIHRoZSBjb29yZGluYXRlcyBvZlxyXG4gICAgICogY2hpbGQgbm9kZXMgYXJlIHJlbGF0aXZlIHRvLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjaGlsZEFuY2hvciAtIFRoZSBjaGlsZCBhbmNob3IgdG8gc2V0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0Q2hpbGRBbmNob3IoY2hpbGRBbmNob3I6IERpcmVjdGlvbik6IHRoaXMge1xyXG4gICAgICAgIGlmIChjaGlsZEFuY2hvciAhPT0gdGhpcy5jaGlsZEFuY2hvcikge1xyXG4gICAgICAgICAgICB0aGlzLmNoaWxkQW5jaG9yID0gY2hpbGRBbmNob3I7XHJcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGN1c3RvbSB0cmFuc2Zvcm1hdGlvbiBvZiB0aGlzIG5vZGUgd2hpY2ggY2FuIGJlIG1hbmlwdWxhdGVkIGJ5IHRoZSBbW3RyYW5zZm9ybV1dIG1ldGhvZC4gVGhpc1xyXG4gICAgICogdHJhbnNmb3JtYXRpb24gaXMgYXBwbGllZCB0byB0aGUgbm9kZSBiZWZvcmUgaXQgaXMgcmVuZGVyZWQgYXQgaXRzIGludGVuZGVkIHBvc2l0aW9uLiBUcmFuc2Zvcm1hdGlvbiBhbmRcclxuICAgICAqIG5vZGUgcG9zaXRpb24gY2FuIGNvbXBsZW1lbnQgZWFjaCBvdGhlciBvciB5b3UgY2FuIG9ubHkgdXNlIG9uZSBvZiB0aGVtLCB0aGF0J3MgdXAgdG8geW91LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIGN1c3RvbSBub2RlIHRyYW5zZm9ybWF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VHJhbnNmb3JtYXRpb24oKTogQWZmaW5lVHJhbnNmb3JtIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1vZGlmaWVzIHRoZSBjdXN0b20gdHJhbnNmb3JtYXRpb24gbWF0cml4IG9mIHRoaXMgbm9kZS4gQ2FsbHMgdGhlIGdpdmVuIHRyYW5zZm9ybWVyIGZ1bmN0aW9uIHdoaWNoIGNhbiB0aGVuXHJcbiAgICAgKiBtb2RpZnkgdGhlIGdpdmVuIHRyYW5zZm9ybWF0aW9uIG1hdHJpeC4gQWZ0ZXIgdGhpcyB0aGUgbm9kZSBpcyBpbnZhbGlkYXRlZCB0byByZWNhbGN1bGF0ZSBib3VuZHMgYW5kIHJlZHJhdyBpdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHJhbnNmb3JtZXIgLSBGdW5jdGlvbiB0byBjYWxsIHdpdGggdHJhbnNmb3JtYXRpb24gbWF0cml4IGFzIGFyZ3VtZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNmb3JtKHRyYW5zZm9ybWVyOiAodHJhbnNmb3JtYXRpb246IEFmZmluZVRyYW5zZm9ybSkgPT4gdm9pZCk6IHRoaXMge1xyXG4gICAgICAgIHRyYW5zZm9ybWVyKHRoaXMudHJhbnNmb3JtYXRpb24pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludmFsaWRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNjZW5lIHRoZSBub2RlIGlzIGN1cnJlbnRseSBhdHRhY2hlZCB0by4gTnVsbCBpZiBub25lLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIGN1cnJlbnQgc2NlbmUgb3IgbnVsbCBpZiBub25lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U2NlbmUoKTogU2NlbmU8VD4gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHNjZW5lIHRoaXMgbm9kZSBhbmQgYWxsIGl0cyBjaGlsZHJlbiBiZWxvbmdzIHRvLiBUaGlzIGlzIGNhbGxlZCBpbnRlcm5hbGx5IHdoZW4gYSBub2RlIGlzIGFkZGVkIHRvXHJcbiAgICAgKiB0aGUgc2NlbmUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNjZW5lIC0gVGhlIHNjZW5lIHRoZSBub2RlIGJlbG9uZ3MgdG8gZnJvbSBub3cgb24uIG51bGwgdG8gdW5zZXQgdGhlIGN1cnJlbnQgc2NlbmUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0U2NlbmUoc2NlbmU6IFNjZW5lPFQ+IHwgbnVsbCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChzY2VuZSAhPT0gdGhpcy5zY2VuZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zY2VuZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgICAgICAgICBpZiAoc2NlbmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmZvckVhY2hDaGlsZChub2RlID0+IG5vZGUuc2V0U2NlbmUoc2NlbmUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgd2hlbiBub2RlIGlzIGFkZGVkIHRvIHNjZW5lLiBDYW4gYmUgb3ZlcndyaXR0ZW4gdG8gY29ubmVjdCBldmVudCBoYW5kbGVycyBmb3IgZXhhbXBsZS5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFjdGl2YXRlKCk6IHZvaWQge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB3aGVuIG5vZGUgaXMgcmVtb3ZlZCBmcm9tIHNjZW5lLiBDYW4gYmUgb3ZlcndyaXR0ZW4gdG8gZGlzY29ubmVjdCBldmVudCBoYW5kbGVycyBmb3IgZXhhbXBsZS5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGRlYWN0aXZhdGUoKTogdm9pZCB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcGFyZW50IG5vZGUgb2YgdGhpcyBub2RlIG9yIG51bGwgaWYgbm9kZSBpcyBub3QgYXR0YWNoZWQgdG8gYSBwYXJlbnQgb3IgaXMgdGhlIHJvb3Qgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBwYXJlbnQgbm9kZSBvciBudWxsIGlmIHVuYXR0YWNoZWQgb3Igcm9vdCBlbGVtZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UGFyZW50KCk6IFNjZW5lTm9kZTxUPiB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG5leHQgbm9kZSBhdCB0aGUgc2FtZSBsZXZlbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBuZXh0IHNpYmxpbmcgb3IgbnVsbCBpZiBub25lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0TmV4dFNpYmxpbmcoKTogU2NlbmVOb2RlPFQ+IHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dFNpYmxpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBwcmV2aW91cyBub2RlIGF0IHRoZSBzYW1lIGxldmVsLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIHByZXZpb3VzIHNpYmxpbmcgb3IgbnVsbCBpZiBub25lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UHJldmlvdXNTaWJsaW5nKCk6IFNjZW5lTm9kZTxUPiB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzU2libGluZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IGNoaWxkIG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgZmlyc3QgY2hpbGQgbm9kZSBvciBudWxsIGlmIG5vbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRGaXJzdENoaWxkKCk6IFNjZW5lTm9kZTxUPiB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpcnN0Q2hpbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGNoaWxkIG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgbGFzdCBjaGlsZCBub2RlIG9yIG51bGwgaWYgbm9uZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldExhc3RDaGlsZCgpOiBTY2VuZU5vZGU8VD4gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0Q2hpbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhpcyBub2RlIGhhcyBjaGlsZCBub2Rlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgaXQgY2hpbGQgbm9kZXMgYXJlIHByZXNlbnQsIGZhbHNlIGlmIG5vdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGhhc0NoaWxkTm9kZXMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RDaGlsZCAhPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwZW5kcyB0aGUgZ2l2ZW4gY2hpbGQgbm9kZSBzbyBpdCBiZWNvbWVzIHRoZSBsYXN0IGNoaWxkIG9mIHRoaXMgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbm9kZSAtIFRoZSBjaGlsZCBub2RlIHRvIGFwcGVuZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFwcGVuZENoaWxkKG5vZGU6IFNjZW5lTm9kZTxUPik6IHRoaXMge1xyXG4gICAgICAgIGlmIChub2RlID09PSB0aGlzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vZGUgY2FuIG5vdCBiZSBhcHBlbmRlZCB0byBpdHNlbGZcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1vdmUgZnJvbSBvbGQgcGFyZW50IGlmIHRoZXJlIGlzIG9uZVxyXG4gICAgICAgIGNvbnN0IG9sZFBhcmVudCA9IG5vZGUucGFyZW50O1xyXG4gICAgICAgIGlmIChvbGRQYXJlbnQpIHtcclxuICAgICAgICAgICAgb2xkUGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRoZSBjaGlsZFxyXG4gICAgICAgIG5vZGUucHJldmlvdXNTaWJsaW5nID0gdGhpcy5sYXN0Q2hpbGQ7XHJcbiAgICAgICAgY29uc3Qgb2xkTGFzdENoaWxkID0gdGhpcy5sYXN0Q2hpbGQ7XHJcbiAgICAgICAgaWYgKG9sZExhc3RDaGlsZCkge1xyXG4gICAgICAgICAgICBvbGRMYXN0Q2hpbGQubmV4dFNpYmxpbmcgPSBub2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhc3RDaGlsZCA9IG5vZGU7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5maXJzdENoaWxkID0gbm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm9kZS5wYXJlbnQgPSB0aGlzO1xyXG4gICAgICAgIG5vZGUuc2V0U2NlbmUodGhpcy5zY2VuZSk7XHJcblxyXG4gICAgICAgIG5vZGUuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJlcGVuZHMgdGhlIGdpdmVuIGNoaWxkIG5vZGUgc28gaXQgYmVjb21lcyB0aGUgZmlyc3QgY2hpbGQgb2YgdGhpcyBub2RlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBub2RlIC0gVGhlIGNoaWxkIG5vZGUgdG8gcHJlcGVuZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHByZXBlbmRDaGlsZChub2RlOiBTY2VuZU5vZGU8VD4pOiB0aGlzIHtcclxuICAgICAgICBpZiAodGhpcy5maXJzdENoaWxkICE9IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0QmVmb3JlKG5vZGUsIHRoaXMuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gY2hpbGQgbm9kZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjaGlsZCAtIFRoZSBjaGlsZCBub2RlIHRvIHJlbW92ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbW92ZUNoaWxkKG5vZGU6IFNjZW5lTm9kZTxUPik6IHRoaXMge1xyXG4gICAgICAgIGlmIChub2RlLnBhcmVudCAhPT0gdGhpcykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb2RlIG11c3QgYmUgYSBjaGlsZCBub2RlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIG5vZGUgZnJvbSBsaW5rZWQgbGlzdFxyXG4gICAgICAgIGNvbnN0IG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xyXG4gICAgICAgIGNvbnN0IHByZXYgPSBub2RlLnByZXZpb3VzU2libGluZztcclxuICAgICAgICBpZiAobmV4dCkge1xyXG4gICAgICAgICAgICBuZXh0LnByZXZpb3VzU2libGluZyA9IHByZXY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcmV2KSB7XHJcbiAgICAgICAgICAgIHByZXYubmV4dFNpYmxpbmcgPSBuZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29ycmVjdCBmaXJzdC9sYXN0IHJlZmVyZW5jZVxyXG4gICAgICAgIGlmIChub2RlID09PSB0aGlzLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5maXJzdENoaWxkID0gbmV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMubGFzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdENoaWxkID0gcHJldjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBhbGwgcmVmZXJlbmNlcyBmcm9tIG5vZGVcclxuICAgICAgICBub2RlLnBhcmVudCA9IG51bGw7XHJcbiAgICAgICAgbm9kZS5uZXh0U2libGluZyA9IG51bGw7XHJcbiAgICAgICAgbm9kZS5wcmV2aW91c1NpYmxpbmcgPSBudWxsO1xyXG4gICAgICAgIG5vZGUuc2V0U2NlbmUobnVsbCk7XHJcblxyXG4gICAgICAgIG5vZGUuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhpcyBub2RlIGZyb20gdGhlIHNjZW5lLiBUaGUgbm9kZSBpcyB0aGVuIGEgZGV0YWNoZWQgbm9kZSByZWFkeSB0byBiZSBhZGRlZCB0byB0aGUgc2NlbmUgKG9yIHNvbWVcclxuICAgICAqIG90aGVyIHNjZW5lKSBhZ2Fpbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbW92ZSgpOiB0aGlzIHtcclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbGwgY2hpbGQgbm9kZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjbGVhcigpOiB0aGlzIHtcclxuICAgICAgICB3aGlsZSAodGhpcy5sYXN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLmxhc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5zZXJ0cyB0aGUgZ2l2ZW4gY2hpbGQgbm9kZSBiZWZvcmUgdGhlIHNwZWNpZmllZCByZWZlcmVuY2UgY2hpbGQgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmV3Tm9kZSAtIFRoZSBjaGlsZCBub2RlIHRvIGluc2VydC5cclxuICAgICAqIEBwYXJhbSByZWZOb2RlIC0gVGhlIHJlZmVyZW5jZSBub2RlLiBUaGUgY2hpbGQgbm9kZSBpcyBpbnNlcnRlZCBiZWZvcmUgdGhpcyBvbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnNlcnRCZWZvcmUobmV3Tm9kZTogU2NlbmVOb2RlPFQ+LCByZWZOb2RlOiBTY2VuZU5vZGU8VD4pOiB0aGlzIHtcclxuICAgICAgICBpZiAobmV3Tm9kZSA9PT0gdGhpcykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb2RlIGNhbiBub3QgYmUgaW5zZXJ0ZWQgaW50byBpdHNlbGZcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWZOb2RlLnBhcmVudCAhPT0gdGhpcykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWZlcmVuY2Ugbm9kZSBtdXN0IGJlIGEgY2hpbGQgbm9kZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBmcm9tIG9sZCBwYXJlbnQgaWYgdGhlcmUgaXMgb25lXHJcbiAgICAgICAgY29uc3Qgb2xkUGFyZW50ID0gbmV3Tm9kZS5wYXJlbnQ7XHJcbiAgICAgICAgaWYgKG9sZFBhcmVudCkge1xyXG4gICAgICAgICAgICBvbGRQYXJlbnQucmVtb3ZlQ2hpbGQobmV3Tm9kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbnNlcnQgdGhlIG5vZGVcclxuICAgICAgICBjb25zdCBvbGRQcmV2aW91cyA9IHJlZk5vZGUucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgIGlmICghb2xkUHJldmlvdXMpIHtcclxuICAgICAgICAgICAgdGhpcy5maXJzdENoaWxkID0gbmV3Tm9kZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvbGRQcmV2aW91cy5uZXh0U2libGluZyA9IG5ld05vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlZk5vZGUucHJldmlvdXNTaWJsaW5nID0gbmV3Tm9kZTtcclxuICAgICAgICBuZXdOb2RlLnByZXZpb3VzU2libGluZyA9IG9sZFByZXZpb3VzO1xyXG4gICAgICAgIG5ld05vZGUubmV4dFNpYmxpbmcgPSByZWZOb2RlO1xyXG4gICAgICAgIG5ld05vZGUucGFyZW50ID0gdGhpcztcclxuICAgICAgICBuZXdOb2RlLnNldFNjZW5lKHRoaXMuc2NlbmUpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXBsYWNlcyB0aGUgZ2l2ZW4gY2hpbGQgbm9kZSB3aXRoIGEgbmV3IG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9sZE5vZGUgLSBUaGUgb2xkIGNoaWxkIG5vZGUgdG8gcmVwbGFjZS5cclxuICAgICAqIEBwYXJhbSBuZXdOb2RlIC0gVGhlIG5ldyBub2RlIHRvIHJlcGxhY2UgdGhlIG9sZCBvbmUgd2l0aC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlcGxhY2VDaGlsZChvbGROb2RlOiBTY2VuZU5vZGU8VD4sIG5ld05vZGU6IFNjZW5lTm9kZTxUPik6IHRoaXMge1xyXG4gICAgICAgIGlmIChuZXdOb2RlID09PSB0aGlzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5ld05vZGUgbXVzdCBub3QgYmUgdGhlIHBhcmVudCBub2RlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2xkTm9kZS5wYXJlbnQgIT09IHRoaXMpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwib2xkTm9kZSBtdXN0IGJlIGEgY2hpbGQgbm9kZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIG5ldyBub2RlIGlzIHRoZSBzYW1lIGFzIHRoZSBvbGQgbm9kZSB0aGVuIGRvIG5vdGhpbmdcclxuICAgICAgICBpZiAobmV3Tm9kZSA9PT0gb2xkTm9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5leHQgPSBvbGROb2RlLm5leHRTaWJsaW5nO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQ2hpbGQob2xkTm9kZSk7XHJcbiAgICAgICAgaWYgKG5leHQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgbmV4dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChuZXdOb2RlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVwbGFjZSB0aGUgZ2l2ZW4gbm9kZSB3aXRoIHRoaXMgb25lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBub2RlIC0gVGhlIG5vZGUgdG8gcmVwbGFjZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlcGxhY2Uobm9kZTogU2NlbmVOb2RlPFQ+KTogdGhpcyB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnJlcGxhY2VDaGlsZCh0aGlzLCBub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBlbmRzIHRoaXMgbm9kZSB0byB0aGUgZ2l2ZW4gcGFyZW50IG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5vZGUgLSBUaGUgcGFyZW50IG5vZGUgdG8gYXBwZW5kIHRoaXMgbm9kZSB0by5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFwcGVuZFRvKG5vZGU6IFNjZW5lTm9kZTxUPik6IHRoaXMge1xyXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmVwZW5kcyB0aGlzIG5vZGUgdG8gdGhlIGdpdmVuIHBhcmVudCBub2RlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBub2RlIC0gVGhlIHBhcmVudCBub2RlIHRvIHByZXBlbmQgdGhpcyBub2RlIHRvLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHJlcGVuZFRvKG5vZGU6IFNjZW5lTm9kZTxUPik6IHRoaXMge1xyXG4gICAgICAgIG5vZGUucHJlcGVuZENoaWxkKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgY2hpbGQgbm9kZXMgYW5kIGNhbGxzIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoIHRoZSBjdXJyZW50bHkgaXRlcmF0ZWQgbm9kZSBhcyBwYXJhbWV0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIHRvIGNhbGwgZm9yIGVhY2ggY2hpbGQgbm9kZS5cclxuICAgICAqIEBwYXJhbSB0aGlzQXJnICAtIE9wdGlvbmFsIHZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGNhbGxiYWNrYC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGZvckVhY2hDaGlsZChjYWxsYmFjazogKG5vZGU6IFNjZW5lTm9kZTxUPiwgaW5kZXg6IG51bWJlcikgPT4gdm9pZCwgdGhpc0FyZzogYW55ID0gdGhpcyk6IHRoaXMge1xyXG4gICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgd2hpbGUgKG5vZGUpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgbm9kZSwgaW5kZXgrKyk7XHJcbiAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYWxsIGRlc2NlbmRhbnQgbm9kZXMgYW5kIGNhbGxzIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoIHRoZSBjdXJyZW50bHkgaXRlcmF0ZWQgbm9kZSBhcyBwYXJhbWV0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIHRvIGNhbGwgZm9yIGVhY2ggZGVzY2VuZGFudCBub2RlLlxyXG4gICAgICogQHBhcmFtIHRoaXNBcmcgIC0gT3B0aW9uYWwgdmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZm9yRWFjaERlc2NlbmRhbnQoY2FsbGJhY2s6IChub2RlOiBTY2VuZU5vZGU8VD4pID0+IHZvaWQsIHRoaXNBcmc6IGFueSA9IHRoaXMpOiB0aGlzIHtcclxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMuZmlyc3RDaGlsZDtcclxuICAgICAgICB3aGlsZSAobm9kZSAhPSBudWxsICYmIG5vZGUgIT09IHRoaXMpIHtcclxuICAgICAgICAgICAgbGV0IG5leHQgPSBub2RlLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgICAgIGlmIChuZXh0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChuZXh0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG5leHQgPSBub2RlLnBhcmVudD8ubmV4dFNpYmxpbmcgPz8gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIG5vZGUpO1xyXG4gICAgICAgICAgICBub2RlID0gbmV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBjaGlsZCBub2RlIGZvciB3aGljaCB0aGUgZ2l2ZW4gY2FsbGJhY2sgcmV0dXJucyB0cnVlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayB3aGljaCBjaGVja3MgaWYgdGhlIGl0ZXJhdGVkIG5vZGUgaXMgdGhlIG9uZSB0byBsb29rIGZvci5cclxuICAgICAqIEByZXR1cm4gVGhlIGZvdW5kIG1hdGNoaW5nIGNoaWxkIG5vZGUgb3IgbnVsbCBpZiBub25lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZmluZENoaWxkKGNhbGxiYWNrOiAobm9kZTogU2NlbmVOb2RlPFQ+LCBpbmRleDogbnVtYmVyKSA9PiBib29sZWFuLCB0aGlzQXJnOiB1bmtub3duID0gdGhpcyk6XHJcbiAgICAgICAgICAgIFNjZW5lTm9kZTxUPiB8IG51bGwge1xyXG4gICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgd2hpbGUgKG5vZGUpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjay5jYWxsKHRoaXNBcmcsIG5vZGUsIGluZGV4KyspKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBub2RlID0gbmV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBkZXNjZW5kYW50IG5vZGUgZm9yIHdoaWNoIHRoZSBnaXZlbiBjYWxsYmFjayByZXR1cm5zIHRydWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIHdoaWNoIGNoZWNrcyBpZiB0aGUgaXRlcmF0ZWQgbm9kZSBpcyB0aGUgb25lIHRvIGxvb2sgZm9yLlxyXG4gICAgICogQHJldHVybiBUaGUgZm91bmQgbWF0Y2hpbmcgZGVzY2VuZGFudCBub2RlIG9yIG51bGwgaWYgbm9uZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGZpbmREZXNjZW5kYW50KGNhbGxiYWNrOiAobm9kZTogU2NlbmVOb2RlPFQ+KSA9PiBib29sZWFuLCB0aGlzQXJnOiB1bmtub3duID0gdGhpcyk6XHJcbiAgICAgICAgICAgIFNjZW5lTm9kZTxUPiB8IG51bGwge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgd2hpbGUgKG5vZGUgIT0gbnVsbCAmJiBub2RlICE9PSB0aGlzKSB7XHJcbiAgICAgICAgICAgIGxldCBuZXh0ID0gbm9kZS5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICBpZiAobmV4dCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV4dCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0ID0gbm9kZS5wYXJlbnQ/Lm5leHRTaWJsaW5nID8/IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmNhbGwodGhpc0FyZywgbm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3RzIHdoZXRoZXIgYXQgbGVhc3Qgb25lIGNoaWxkIG5vZGUgcGFzc2VzIHRoZSB0ZXN0IGltcGxlbWVudGVkIGJ5IHRoZSBwcm92aWRlZCBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgdG8gY2FsbCBmb3IgZWFjaCBjaGlsZCBub2RlIHJldHVybmluZyBhIGJvb2xlYW4uXHJcbiAgICAgKiBAcGFyYW0gdGhpc0FyZyAgLSBPcHRpb25hbCB2YWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBjYWxsYmFja2AuXHJcbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYXQgbGVhc3Qgb25lIGNoaWxkIG5vZGUgcmV0dXJuZWQgdHJ1ZSBpbiB0aGUgZ2l2ZW4gY2FsbGJhY2ssIGZhbHNlIGlmIG5vbmUgZGlkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc29tZUNoaWxkcmVuKGNhbGxiYWNrOiAobm9kZTogU2NlbmVOb2RlPFQ+LCBpbmRleDogbnVtYmVyKSA9PiBib29sZWFuLCB0aGlzQXJnOiBhbnkgPSB0aGlzKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMuZmlyc3RDaGlsZDtcclxuICAgICAgICB3aGlsZSAobm9kZSkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmNhbGwodGhpc0FyZywgbm9kZSwgaW5kZXgrKykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGFycmF5IHdpdGggYWxsIGNoaWxkIG5vZGVzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gQWxsIGNoaWxkIG5vZGVzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q2hpbGRyZW4oKTogU2NlbmVOb2RlPFQ+W10ge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuOiBTY2VuZU5vZGU8VD5bXSA9IFtdO1xyXG4gICAgICAgIGxldCBub2RlID0gdGhpcy5maXJzdENoaWxkO1xyXG4gICAgICAgIHdoaWxlIChub2RlKSB7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2hpbGRyZW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBkZXNjZW5kYW50IG5vZGUgd2l0aCB0aGUgZ2l2ZW4gaWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIElEIHRvIGxvb2sgZm9yLlxyXG4gICAgICogQHJldHVybiBUaGUgbWF0Y2hpbmcgZGVzY2VuZGFudCBub2RlIG9yIG51bGwgaWYgbm9uZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldERlc2NlbmRhbnRCeUlkKGlkOiBzdHJpbmcpOiBTY2VuZU5vZGU8VD4gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kRGVzY2VuZGFudChub2RlID0+IG5vZGUuZ2V0SWQoKSA9PT0gaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW52YWxpZGF0ZXMgdGhlIGJvdW5kcyBvZiB0aGUgbm9kZS4gQVV0b21hdGljYWxseSBjYWxsZWQgd2hlbiBub2RlIHNpemUgaXMgY2hhbmdlZC4gTXVzdCBiZSBjYWxsZWQgbWFudWFsbHlcclxuICAgICAqIHdoZW4gc29tZSBvdGhlciBhc3BlY3Qgb2YgdGhlIG5vZGUgd2hpY2ggbWF5IGluZmx1ZW5jZSB0aGUgYm91bmRzIGlzIGNoYW5nZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnZhbGlkYXRlQm91bmRzKCk6IHRoaXMge1xyXG4gICAgICAgIHRoaXMuYm91bmRzUG9seWdvbi5jbGVhcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgYm91bmRzIHBvbHlnb24gb2YgdGhlIG5vZGUuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHNpbXBseSBzZXRzIGEgYm91bmRpbmcgYm94LiBTcGVjaWFsaXplZCBub2Rlc1xyXG4gICAgICogY2FuIG92ZXJ3cml0ZSB0aGlzIG1ldGhvZCB0byBkZWZpbmUgYSBtb3JlIHNwZWNpZmljIHBvbHlnb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGJvdW5kcyAtIFRoZSBlbXB0eSBib3VuZHMgcG9seWdvbiB0byBiZSBmaWxsZWQgd2l0aCBwb2ludHMgYnkgdGhpcyBtZXRob2QuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCB1cGRhdGVCb3VuZHNQb2x5Z29uKGJvdW5kczogUG9seWdvbjIpOiB2b2lkIHtcclxuICAgICAgICBib3VuZHMuYWRkVmVydGV4KG5ldyBWZWN0b3IyKDAsIDApKTtcclxuICAgICAgICBib3VuZHMuYWRkVmVydGV4KG5ldyBWZWN0b3IyKHRoaXMud2lkdGgsIDApKTtcclxuICAgICAgICBib3VuZHMuYWRkVmVydGV4KG5ldyBWZWN0b3IyKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KSk7XHJcbiAgICAgICAgYm91bmRzLmFkZFZlcnRleChuZXcgVmVjdG9yMigwLCB0aGlzLmhlaWdodCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgYm91bmRzIHBvbHlnb24gb2YgdGhlIG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgYm91bmRzIHBvbHlnb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRCb3VuZHNQb2x5Z29uKCk6IFBvbHlnb24yIHtcclxuICAgICAgICBpZiAoIXRoaXMuYm91bmRzUG9seWdvbi5oYXNWZXJ0aWNlcygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzUG9seWdvbih0aGlzLmJvdW5kc1BvbHlnb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZHNQb2x5Z29uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWFya3MgdGhpcyBub2RlLCBhbGwgcGFyZW50IG5vZGVzIGFuZCB0aGUgc2NlbmUgYXMgaW52YWxpZCB0byB0cmlnZ2VyIGEgc2NlbmUgcmV2YWxpZGF0aW9uLiBUaGlzIG11c3QgYmVcclxuICAgICAqIGNhbGxlZCBldmVyeSB0aW1lIHdoZW4gc29tZSBhc3BlY3Qgb2YgdGhlIG5vZGUgaXMgY2hhbmdlZCB3aGljaCByZXF1aXJlcyBhIHJlZHJhdyBvZiB0aGUgc2NlbmUgbm9kZS5cclxuICAgICAqXHJcbiAgICAgKiBUT0RPIE5vdCB5ZXQgaW1wbGVtZW50ZWQsIGN1cnJlbnRseSB0aGUgc2NlbmUgaXMgY29uc3RhbnRseSByZWRyYXduLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW52YWxpZGF0ZSgpOiB0aGlzIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgIGlmICh0aGlzLnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY2VuZSkge1xyXG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLnNjZW5lLmludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAqL1xyXG4gICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgbmV3IGFuaW1hdGlvbiB0byB0aGUgc2NlbmUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFuaW1hdGlvbkFyZ3MgLSBUaGUgYXJndW1lbnRzIGRlZmluaW5nIHRoZSBhbmltYXRpb24gdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYW5pbWF0ZShhbmltYXRpb25BcmdzOiBBbmltYXRpb25BcmdzPFQ+KTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnB1c2gobmV3IFNjZW5lTm9kZUFuaW1hdGlvbih0aGlzLCBhbmltYXRpb25BcmdzKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5pc2hlcyBhbGwgY3VycmVudGx5IHJ1bm5pbmcgYW5pbWF0aW9ucy4gVGhpcyBjYWxscyBhbGwgYW5pbWF0b3IgZnVuY3Rpb25zIHdpdGggdGhlaXIgbGFzdCBhbmltYXRpb24gaW5kZXhcclxuICAgICAqICgxLjApIGFuZCB0aGVuIHJlbW92ZXMgdGhlIGFuaW1hdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaW5pc2hBbmltYXRpb25zKCk6IHRoaXMge1xyXG4gICAgICAgIGZvciAoY29uc3QgYW5pbWF0aW9uIG9mIHRoaXMuYW5pbWF0aW9ucykge1xyXG4gICAgICAgICAgICBhbmltYXRpb24uZmluaXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2hDaGlsZChjaGlsZCA9PiBjaGlsZC5maW5pc2hBbmltYXRpb25zKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIG5vZGUgaGFzIHJ1bm5pbmcgYW5pbWF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgbm9kZSBoYXMgYW5pbWF0aW9ucywgZmFsc2UgaWYgbm90LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaGFzQW5pbWF0aW9ucygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hbmltYXRpb25zLmxlbmd0aCA+IDAgfHwgdGhpcy5zb21lQ2hpbGRyZW4oY2hpbGQgPT4gY2hpbGQuaGFzQW5pbWF0aW9ucygpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVuYWJsZXMgb3IgZGlzYWJsZXMgc2hvd2luZyBub2RlIGJvdW5kcy4gVGhpcyBtYXkgYmUgdXNlZnVsIGZvciBkZWJ1Z2dpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNob3dCb3VuZHMgLSBUcnVlIHRvIGVuYWJsZSBzaG93aW5nIG5vZGUgYm91bmRzLCBmYWxzZSB0byBkaXNhYmxlIGl0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0U2hvd0JvdW5kcyhzaG93Qm91bmRzOiBib29sZWFuKTogdGhpcyB7XHJcbiAgICAgICAgaWYoc2hvd0JvdW5kcyAhPT0gdGhpcy5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JvdW5kcyA9IHNob3dCb3VuZHM7XHJcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBub2RlIGJvdW5kcyBhcmUgY3VycmVudGx5IHNob3duIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUcnVlIGlmIG5vZGUgYm91bmRzIGFyZSBzaG93biwgZmFsc2UgaWYgbm90LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNTaG93Qm91bmRzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNob3dCb3VuZHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXllciBvZiB0aGlzIG5vZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgbm9kZSdzIGxheWVyICgwLTMxKS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldExheWVyKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubG9nMih0aGlzLmxheWVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGxheWVyIHRoaXMgbm9kZSBzaG91bGQgYXBwZWFyIG9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsYXllciAtIFRoZSBsYXllciB0byBzZXQgKDAtMzEpLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0TGF5ZXIobGF5ZXI6IG51bWJlcik6IHRoaXMge1xyXG4gICAgICAgIGlmIChsYXllciA8IDAgfHwgbGF5ZXIgPiAzMSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbGlkIGxheWVyIHJhbmdlIGlzIDAtMzEgYnV0IHdhcyAke2xheWVyfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXllciA9IDEgPDwgbGF5ZXI7XHJcbiAgICAgICAgaWYgKGxheWVyICE9PSB0aGlzLmxheWVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXIgPSBsYXllcjtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgYW5pbWF0aW9ucyBhbmQgcmVtb3ZlcyBmaW5pc2hlZCBhbmltYXRpb25zLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZUFuaW1hdGlvbnMoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbnMgPSB0aGlzLmFuaW1hdGlvbnM7XHJcbiAgICAgICAgbGV0IG51bUFuaW1hdGlvbnMgPSBhbmltYXRpb25zLmxlbmd0aDtcclxuICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgd2hpbGUgKGkgPCBudW1BbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChhbmltYXRpb25zW2ldLnVwZGF0ZShkdCkpIHtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgbnVtQW5pbWF0aW9ucy0tO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGlzIG5vZGUgYW5kIGl0cyBjaGlsZCBub2RlcyByZWN1cnNpdmVseS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZHQgLSBUaGUgdGltZSBpbiBzZWNvbmRzIHNpbmNlIHRoZSBsYXN0IHVwZGF0ZS5cclxuICAgICAqIEByZXR1cm4gQml0IG1hc2sgd2l0aCB1c2VkIGxheWVycy5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHVwZGF0ZUFsbChkdDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBVcGRhdGUgdGhpcyBub2RlIGFuZCBydW4gYW5pbWF0aW9uc1xyXG4gICAgICAgIGNvbnN0IHBvc3RVcGRhdGUgPSB0aGlzLnVwZGF0ZShkdCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25zKGR0KTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzY2VuZSB0cmFuc2Zvcm1hdGlvbiBmb3IgdGhpcyBub2RlXHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XHJcbiAgICAgICAgaWYgKHBhcmVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVUcmFuc2Zvcm1hdGlvbi5zZXRNYXRyaXgocGFyZW50LnNjZW5lVHJhbnNmb3JtYXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lVHJhbnNmb3JtYXRpb24udHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgKERpcmVjdGlvbi5nZXRYKHBhcmVudC5jaGlsZEFuY2hvcikgKyAxKSAvIDIgKiBwYXJlbnQud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAoRGlyZWN0aW9uLmdldFkocGFyZW50LmNoaWxkQW5jaG9yKSArIDEpIC8gMiAqIHBhcmVudC5oZWlnaHRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lVHJhbnNmb3JtYXRpb24ucmVzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2VuZVRyYW5zZm9ybWF0aW9uLnRyYW5zbGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZVRyYW5zZm9ybWF0aW9uLm11bCh0aGlzLnRyYW5zZm9ybWF0aW9uKTtcclxuICAgICAgICB0aGlzLnNjZW5lVHJhbnNmb3JtYXRpb24udHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAtKERpcmVjdGlvbi5nZXRYKHRoaXMuYW5jaG9yKSArIDEpIC8gMiAqIHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgIC0oRGlyZWN0aW9uLmdldFkodGhpcy5hbmNob3IpICsgMSkgLyAyICogdGhpcy5oZWlnaHRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgY2hpbGQgbm9kZXNcclxuICAgICAgICBjb25zdCBsYXllcnMgPSB0aGlzLnVwZGF0ZUNoaWxkcmVuKGR0KSB8IHRoaXMubGF5ZXI7XHJcblxyXG4gICAgICAgIC8vIFdoZW4gdXBkYXRlIG1ldGhvZCByZXR1cm5lZCBhIHBvc3QtdXBkYXRlIGZ1bmN0aW9uIHRoZW4gY2FsbCBpdCBub3dcclxuICAgICAgICBpZiAocG9zdFVwZGF0ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBvc3RVcGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsYXllcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBjaGlsZCBub2RlcyBvZiB0aGlzIG5vZGUgcmVjdXJzaXZlbHkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGR0IC0gVGhlIHRpbWUgaW4gc2Vjb25kcyBzaW5jZSB0aGUgbGFzdCB1cGRhdGUuXHJcbiAgICAgKiBAcmV0dXJuIEJpdCBtYXNrIHdpdGggdXNlZCBsYXllcnMuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCB1cGRhdGVDaGlsZHJlbihkdDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgbGF5ZXJzID0gMDtcclxuICAgICAgICB0aGlzLmZvckVhY2hDaGlsZChjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgIGxheWVycyB8PSBjaGlsZC51cGRhdGVBbGwoZHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBsYXllcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoaXMgbm9kZS4gVGhpcyBpcyBkb25lIGJlZm9yZSB1cGRhdGluZyB0aGUgY2hpbGQgbm9kZXMgb2YgdGhpcyBub2RlLiBUaGUgbWV0aG9kIGNhbiByZXR1cm4gYW4gb3B0aW9uYWxcclxuICAgICAqIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBhZnRlciB0aGUgY2hpbGQgbm9kZXMgYXJlIHVwZGF0ZWQgc28gdGhpcyBjYW4gYmUgdXNlZCBmb3IgcG9zdC11cGRhdGluZyBvcGVyYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkdCAtIFRoZSB0aW1lIGluIHNlY29uZHMgc2luY2UgdGhlIGxhc3QgdXBkYXRlLlxyXG4gICAgICogQHJldHVybiBPcHRpb25hbCBwb3N0LXVwZGF0ZSBmdW5jdGlvbiB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgdXBkYXRpbmcgdGhlIGNoaWxkIG5vZGVzLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHwgKCgpID0+IHZvaWQpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWN1cnNpdmVseSBkcmF3cyB0aGUgYm91bmRzIGZvciB0aGlzIG5vZGUgYW5kIGFsbHMgaXRzIGNoaWxkIG5vZGVzIGFzIGxvbmcgYXMgdGhlIFtbc2hvd0JvdW5kc11dIGZvciB0aGUgbm9kZVxyXG4gICAgICogaXMgc2V0IHRvIHRydWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGN0eCAtIFRoZSByZW5kZXJpbmcgY29udGV4dC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGRyYXdCb3VuZHMoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB0aGlzIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzUG9seWdvbigpO1xyXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lVHJhbnNmb3JtYXRpb24uc2V0Q2FudmFzVHJhbnNmb3JtKGN0eCk7XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgYm91bmRzLmRyYXcoY3R4KTtcclxuICAgICAgICAgICAgY3R4LmNsaXAoKTtcclxuICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDI7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKFs0LCA0XSk7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gTWF0aC5yb3VuZChEYXRlLm5vdygpIC8gMTAwKSAlIDg7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaENoaWxkKGNoaWxkID0+IGNoaWxkLmRyYXdCb3VuZHMoY3R4KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGlzIHNjZW5lIG5vZGUgYW5kIGl0cyBjaGlsZCBub2RlcyByZWN1cnNpdmVseVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjdHggICAgLSBUaGUgcmVuZGVyaW5nIGNvbnRleHQuXHJcbiAgICAgKiBAcGFyYW0gbGF5ZXIgIC0gVGhlIGxheWVyIHRvIHJlbmRlci4gTm9kZXMgd2hpY2ggZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBsYXllciBhcmUgbm90IGRyYXduLlxyXG4gICAgICogQHBhcmFtIHdpZHRoICAtIFRoZSBzY2VuZSB3aWR0aC5cclxuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBUaGUgc2NlbmUgaGVpZ2h0LlxyXG4gICAgICogQHJldHVybiBIaW50cyB3aGljaCBzdWdnZXN0cyBmdXJ0aGVyIGFjdGlvbnMgYWZ0ZXIgZHJhd2luZy5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGRyYXdBbGwoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGxheWVyOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogUG9zdERyYXdIaW50cyB7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgKj0gdGhpcy5nZXRFZmZlY3RpdmVPcGFjaXR5KCk7XHJcbiAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1hdGlvbi50cmFuc2Zvcm1DYW52YXMoY3R4KTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAtKERpcmVjdGlvbi5nZXRYKHRoaXMuYW5jaG9yKSArIDEpIC8gMiAqIHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgIC0oRGlyZWN0aW9uLmdldFkodGhpcy5hbmNob3IpICsgMSkgLyAyICogdGhpcy5oZWlnaHRcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IHBvc3REcmF3ID0gbGF5ZXIgPT09IHRoaXMubGF5ZXIgPyB0aGlzLmRyYXcoY3R4LCB3aWR0aCwgaGVpZ2h0KSA6IG51bGw7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAoRGlyZWN0aW9uLmdldFgodGhpcy5jaGlsZEFuY2hvcikgKyAxKSAvIDIgKiB0aGlzLndpZHRoLFxyXG4gICAgICAgICAgICAoRGlyZWN0aW9uLmdldFkodGhpcy5jaGlsZEFuY2hvcikgKyAxKSAvIDIgKiB0aGlzLmhlaWdodFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IGZsYWdzID0gdGhpcy5kcmF3Q2hpbGRyZW4oY3R4LCBsYXllciwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICBpZiAocG9zdERyYXcgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAocG9zdERyYXcgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGZsYWdzIHw9IFBvc3REcmF3SGludHMuQ09OVElOVUVfRFJBV0lORztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwb3N0RHJhdyAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHBvc3REcmF3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaG93Qm91bmRzID8gZmxhZ3MgfCBQb3N0RHJhd0hpbnRzLkRSQVdfQk9VTkRTIHwgUG9zdERyYXdIaW50cy5DT05USU5VRV9EUkFXSU5HIDogZmxhZ3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyBhbGwgY2hpbGQgbm9kZXMgb2YgdGhpcyBzY2VuZSBub2RlIHJlY3Vyc2l2ZWx5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjdHggICAgLSBUaGUgcmVuZGVyaW5nIGNvbnRleHQuXHJcbiAgICAgKiBAcGFyYW0gbGF5ZXIgIC0gVGhlIGxheWVyIHRvIHJlbmRlci4gTm9kZXMgd2hpY2ggZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBsYXllciBhcmUgbm90IGRyYXduLlxyXG4gICAgICogQHBhcmFtIHdpZHRoICAtIFRoZSBzY2VuZSB3aWR0aC5cclxuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBUaGUgc2NlbmUgaGVpZ2h0LlxyXG4gICAgICogQHJldHVybiBIaW50cyB3aGljaCBzdWdnZXN0cyBmdXJ0aGVyIGFjdGlvbnMgYWZ0ZXIgZHJhd2luZy5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGRyYXdDaGlsZHJlbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgbGF5ZXI6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOlxyXG4gICAgICAgICAgICBQb3N0RHJhd0hpbnRzIHtcclxuICAgICAgICBsZXQgZmxhZ3MgPSAwO1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaENoaWxkKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgZmxhZ3MgfD0gY2hpbGQuZHJhd0FsbChjdHgsIGxheWVyLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZmxhZ3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGlzIG5vZGUuIFRoaXMgaXMgZG9uZSBiZWZvcmUgZHJhd2luZyB0aGUgY2hpbGQgbm9kZXMgb2YgdGhpcyBub2RlLiBUaGUgbWV0aG9kIGNhbiByZXR1cm4gYSBib29sZWFuXHJcbiAgICAgKiB3aGljaCBpbmRpY2F0ZXMgaWYgdGhlIHNjZW5lIGlzIG5vdCBmaW5pc2hlZCB5ZXQgYW5kIG11c3QgYmUgZHJhd24gY29udGludW91c2x5IChmb3IgYW5pbWF0aW9ucyBmb3IgZXhhbXBsZSkuXHJcbiAgICAgKiBUaGUgbWV0aG9kIGNhbiBhbHNvIHJldHVybiBhbiBvcHRpb25hbCBmdW5jdGlvbiB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGNoaWxkIG5vZGVzIGFyZSBkcmF3biBzbyB0aGlzIGNhbiBiZVxyXG4gICAgICogdXNlZCBmb3IgcG9zdC1kcmF3aW5nIG9wZXJhdGlvbnMuIFRoaXMgcG9zdC1kcmF3IGZ1bmN0aW9uIHRoZW4gY2FuIGFnYWluIHJldHVybiBhbiBvcHRpb25hbCBib29sZWFuIHdoaWNoXHJcbiAgICAgKiBpbmRpY2F0ZXMgdGhhdCBzY2VuZSBtdXN0IGJlIGNvbnRpbnVvdXNseSBkcmF3IGl0c2VsZi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3R4ICAgIC0gVGhlIHJlbmRlcmluZyBjb250ZXh0LlxyXG4gICAgICogQHBhcmFtIHdpZHRoICAtIFRoZSBzY2VuZSB3aWR0aC5cclxuICAgICAqIEBwYXJhbSBoZWlnaHQgLSBUaGUgc2NlbmUgaGVpZ2h0LlxyXG4gICAgICogQHJldHVybiBPcHRpb25hbCBib29sZWFuIHRvIGluZGljYXRlIGlmIHNjZW5lIG11c3QgYmUgcmVkcmF3biBjb250aW51b3VzbHkgKERlZmF1bHRzIHRvIGZhbHNlKSBvciBhIHBvc3QtZHJhd1xyXG4gICAgICogICAgICAgICBmdW5jdGlvbiB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgZHJhd2luZyB0aGUgY2hpbGQgbm9kZXMgYW5kIHdoaWNoIGFnYWluIGNhbiByZXR1cm4gYSBmbGFnIGluZGljYXRpbmdcclxuICAgICAqICAgICAgICAgY29udGludW9zIHJlZHJhdy5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTpcclxuICAgICAgICB2b2lkIHwgYm9vbGVhbiB8ICgoKSA9PiB2b2lkIHwgYm9vbGVhbikge31cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFnREE7Ozs7O0FBS0E7QUFDQTtBQW9GQTs7QUFFQTtBQUNBO0FBdEZBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQThCQTs7O0FBR0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFNQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7O0FBYUE7QUFDQTtBQUVBO0FBOWtDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/scene/SceneNode.js\n");
    
    /***/ }),
    
    /***/ "./lib/scene/SceneNodeAnimation.js":
    /*!*****************************************!*\
      !*** ./lib/scene/SceneNodeAnimation.js ***!
      \*****************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SceneNodeAnimation = void 0;\nconst easings_1 = __webpack_require__(/*! ../easings */ \"./lib/easings.js\");\n/**\n * Scene node animation. Instance is created internally within [[SceneNode]] when you call [[SceneNode.animate]].\n *\n * @param T - Optional owner game class.\n */\nclass SceneNodeAnimation {\n    /**\n     * Creates scene node animation for the given scene node and with the given animation arguments. You usually\n     * don't create an instance of this class yourself. Instead you have to use the [[SceneNode.animate]] method.\n     */\n    constructor(sceneNode, { animator, delay = 0, duration = 1, easing = easings_1.linear }) {\n        /** Time elapsed so far within the animation (including delay). */\n        this.elapsed = 0;\n        this.sceneNode = sceneNode;\n        this.animator = animator;\n        this.delay = delay;\n        this.duration = duration;\n        this.easing = easing;\n        this.lifetime = delay + duration;\n    }\n    /**\n     * Updates the animation.\n     *\n     * @param dt - The time in seconds since the last update.\n     */\n    update(dt) {\n        this.elapsed += dt;\n        if (this.elapsed < this.lifetime) {\n            if (this.elapsed > this.delay) {\n                const timeIndex = ((this.elapsed - this.delay) / this.duration) % 1;\n                this.animator(this.sceneNode, this.easing(timeIndex), this.elapsed);\n            }\n            return false;\n        }\n        else {\n            this.animator(this.sceneNode, 1, this.lifetime);\n            return true;\n        }\n    }\n    /**\n     * Finishes the animation by fast-forwarding the animation index to the end of the animation lifetime.\n     */\n    finish() {\n        this.elapsed = this.lifetime;\n    }\n}\nexports.SceneNodeAnimation = SceneNodeAnimation;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmUvU2NlbmVOb2RlQW5pbWF0aW9uLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lL1NjZW5lTm9kZUFuaW1hdGlvbi50cz80NWI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi4vR2FtZVwiO1xyXG5pbXBvcnQgeyBTY2VuZU5vZGUgfSBmcm9tIFwiLi9TY2VuZU5vZGVcIjtcclxuaW1wb3J0IHsgbGluZWFyLCBFYXNpbmcgfSBmcm9tIFwiLi4vZWFzaW5nc1wiO1xyXG5cclxuLyoqXHJcbiAqIEZ1bmN0aW9uIHNpZ25hdHVyZSBmb3IgYSBzY2VuZSBub2RlIGFuaW1hdG9yLiBGdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgc2NlbmUgbm9kZSB0byBhbmltYXRlIGFzIGZpcnN0IHBhcmFtZXRlcixcclxuICogdGhlIGN1cnJlbnQgYW5pbWF0aW9uIHRpbWUgaW5kZXggKDAuMCAtIDEuMCkgYW5kIHRoZSBlbGFwc2VkIHRpbWUgaW4gc2Vjb25kcyBhcyB0aGlyZCBwYXJhbWV0ZXIuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBTY2VuZU5vZGVBbmltYXRvcjxUIGV4dGVuZHMgR2FtZSA9IEdhbWU+ID0gKHNjZW5lTm9kZTogU2NlbmVOb2RlPFQ+LCB2YWx1ZTogbnVtYmVyLFxyXG4gICAgZWxhcHNlZDogbnVtYmVyKSA9PiB2b2lkO1xyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdG9yIGFyZ3VtZW50cyBmb3IgW1tTY2VuZU5vZGVBbmltYXRpb25dXVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBbmltYXRpb25BcmdzPFQgZXh0ZW5kcyBHYW1lID0gR2FtZT4ge1xyXG4gICAgLyoqIFRoZSBhbmltYXRvciBmdW5jdGlvbi4gKi9cclxuICAgIGFuaW1hdG9yOiBTY2VuZU5vZGVBbmltYXRvcjxUPjtcclxuXHJcbiAgICAvKiogTnVtYmVyIG9mIHNlY29uZHMgdG8gd2FpdCB1bnRpbCBhbmltYXRpb25zIHN0YXJ0cy4gRGVmYXVsdHMgdG8gMC4gKi9cclxuICAgIGRlbGF5PzogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBEdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIHNlY29uZHMuIERlZmF1bHRzIHRvIDEuICovXHJcbiAgICBkdXJhdGlvbj86IG51bWJlcjtcclxuXHJcbiAgICAvKiogVGhlIGVhc2luZyBmdW5jdGlvbiB0byB1c2UuIERlZmF1bHRzIHRvIGxpbmVhci4gKi9cclxuICAgIGVhc2luZz86IEVhc2luZztcclxufVxyXG5cclxuLyoqXHJcbiAqIFNjZW5lIG5vZGUgYW5pbWF0aW9uLiBJbnN0YW5jZSBpcyBjcmVhdGVkIGludGVybmFsbHkgd2l0aGluIFtbU2NlbmVOb2RlXV0gd2hlbiB5b3UgY2FsbCBbW1NjZW5lTm9kZS5hbmltYXRlXV0uXHJcbiAqXHJcbiAqIEBwYXJhbSBUIC0gT3B0aW9uYWwgb3duZXIgZ2FtZSBjbGFzcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTY2VuZU5vZGVBbmltYXRpb248VCBleHRlbmRzIEdhbWUgPSBHYW1lPiB7XHJcbiAgICAvKiogVGhlIHNjZW5lIG5vZGUgdG8gYW5pbWF0ZS4gKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgc2NlbmVOb2RlOiBTY2VuZU5vZGU8VD47XHJcblxyXG4gICAgLyoqIFRoZSBhbmltYXRvciBmdW5jdGlvbi4gKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgYW5pbWF0b3I6IFNjZW5lTm9kZUFuaW1hdG9yPFQ+O1xyXG5cclxuICAgIC8qKiBUaGUgZGVsYXkgaW4gc2Vjb25kcyBiZWZvcmUgYWN0dWFsIGFuaW1hdGlvbiBzdGFydHMuICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRlbGF5OiBudW1iZXI7XHJcblxyXG4gICAgLyoqIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIHNlY29uZHMuICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGR1cmF0aW9uOiBudW1iZXI7XHJcblxyXG4gICAgLyoqIFRoZSB0b3RhbCBsaWZldGltZSBvZiB0aGUgYW5pbWF0aW9uIChkZWxheSArIGR1cmF0aW9uKS4gKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbGlmZXRpbWU6IG51bWJlcjtcclxuXHJcbiAgICAvKiogVGhlIGVhc2luZyBmdW5jdGlvbiB0byB1c2UgZm9yIGVhc2luZyB0aGUgYW5pbWF0aW9uLiAqL1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBlYXNpbmc6IEVhc2luZztcclxuXHJcbiAgICAvKiogVGltZSBlbGFwc2VkIHNvIGZhciB3aXRoaW4gdGhlIGFuaW1hdGlvbiAoaW5jbHVkaW5nIGRlbGF5KS4gKi9cclxuICAgIHByaXZhdGUgZWxhcHNlZDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgc2NlbmUgbm9kZSBhbmltYXRpb24gZm9yIHRoZSBnaXZlbiBzY2VuZSBub2RlIGFuZCB3aXRoIHRoZSBnaXZlbiBhbmltYXRpb24gYXJndW1lbnRzLiBZb3UgdXN1YWxseVxyXG4gICAgICogZG9uJ3QgY3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MgeW91cnNlbGYuIEluc3RlYWQgeW91IGhhdmUgdG8gdXNlIHRoZSBbW1NjZW5lTm9kZS5hbmltYXRlXV0gbWV0aG9kLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2NlbmVOb2RlOiBTY2VuZU5vZGU8VD4sIHsgYW5pbWF0b3IsIGRlbGF5ID0gMCwgZHVyYXRpb24gPSAxLCBlYXNpbmcgPSBsaW5lYXIgfTpcclxuICAgICAgICAgICAgQW5pbWF0aW9uQXJnczxUPikge1xyXG4gICAgICAgIHRoaXMuc2NlbmVOb2RlID0gc2NlbmVOb2RlO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0b3IgPSBhbmltYXRvcjtcclxuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG4gICAgICAgIHRoaXMuZWFzaW5nID0gZWFzaW5nO1xyXG4gICAgICAgIHRoaXMubGlmZXRpbWUgPSBkZWxheSArIGR1cmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgYW5pbWF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkdCAtIFRoZSB0aW1lIGluIHNlY29uZHMgc2luY2UgdGhlIGxhc3QgdXBkYXRlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICB0aGlzLmVsYXBzZWQgKz0gZHQ7XHJcbiAgICAgICAgaWYgKHRoaXMuZWxhcHNlZCA8IHRoaXMubGlmZXRpbWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWxhcHNlZCA+IHRoaXMuZGVsYXkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVJbmRleCA9ICgodGhpcy5lbGFwc2VkIC0gdGhpcy5kZWxheSkgLyB0aGlzLmR1cmF0aW9uKSAlIDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdG9yKHRoaXMuc2NlbmVOb2RlLCB0aGlzLmVhc2luZyh0aW1lSW5kZXgpLCB0aGlzLmVsYXBzZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdG9yKHRoaXMuc2NlbmVOb2RlLCAxLCB0aGlzLmxpZmV0aW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmluaXNoZXMgdGhlIGFuaW1hdGlvbiBieSBmYXN0LWZvcndhcmRpbmcgdGhlIGFuaW1hdGlvbiBpbmRleCB0byB0aGUgZW5kIG9mIHRoZSBhbmltYXRpb24gbGlmZXRpbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaW5pc2goKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lbGFwc2VkID0gdGhpcy5saWZldGltZTtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7OztBQUVBO0FBMEJBOzs7O0FBSUE7QUFDQTtBQXNCQTs7O0FBR0E7QUFDQTtBQVBBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTdEQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/scene/SceneNodeAnimation.js\n");
    
    /***/ }),
    
    /***/ "./lib/scene/TextNode.js":
    /*!*******************************!*\
      !*** ./lib/scene/TextNode.js ***!
      \*******************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextNode = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst SceneNode_1 = __webpack_require__(/*! ./SceneNode */ \"./lib/scene/SceneNode.js\");\n/**\n * Scene node for displaying a text with an optional icon left to it.\n *\n * @param T - Optional owner game class.\n */\nclass TextNode extends SceneNode_1.SceneNode {\n    /**\n     * Creates a new scene node displaying the given image.\n     */\n    constructor(_a) {\n        var { font, text = \"\", color = \"white\", outlineColor = null } = _a, args = tslib_1.__rest(_a, [\"font\", \"text\", \"color\", \"outlineColor\"]);\n        super(args);\n        this.font = font;\n        this.text = text;\n        this.color = color;\n        this.outlineColor = outlineColor;\n        this.updateSize();\n    }\n    /**\n     * Returns the displayed text.\n     *\n     * @return The displayed text.\n     */\n    getText() {\n        return this.text;\n    }\n    /**\n     * Sets the displayed text.\n     *\n     * @param text - The text to set.\n     */\n    setText(text) {\n        if (text !== this.text) {\n            this.text = text;\n            this.updateSize();\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns the bitmap font used to draw the text.\n     *\n     * @return The used bitmap font.\n     */\n    getFont() {\n        return this.font;\n    }\n    /**\n     * Sets the bitmap font used to draw the text.\n     *\n     * @param font - The bitmap font to use.\n     */\n    setFont(font) {\n        if (font !== this.font) {\n            this.font = font;\n            this.updateSize();\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns the text color.\n     *\n     * @return The text color.\n     */\n    getColor() {\n        return this.color;\n    }\n    /**\n     * Sets the text color.\n     *\n     * @param color - The text color to set.\n     */\n    setColor(color) {\n        if (color !== this.color) {\n            this.color = color;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Returns the text outline color. Null if none.\n     *\n     * @return The text outline color. Null if none.\n     */\n    getOutlineColor() {\n        return this.outlineColor;\n    }\n    /**\n     * Sets the text outline color.\n     *\n     * @param outlineColor - The text outline color to set.\n     */\n    setOutlineColor(outlineColor) {\n        if (outlineColor !== this.outlineColor) {\n            this.outlineColor = outlineColor;\n            this.invalidate();\n        }\n        return this;\n    }\n    /**\n     * Updates the node size according to the text measurements.\n     */\n    updateSize() {\n        const size = this.font.measureText(this.text);\n        this.resizeTo(size.width, size.height);\n    }\n    /** @inheritDoc */\n    draw(ctx) {\n        if (this.outlineColor != null) {\n            this.font.drawTextWithOutline(ctx, this.text, 0, 0, this.color, this.outlineColor);\n        }\n        else {\n            this.font.drawText(ctx, this.text, 0, 0, this.color);\n        }\n    }\n}\nexports.TextNode = TextNode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmUvVGV4dE5vZGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NlbmUvVGV4dE5vZGUudHM/YzM5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYW1lIH0gZnJvbSBcIi4uL0dhbWVcIjtcclxuaW1wb3J0IHsgU2NlbmVOb2RlLCBTY2VuZU5vZGVBcmdzIH0gZnJvbSBcIi4vU2NlbmVOb2RlXCI7XHJcbmltcG9ydCB7IEJpdG1hcEZvbnQgfSBmcm9tIFwiLi4vQml0bWFwRm9udFwiO1xyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdG9yIGFyZ3VtZW50cyBmb3IgW1tUZXh0Tm9kZV1dLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUZXh0Tm9kZUFyZ3MgZXh0ZW5kcyBTY2VuZU5vZGVBcmdzIHtcclxuICAgIC8qKiBUaGUgaW5pdGlhbCBmb250IHVzZWQgdG8gZHJhdyB0aGUgdGV4dC4gKi9cclxuICAgIGZvbnQ6IEJpdG1hcEZvbnQ7XHJcblxyXG4gICAgLyoqIE9wdGlvbmFsIGluaXRpYWwgdGV4dCB0byBkcmF3LiBEZWZhdWx0cyB0byBlbXB0eSBzdHJpbmcuICovXHJcbiAgICB0ZXh0Pzogc3RyaW5nO1xyXG5cclxuICAgIC8qKiBPcHRpb25hbCBpbml0aWFsIHRleHQgY29sb3IuIERlZmF1bHRzIHRvIFwid2hpdGVcIi4gKi9cclxuICAgIGNvbG9yPzogc3RyaW5nO1xyXG5cclxuICAgIC8qKiBPcHRpb25hbCBpbml0aWFsIG91dGxpbmUgdGV4dCBjb2xvci4gRGVmYXVsdCBpcyBudWxsIHdoaWNoIG1lYW5zIG5vIG91dGxpbmUgaXMgZHJhd24uICovXHJcbiAgICBvdXRsaW5lQ29sb3I/OiBzdHJpbmcgfCBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogU2NlbmUgbm9kZSBmb3IgZGlzcGxheWluZyBhIHRleHQgd2l0aCBhbiBvcHRpb25hbCBpY29uIGxlZnQgdG8gaXQuXHJcbiAqXHJcbiAqIEBwYXJhbSBUIC0gT3B0aW9uYWwgb3duZXIgZ2FtZSBjbGFzcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUZXh0Tm9kZTxUIGV4dGVuZHMgR2FtZSA9IEdhbWU+IGV4dGVuZHMgU2NlbmVOb2RlPFQ+IHtcclxuICAgIC8qKiBUaGUgZm9udCB1c2VkIHRvIGRyYXcgdGhlIHRleHQuICovXHJcbiAgICBwcml2YXRlIGZvbnQ6IEJpdG1hcEZvbnQ7XHJcblxyXG4gICAgLyoqIFRoZSB0ZXh0IHRvIGRyYXcuICovXHJcbiAgICBwcml2YXRlIHRleHQ6IHN0cmluZztcclxuXHJcbiAgICAvKiogVGhlIHRleHQgY29sb3IuICovXHJcbiAgICBwcml2YXRlIGNvbG9yOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIE9wdGlvbmFsIG91dGxpbmUgY29sb3IuICovXHJcbiAgICBwcml2YXRlIG91dGxpbmVDb2xvcjogc3RyaW5nIHwgbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgc2NlbmUgbm9kZSBkaXNwbGF5aW5nIHRoZSBnaXZlbiBpbWFnZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHsgZm9udCwgdGV4dCA9IFwiXCIsIGNvbG9yID0gXCJ3aGl0ZVwiLCBvdXRsaW5lQ29sb3IgPSBudWxsLCAuLi5hcmdzIH0gOiBUZXh0Tm9kZUFyZ3MpIHtcclxuICAgICAgICBzdXBlcihhcmdzKTtcclxuICAgICAgICB0aGlzLmZvbnQgPSBmb250O1xyXG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMub3V0bGluZUNvbG9yID0gb3V0bGluZUNvbG9yO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZGlzcGxheWVkIHRleHQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgZGlzcGxheWVkIHRleHQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRUZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGRpc3BsYXllZCB0ZXh0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0ZXh0IC0gVGhlIHRleHQgdG8gc2V0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VGV4dCh0ZXh0OiBzdHJpbmcpOiB0aGlzIHtcclxuICAgICAgICBpZiAodGV4dCAhPT0gdGhpcy50ZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBiaXRtYXAgZm9udCB1c2VkIHRvIGRyYXcgdGhlIHRleHQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgdXNlZCBiaXRtYXAgZm9udC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEZvbnQoKTogQml0bWFwRm9udCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9udDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGJpdG1hcCBmb250IHVzZWQgdG8gZHJhdyB0aGUgdGV4dC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZm9udCAtIFRoZSBiaXRtYXAgZm9udCB0byB1c2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRGb250KGZvbnQ6IEJpdG1hcEZvbnQpOiB0aGlzIHtcclxuICAgICAgICBpZiAoZm9udCAhPT0gdGhpcy5mb250KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9udCA9IGZvbnQ7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB0ZXh0IGNvbG9yLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIHRleHQgY29sb3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDb2xvcigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdGV4dCBjb2xvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29sb3IgLSBUaGUgdGV4dCBjb2xvciB0byBzZXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRDb2xvcihjb2xvcjogc3RyaW5nKTogdGhpcyB7XHJcbiAgICAgICAgaWYgKGNvbG9yICE9PSB0aGlzLmNvbG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdGV4dCBvdXRsaW5lIGNvbG9yLiBOdWxsIGlmIG5vbmUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgdGV4dCBvdXRsaW5lIGNvbG9yLiBOdWxsIGlmIG5vbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRPdXRsaW5lQ29sb3IoKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0bGluZUNvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdGV4dCBvdXRsaW5lIGNvbG9yLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvdXRsaW5lQ29sb3IgLSBUaGUgdGV4dCBvdXRsaW5lIGNvbG9yIHRvIHNldC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldE91dGxpbmVDb2xvcihvdXRsaW5lQ29sb3I6IHN0cmluZyB8IG51bGwpOiB0aGlzIHtcclxuICAgICAgICBpZiAob3V0bGluZUNvbG9yICE9PSB0aGlzLm91dGxpbmVDb2xvcikge1xyXG4gICAgICAgICAgICB0aGlzLm91dGxpbmVDb2xvciA9IG91dGxpbmVDb2xvcjtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgbm9kZSBzaXplIGFjY29yZGluZyB0byB0aGUgdGV4dCBtZWFzdXJlbWVudHMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlU2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBzaXplID0gdGhpcy5mb250Lm1lYXN1cmVUZXh0KHRoaXMudGV4dCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVUbyhzaXplLndpZHRoLCBzaXplLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEBpbmhlcml0RG9jICovXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm91dGxpbmVDb2xvciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9udC5kcmF3VGV4dFdpdGhPdXRsaW5lKGN0eCwgdGhpcy50ZXh0LCAwLCAwLCB0aGlzLmNvbG9yLCB0aGlzLm91dGxpbmVDb2xvcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5mb250LmRyYXdUZXh0KGN0eCwgdGhpcy50ZXh0LCAwLCAwLCB0aGlzLmNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQ0E7QUFvQkE7Ozs7QUFJQTtBQUNBO0FBYUE7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5JQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/scene/TextNode.js\n");
    
    /***/ }),
    
    /***/ "./lib/scenes/CharacterSelectionScene.js":
    /*!***********************************************!*\
      !*** ./lib/scenes/CharacterSelectionScene.js ***!
      \***********************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CharacterSelectionScene = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst BitmapFont_1 = __webpack_require__(/*! ../BitmapFont */ \"./lib/BitmapFont.js\");\nconst Campaign_1 = __webpack_require__(/*! ../Campaign */ \"./lib/Campaign.js\");\nconst ControllerFamily_1 = __webpack_require__(/*! ../input/ControllerFamily */ \"./lib/input/ControllerFamily.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst easings_1 = __webpack_require__(/*! ../easings */ \"./lib/easings.js\");\nconst GameScene_1 = __webpack_require__(/*! ./GameScene */ \"./lib/scenes/GameScene.js\");\nconst Menu_1 = __webpack_require__(/*! ../Menu */ \"./lib/Menu.js\");\nconst Scene_1 = __webpack_require__(/*! ../Scene */ \"./lib/Scene.js\");\nconst SlideTransition_1 = __webpack_require__(/*! ../transitions/SlideTransition */ \"./lib/transitions/SlideTransition.js\");\nconst TitleScene_1 = __webpack_require__(/*! ./TitleScene */ \"./lib/scenes/TitleScene.js\");\nconst ImageNode_1 = __webpack_require__(/*! ../scene/ImageNode */ \"./lib/scene/ImageNode.js\");\nconst Direction_1 = __webpack_require__(/*! ../geom/Direction */ \"./lib/geom/Direction.js\");\nconst TextNode_1 = __webpack_require__(/*! ../scene/TextNode */ \"./lib/scene/TextNode.js\");\nconst ControlTooltipNode_1 = __webpack_require__(/*! ../scene/ControlTooltipNode */ \"./lib/scene/ControlTooltipNode.js\");\nconst AsepriteNode_1 = __webpack_require__(/*! ../scene/AsepriteNode */ \"./lib/scene/AsepriteNode.js\");\nvar MenuItemKey;\n(function (MenuItemKey) {\n    MenuItemKey[\"CHARACTER\"] = \"character\";\n    MenuItemKey[\"VOICE\"] = \"voice\";\n    MenuItemKey[\"START\"] = \"start\";\n})(MenuItemKey || (MenuItemKey = {}));\nconst menuItemX = 12;\nconst characterMenuItemY = 20;\nconst voiceMenuItemY = 50;\nconst startMenuItemY = 124;\nconst selectionItemsYDistance = 12;\nconst selectionItemsXDistance = 12;\nclass CharacterSelectionScene extends Scene_1.Scene {\n    activate() {\n        this.input.onButtonDown.connect(this.handleButtonDown, this);\n        this.menu.onActivated.connect(this.handleMenuAction, this);\n    }\n    deactivate() {\n        this.input.onButtonDown.disconnect(this.handleButtonDown, this);\n        this.menu.onActivated.disconnect(this.handleMenuAction, this);\n    }\n    handleMenuAction(buttonId) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            switch (buttonId) {\n                case MenuItemKey.CHARACTER:\n                    this.game.campaign.toggleCharacterAsset();\n                    this.updateSelection();\n                    break;\n                case MenuItemKey.VOICE:\n                    this.game.campaign.toggleVoiceAsset();\n                    this.updateSelection();\n                    CharacterSelectionScene.voices[this.game.campaign.selectedVoice].play();\n                    break;\n                case MenuItemKey.START:\n                    yield this.game.scenes.popScene({ noTransition: false });\n                    TitleScene_1.TitleScene.music.stop();\n                    this.game.scenes.setScene(GameScene_1.GameScene);\n            }\n        });\n    }\n    handleButtonDown(event) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (event.isAbort) {\n                this.scenes.popScene();\n            }\n            else if (event.isConfirm) {\n                this.menu.executeAction();\n            }\n            else if (event.isMenuUp) {\n                this.menu.prev();\n            }\n            else if (event.isMenuDown) {\n                this.menu.next();\n            }\n        });\n    }\n    updateSelection() {\n        if (this.game.campaign.selectedCharacter === Campaign_1.CharacterAsset.MALE) {\n            this.variant1.setColor(\"grey\").setOutlineColor(null);\n            this.variant2.setColor(\"white\").setOutlineColor(\"black\");\n        }\n        else {\n            this.variant1.setColor(\"white\").setOutlineColor(\"black\");\n            this.variant2.setColor(\"grey\").setOutlineColor(null);\n        }\n        if (this.game.campaign.selectedVoice === Campaign_1.VoiceAsset.MALE) {\n            this.voice1.setColor(\"grey\").setOutlineColor(null);\n            this.voice2.setColor(\"white\").setOutlineColor(\"black\");\n        }\n        else {\n            this.voice1.setColor(\"white\").setOutlineColor(\"black\");\n            this.voice2.setColor(\"grey\").setOutlineColor(null);\n        }\n        this.character.setAseprite(CharacterSelectionScene.playerSprites[this.game.campaign.selectedCharacter]);\n    }\n    setup() {\n        this.setBackgroundStyle(\"rgba(0, 0, 0, 0.8)\");\n        this.zIndex = 2;\n        this.inTransition = new SlideTransition_1.SlideTransition({ duration: 0.5, direction: \"top\", easing: easings_1.easeOutCubic });\n        this.outTransition = new SlideTransition_1.SlideTransition({ duration: 0.25 });\n        const charSelectionTextY = characterMenuItemY + selectionItemsYDistance;\n        const charSelectionTextX = menuItemX + selectionItemsXDistance;\n        const charSelectionTextGap = 55;\n        const voiceSelectionTextY = voiceMenuItemY + selectionItemsYDistance;\n        const voiceSelectionTextX = menuItemX + selectionItemsXDistance;\n        const voiceSelectionTextGap = 55;\n        const character = this.game.campaign.selectedCharacter;\n        const panel = new ImageNode_1.ImageNode({\n            image: CharacterSelectionScene.panelImage,\n            childAnchor: Direction_1.Direction.TOP_LEFT,\n            x: this.game.width >> 1,\n            y: (this.game.height >> 1) - 16\n        }).appendChild(new TextNode_1.TextNode({\n            font: CharacterSelectionScene.headlineFont,\n            text: \"CHARACTER CUSTOMIZATION\",\n            anchor: Direction_1.Direction.BOTTOM_LEFT,\n            y: -5,\n            color: \"white\"\n        })).appendChild(this.variant1 = new TextNode_1.TextNode({\n            font: CharacterSelectionScene.font,\n            text: \"Variant 1\",\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x: charSelectionTextX,\n            y: charSelectionTextY,\n            color: \"grey\"\n        })).appendChild(this.variant2 = new TextNode_1.TextNode({\n            font: CharacterSelectionScene.font,\n            text: \"Variant 2\",\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x: charSelectionTextX + charSelectionTextGap,\n            y: charSelectionTextY,\n            color: \"grey\"\n        })).appendChild(this.voice1 = new TextNode_1.TextNode({\n            font: CharacterSelectionScene.font,\n            text: \"High Pitch\",\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x: voiceSelectionTextX,\n            y: voiceSelectionTextY,\n            color: \"grey\"\n        })).appendChild(this.voice2 = new TextNode_1.TextNode({\n            font: CharacterSelectionScene.font,\n            text: \"Low Pitch\",\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x: voiceSelectionTextX + voiceSelectionTextGap,\n            y: voiceSelectionTextY,\n            color: \"grey\"\n        })).appendChild(this.character = new AsepriteNode_1.AsepriteNode({\n            aseprite: CharacterSelectionScene.playerSprites[character],\n            tag: \"idle\",\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x: 213,\n            y: 46\n        })).appendChild(new ControlTooltipNode_1.ControlTooltipNode({\n            control: ControllerFamily_1.ControllerAnimationTags.CONFIRM,\n            label: \"Select or Change\",\n            anchor: Direction_1.Direction.TOP_LEFT,\n            y: CharacterSelectionScene.panelImage.height + 2\n        })).appendChild(new ControlTooltipNode_1.ControlTooltipNode({\n            control: ControllerFamily_1.ControllerAnimationTags.BACK,\n            label: \"Back\",\n            anchor: Direction_1.Direction.TOP_LEFT,\n            y: CharacterSelectionScene.panelImage.height + 18\n        })).appendTo(this.rootNode);\n        this.menu = new Menu_1.MenuList().setItems(new Menu_1.MenuItem(MenuItemKey.CHARACTER, \"Character:\", CharacterSelectionScene.font, \"black\", menuItemX, characterMenuItemY), new Menu_1.MenuItem(MenuItemKey.VOICE, \"Voice:\", CharacterSelectionScene.font, \"black\", menuItemX, voiceMenuItemY), new Menu_1.MenuItem(MenuItemKey.START, \"Start Game\", CharacterSelectionScene.font, \"black\", menuItemX, startMenuItemY)).appendTo(panel);\n        this.updateSelection();\n    }\n    cleanup() {\n        this.rootNode.clear();\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(constants_1.DIALOG_FONT),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], CharacterSelectionScene, \"font\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"fonts/credits.font.json\"),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], CharacterSelectionScene, \"headlineFont\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"sprites/pc/female.aseprite.json\",\n        \"sprites/pc/male.aseprite.json\"\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], CharacterSelectionScene, \"playerSprites\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"sounds/jumping/jumping_female.mp3\",\n        \"sounds/jumping/jumping.mp3\"\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], CharacterSelectionScene, \"voices\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"images/panel.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], CharacterSelectionScene, \"panelImage\", void 0);\nexports.CharacterSelectionScene = CharacterSelectionScene;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmVzL0NoYXJhY3RlclNlbGVjdGlvblNjZW5lLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lcy9DaGFyYWN0ZXJTZWxlY3Rpb25TY2VuZS50cz85OTJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzZXByaXRlIH0gZnJvbSBcIi4uL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IGFzc2V0IH0gZnJvbSBcIi4uL0Fzc2V0c1wiO1xyXG5pbXBvcnQgeyBCaXRtYXBGb250IH0gZnJvbSBcIi4uL0JpdG1hcEZvbnRcIjtcclxuaW1wb3J0IHsgQ2hhcmFjdGVyQXNzZXQsIFZvaWNlQXNzZXQgfSBmcm9tIFwiLi4vQ2FtcGFpZ25cIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckFuaW1hdGlvblRhZ3MgfSBmcm9tIFwiLi4vaW5wdXQvQ29udHJvbGxlckZhbWlseVwiO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyRXZlbnQgfSBmcm9tIFwiLi4vaW5wdXQvQ29udHJvbGxlckV2ZW50XCI7XHJcbmltcG9ydCB7IERJQUxPR19GT05UIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBlYXNlT3V0Q3ViaWMgfSBmcm9tIFwiLi4vZWFzaW5nc1wiO1xyXG5pbXBvcnQgeyBGcmllbmRseUZpcmUgfSBmcm9tIFwiLi4vRnJpZW5kbHlGaXJlXCI7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gXCIuL0dhbWVTY2VuZVwiO1xyXG5pbXBvcnQgeyBNZW51SXRlbSwgTWVudUxpc3QgfSBmcm9tIFwiLi4vTWVudVwiO1xyXG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuLi9TY2VuZVwiO1xyXG5pbXBvcnQgeyBTbGlkZVRyYW5zaXRpb24gfSBmcm9tIFwiLi4vdHJhbnNpdGlvbnMvU2xpZGVUcmFuc2l0aW9uXCI7XHJcbmltcG9ydCB7IFRpdGxlU2NlbmUgfSBmcm9tIFwiLi9UaXRsZVNjZW5lXCI7XHJcbmltcG9ydCB7IEltYWdlTm9kZSB9IGZyb20gXCIuLi9zY2VuZS9JbWFnZU5vZGVcIjtcclxuaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSBcIi4uL2dlb20vRGlyZWN0aW9uXCI7XHJcbmltcG9ydCB7IFRleHROb2RlIH0gZnJvbSBcIi4uL3NjZW5lL1RleHROb2RlXCI7XHJcbmltcG9ydCB7IENvbnRyb2xUb29sdGlwTm9kZSB9IGZyb20gXCIuLi9zY2VuZS9Db250cm9sVG9vbHRpcE5vZGVcIjtcclxuaW1wb3J0IHsgQXNlcHJpdGVOb2RlIH0gZnJvbSBcIi4uL3NjZW5lL0FzZXByaXRlTm9kZVwiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuLi9Tb3VuZFwiO1xyXG5cclxuZW51bSBNZW51SXRlbUtleSB7XHJcbiAgICBDSEFSQUNURVIgPSBcImNoYXJhY3RlclwiLFxyXG4gICAgVk9JQ0UgPSBcInZvaWNlXCIsXHJcbiAgICBTVEFSVCA9IFwic3RhcnRcIlxyXG59XHJcblxyXG5jb25zdCBtZW51SXRlbVggPSAxMjtcclxuY29uc3QgY2hhcmFjdGVyTWVudUl0ZW1ZID0gMjA7XHJcbmNvbnN0IHZvaWNlTWVudUl0ZW1ZID0gNTA7XHJcbmNvbnN0IHN0YXJ0TWVudUl0ZW1ZID0gMTI0O1xyXG5jb25zdCBzZWxlY3Rpb25JdGVtc1lEaXN0YW5jZSA9IDEyO1xyXG5jb25zdCBzZWxlY3Rpb25JdGVtc1hEaXN0YW5jZSA9IDEyO1xyXG5cclxuZXhwb3J0IGNsYXNzIENoYXJhY3RlclNlbGVjdGlvblNjZW5lIGV4dGVuZHMgU2NlbmU8RnJpZW5kbHlGaXJlPiB7XHJcbiAgICBAYXNzZXQoRElBTE9HX0ZPTlQpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBmb250OiBCaXRtYXBGb250O1xyXG5cclxuICAgIEBhc3NldChcImZvbnRzL2NyZWRpdHMuZm9udC5qc29uXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBoZWFkbGluZUZvbnQ6IEJpdG1hcEZvbnQ7XHJcblxyXG4gICAgQGFzc2V0KFtcclxuICAgICAgICBcInNwcml0ZXMvcGMvZmVtYWxlLmFzZXByaXRlLmpzb25cIixcclxuICAgICAgICBcInNwcml0ZXMvcGMvbWFsZS5hc2Vwcml0ZS5qc29uXCJcclxuICAgIF0pXHJcbiAgICBwdWJsaWMgc3RhdGljIHBsYXllclNwcml0ZXM6IEFzZXByaXRlW107XHJcblxyXG4gICAgQGFzc2V0KFtcclxuICAgICAgICBcInNvdW5kcy9qdW1waW5nL2p1bXBpbmdfZmVtYWxlLm1wM1wiLFxyXG4gICAgICAgIFwic291bmRzL2p1bXBpbmcvanVtcGluZy5tcDNcIlxyXG4gICAgXSlcclxuICAgIHByaXZhdGUgc3RhdGljIHZvaWNlczogU291bmRbXTtcclxuXHJcbiAgICBAYXNzZXQoXCJpbWFnZXMvcGFuZWwucG5nXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBwYW5lbEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuICAgIHByaXZhdGUgbWVudSE6IE1lbnVMaXN0O1xyXG4gICAgcHJpdmF0ZSB2YXJpYW50MSE6IFRleHROb2RlO1xyXG4gICAgcHJpdmF0ZSB2YXJpYW50MiE6IFRleHROb2RlO1xyXG4gICAgcHJpdmF0ZSB2b2ljZTEhOiBUZXh0Tm9kZTtcclxuICAgIHByaXZhdGUgdm9pY2UyITogVGV4dE5vZGU7XHJcbiAgICBwcml2YXRlIGNoYXJhY3RlciE6IEFzZXByaXRlTm9kZTtcclxuXHJcbiAgICBwdWJsaWMgYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5vbkJ1dHRvbkRvd24uY29ubmVjdCh0aGlzLmhhbmRsZUJ1dHRvbkRvd24sIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubWVudS5vbkFjdGl2YXRlZC5jb25uZWN0KHRoaXMuaGFuZGxlTWVudUFjdGlvbiwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5vbkJ1dHRvbkRvd24uZGlzY29ubmVjdCh0aGlzLmhhbmRsZUJ1dHRvbkRvd24sIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubWVudS5vbkFjdGl2YXRlZC5kaXNjb25uZWN0KHRoaXMuaGFuZGxlTWVudUFjdGlvbiwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGhhbmRsZU1lbnVBY3Rpb24oYnV0dG9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHN3aXRjaCAoYnV0dG9uSWQpIHtcclxuICAgICAgICAgICAgY2FzZSBNZW51SXRlbUtleS5DSEFSQUNURVI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuY2FtcGFpZ24udG9nZ2xlQ2hhcmFjdGVyQXNzZXQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBNZW51SXRlbUtleS5WT0lDRTpcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5jYW1wYWlnbi50b2dnbGVWb2ljZUFzc2V0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgQ2hhcmFjdGVyU2VsZWN0aW9uU2NlbmUudm9pY2VzW3RoaXMuZ2FtZS5jYW1wYWlnbi5zZWxlY3RlZFZvaWNlXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBNZW51SXRlbUtleS5TVEFSVDpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2FtZS5zY2VuZXMucG9wU2NlbmUoeyBub1RyYW5zaXRpb246IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgVGl0bGVTY2VuZS5tdXNpYy5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuc2NlbmVzLnNldFNjZW5lKEdhbWVTY2VuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQnV0dG9uRG93bihldmVudDogQ29udHJvbGxlckV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmlzQWJvcnQpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZXMucG9wU2NlbmUoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmlzQ29uZmlybSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lbnUuZXhlY3V0ZUFjdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNNZW51VXApIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51LnByZXYoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmlzTWVudURvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51Lm5leHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVTZWxlY3Rpb24oKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5jYW1wYWlnbi5zZWxlY3RlZENoYXJhY3RlciA9PT0gQ2hhcmFjdGVyQXNzZXQuTUFMRSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhcmlhbnQxLnNldENvbG9yKFwiZ3JleVwiKS5zZXRPdXRsaW5lQ29sb3IobnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMudmFyaWFudDIuc2V0Q29sb3IoXCJ3aGl0ZVwiKS5zZXRPdXRsaW5lQ29sb3IoXCJibGFja1wiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZhcmlhbnQxLnNldENvbG9yKFwid2hpdGVcIikuc2V0T3V0bGluZUNvbG9yKFwiYmxhY2tcIik7XHJcbiAgICAgICAgICAgIHRoaXMudmFyaWFudDIuc2V0Q29sb3IoXCJncmV5XCIpLnNldE91dGxpbmVDb2xvcihudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdhbWUuY2FtcGFpZ24uc2VsZWN0ZWRWb2ljZSA9PT0gVm9pY2VBc3NldC5NQUxFKSB7XHJcbiAgICAgICAgICAgIHRoaXMudm9pY2UxLnNldENvbG9yKFwiZ3JleVwiKS5zZXRPdXRsaW5lQ29sb3IobnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMudm9pY2UyLnNldENvbG9yKFwid2hpdGVcIikuc2V0T3V0bGluZUNvbG9yKFwiYmxhY2tcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52b2ljZTEuc2V0Q29sb3IoXCJ3aGl0ZVwiKS5zZXRPdXRsaW5lQ29sb3IoXCJibGFja1wiKTtcclxuICAgICAgICAgICAgdGhpcy52b2ljZTIuc2V0Q29sb3IoXCJncmV5XCIpLnNldE91dGxpbmVDb2xvcihudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hhcmFjdGVyLnNldEFzZXByaXRlKENoYXJhY3RlclNlbGVjdGlvblNjZW5lLnBsYXllclNwcml0ZXNbdGhpcy5nYW1lLmNhbXBhaWduLnNlbGVjdGVkQ2hhcmFjdGVyXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldHVwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0QmFja2dyb3VuZFN0eWxlKFwicmdiYSgwLCAwLCAwLCAwLjgpXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnpJbmRleCA9IDI7XHJcbiAgICAgICAgdGhpcy5pblRyYW5zaXRpb24gPSBuZXcgU2xpZGVUcmFuc2l0aW9uKHsgZHVyYXRpb246IDAuNSwgZGlyZWN0aW9uOiBcInRvcFwiLCBlYXNpbmc6IGVhc2VPdXRDdWJpYyB9KTtcclxuICAgICAgICB0aGlzLm91dFRyYW5zaXRpb24gPSBuZXcgU2xpZGVUcmFuc2l0aW9uKHsgZHVyYXRpb246IDAuMjUgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoYXJTZWxlY3Rpb25UZXh0WSA9IGNoYXJhY3Rlck1lbnVJdGVtWSArIHNlbGVjdGlvbkl0ZW1zWURpc3RhbmNlO1xyXG4gICAgICAgIGNvbnN0IGNoYXJTZWxlY3Rpb25UZXh0WCA9IG1lbnVJdGVtWCArIHNlbGVjdGlvbkl0ZW1zWERpc3RhbmNlO1xyXG4gICAgICAgIGNvbnN0IGNoYXJTZWxlY3Rpb25UZXh0R2FwID0gNTU7XHJcblxyXG4gICAgICAgIGNvbnN0IHZvaWNlU2VsZWN0aW9uVGV4dFkgPSB2b2ljZU1lbnVJdGVtWSArIHNlbGVjdGlvbkl0ZW1zWURpc3RhbmNlO1xyXG4gICAgICAgIGNvbnN0IHZvaWNlU2VsZWN0aW9uVGV4dFggPSBtZW51SXRlbVggKyBzZWxlY3Rpb25JdGVtc1hEaXN0YW5jZTtcclxuICAgICAgICBjb25zdCB2b2ljZVNlbGVjdGlvblRleHRHYXAgPSA1NTtcclxuXHJcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdGhpcy5nYW1lLmNhbXBhaWduLnNlbGVjdGVkQ2hhcmFjdGVyO1xyXG5cclxuICAgICAgICBjb25zdCBwYW5lbCA9IG5ldyBJbWFnZU5vZGUoe1xyXG4gICAgICAgICAgICBpbWFnZTogQ2hhcmFjdGVyU2VsZWN0aW9uU2NlbmUucGFuZWxJbWFnZSxcclxuICAgICAgICAgICAgY2hpbGRBbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCxcclxuICAgICAgICAgICAgeDogdGhpcy5nYW1lLndpZHRoID4+IDEsXHJcbiAgICAgICAgICAgIHk6ICh0aGlzLmdhbWUuaGVpZ2h0ID4+IDEpIC0gMTZcclxuICAgICAgICB9KS5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgbmV3IFRleHROb2RlKHtcclxuICAgICAgICAgICAgICAgIGZvbnQ6IENoYXJhY3RlclNlbGVjdGlvblNjZW5lLmhlYWRsaW5lRm9udCxcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiQ0hBUkFDVEVSIENVU1RPTUlaQVRJT05cIixcclxuICAgICAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLkJPVFRPTV9MRUZULFxyXG4gICAgICAgICAgICAgICAgeTogLTUsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgdGhpcy52YXJpYW50MSA9IG5ldyBUZXh0Tm9kZSh7XHJcbiAgICAgICAgICAgICAgICBmb250OiBDaGFyYWN0ZXJTZWxlY3Rpb25TY2VuZS5mb250LFxyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJWYXJpYW50IDFcIixcclxuICAgICAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLlRPUF9MRUZULFxyXG4gICAgICAgICAgICAgICAgeDogY2hhclNlbGVjdGlvblRleHRYLFxyXG4gICAgICAgICAgICAgICAgeTogY2hhclNlbGVjdGlvblRleHRZLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiZ3JleVwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgdGhpcy52YXJpYW50MiA9IG5ldyBUZXh0Tm9kZSh7XHJcbiAgICAgICAgICAgICAgICBmb250OiBDaGFyYWN0ZXJTZWxlY3Rpb25TY2VuZS5mb250LFxyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJWYXJpYW50IDJcIixcclxuICAgICAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLlRPUF9MRUZULFxyXG4gICAgICAgICAgICAgICAgeDogY2hhclNlbGVjdGlvblRleHRYICsgY2hhclNlbGVjdGlvblRleHRHYXAsXHJcbiAgICAgICAgICAgICAgICB5OiBjaGFyU2VsZWN0aW9uVGV4dFksXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJncmV5XCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApLmFwcGVuZENoaWxkKFxyXG4gICAgICAgICAgICB0aGlzLnZvaWNlMSA9IG5ldyBUZXh0Tm9kZSh7XHJcbiAgICAgICAgICAgICAgICBmb250OiBDaGFyYWN0ZXJTZWxlY3Rpb25TY2VuZS5mb250LFxyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJIaWdoIFBpdGNoXCIsXHJcbiAgICAgICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCxcclxuICAgICAgICAgICAgICAgIHg6IHZvaWNlU2VsZWN0aW9uVGV4dFgsXHJcbiAgICAgICAgICAgICAgICB5OiB2b2ljZVNlbGVjdGlvblRleHRZLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiZ3JleVwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgdGhpcy52b2ljZTIgPSBuZXcgVGV4dE5vZGUoe1xyXG4gICAgICAgICAgICAgICAgZm9udDogQ2hhcmFjdGVyU2VsZWN0aW9uU2NlbmUuZm9udCxcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiTG93IFBpdGNoXCIsXHJcbiAgICAgICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCxcclxuICAgICAgICAgICAgICAgIHg6IHZvaWNlU2VsZWN0aW9uVGV4dFggKyB2b2ljZVNlbGVjdGlvblRleHRHYXAsXHJcbiAgICAgICAgICAgICAgICB5OiB2b2ljZVNlbGVjdGlvblRleHRZLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiZ3JleVwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXIgPSBuZXcgQXNlcHJpdGVOb2RlKHtcclxuICAgICAgICAgICAgICAgIGFzZXByaXRlOiBDaGFyYWN0ZXJTZWxlY3Rpb25TY2VuZS5wbGF5ZXJTcHJpdGVzW2NoYXJhY3Rlcl0sXHJcbiAgICAgICAgICAgICAgICB0YWc6IFwiaWRsZVwiLFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBEaXJlY3Rpb24uVE9QX0xFRlQsXHJcbiAgICAgICAgICAgICAgICB4OiAyMTMsXHJcbiAgICAgICAgICAgICAgICB5OiA0NlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICkuYXBwZW5kQ2hpbGQoXHJcbiAgICAgICAgICAgIG5ldyBDb250cm9sVG9vbHRpcE5vZGUoe1xyXG4gICAgICAgICAgICAgICAgY29udHJvbDogQ29udHJvbGxlckFuaW1hdGlvblRhZ3MuQ09ORklSTSxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIlNlbGVjdCBvciBDaGFuZ2VcIixcclxuICAgICAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLlRPUF9MRUZULFxyXG4gICAgICAgICAgICAgICAgeTogQ2hhcmFjdGVyU2VsZWN0aW9uU2NlbmUucGFuZWxJbWFnZS5oZWlnaHQgKyAyXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgbmV3IENvbnRyb2xUb29sdGlwTm9kZSh7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sOiBDb250cm9sbGVyQW5pbWF0aW9uVGFncy5CQUNLLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiQmFja1wiLFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBEaXJlY3Rpb24uVE9QX0xFRlQsXHJcbiAgICAgICAgICAgICAgICB5OiBDaGFyYWN0ZXJTZWxlY3Rpb25TY2VuZS5wYW5lbEltYWdlLmhlaWdodCArIDE4XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5hcHBlbmRUbyh0aGlzLnJvb3ROb2RlKTtcclxuXHJcbiAgICAgICAgdGhpcy5tZW51ID0gbmV3IE1lbnVMaXN0KCkuc2V0SXRlbXMoXHJcbiAgICAgICAgICAgIG5ldyBNZW51SXRlbShcclxuICAgICAgICAgICAgICAgIE1lbnVJdGVtS2V5LkNIQVJBQ1RFUiwgXCJDaGFyYWN0ZXI6XCIsIENoYXJhY3RlclNlbGVjdGlvblNjZW5lLmZvbnQsIFwiYmxhY2tcIixcclxuICAgICAgICAgICAgICAgIG1lbnVJdGVtWCwgY2hhcmFjdGVyTWVudUl0ZW1ZXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG5ldyBNZW51SXRlbShcclxuICAgICAgICAgICAgICAgIE1lbnVJdGVtS2V5LlZPSUNFLCBcIlZvaWNlOlwiLCBDaGFyYWN0ZXJTZWxlY3Rpb25TY2VuZS5mb250LCBcImJsYWNrXCIsXHJcbiAgICAgICAgICAgICAgICBtZW51SXRlbVgsIHZvaWNlTWVudUl0ZW1ZXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG5ldyBNZW51SXRlbShcclxuICAgICAgICAgICAgICAgIE1lbnVJdGVtS2V5LlNUQVJULCBcIlN0YXJ0IEdhbWVcIiwgQ2hhcmFjdGVyU2VsZWN0aW9uU2NlbmUuZm9udCwgXCJibGFja1wiLFxyXG4gICAgICAgICAgICAgICAgbWVudUl0ZW1YLCBzdGFydE1lbnVJdGVtWVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKS5hcHBlbmRUbyhwYW5lbCk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yb290Tm9kZS5jbGVhcigpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUE2QkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFlQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUF0TUE7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQU1BO0FBSkE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFNQTtBQUpBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFwQkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/scenes/CharacterSelectionScene.js\n");
    
    /***/ }),
    
    /***/ "./lib/scenes/ControlsScene.js":
    /*!*************************************!*\
      !*** ./lib/scenes/ControlsScene.js ***!
      \*************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlsScene = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst BitmapFont_1 = __webpack_require__(/*! ../BitmapFont */ \"./lib/BitmapFont.js\");\nconst ControllerFamily_1 = __webpack_require__(/*! ../input/ControllerFamily */ \"./lib/input/ControllerFamily.js\");\nconst ControllerManager_1 = __webpack_require__(/*! ../input/ControllerManager */ \"./lib/input/ControllerManager.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst easings_1 = __webpack_require__(/*! ../easings */ \"./lib/easings.js\");\nconst Scene_1 = __webpack_require__(/*! ../Scene */ \"./lib/Scene.js\");\nconst SlideTransition_1 = __webpack_require__(/*! ../transitions/SlideTransition */ \"./lib/transitions/SlideTransition.js\");\nconst ImageNode_1 = __webpack_require__(/*! ../scene/ImageNode */ \"./lib/scene/ImageNode.js\");\nconst AsepriteNode_1 = __webpack_require__(/*! ../scene/AsepriteNode */ \"./lib/scene/AsepriteNode.js\");\nconst Direction_1 = __webpack_require__(/*! ../geom/Direction */ \"./lib/geom/Direction.js\");\nconst TextNode_1 = __webpack_require__(/*! ../scene/TextNode */ \"./lib/scene/TextNode.js\");\nconst ControlTooltipNode_1 = __webpack_require__(/*! ../scene/ControlTooltipNode */ \"./lib/scene/ControlTooltipNode.js\");\nclass ControlsScene extends Scene_1.Scene {\n    constructor() {\n        super(...arguments);\n        this.controls = [\n            \"Walk\",\n            \"Jump\",\n            \"Interact\",\n            \"Run\",\n            \"Throw\",\n            \"Enter doors\",\n            \"Pause\"\n        ];\n    }\n    setup() {\n        this.setBackgroundStyle(\"rgba(0, 0, 0, 0.8)\");\n        this.zIndex = 2;\n        this.inTransition = new SlideTransition_1.SlideTransition({ duration: 0.5, direction: \"top\", easing: easings_1.easeOutCubic });\n        this.outTransition = new SlideTransition_1.SlideTransition({ duration: 0.25 });\n        const controllerManager = ControllerManager_1.ControllerManager.getInstance();\n        const gamepadStyle = controllerManager.selectedGamepadStyle;\n        const panel = new ImageNode_1.ImageNode({\n            image: ControlsScene.panelImage,\n            x: this.game.width / 2,\n            y: this.game.height / 2 - 16,\n            childAnchor: Direction_1.Direction.TOP_LEFT\n        }).appendChild(this.gamepadSelection = new AsepriteNode_1.AsepriteNode({\n            aseprite: ControlsScene.gamepadSelection,\n            tag: gamepadStyle,\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x: 204,\n            y: 2\n        })).appendChild(new ImageNode_1.ImageNode({\n            image: ControlsScene.keyboardKeys,\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x: 123,\n            y: 35\n        })).appendChild(this.gamepadControls = new AsepriteNode_1.AsepriteNode({\n            aseprite: ControlsScene.gamepadControls,\n            tag: gamepadStyle,\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x: 206,\n            y: 35\n        })).appendChild(new ControlTooltipNode_1.ControlTooltipNode({\n            label: \"Toggle Gamepad Button Prompts\",\n            control: ControllerFamily_1.ControllerAnimationTags.ACTION,\n            anchor: Direction_1.Direction.TOP_LEFT,\n            y: ControlsScene.panelImage.height + 2\n        })).appendChild(new ControlTooltipNode_1.ControlTooltipNode({\n            label: \"Back\",\n            control: ControllerFamily_1.ControllerAnimationTags.BACK,\n            anchor: Direction_1.Direction.TOP_LEFT,\n            y: ControlsScene.panelImage.height + 18\n        })).appendTo(this.rootNode);\n        this.controls.forEach((label, index) => {\n            panel.appendChild(new TextNode_1.TextNode({\n                font: ControlsScene.font,\n                text: label,\n                anchor: Direction_1.Direction.TOP_LEFT,\n                x: 10,\n                y: 35 + index * 20,\n                color: \"black\"\n            }));\n        });\n    }\n    cleanup() {\n        this.rootNode.clear();\n    }\n    activate() {\n        this.input.onButtonDown.connect(this.handleButtonDown, this);\n    }\n    deactivate() {\n        this.input.onButtonDown.disconnect(this.handleButtonDown, this);\n    }\n    handleButtonDown(event) {\n        if (event.isAbort || event.isPause) {\n            this.scenes.popScene();\n        }\n        if (event.isPlayerAction) {\n            const controllerManager = ControllerManager_1.ControllerManager.getInstance();\n            controllerManager.toggleSelectedGamepadStyle();\n            this.gamepadControls.setTag(controllerManager.selectedGamepadStyle);\n            this.gamepadSelection.setTag(controllerManager.selectedGamepadStyle);\n        }\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(constants_1.DIALOG_FONT),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], ControlsScene, \"font\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"images/controls.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], ControlsScene, \"panelImage\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"images/controls_keyboard.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], ControlsScene, \"keyboardKeys\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"images/gamepad_selection.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], ControlsScene, \"gamepadSelection\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"images/controls_gamepad.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], ControlsScene, \"gamepadControls\", void 0);\nexports.ControlsScene = ControlsScene;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmVzL0NvbnRyb2xzU2NlbmUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NlbmVzL0NvbnRyb2xzU2NlbmUudHM/YzdkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc2Vwcml0ZSB9IGZyb20gXCIuLi9Bc2Vwcml0ZVwiO1xyXG5pbXBvcnQgeyBhc3NldCB9IGZyb20gXCIuLi9Bc3NldHNcIjtcclxuaW1wb3J0IHsgQml0bWFwRm9udCB9IGZyb20gXCIuLi9CaXRtYXBGb250XCI7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJBbmltYXRpb25UYWdzIH0gZnJvbSBcIi4uL2lucHV0L0NvbnRyb2xsZXJGYW1pbHlcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckV2ZW50IH0gZnJvbSBcIi4uL2lucHV0L0NvbnRyb2xsZXJFdmVudFwiO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyTWFuYWdlciB9IGZyb20gXCIuLi9pbnB1dC9Db250cm9sbGVyTWFuYWdlclwiO1xyXG5pbXBvcnQgeyBESUFMT0dfRk9OVCB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcclxuaW1wb3J0IHsgZWFzZU91dEN1YmljIH0gZnJvbSBcIi4uL2Vhc2luZ3NcIjtcclxuaW1wb3J0IHsgRnJpZW5kbHlGaXJlIH0gZnJvbSBcIi4uL0ZyaWVuZGx5RmlyZVwiO1xyXG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuLi9TY2VuZVwiO1xyXG5pbXBvcnQgeyBTbGlkZVRyYW5zaXRpb24gfSBmcm9tIFwiLi4vdHJhbnNpdGlvbnMvU2xpZGVUcmFuc2l0aW9uXCI7XHJcbmltcG9ydCB7IEltYWdlTm9kZSB9IGZyb20gXCIuLi9zY2VuZS9JbWFnZU5vZGVcIjtcclxuaW1wb3J0IHsgQXNlcHJpdGVOb2RlIH0gZnJvbSBcIi4uL3NjZW5lL0FzZXByaXRlTm9kZVwiO1xyXG5pbXBvcnQgeyBEaXJlY3Rpb24gfSBmcm9tIFwiLi4vZ2VvbS9EaXJlY3Rpb25cIjtcclxuaW1wb3J0IHsgVGV4dE5vZGUgfSBmcm9tIFwiLi4vc2NlbmUvVGV4dE5vZGVcIjtcclxuaW1wb3J0IHsgQ29udHJvbFRvb2x0aXBOb2RlIH0gZnJvbSBcIi4uL3NjZW5lL0NvbnRyb2xUb29sdGlwTm9kZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRyb2xzU2NlbmUgZXh0ZW5kcyBTY2VuZTxGcmllbmRseUZpcmU+IHtcclxuICAgIEBhc3NldChESUFMT0dfRk9OVClcclxuICAgIHByaXZhdGUgc3RhdGljIGZvbnQ6IEJpdG1hcEZvbnQ7XHJcblxyXG4gICAgQGFzc2V0KFwiaW1hZ2VzL2NvbnRyb2xzLnBuZ1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcGFuZWxJbWFnZTogSFRNTEltYWdlRWxlbWVudDtcclxuXHJcbiAgICBAYXNzZXQoXCJpbWFnZXMvY29udHJvbHNfa2V5Ym9hcmQucG5nXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBrZXlib2FyZEtleXM6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcblxyXG4gICAgQGFzc2V0KFwiaW1hZ2VzL2dhbWVwYWRfc2VsZWN0aW9uLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIGdhbWVwYWRTZWxlY3Rpb246IEFzZXByaXRlO1xyXG5cclxuICAgIEBhc3NldChcImltYWdlcy9jb250cm9sc19nYW1lcGFkLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIGdhbWVwYWRDb250cm9sczogQXNlcHJpdGU7XHJcblxyXG4gICAgcHJpdmF0ZSBjb250cm9sczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXCJXYWxrXCIsXHJcbiAgICAgICAgXCJKdW1wXCIsXHJcbiAgICAgICAgXCJJbnRlcmFjdFwiLFxyXG4gICAgICAgIFwiUnVuXCIsXHJcbiAgICAgICAgXCJUaHJvd1wiLFxyXG4gICAgICAgIFwiRW50ZXIgZG9vcnNcIixcclxuICAgICAgICBcIlBhdXNlXCJcclxuICAgIF07XHJcblxyXG4gICAgcHJpdmF0ZSBnYW1lcGFkU2VsZWN0aW9uITogQXNlcHJpdGVOb2RlO1xyXG4gICAgcHJpdmF0ZSBnYW1lcGFkQ29udHJvbHMhOiBBc2Vwcml0ZU5vZGU7XHJcblxyXG4gICAgcHVibGljIHNldHVwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0QmFja2dyb3VuZFN0eWxlKFwicmdiYSgwLCAwLCAwLCAwLjgpXCIpO1xyXG4gICAgICAgIHRoaXMuekluZGV4ID0gMjtcclxuICAgICAgICB0aGlzLmluVHJhbnNpdGlvbiA9IG5ldyBTbGlkZVRyYW5zaXRpb24oeyBkdXJhdGlvbjogMC41LCBkaXJlY3Rpb246IFwidG9wXCIsIGVhc2luZzogZWFzZU91dEN1YmljIH0pO1xyXG4gICAgICAgIHRoaXMub3V0VHJhbnNpdGlvbiA9IG5ldyBTbGlkZVRyYW5zaXRpb24oeyBkdXJhdGlvbjogMC4yNSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlck1hbmFnZXIgPSBDb250cm9sbGVyTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGNvbnN0IGdhbWVwYWRTdHlsZSA9IGNvbnRyb2xsZXJNYW5hZ2VyLnNlbGVjdGVkR2FtZXBhZFN0eWxlO1xyXG5cclxuICAgICAgICBjb25zdCBwYW5lbCA9IG5ldyBJbWFnZU5vZGUoe1xyXG4gICAgICAgICAgICBpbWFnZTogQ29udHJvbHNTY2VuZS5wYW5lbEltYWdlLFxyXG4gICAgICAgICAgICB4OiB0aGlzLmdhbWUud2lkdGggLyAyLFxyXG4gICAgICAgICAgICB5OiB0aGlzLmdhbWUuaGVpZ2h0IC8gMiAtIDE2LFxyXG4gICAgICAgICAgICBjaGlsZEFuY2hvcjogRGlyZWN0aW9uLlRPUF9MRUZUXHJcbiAgICAgICAgfSkuYXBwZW5kQ2hpbGQoXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZXBhZFNlbGVjdGlvbiA9IG5ldyBBc2Vwcml0ZU5vZGUoe1xyXG4gICAgICAgICAgICAgICAgYXNlcHJpdGU6IENvbnRyb2xzU2NlbmUuZ2FtZXBhZFNlbGVjdGlvbixcclxuICAgICAgICAgICAgICAgIHRhZzogZ2FtZXBhZFN0eWxlLFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBEaXJlY3Rpb24uVE9QX0xFRlQsXHJcbiAgICAgICAgICAgICAgICB4OiAyMDQsXHJcbiAgICAgICAgICAgICAgICB5OiAyXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgbmV3IEltYWdlTm9kZSh7XHJcbiAgICAgICAgICAgICAgICBpbWFnZTogQ29udHJvbHNTY2VuZS5rZXlib2FyZEtleXMsXHJcbiAgICAgICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCxcclxuICAgICAgICAgICAgICAgIHg6IDEyMyxcclxuICAgICAgICAgICAgICAgIHk6IDM1XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5hcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgdGhpcy5nYW1lcGFkQ29udHJvbHMgPSBuZXcgQXNlcHJpdGVOb2RlKHtcclxuICAgICAgICAgICAgICAgIGFzZXByaXRlOiBDb250cm9sc1NjZW5lLmdhbWVwYWRDb250cm9scyxcclxuICAgICAgICAgICAgICAgIHRhZzogZ2FtZXBhZFN0eWxlLFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBEaXJlY3Rpb24uVE9QX0xFRlQsXHJcbiAgICAgICAgICAgICAgICB4OiAyMDYsXHJcbiAgICAgICAgICAgICAgICB5OiAzNVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICkuYXBwZW5kQ2hpbGQoXHJcbiAgICAgICAgICAgIG5ldyBDb250cm9sVG9vbHRpcE5vZGUoe1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiVG9nZ2xlIEdhbWVwYWQgQnV0dG9uIFByb21wdHNcIixcclxuICAgICAgICAgICAgICAgIGNvbnRyb2w6IENvbnRyb2xsZXJBbmltYXRpb25UYWdzLkFDVElPTixcclxuICAgICAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLlRPUF9MRUZULFxyXG4gICAgICAgICAgICAgICAgeTogQ29udHJvbHNTY2VuZS5wYW5lbEltYWdlLmhlaWdodCArIDJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApLmFwcGVuZENoaWxkKFxyXG4gICAgICAgICAgICBuZXcgQ29udHJvbFRvb2x0aXBOb2RlKHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBcIkJhY2tcIixcclxuICAgICAgICAgICAgICAgIGNvbnRyb2w6IENvbnRyb2xsZXJBbmltYXRpb25UYWdzLkJBQ0ssXHJcbiAgICAgICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCxcclxuICAgICAgICAgICAgICAgIHk6IENvbnRyb2xzU2NlbmUucGFuZWxJbWFnZS5oZWlnaHQgKyAxOFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICkuYXBwZW5kVG8odGhpcy5yb290Tm9kZSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udHJvbHMuZm9yRWFjaCgobGFiZWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKG5ldyBUZXh0Tm9kZSh7XHJcbiAgICAgICAgICAgICAgICBmb250OiBDb250cm9sc1NjZW5lLmZvbnQsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBsYWJlbCxcclxuICAgICAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLlRPUF9MRUZULFxyXG4gICAgICAgICAgICAgICAgeDogMTAsXHJcbiAgICAgICAgICAgICAgICB5OiAzNSArIGluZGV4ICogMjAsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJibGFja1wiXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYW51cCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJvb3ROb2RlLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFjdGl2YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5wdXQub25CdXR0b25Eb3duLmNvbm5lY3QodGhpcy5oYW5kbGVCdXR0b25Eb3duLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVhY3RpdmF0ZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlucHV0Lm9uQnV0dG9uRG93bi5kaXNjb25uZWN0KHRoaXMuaGFuZGxlQnV0dG9uRG93biwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVCdXR0b25Eb3duKGV2ZW50OiBDb250cm9sbGVyRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZXZlbnQuaXNBYm9ydCB8fCBldmVudC5pc1BhdXNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVzLnBvcFNjZW5lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChldmVudC5pc1BsYXllckFjdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sbGVyTWFuYWdlciA9IENvbnRyb2xsZXJNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJNYW5hZ2VyLnRvZ2dsZVNlbGVjdGVkR2FtZXBhZFN0eWxlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZXBhZENvbnRyb2xzLnNldFRhZyhjb250cm9sbGVyTWFuYWdlci5zZWxlY3RlZEdhbWVwYWRTdHlsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZXBhZFNlbGVjdGlvbi5zZXRUYWcoY29udHJvbGxlck1hbmFnZXIuc2VsZWN0ZWRHYW1lcGFkU3R5bGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTs7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNkZBO0FBeEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5IQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBZEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/scenes/ControlsScene.js\n");
    
    /***/ }),
    
    /***/ "./lib/scenes/CreditsScene.js":
    /*!************************************!*\
      !*** ./lib/scenes/CreditsScene.js ***!
      \************************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CreditsScene = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Aseprite_1 = __webpack_require__(/*! ../Aseprite */ \"./lib/Aseprite.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst BitmapFont_1 = __webpack_require__(/*! ../BitmapFont */ \"./lib/BitmapFont.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst easings_1 = __webpack_require__(/*! ../easings */ \"./lib/easings.js\");\nconst FadeTransition_1 = __webpack_require__(/*! ../transitions/FadeTransition */ \"./lib/transitions/FadeTransition.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst Scene_1 = __webpack_require__(/*! ../Scene */ \"./lib/Scene.js\");\nconst TitleScene_1 = __webpack_require__(/*! ./TitleScene */ \"./lib/scenes/TitleScene.js\");\nconst Direction_1 = __webpack_require__(/*! ../geom/Direction */ \"./lib/geom/Direction.js\");\nconst TextNode_1 = __webpack_require__(/*! ../scene/TextNode */ \"./lib/scene/TextNode.js\");\nconst SceneNode_1 = __webpack_require__(/*! ../scene/SceneNode */ \"./lib/scene/SceneNode.js\");\nconst ImageNode_1 = __webpack_require__(/*! ../scene/ImageNode */ \"./lib/scene/ImageNode.js\");\nconst AsepriteNode_1 = __webpack_require__(/*! ../scene/AsepriteNode */ \"./lib/scene/AsepriteNode.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Campaign_1 = __webpack_require__(/*! ../Campaign */ \"./lib/Campaign.js\");\nclass CreditsScene extends Scene_1.Scene {\n    constructor() {\n        super(...arguments);\n        this.starPositions = [\n            [318, 10],\n            [288, 19],\n            [260, 100],\n            [370, 91],\n            [409, 49],\n            [446, 19],\n            [436, 97],\n            [185, 93],\n            [159, 49],\n            [322, 72],\n            [153, 10],\n            [211, 20],\n            [59, 22],\n            [17, 11],\n            [102, 108]\n        ];\n        this.lineSpacing = 4;\n        this.targetMusic = null;\n    }\n    getCorrectBackgroundTrack() {\n        const ending = this.game.campaign.quests.find(q => q.isFinished());\n        if (ending && ending.key === Quests_1.QuestKey.E)\n            return CreditsScene.music[2];\n        if (this.game.campaign.selectedCharacter === Campaign_1.CharacterAsset.FEMALE)\n            return CreditsScene.music[1];\n        if (this.game.campaign.selectedCharacter === Campaign_1.CharacterAsset.MALE)\n            return CreditsScene.music[0];\n        return CreditsScene.music[2];\n    }\n    setup() {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const ending = this.game.campaign.quests.find(q => q.isFinished());\n            this.zIndex = 2;\n            this.inTransition = new FadeTransition_1.FadeTransition({ duration: 0.5, easing: easings_1.easeOutCubic });\n            this.outTransition = new FadeTransition_1.FadeTransition({ duration: 0.25 });\n            this.targetMusic = this.getCorrectBackgroundTrack();\n            if (ending && ending.key === Quests_1.QuestKey.E) {\n                // The background\n                new ImageNode_1.ImageNode({\n                    image: CreditsScene.backgroundImageSpace,\n                    anchor: Direction_1.Direction.TOP_LEFT\n                }).appendTo(this.rootNode);\n                // Spaceship\n                new AsepriteNode_1.AsepriteNode({\n                    aseprite: CreditsScene.spaceship,\n                    tag: \"idle\",\n                    anchor: Direction_1.Direction.TOP_LEFT,\n                    x: constants_1.GAME_CANVAS_WIDTH,\n                    y: 200\n                }).animate({\n                    animator: (node, value) => node.setX((constants_1.GAME_CANVAS_WIDTH + 50) - value * constants_1.GAME_CANVAS_WIDTH),\n                    duration: 100,\n                }).appendTo(this.rootNode);\n                // Spaceship\n                new AsepriteNode_1.AsepriteNode({\n                    aseprite: CreditsScene.spaceshipsmall,\n                    tag: \"idle\",\n                    anchor: Direction_1.Direction.TOP_LEFT,\n                    x: constants_1.GAME_CANVAS_WIDTH,\n                    y: 185\n                }).animate({\n                    animator: (node, value) => node.setX((constants_1.GAME_CANVAS_WIDTH + 10) - value * constants_1.GAME_CANVAS_WIDTH),\n                    duration: 200,\n                }).appendTo(this.rootNode);\n            }\n            else {\n                // The background\n                new ImageNode_1.ImageNode({\n                    image: CreditsScene.backgroundImage,\n                    anchor: Direction_1.Direction.TOP_LEFT\n                }).appendTo(this.rootNode);\n                // The blinking stars\n                this.starPositions.forEach((pos, index) => {\n                    new AsepriteNode_1.AsepriteNode({\n                        aseprite: CreditsScene.stars[index % CreditsScene.stars.length],\n                        tag: \"idle\",\n                        anchor: Direction_1.Direction.TOP_LEFT,\n                        x: pos[0],\n                        y: pos[1]\n                    }).appendTo(this.rootNode);\n                });\n                // The tree leaf\n                new AsepriteNode_1.AsepriteNode({\n                    aseprite: CreditsScene.leaf,\n                    tag: \"idle\",\n                    anchor: Direction_1.Direction.TOP_LEFT,\n                    x: 414,\n                    y: 163\n                }).appendTo(this.rootNode);\n            }\n            // The gradient background behind the scrolling credits text\n            new ImageNode_1.ImageNode({\n                image: CreditsScene.overlayImage,\n                anchor: Direction_1.Direction.TOP_LEFT,\n                opacity: 0.75\n            }).appendTo(this.rootNode);\n            // The scrolling credits text\n            this.createCreditsNode().appendTo(this.rootNode);\n            // Shortened Git commit hash to provide support\n            new TextNode_1.TextNode({\n                font: CreditsScene.standardFont,\n                text: CreditsScene.appInfo.gitCommitHash.substr(0, 16),\n                anchor: Direction_1.Direction.BOTTOM_RIGHT,\n                x: this.game.width - 7,\n                y: this.game.height - 4,\n                color: \"white\"\n            }).appendTo(this.rootNode);\n        });\n    }\n    cleanup() {\n        this.rootNode.clear();\n    }\n    createCreditsNode() {\n        const startY = this.game.height + 50;\n        let totalCrawlHeight = 0;\n        const credits = new SceneNode_1.SceneNode().appendTo(this.rootNode).animate({\n            animator: (node, value, elapsed) => {\n                node.setY(startY - (elapsed * 1000 / 36) % (totalCrawlHeight + startY));\n            },\n            duration: Infinity\n        });\n        const x = 20;\n        let y = this.addTitle(credits, 0, x);\n        y = this.addParagraph(credits, y, x, [\n            \"Originally made as a team\",\n            \"effort for Ludum Dare 46\",\n            \"in three days by\"\n        ]);\n        y = this.addParagraph(credits, y, x, [\n            \"Eduard But, Nico Hülscher,\",\n            \"Benjamin Jung, Nils Kreutzer,\",\n            \"Bastian Lang, Ranjit Mevius,\",\n            \"Markus Over, Klaus Reimer,\",\n            \"and Jennifer van Veen\"\n        ], 50);\n        y = this.addCredit(credits, y, x, \"GAME DESIGN\", [\"Everyone\"]);\n        y = this.addCredit(credits, y, x, \"STORY\", [\n            \"Markus Over\",\n            \"Jennifer van Veen\",\n            \"Ranjit Mevius\",\n            \"Nils Kreutzer\"\n        ]);\n        y = this.addCredit(credits, y, x, \"PROGRAMMING\", [\n            \"Nico Hülscher\",\n            \"Benjamin Jung\",\n            \"Nils Kreutzer\",\n            \"Ranjit Mevius\",\n            \"Markus Over\",\n            \"Klaus Reimer\",\n            \"Eduard But\",\n            \"Matthias Wetter\"\n        ]);\n        y = this.addCredit(credits, y, x, \"SCRIPTING\", [\n            \"Markus Over\",\n            \"Eduard But\"\n        ]);\n        y = this.addCredit(credits, y, x, \"ART DIRECTION\", [\"Eduard But\"]);\n        y = this.addCredit(credits, y, x, \"2D ART\", [\n            \"Eduard But\",\n            \"Nils Kreutzer\",\n            \"Christina Schneider\",\n            \"Jennifer van Veen\",\n            \"Matthias Wetter\"\n        ]);\n        y = this.addCredit(credits, y, x, \"WRITING\", [\n            \"Markus Over\",\n            \"Jennifer van Veen\",\n            \"Eduard But\"\n        ]);\n        y = this.addCredit(credits, y, x, \"LEVEL DESIGN\", [\n            \"Eduard But\",\n            \"Nils Kreutzer\",\n            \"Jennifer van Veen\"\n        ]);\n        y = this.addCredit(credits, y, x, \"DISTRIBUTION\", [\n            \"Benjamin Jung\",\n        ]);\n        y = this.addCredit(credits, y, x, \"MUSIC\", [\n            \"Bastian Lang\",\n            \"Benjamin Jung\",\n            \"Eduard But\",\n            \"Matthias Wetter\"\n        ]);\n        y = this.addCredit(credits, y, x, \"QA\", [\n            \"Jennifer van Veen\",\n            \"Matthias Wetter\"\n        ]);\n        y = this.addCredit(credits, y, x, \"SFX\", [\"freesound.org\"]);\n        totalCrawlHeight = y;\n        return credits;\n    }\n    activate() {\n        if (this.targetMusic) {\n            this.targetMusic.setLoop(true);\n            this.targetMusic.setVolume(1);\n            this.targetMusic.play();\n        }\n        this.input.onButtonDown.connect(this.handleButtonDown, this);\n    }\n    deactivate() {\n        if (this.targetMusic) {\n            this.targetMusic.stop();\n        }\n        this.input.onButtonDown.disconnect(this.handleButtonDown, this);\n    }\n    handleButtonDown(event) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (this.game.scenes.getPreviousScene() instanceof TitleScene_1.TitleScene) {\n                this.game.scenes.popScene();\n            }\n            else {\n                yield this.game.scenes.popScene({ noTransition: true });\n                this.game.scenes.setScene(TitleScene_1.TitleScene);\n            }\n        });\n    }\n    addTitle(credits, y, x) {\n        const gap = 5;\n        const titleText = \"Friendly Fire\";\n        const versionText = util_1.isDev() ? \"DEVELOPMENT VERSION\" : `Version ${CreditsScene.appInfo.version}`;\n        y += new TextNode_1.TextNode({\n            font: CreditsScene.headlineFont,\n            text: titleText,\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x, y,\n            color: \"white\"\n        }).appendTo(credits).getHeight();\n        y += gap;\n        y += new TextNode_1.TextNode({\n            font: CreditsScene.standardFont,\n            text: versionText,\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x, y,\n            color: \"white\"\n        }).appendTo(credits).getHeight();\n        return y + gap + 20;\n    }\n    addParagraph(credits, y, x, lines, marginBottom = 10) {\n        lines.forEach(line => {\n            y += new TextNode_1.TextNode({\n                font: CreditsScene.standardFont,\n                text: line,\n                anchor: Direction_1.Direction.TOP_LEFT,\n                x, y,\n                color: \"white\"\n            }).appendTo(credits).getHeight();\n        });\n        return y + marginBottom;\n    }\n    addCredit(credits, y, x, title, names) {\n        const gap = 5;\n        y += new TextNode_1.TextNode({\n            font: CreditsScene.creditsFont,\n            text: title,\n            anchor: Direction_1.Direction.TOP_LEFT,\n            x, y,\n            color: \"white\"\n        }).appendTo(credits).getHeight();\n        y += this.lineSpacing + gap;\n        names.forEach(name => {\n            y += new TextNode_1.TextNode({\n                font: CreditsScene.standardFont,\n                text: name,\n                anchor: Direction_1.Direction.TOP_LEFT,\n                x, y,\n                color: \"white\"\n            }).appendTo(credits).getHeight();\n        });\n        return y + 40;\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"music/a-vision-of-fire-acoustic.ogg\",\n        \"music/a-vision-of-fire-orchestral.ogg\",\n        \"music/a-vision-of-fire.ogg\",\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], CreditsScene, \"music\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset([\n        \"sprites/stars/star1.aseprite.json\",\n        \"sprites/stars/star2.aseprite.json\",\n        \"sprites/stars/star3.aseprite.json\",\n        \"sprites/stars/star4.aseprite.json\",\n        \"sprites/stars/star5.aseprite.json\"\n    ]),\n    tslib_1.__metadata(\"design:type\", Array)\n], CreditsScene, \"stars\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/credits/leaf.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], CreditsScene, \"leaf\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/credits/spaceship.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], CreditsScene, \"spaceship\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sprites/credits/spaceshipsmall.aseprite.json\"),\n    tslib_1.__metadata(\"design:type\", Aseprite_1.Aseprite)\n], CreditsScene, \"spaceshipsmall\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"images/credits/bg.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], CreditsScene, \"backgroundImage\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"images/credits/bg-space.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], CreditsScene, \"backgroundImageSpace\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"images/credits/overlay.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], CreditsScene, \"overlayImage\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"fonts/headline.font.json\"),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], CreditsScene, \"headlineFont\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(constants_1.DIALOG_FONT),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], CreditsScene, \"standardFont\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"fonts/credits.font.json\"),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], CreditsScene, \"creditsFont\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"appinfo.json\"),\n    tslib_1.__metadata(\"design:type\", Object)\n], CreditsScene, \"appInfo\", void 0);\nexports.CreditsScene = CreditsScene;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmVzL0NyZWRpdHNTY2VuZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9zY2VuZXMvQ3JlZGl0c1NjZW5lLnRzP2JlMmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwSW5mb0pTT04gfSBmcm9tIFwiYXBwaW5mby5qc29uXCI7XHJcbmltcG9ydCB7IEFzZXByaXRlIH0gZnJvbSBcIi4uL0FzZXByaXRlXCI7XHJcbmltcG9ydCB7IGFzc2V0IH0gZnJvbSBcIi4uL0Fzc2V0c1wiO1xyXG5pbXBvcnQgeyBCaXRtYXBGb250IH0gZnJvbSBcIi4uL0JpdG1hcEZvbnRcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckV2ZW50IH0gZnJvbSBcIi4uL2lucHV0L0NvbnRyb2xsZXJFdmVudFwiO1xyXG5pbXBvcnQgeyBESUFMT0dfRk9OVCwgR0FNRV9DQU5WQVNfV0lEVEggfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IGVhc2VPdXRDdWJpYyB9IGZyb20gXCIuLi9lYXNpbmdzXCI7XHJcbmltcG9ydCB7IEZhZGVUcmFuc2l0aW9uIH0gZnJvbSBcIi4uL3RyYW5zaXRpb25zL0ZhZGVUcmFuc2l0aW9uXCI7XHJcbmltcG9ydCB7IEZyaWVuZGx5RmlyZSB9IGZyb20gXCIuLi9GcmllbmRseUZpcmVcIjtcclxuaW1wb3J0IHsgaXNEZXYgfSBmcm9tIFwiLi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuLi9TY2VuZVwiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuLi9Tb3VuZFwiO1xyXG5pbXBvcnQgeyBUaXRsZVNjZW5lIH0gZnJvbSBcIi4vVGl0bGVTY2VuZVwiO1xyXG5pbXBvcnQgeyBEaXJlY3Rpb24gfSBmcm9tIFwiLi4vZ2VvbS9EaXJlY3Rpb25cIjtcclxuaW1wb3J0IHsgVGV4dE5vZGUgfSBmcm9tIFwiLi4vc2NlbmUvVGV4dE5vZGVcIjtcclxuaW1wb3J0IHsgU2NlbmVOb2RlIH0gZnJvbSBcIi4uL3NjZW5lL1NjZW5lTm9kZVwiO1xyXG5pbXBvcnQgeyBJbWFnZU5vZGUgfSBmcm9tIFwiLi4vc2NlbmUvSW1hZ2VOb2RlXCI7XHJcbmltcG9ydCB7IEFzZXByaXRlTm9kZSB9IGZyb20gXCIuLi9zY2VuZS9Bc2Vwcml0ZU5vZGVcIjtcclxuaW1wb3J0IHsgUXVlc3RLZXkgfSBmcm9tIFwiLi4vUXVlc3RzXCI7XHJcbmltcG9ydCB7IENoYXJhY3RlckFzc2V0IH0gZnJvbSBcIi4uL0NhbXBhaWduXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ3JlZGl0c1NjZW5lIGV4dGVuZHMgU2NlbmU8RnJpZW5kbHlGaXJlPiB7XHJcbiAgICBAYXNzZXQoW1xyXG4gICAgICAgIFwibXVzaWMvYS12aXNpb24tb2YtZmlyZS1hY291c3RpYy5vZ2dcIixcclxuICAgICAgICBcIm11c2ljL2EtdmlzaW9uLW9mLWZpcmUtb3JjaGVzdHJhbC5vZ2dcIixcclxuICAgICAgICBcIm11c2ljL2EtdmlzaW9uLW9mLWZpcmUub2dnXCIsXHJcbiAgICBdKVxyXG4gICAgcHVibGljIHN0YXRpYyBtdXNpYzogU291bmRbXTtcclxuXHJcbiAgICBAYXNzZXQoW1xyXG4gICAgICAgIFwic3ByaXRlcy9zdGFycy9zdGFyMS5hc2Vwcml0ZS5qc29uXCIsXHJcbiAgICAgICAgXCJzcHJpdGVzL3N0YXJzL3N0YXIyLmFzZXByaXRlLmpzb25cIixcclxuICAgICAgICBcInNwcml0ZXMvc3RhcnMvc3RhcjMuYXNlcHJpdGUuanNvblwiLFxyXG4gICAgICAgIFwic3ByaXRlcy9zdGFycy9zdGFyNC5hc2Vwcml0ZS5qc29uXCIsXHJcbiAgICAgICAgXCJzcHJpdGVzL3N0YXJzL3N0YXI1LmFzZXByaXRlLmpzb25cIlxyXG4gICAgXSlcclxuICAgIHByaXZhdGUgc3RhdGljIHN0YXJzOiBBc2Vwcml0ZVtdO1xyXG5cclxuICAgIEBhc3NldChcInNwcml0ZXMvY3JlZGl0cy9sZWFmLmFzZXByaXRlLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIGxlYWY6IEFzZXByaXRlO1xyXG5cclxuICAgIEBhc3NldChcInNwcml0ZXMvY3JlZGl0cy9zcGFjZXNoaXAuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3BhY2VzaGlwOiBBc2Vwcml0ZTtcclxuXHJcbiAgICBAYXNzZXQoXCJzcHJpdGVzL2NyZWRpdHMvc3BhY2VzaGlwc21hbGwuYXNlcHJpdGUuanNvblwiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3BhY2VzaGlwc21hbGw6IEFzZXByaXRlO1xyXG5cclxuICAgIHByaXZhdGUgc3RhclBvc2l0aW9uczogbnVtYmVyW11bXSA9IFtcclxuICAgICAgICBbMzE4LCAxMF0sXHJcbiAgICAgICAgWzI4OCwgMTldLFxyXG4gICAgICAgIFsyNjAsIDEwMF0sXHJcbiAgICAgICAgWzM3MCwgOTFdLFxyXG4gICAgICAgIFs0MDksIDQ5XSxcclxuICAgICAgICBbNDQ2LCAxOV0sXHJcbiAgICAgICAgWzQzNiwgOTddLFxyXG4gICAgICAgIFsxODUsIDkzXSxcclxuICAgICAgICBbMTU5LCA0OV0sXHJcbiAgICAgICAgWzMyMiwgNzJdLFxyXG4gICAgICAgIFsxNTMsIDEwXSxcclxuICAgICAgICBbMjExLCAyMF0sXHJcbiAgICAgICAgWzU5LCAyMl0sXHJcbiAgICAgICAgWzE3LCAxMV0sXHJcbiAgICAgICAgWzEwMiwgMTA4XVxyXG4gICAgXTtcclxuXHJcbiAgICBAYXNzZXQoXCJpbWFnZXMvY3JlZGl0cy9iZy5wbmdcIilcclxuICAgIHByaXZhdGUgc3RhdGljIGJhY2tncm91bmRJbWFnZTogSFRNTEltYWdlRWxlbWVudDtcclxuXHJcbiAgICBAYXNzZXQoXCJpbWFnZXMvY3JlZGl0cy9iZy1zcGFjZS5wbmdcIilcclxuICAgIHByaXZhdGUgc3RhdGljIGJhY2tncm91bmRJbWFnZVNwYWNlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuICAgIEBhc3NldChcImltYWdlcy9jcmVkaXRzL292ZXJsYXkucG5nXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBvdmVybGF5SW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcblxyXG4gICAgQGFzc2V0KFwiZm9udHMvaGVhZGxpbmUuZm9udC5qc29uXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBoZWFkbGluZUZvbnQ6IEJpdG1hcEZvbnQ7XHJcblxyXG4gICAgQGFzc2V0KERJQUxPR19GT05UKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3RhbmRhcmRGb250OiBCaXRtYXBGb250O1xyXG5cclxuICAgIEBhc3NldChcImZvbnRzL2NyZWRpdHMuZm9udC5qc29uXCIpXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjcmVkaXRzRm9udDogQml0bWFwRm9udDtcclxuXHJcbiAgICBAYXNzZXQoXCJhcHBpbmZvLmpzb25cIilcclxuICAgIHByaXZhdGUgc3RhdGljIGFwcEluZm86IEFwcEluZm9KU09OO1xyXG5cclxuICAgIHByaXZhdGUgbGluZVNwYWNpbmcgPSA0O1xyXG4gICAgcHJpdmF0ZSB0YXJnZXRNdXNpYzogU291bmQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIGdldENvcnJlY3RCYWNrZ3JvdW5kVHJhY2soKTogU291bmQge1xyXG4gICAgICAgIGNvbnN0IGVuZGluZyA9IHRoaXMuZ2FtZS5jYW1wYWlnbi5xdWVzdHMuZmluZChxID0+IHEuaXNGaW5pc2hlZCgpKTtcclxuICAgICAgICBpZiAoZW5kaW5nICYmIGVuZGluZy5rZXkgPT09IFF1ZXN0S2V5LkUpIHJldHVybiBDcmVkaXRzU2NlbmUubXVzaWNbMl07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdhbWUuY2FtcGFpZ24uc2VsZWN0ZWRDaGFyYWN0ZXIgPT09IENoYXJhY3RlckFzc2V0LkZFTUFMRSkgcmV0dXJuIENyZWRpdHNTY2VuZS5tdXNpY1sxXTtcclxuICAgICAgICBpZiAodGhpcy5nYW1lLmNhbXBhaWduLnNlbGVjdGVkQ2hhcmFjdGVyID09PSBDaGFyYWN0ZXJBc3NldC5NQUxFKSByZXR1cm4gQ3JlZGl0c1NjZW5lLm11c2ljWzBdO1xyXG4gICAgICAgIHJldHVybiBDcmVkaXRzU2NlbmUubXVzaWNbMl07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNldHVwKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGVuZGluZyA9IHRoaXMuZ2FtZS5jYW1wYWlnbi5xdWVzdHMuZmluZChxID0+IHEuaXNGaW5pc2hlZCgpKTtcclxuICAgICAgICB0aGlzLnpJbmRleCA9IDI7XHJcbiAgICAgICAgdGhpcy5pblRyYW5zaXRpb24gPSBuZXcgRmFkZVRyYW5zaXRpb24oeyBkdXJhdGlvbjogMC41LCBlYXNpbmc6IGVhc2VPdXRDdWJpYyB9KTtcclxuICAgICAgICB0aGlzLm91dFRyYW5zaXRpb24gPSBuZXcgRmFkZVRyYW5zaXRpb24oeyBkdXJhdGlvbjogMC4yNSB9KTtcclxuICAgICAgICB0aGlzLnRhcmdldE11c2ljID0gdGhpcy5nZXRDb3JyZWN0QmFja2dyb3VuZFRyYWNrKCk7XHJcblxyXG4gICAgICAgIGlmIChlbmRpbmcgJiYgZW5kaW5nLmtleSA9PT0gUXVlc3RLZXkuRSkge1xyXG4gICAgICAgICAgICAvLyBUaGUgYmFja2dyb3VuZFxyXG4gICAgICAgICAgICBuZXcgSW1hZ2VOb2RlKHtcclxuICAgICAgICAgICAgICAgIGltYWdlOiBDcmVkaXRzU2NlbmUuYmFja2dyb3VuZEltYWdlU3BhY2UsXHJcbiAgICAgICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVFxyXG4gICAgICAgICAgICB9KS5hcHBlbmRUbyh0aGlzLnJvb3ROb2RlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNwYWNlc2hpcFxyXG4gICAgICAgICAgICBuZXcgQXNlcHJpdGVOb2RlKHtcclxuICAgICAgICAgICAgICAgIGFzZXByaXRlOiBDcmVkaXRzU2NlbmUuc3BhY2VzaGlwLFxyXG4gICAgICAgICAgICAgICAgdGFnOiBcImlkbGVcIixcclxuICAgICAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLlRPUF9MRUZULFxyXG4gICAgICAgICAgICAgICAgeDogR0FNRV9DQU5WQVNfV0lEVEgsXHJcbiAgICAgICAgICAgICAgICB5OiAyMDBcclxuICAgICAgICAgICAgfSkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRvcjogKG5vZGUsIHZhbHVlKSA9PiBub2RlLnNldFgoKEdBTUVfQ0FOVkFTX1dJRFRIICsgNTApIC0gdmFsdWUgKiBHQU1FX0NBTlZBU19XSURUSCksXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwLFxyXG4gICAgICAgICAgICB9KS5hcHBlbmRUbyh0aGlzLnJvb3ROb2RlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNwYWNlc2hpcFxyXG4gICAgICAgICAgICBuZXcgQXNlcHJpdGVOb2RlKHtcclxuICAgICAgICAgICAgICAgIGFzZXByaXRlOiBDcmVkaXRzU2NlbmUuc3BhY2VzaGlwc21hbGwsXHJcbiAgICAgICAgICAgICAgICB0YWc6IFwiaWRsZVwiLFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBEaXJlY3Rpb24uVE9QX0xFRlQsXHJcbiAgICAgICAgICAgICAgICB4OiBHQU1FX0NBTlZBU19XSURUSCxcclxuICAgICAgICAgICAgICAgIHk6IDE4NVxyXG4gICAgICAgICAgICB9KS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIGFuaW1hdG9yOiAobm9kZSwgdmFsdWUpID0+IG5vZGUuc2V0WCgoR0FNRV9DQU5WQVNfV0lEVEggKyAxMCkgLSB2YWx1ZSAqIEdBTUVfQ0FOVkFTX1dJRFRIKSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAsXHJcbiAgICAgICAgICAgIH0pLmFwcGVuZFRvKHRoaXMucm9vdE5vZGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBiYWNrZ3JvdW5kXHJcbiAgICAgICAgICAgIG5ldyBJbWFnZU5vZGUoe1xyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IENyZWRpdHNTY2VuZS5iYWNrZ3JvdW5kSW1hZ2UsXHJcbiAgICAgICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVFxyXG4gICAgICAgICAgICB9KS5hcHBlbmRUbyh0aGlzLnJvb3ROb2RlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRoZSBibGlua2luZyBzdGFyc1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJQb3NpdGlvbnMuZm9yRWFjaCgocG9zLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IEFzZXByaXRlTm9kZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNlcHJpdGU6IENyZWRpdHNTY2VuZS5zdGFyc1tpbmRleCAlIENyZWRpdHNTY2VuZS5zdGFycy5sZW5ndGhdLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhZzogXCJpZGxlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yOiBEaXJlY3Rpb24uVE9QX0xFRlQsXHJcbiAgICAgICAgICAgICAgICAgICAgeDogcG9zWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHBvc1sxXVxyXG4gICAgICAgICAgICAgICAgfSkuYXBwZW5kVG8odGhpcy5yb290Tm9kZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVGhlIHRyZWUgbGVhZlxyXG4gICAgICAgICAgICBuZXcgQXNlcHJpdGVOb2RlKHtcclxuICAgICAgICAgICAgICAgIGFzZXByaXRlOiBDcmVkaXRzU2NlbmUubGVhZixcclxuICAgICAgICAgICAgICAgIHRhZzogXCJpZGxlXCIsXHJcbiAgICAgICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCxcclxuICAgICAgICAgICAgICAgIHg6IDQxNCxcclxuICAgICAgICAgICAgICAgIHk6IDE2M1xyXG4gICAgICAgICAgICB9KS5hcHBlbmRUbyh0aGlzLnJvb3ROb2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhlIGdyYWRpZW50IGJhY2tncm91bmQgYmVoaW5kIHRoZSBzY3JvbGxpbmcgY3JlZGl0cyB0ZXh0XHJcbiAgICAgICAgbmV3IEltYWdlTm9kZSh7XHJcbiAgICAgICAgICAgIGltYWdlOiBDcmVkaXRzU2NlbmUub3ZlcmxheUltYWdlLFxyXG4gICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCxcclxuICAgICAgICAgICAgb3BhY2l0eTogMC43NVxyXG4gICAgICAgIH0pLmFwcGVuZFRvKHRoaXMucm9vdE5vZGUpO1xyXG5cclxuICAgICAgICAvLyBUaGUgc2Nyb2xsaW5nIGNyZWRpdHMgdGV4dFxyXG4gICAgICAgIHRoaXMuY3JlYXRlQ3JlZGl0c05vZGUoKS5hcHBlbmRUbyh0aGlzLnJvb3ROb2RlKTtcclxuXHJcbiAgICAgICAgLy8gU2hvcnRlbmVkIEdpdCBjb21taXQgaGFzaCB0byBwcm92aWRlIHN1cHBvcnRcclxuICAgICAgICBuZXcgVGV4dE5vZGUoe1xyXG4gICAgICAgICAgICBmb250OiBDcmVkaXRzU2NlbmUuc3RhbmRhcmRGb250LFxyXG4gICAgICAgICAgICB0ZXh0OiBDcmVkaXRzU2NlbmUuYXBwSW5mby5naXRDb21taXRIYXNoLnN1YnN0cigwLCAxNiksXHJcbiAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLkJPVFRPTV9SSUdIVCxcclxuICAgICAgICAgICAgeDogdGhpcy5nYW1lLndpZHRoIC0gNyxcclxuICAgICAgICAgICAgeTogdGhpcy5nYW1lLmhlaWdodCAtIDQsXHJcbiAgICAgICAgICAgIGNvbG9yOiBcIndoaXRlXCJcclxuICAgICAgICB9KS5hcHBlbmRUbyh0aGlzLnJvb3ROb2RlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYW51cCgpIHtcclxuICAgICAgICB0aGlzLnJvb3ROb2RlLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVDcmVkaXRzTm9kZSgpOiBTY2VuZU5vZGUge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0WSA9IHRoaXMuZ2FtZS5oZWlnaHQgKyA1MDtcclxuICAgICAgICBsZXQgdG90YWxDcmF3bEhlaWdodCA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGNyZWRpdHMgPSBuZXcgU2NlbmVOb2RlKCkuYXBwZW5kVG8odGhpcy5yb290Tm9kZSkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIGFuaW1hdG9yOiAobm9kZSwgdmFsdWUsIGVsYXBzZWQpID0+IHtcclxuICAgICAgICAgICAgICAgIG5vZGUuc2V0WShzdGFydFkgLSAoZWxhcHNlZCAqIDEwMDAgLyAzNikgJSAodG90YWxDcmF3bEhlaWdodCArIHN0YXJ0WSkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogSW5maW5pdHlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgeCA9IDIwO1xyXG4gICAgICAgIGxldCB5ID0gdGhpcy5hZGRUaXRsZShjcmVkaXRzLCAwLCB4KTtcclxuXHJcbiAgICAgICAgeSA9IHRoaXMuYWRkUGFyYWdyYXBoKGNyZWRpdHMsIHksIHgsIFtcclxuICAgICAgICAgICAgXCJPcmlnaW5hbGx5IG1hZGUgYXMgYSB0ZWFtXCIsXHJcbiAgICAgICAgICAgIFwiZWZmb3J0IGZvciBMdWR1bSBEYXJlIDQ2XCIsXHJcbiAgICAgICAgICAgIFwiaW4gdGhyZWUgZGF5cyBieVwiXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIHkgPSB0aGlzLmFkZFBhcmFncmFwaChjcmVkaXRzLCB5LCB4LCBbXHJcbiAgICAgICAgICAgIFwiRWR1YXJkIEJ1dCwgTmljbyBIw7xsc2NoZXIsXCIsXHJcbiAgICAgICAgICAgIFwiQmVuamFtaW4gSnVuZywgTmlscyBLcmV1dHplcixcIixcclxuICAgICAgICAgICAgXCJCYXN0aWFuIExhbmcsIFJhbmppdCBNZXZpdXMsXCIsXHJcbiAgICAgICAgICAgIFwiTWFya3VzIE92ZXIsIEtsYXVzIFJlaW1lcixcIixcclxuICAgICAgICAgICAgXCJhbmQgSmVubmlmZXIgdmFuIFZlZW5cIlxyXG4gICAgICAgIF0sIDUwKTtcclxuXHJcbiAgICAgICAgeSA9IHRoaXMuYWRkQ3JlZGl0KGNyZWRpdHMsIHksIHgsIFwiR0FNRSBERVNJR05cIiwgW1wiRXZlcnlvbmVcIl0pO1xyXG5cclxuICAgICAgICB5ID0gdGhpcy5hZGRDcmVkaXQoY3JlZGl0cywgeSwgeCwgXCJTVE9SWVwiLCBbXHJcbiAgICAgICAgICAgIFwiTWFya3VzIE92ZXJcIixcclxuICAgICAgICAgICAgXCJKZW5uaWZlciB2YW4gVmVlblwiLFxyXG4gICAgICAgICAgICBcIlJhbmppdCBNZXZpdXNcIixcclxuICAgICAgICAgICAgXCJOaWxzIEtyZXV0emVyXCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgeSA9IHRoaXMuYWRkQ3JlZGl0KGNyZWRpdHMsIHksIHgsIFwiUFJPR1JBTU1JTkdcIiwgW1xyXG4gICAgICAgICAgICBcIk5pY28gSMO8bHNjaGVyXCIsXHJcbiAgICAgICAgICAgIFwiQmVuamFtaW4gSnVuZ1wiLFxyXG4gICAgICAgICAgICBcIk5pbHMgS3JldXR6ZXJcIixcclxuICAgICAgICAgICAgXCJSYW5qaXQgTWV2aXVzXCIsXHJcbiAgICAgICAgICAgIFwiTWFya3VzIE92ZXJcIixcclxuICAgICAgICAgICAgXCJLbGF1cyBSZWltZXJcIixcclxuICAgICAgICAgICAgXCJFZHVhcmQgQnV0XCIsXHJcbiAgICAgICAgICAgIFwiTWF0dGhpYXMgV2V0dGVyXCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgeSA9IHRoaXMuYWRkQ3JlZGl0KGNyZWRpdHMsIHksIHgsIFwiU0NSSVBUSU5HXCIsIFtcclxuICAgICAgICAgICAgXCJNYXJrdXMgT3ZlclwiLFxyXG4gICAgICAgICAgICBcIkVkdWFyZCBCdXRcIlxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICB5ID0gdGhpcy5hZGRDcmVkaXQoY3JlZGl0cywgeSwgeCwgXCJBUlQgRElSRUNUSU9OXCIsIFtcIkVkdWFyZCBCdXRcIl0pO1xyXG5cclxuICAgICAgICB5ID0gdGhpcy5hZGRDcmVkaXQoY3JlZGl0cywgeSwgeCwgXCIyRCBBUlRcIiwgW1xyXG4gICAgICAgICAgICBcIkVkdWFyZCBCdXRcIixcclxuICAgICAgICAgICAgXCJOaWxzIEtyZXV0emVyXCIsXHJcbiAgICAgICAgICAgIFwiQ2hyaXN0aW5hIFNjaG5laWRlclwiLFxyXG4gICAgICAgICAgICBcIkplbm5pZmVyIHZhbiBWZWVuXCIsXHJcbiAgICAgICAgICAgIFwiTWF0dGhpYXMgV2V0dGVyXCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgeSA9IHRoaXMuYWRkQ3JlZGl0KGNyZWRpdHMsIHksIHgsIFwiV1JJVElOR1wiLCBbXHJcbiAgICAgICAgICAgIFwiTWFya3VzIE92ZXJcIixcclxuICAgICAgICAgICAgXCJKZW5uaWZlciB2YW4gVmVlblwiLFxyXG4gICAgICAgICAgICBcIkVkdWFyZCBCdXRcIlxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICB5ID0gdGhpcy5hZGRDcmVkaXQoY3JlZGl0cywgeSwgeCwgXCJMRVZFTCBERVNJR05cIiwgW1xyXG4gICAgICAgICAgICBcIkVkdWFyZCBCdXRcIixcclxuICAgICAgICAgICAgXCJOaWxzIEtyZXV0emVyXCIsXHJcbiAgICAgICAgICAgIFwiSmVubmlmZXIgdmFuIFZlZW5cIlxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICB5ID0gdGhpcy5hZGRDcmVkaXQoY3JlZGl0cywgeSwgeCwgXCJESVNUUklCVVRJT05cIiwgW1xyXG4gICAgICAgICAgICBcIkJlbmphbWluIEp1bmdcIixcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgeSA9IHRoaXMuYWRkQ3JlZGl0KGNyZWRpdHMsIHksIHgsIFwiTVVTSUNcIiwgW1xyXG4gICAgICAgICAgICBcIkJhc3RpYW4gTGFuZ1wiLFxyXG4gICAgICAgICAgICBcIkJlbmphbWluIEp1bmdcIixcclxuICAgICAgICAgICAgXCJFZHVhcmQgQnV0XCIsXHJcbiAgICAgICAgICAgIFwiTWF0dGhpYXMgV2V0dGVyXCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgeSA9IHRoaXMuYWRkQ3JlZGl0KGNyZWRpdHMsIHksIHgsIFwiUUFcIiwgW1xyXG4gICAgICAgICAgICBcIkplbm5pZmVyIHZhbiBWZWVuXCIsXHJcbiAgICAgICAgICAgIFwiTWF0dGhpYXMgV2V0dGVyXCJcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgeSA9IHRoaXMuYWRkQ3JlZGl0KGNyZWRpdHMsIHksIHgsIFwiU0ZYXCIsIFtcImZyZWVzb3VuZC5vcmdcIl0pO1xyXG5cclxuICAgICAgICB0b3RhbENyYXdsSGVpZ2h0ID0geTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNyZWRpdHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFjdGl2YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldE11c2ljKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0TXVzaWMuc2V0TG9vcCh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRNdXNpYy5zZXRWb2x1bWUoMSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0TXVzaWMucGxheSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlucHV0Lm9uQnV0dG9uRG93bi5jb25uZWN0KHRoaXMuaGFuZGxlQnV0dG9uRG93biwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0TXVzaWMpIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRNdXNpYy5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5wdXQub25CdXR0b25Eb3duLmRpc2Nvbm5lY3QodGhpcy5oYW5kbGVCdXR0b25Eb3duLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUJ1dHRvbkRvd24oZXZlbnQ6IENvbnRyb2xsZXJFdmVudCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICh0aGlzLmdhbWUuc2NlbmVzLmdldFByZXZpb3VzU2NlbmUoKSBpbnN0YW5jZW9mIFRpdGxlU2NlbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLnNjZW5lcy5wb3BTY2VuZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2FtZS5zY2VuZXMucG9wU2NlbmUoeyBub1RyYW5zaXRpb246IHRydWUgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zY2VuZXMuc2V0U2NlbmUoVGl0bGVTY2VuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkVGl0bGUoY3JlZGl0czogU2NlbmVOb2RlLCB5OiBudW1iZXIsIHg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgZ2FwID0gNTtcclxuICAgICAgICBjb25zdCB0aXRsZVRleHQgPSBcIkZyaWVuZGx5IEZpcmVcIjtcclxuICAgICAgICBjb25zdCB2ZXJzaW9uVGV4dCA9IGlzRGV2KCkgPyBcIkRFVkVMT1BNRU5UIFZFUlNJT05cIiA6IGBWZXJzaW9uICR7Q3JlZGl0c1NjZW5lLmFwcEluZm8udmVyc2lvbn1gO1xyXG5cclxuICAgICAgICB5ICs9IG5ldyBUZXh0Tm9kZSh7XHJcbiAgICAgICAgICAgIGZvbnQ6IENyZWRpdHNTY2VuZS5oZWFkbGluZUZvbnQsXHJcbiAgICAgICAgICAgIHRleHQ6IHRpdGxlVGV4dCxcclxuICAgICAgICAgICAgYW5jaG9yOiBEaXJlY3Rpb24uVE9QX0xFRlQsXHJcbiAgICAgICAgICAgIHgsIHksXHJcbiAgICAgICAgICAgIGNvbG9yOiBcIndoaXRlXCJcclxuICAgICAgICB9KS5hcHBlbmRUbyhjcmVkaXRzKS5nZXRIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgeSArPSBnYXA7XHJcblxyXG4gICAgICAgIHkgKz0gbmV3IFRleHROb2RlKHtcclxuICAgICAgICAgICAgZm9udDogQ3JlZGl0c1NjZW5lLnN0YW5kYXJkRm9udCxcclxuICAgICAgICAgICAgdGV4dDogdmVyc2lvblRleHQsXHJcbiAgICAgICAgICAgIGFuY2hvcjogRGlyZWN0aW9uLlRPUF9MRUZULFxyXG4gICAgICAgICAgICB4LCB5LFxyXG4gICAgICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiXHJcbiAgICAgICAgfSkuYXBwZW5kVG8oY3JlZGl0cykuZ2V0SGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiB5ICsgZ2FwICsgMjA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRQYXJhZ3JhcGgoY3JlZGl0czogU2NlbmVOb2RlLCB5OiBudW1iZXIsIHg6IG51bWJlciwgbGluZXM6IHN0cmluZ1tdLCBtYXJnaW5Cb3R0b20gPSAxMCk6IG51bWJlciB7XHJcbiAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHtcclxuICAgICAgICAgICAgeSArPSBuZXcgVGV4dE5vZGUoe1xyXG4gICAgICAgICAgICAgICAgZm9udDogQ3JlZGl0c1NjZW5lLnN0YW5kYXJkRm9udCxcclxuICAgICAgICAgICAgICAgIHRleHQ6IGxpbmUsXHJcbiAgICAgICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCxcclxuICAgICAgICAgICAgICAgIHgsIHksXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiXHJcbiAgICAgICAgICAgIH0pLmFwcGVuZFRvKGNyZWRpdHMpLmdldEhlaWdodCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB5ICsgbWFyZ2luQm90dG9tO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkQ3JlZGl0KGNyZWRpdHM6IFNjZW5lTm9kZSwgeTogbnVtYmVyLCB4OiBudW1iZXIsIHRpdGxlOiBzdHJpbmcsIG5hbWVzOiBzdHJpbmdbXSk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgZ2FwID0gNTtcclxuXHJcbiAgICAgICAgeSArPSBuZXcgVGV4dE5vZGUoe1xyXG4gICAgICAgICAgICBmb250OiBDcmVkaXRzU2NlbmUuY3JlZGl0c0ZvbnQsXHJcbiAgICAgICAgICAgIHRleHQ6IHRpdGxlLFxyXG4gICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5UT1BfTEVGVCxcclxuICAgICAgICAgICAgeCwgeSxcclxuICAgICAgICAgICAgY29sb3I6IFwid2hpdGVcIlxyXG4gICAgICAgIH0pLmFwcGVuZFRvKGNyZWRpdHMpLmdldEhlaWdodCgpO1xyXG5cclxuICAgICAgICB5ICs9IHRoaXMubGluZVNwYWNpbmcgKyBnYXA7XHJcblxyXG4gICAgICAgIG5hbWVzLmZvckVhY2gobmFtZSA9PiB7XHJcbiAgICAgICAgICAgIHkgKz0gbmV3IFRleHROb2RlKHtcclxuICAgICAgICAgICAgICAgIGZvbnQ6IENyZWRpdHNTY2VuZS5zdGFuZGFyZEZvbnQsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBEaXJlY3Rpb24uVE9QX0xFRlQsXHJcbiAgICAgICAgICAgICAgICB4LCB5LFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwid2hpdGVcIlxyXG4gICAgICAgICAgICB9KS5hcHBlbmRUbyhjcmVkaXRzKS5nZXRIZWlnaHQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHkgKyA0MDtcclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7O0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1QkE7QUFDQTtBQStSQTtBQTdSQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBM1ZBO0FBTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQVNBO0FBUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFxQkE7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQUdBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTs7QUFDQTtBQS9EQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./lib/scenes/CreditsScene.js\n");
    
    /***/ }),
    
    /***/ "./lib/scenes/EndScene.js":
    /*!********************************!*\
      !*** ./lib/scenes/EndScene.js ***!
      \********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EndScene = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst BitmapFont_1 = __webpack_require__(/*! ../BitmapFont */ \"./lib/BitmapFont.js\");\nconst ControllerFamily_1 = __webpack_require__(/*! ../input/ControllerFamily */ \"./lib/input/ControllerFamily.js\");\nconst CreditsScene_1 = __webpack_require__(/*! ./CreditsScene */ \"./lib/scenes/CreditsScene.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst Scene_1 = __webpack_require__(/*! ../Scene */ \"./lib/Scene.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nconst ImageNode_1 = __webpack_require__(/*! ../scene/ImageNode */ \"./lib/scene/ImageNode.js\");\nconst TextNode_1 = __webpack_require__(/*! ../scene/TextNode */ \"./lib/scene/TextNode.js\");\nconst easings_1 = __webpack_require__(/*! ../easings */ \"./lib/easings.js\");\nconst Direction_1 = __webpack_require__(/*! ../geom/Direction */ \"./lib/geom/Direction.js\");\nconst GlobalState_1 = __webpack_require__(/*! ../GlobalState */ \"./lib/GlobalState.js\");\nclass EndScene extends Scene_1.Scene {\n    constructor() {\n        super(...arguments);\n        this.subtitleDelay = 2;\n        this.inputDelay = 4;\n    }\n    setup() {\n        var _a;\n        const ending = this.game.campaign.quests.find(q => q.isFinished());\n        if (ending) {\n            GlobalState_1.GlobalState.setAchievedEnding(ending.key);\n            GlobalState_1.GlobalState.setHasBeatenGame();\n        }\n        // The logo image\n        new ImageNode_1.ImageNode({\n            image: EndScene.logo,\n            x: this.game.width >> 1,\n            y: (this.game.height >> 1) - 15\n        }).appendTo(this.rootNode);\n        // Fade in subtitle after a delay\n        new TextNode_1.TextNode({\n            font: EndScene.font,\n            text: (_a = ending === null || ending === void 0 ? void 0 : ending.title) !== null && _a !== void 0 ? _a : \"Unknown [E]nding\",\n            x: this.game.width >> 1,\n            y: (this.game.height >> 1) + 11,\n            color: \"red\",\n            opacity: 0\n        }).animate({\n            animator: (node, value) => node.setOpacity(value),\n            delay: this.subtitleDelay,\n            duration: 0.5,\n            easing: easings_1.easeOutQuad\n        }).appendTo(this.rootNode);\n        // Inform the user, that it's possible to return to the title\n        const text = `Press any ${this.input.currentControllerFamily === ControllerFamily_1.ControllerFamily.KEYBOARD\n            ? \"key\" : \"button\"} to continue.`;\n        new TextNode_1.TextNode({\n            font: EndScene.font,\n            text,\n            anchor: Direction_1.Direction.BOTTOM,\n            x: this.game.width >> 1,\n            y: this.game.height - 15,\n            color: \"darkgrey\",\n            opacity: 0\n        }).animate({\n            animator: (node, value) => node.setOpacity(value),\n            delay: this.inputDelay,\n            duration: 0.5,\n            easing: easings_1.easeOutQuad\n        }).appendTo(this.rootNode);\n    }\n    activate() {\n        setTimeout(() => {\n            EndScene.boom.setLoop(false);\n            EndScene.boom.play();\n        }, this.subtitleDelay * 1000);\n        setTimeout(() => {\n            this.input.onButtonDown.connect(this.gotoCreditsScene, this);\n        }, this.inputDelay * 1000);\n    }\n    deactivate() {\n        this.input.onButtonDown.disconnect(this.gotoCreditsScene, this);\n    }\n    gotoCreditsScene() {\n        this.game.scenes.setScene(CreditsScene_1.CreditsScene);\n    }\n    cleanup() {\n        this.rootNode.clear();\n    }\n}\ntslib_1.__decorate([\n    Assets_1.asset(constants_1.DIALOG_FONT),\n    tslib_1.__metadata(\"design:type\", BitmapFont_1.BitmapFont)\n], EndScene, \"font\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"images/ending/ff.png\"),\n    tslib_1.__metadata(\"design:type\", HTMLImageElement)\n], EndScene, \"logo\", void 0);\ntslib_1.__decorate([\n    Assets_1.asset(\"sounds/ending/boom.mp3\"),\n    tslib_1.__metadata(\"design:type\", Sound_1.Sound)\n], EndScene, \"boom\", void 0);\nexports.EndScene = EndScene;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvc2NlbmVzL0VuZFNjZW5lLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lcy9FbmRTY2VuZS50cz9kOGY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2V0IH0gZnJvbSBcIi4uL0Fzc2V0c1wiO1xyXG5pbXBvcnQgeyBCaXRtYXBGb250IH0gZnJvbSBcIi4uL0JpdG1hcEZvbnRcIjtcclxuaW1wb3J0IHsgQ29udHJvbGxlckZhbWlseSB9IGZyb20gXCIuLi9pbnB1dC9Db250cm9sbGVyRmFtaWx5XCI7XHJcbmltcG9ydCB7IENyZWRpdHNTY2VuZSB9IGZyb20gXCIuL0NyZWRpdHNTY2VuZVwiO1xyXG5pbXBvcnQgeyBESUFMT0dfRk9OVCB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcclxuaW1wb3J0IHsgRnJpZW5kbHlGaXJlIH0gZnJvbSBcIi4uL0ZyaWVuZGx5RmlyZVwiO1xyXG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuLi9TY2VuZVwiO1xyXG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCIuLi9Tb3VuZFwiO1xyXG5pbXBvcnQgeyBJbWFnZU5vZGUgfSBmcm9tIFwiLi4vc2NlbmUvSW1hZ2VOb2RlXCI7XHJcbmltcG9ydCB7IFRleHROb2RlIH0gZnJvbSBcIi4uL3NjZW5lL1RleHROb2RlXCI7XHJcbmltcG9ydCB7IGVhc2VPdXRRdWFkIH0gZnJvbSBcIi4uL2Vhc2luZ3NcIjtcclxuaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSBcIi4uL2dlb20vRGlyZWN0aW9uXCI7XHJcbmltcG9ydCB7IEdsb2JhbFN0YXRlIH0gZnJvbSBcIi4uL0dsb2JhbFN0YXRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRW5kU2NlbmUgZXh0ZW5kcyBTY2VuZTxGcmllbmRseUZpcmU+IHtcclxuICAgIEBhc3NldChESUFMT0dfRk9OVClcclxuICAgIHByaXZhdGUgc3RhdGljIGZvbnQ6IEJpdG1hcEZvbnQ7XHJcblxyXG4gICAgQGFzc2V0KFwiaW1hZ2VzL2VuZGluZy9mZi5wbmdcIilcclxuICAgIHByaXZhdGUgc3RhdGljIGxvZ286IEhUTUxJbWFnZUVsZW1lbnQ7XHJcblxyXG4gICAgQGFzc2V0KFwic291bmRzL2VuZGluZy9ib29tLm1wM1wiKVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYm9vbTogU291bmQ7XHJcblxyXG4gICAgcHJpdmF0ZSBzdWJ0aXRsZURlbGF5ID0gMjtcclxuICAgIHByaXZhdGUgaW5wdXREZWxheSA9IDQ7XHJcblxyXG4gICAgcHVibGljIHNldHVwKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGVuZGluZyA9IHRoaXMuZ2FtZS5jYW1wYWlnbi5xdWVzdHMuZmluZChxID0+IHEuaXNGaW5pc2hlZCgpKTtcclxuXHJcbiAgICAgICAgaWYgKGVuZGluZykge1xyXG4gICAgICAgICAgICBHbG9iYWxTdGF0ZS5zZXRBY2hpZXZlZEVuZGluZyhlbmRpbmcua2V5KTtcclxuICAgICAgICAgICAgR2xvYmFsU3RhdGUuc2V0SGFzQmVhdGVuR2FtZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGhlIGxvZ28gaW1hZ2VcclxuICAgICAgICBuZXcgSW1hZ2VOb2RlKHtcclxuICAgICAgICAgICAgaW1hZ2U6IEVuZFNjZW5lLmxvZ28sXHJcbiAgICAgICAgICAgIHg6IHRoaXMuZ2FtZS53aWR0aCA+PiAxLFxyXG4gICAgICAgICAgICB5OiAodGhpcy5nYW1lLmhlaWdodCA+PiAxKSAtIDE1XHJcbiAgICAgICAgfSkuYXBwZW5kVG8odGhpcy5yb290Tm9kZSk7XHJcblxyXG4gICAgICAgIC8vIEZhZGUgaW4gc3VidGl0bGUgYWZ0ZXIgYSBkZWxheVxyXG4gICAgICAgIG5ldyBUZXh0Tm9kZSh7XHJcbiAgICAgICAgICAgIGZvbnQ6IEVuZFNjZW5lLmZvbnQsXHJcbiAgICAgICAgICAgIHRleHQ6IGVuZGluZz8udGl0bGUgPz8gXCJVbmtub3duIFtFXW5kaW5nXCIsXHJcbiAgICAgICAgICAgIHg6IHRoaXMuZ2FtZS53aWR0aCA+PiAxLFxyXG4gICAgICAgICAgICB5OiAodGhpcy5nYW1lLmhlaWdodCA+PiAxKSArIDExLFxyXG4gICAgICAgICAgICBjb2xvcjogXCJyZWRcIixcclxuICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgIH0pLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICBhbmltYXRvcjogKG5vZGUsIHZhbHVlKSA9PiBub2RlLnNldE9wYWNpdHkodmFsdWUpLFxyXG4gICAgICAgICAgICBkZWxheTogdGhpcy5zdWJ0aXRsZURlbGF5LFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMC41LFxyXG4gICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXRRdWFkXHJcbiAgICAgICAgfSkuYXBwZW5kVG8odGhpcy5yb290Tm9kZSk7XHJcblxyXG4gICAgICAgIC8vIEluZm9ybSB0aGUgdXNlciwgdGhhdCBpdCdzIHBvc3NpYmxlIHRvIHJldHVybiB0byB0aGUgdGl0bGVcclxuICAgICAgICBjb25zdCB0ZXh0ID0gYFByZXNzIGFueSAke3RoaXMuaW5wdXQuY3VycmVudENvbnRyb2xsZXJGYW1pbHkgPT09IENvbnRyb2xsZXJGYW1pbHkuS0VZQk9BUkRcclxuICAgICAgICAgICAgPyBcImtleVwiIDogXCJidXR0b25cIn0gdG8gY29udGludWUuYDtcclxuICAgICAgICBuZXcgVGV4dE5vZGUoe1xyXG4gICAgICAgICAgICBmb250OiBFbmRTY2VuZS5mb250LFxyXG4gICAgICAgICAgICB0ZXh0LFxyXG4gICAgICAgICAgICBhbmNob3I6IERpcmVjdGlvbi5CT1RUT00sXHJcbiAgICAgICAgICAgIHg6IHRoaXMuZ2FtZS53aWR0aCA+PiAxLFxyXG4gICAgICAgICAgICB5OiB0aGlzLmdhbWUuaGVpZ2h0IC0gMTUsXHJcbiAgICAgICAgICAgIGNvbG9yOiBcImRhcmtncmV5XCIsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICB9KS5hbmltYXRlKHtcclxuICAgICAgICAgICAgYW5pbWF0b3I6IChub2RlLCB2YWx1ZSkgPT4gbm9kZS5zZXRPcGFjaXR5KHZhbHVlKSxcclxuICAgICAgICAgICAgZGVsYXk6IHRoaXMuaW5wdXREZWxheSxcclxuICAgICAgICAgICAgZHVyYXRpb246IDAuNSxcclxuICAgICAgICAgICAgZWFzaW5nOiBlYXNlT3V0UXVhZFxyXG4gICAgICAgIH0pLmFwcGVuZFRvKHRoaXMucm9vdE5vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhY3RpdmF0ZSgpOiB2b2lkIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgRW5kU2NlbmUuYm9vbS5zZXRMb29wKGZhbHNlKTtcclxuICAgICAgICAgICAgRW5kU2NlbmUuYm9vbS5wbGF5KCk7XHJcbiAgICAgICAgfSwgdGhpcy5zdWJ0aXRsZURlbGF5ICogMTAwMCk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0Lm9uQnV0dG9uRG93bi5jb25uZWN0KHRoaXMuZ290b0NyZWRpdHNTY2VuZSwgdGhpcyk7XHJcbiAgICAgICAgfSwgdGhpcy5pbnB1dERlbGF5ICogMTAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5vbkJ1dHRvbkRvd24uZGlzY29ubmVjdCh0aGlzLmdvdG9DcmVkaXRzU2NlbmUsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ290b0NyZWRpdHNTY2VuZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdhbWUuc2NlbmVzLnNldFNjZW5lKENyZWRpdHNTY2VuZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFudXAoKSB7XHJcbiAgICAgICAgdGhpcy5yb290Tm9kZS5jbGVhcigpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7O0FBVUE7QUFDQTtBQXlFQTtBQXZFQTs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBbEZBO0FBREE7QUFDQTtBQUFBO0FBR0E7QUFEQTtBQUNBO0FBQUE7QUFHQTtBQURBO0FBQ0E7QUFBQTtBQVJBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./lib/scenes/EndScene.js\n");
    
    /***/ }),
    
    /***/ "./lib/scenes/GameScene.js":
    /*!*********************************!*\
      !*** ./lib/scenes/GameScene.js ***!
      \*********************************/
    /*! no static exports found */
    /***/ (function(module, exports, __webpack_require__) {
    
    "use strict";
    eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GameScene = exports.AmbientSoundId = exports.BgmId = exports.isCollidableGameObject = exports.FadeDirection = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\");\nconst Player_1 = __webpack_require__(/*! ../entities/Player */ \"./lib/entities/Player.js\");\nconst Assets_1 = __webpack_require__(/*! ../Assets */ \"./lib/Assets.js\");\nconst Bird_1 = __webpack_require__(/*! ../entities/Bird */ \"./lib/entities/Bird.js\");\nconst BitmapFont_1 = __webpack_require__(/*! ../BitmapFont */ \"./lib/BitmapFont.js\");\nconst Bone_1 = __webpack_require__(/*! ../entities/Bone */ \"./lib/entities/Bone.js\");\nconst Entity_1 = __webpack_require__(/*! ../Entity */ \"./lib/Entity.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"./lib/util.js\");\nconst Camera_1 = __webpack_require__(/*! ../Camera */ \"./lib/Camera.js\");\nconst Campfire_1 = __webpack_require__(/*! ../entities/Campfire */ \"./lib/entities/Campfire.js\");\nconst Caveman_1 = __webpack_require__(/*! ../entities/Caveman */ \"./lib/entities/Caveman.js\");\nconst Chicken_1 = __webpack_require__(/*! ../entities/Chicken */ \"./lib/entities/Chicken.js\");\nconst Cloud_1 = __webpack_require__(/*! ../entities/Cloud */ \"./lib/entities/Cloud.js\");\nconst Conversation_1 = __webpack_require__(/*! ../Conversation */ \"./lib/Conversation.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"./lib/constants.js\");\nconst EndScene_1 = __webpack_require__(/*! ./EndScene */ \"./lib/scenes/EndScene.js\");\nconst Fire_1 = __webpack_require__(/*! ../entities/Fire */ \"./lib/entities/Fire.js\");\nconst FireGfx_1 = __webpack_require__(/*! ../FireGfx */ \"./lib/FireGfx.js\");\nconst FlameBoy_1 = __webpack_require__(/*! ../entities/FlameBoy */ \"./lib/entities/FlameBoy.js\");\nconst MapInfo_1 = __webpack_require__(/*! ../MapInfo */ \"./lib/MapInfo.js\");\nconst Menu_1 = __webpack_require__(/*! ../Menu */ \"./lib/Menu.js\");\nconst Mimic_1 = __webpack_require__(/*! ../entities/Mimic */ \"./lib/entities/Mimic.js\");\nconst MountainRiddle_1 = __webpack_require__(/*! ../MountainRiddle */ \"./lib/MountainRiddle.js\");\nconst MovingPlatform_1 = __webpack_require__(/*! ../entities/MovingPlatform */ \"./lib/entities/MovingPlatform.js\");\nconst Particles_1 = __webpack_require__(/*! ../Particles */ \"./lib/Particles.js\");\nconst PauseScene_1 = __webpack_require__(/*! ./PauseScene */ \"./lib/scenes/PauseScene.js\");\nconst Portal_1 = __webpack_require__(/*! ../entities/Portal */ \"./lib/entities/Portal.js\");\nconst PowerShiba_1 = __webpack_require__(/*! ./PowerShiba */ \"./lib/scenes/PowerShiba.js\");\nconst Quests_1 = __webpack_require__(/*! ../Quests */ \"./lib/Quests.js\");\nconst Radio_1 = __webpack_require__(/*! ../entities/Radio */ \"./lib/entities/Radio.js\");\nconst Renderer_1 = __webpack_require__(/*! ../Renderer */ \"./lib/Renderer.js\");\nconst RiddleStone_1 = __webpack_require__(/*! ../entities/RiddleStone */ \"./lib/entities/RiddleStone.js\");\nconst Scene_1 = __webpack_require__(/*! ../Scene */ \"./lib/Scene.js\");\nconst ShadowPresence_1 = __webpack_require__(/*! ../entities/ShadowPresence */ \"./lib/entities/ShadowPresence.js\");\nconst Shiba_1 = __webpack_require__(/*! ../entities/Shiba */ \"./lib/entities/Shiba.js\");\nconst Skull_1 = __webpack_require__(/*! ../entities/Skull */ \"./lib/entities/Skull.js\");\nconst Sound_1 = __webpack_require__(/*! ../Sound */ \"./lib/Sound.js\");\nconst SoundEmitter_1 = __webpack_require__(/*! ../SoundEmitter */ \"./lib/SoundEmitter.js\");\nconst Stone_1 = __webpack_require__(/*! ../entities/Stone */ \"./lib/entities/Stone.js\");\nconst StoneDisciple_1 = __webpack_require__(/*! ../entities/StoneDisciple */ \"./lib/entities/StoneDisciple.js\");\nconst SuperThrow_1 = __webpack_require__(/*! ../entities/SuperThrow */ \"./lib/entities/SuperThrow.js\");\nconst Tree_1 = __webpack_require__(/*! ../entities/Tree */ \"./lib/entities/Tree.js\");\nconst Wing_1 = __webpack_require__(/*! ../entities/Wing */ \"./lib/entities/Wing.js\");\nconst World_1 = __webpack_require__(/*! ../World */ \"./lib/World.js\");\nconst ExitPortal_1 = __webpack_require__(/*! ../entities/ExitPortal */ \"./lib/entities/ExitPortal.js\");\nconst Window_1 = __webpack_require__(/*! ../entities/Window */ \"./lib/entities/Window.js\");\nvar FadeDirection;\n(function (FadeDirection) {\n    FadeDirection[FadeDirection[\"FADE_IN\"] = 0] = \"FADE_IN\";\n    FadeDirection[FadeDirection[\"FADE_OUT\"] = 1] = \"FADE_OUT\";\n})(FadeDirection = exports.FadeDirection || (exports.FadeDirection = {}));\nfunction isCollidableGameObject(object) {\n    return typeof object.collidesWith === \"function\";\n}\nexports.isCollidableGameObject = isCollidableGameObject;\nvar BgmId;\n(function (BgmId) {\n    BgmId[\"OVERWORLD\"] = \"overworld\";\n    BgmId[\"INFERNO\"] = \"inferno\";\n    BgmId[\"CAVE\"] = \"cave\";\n    BgmId[\"RIDDLE\"] = \"riddle\";\n    BgmId[\"RADIO\"] = \"radio\";\n    BgmId[\"WINGS\"] = \"wings\";\n    BgmId[\"ECSTASY\"] = \"ecstasy\";\n    BgmId[\"AWAKE\"] = \"awake\";\n})(BgmId = exports.BgmId || (exports.BgmId = {}));\nvar AmbientSoundId;\n(function (AmbientSoundId) {\n    AmbientSoundId[\"STREAM\"] = \"stream\";\n    AmbientSoundId[\"WIND\"] = \"wind\";\n})(AmbientSoundId = exports.AmbientSoundId || (exports.AmbientSoundId = {}));\nclass GameScene extends Scene_1.Scene {\n    constructor() {\n        super(...arguments);\n        this.ambientSounds = {\n            [AmbientSoundId.STREAM]: GameScene.ambientStream,\n            [AmbientSoundId.WIND]: GameScene.ambientWind\n        };\n        this.backgroundTracks = [\n            {\n                active: false,\n                id: BgmId.OVERWORLD,\n                sound: GameScene.bgm1,\n                baseVolume: 0.25\n            },\n            {\n                active: false,\n                id: BgmId.CAVE,\n                sound: GameScene.bgmCave,\n                baseVolume: 1\n            },\n            {\n                active: false,\n                id: BgmId.INFERNO,\n                sound: GameScene.bgm2,\n                baseVolume: 0.10\n            },\n            {\n                active: false,\n                id: BgmId.RIDDLE,\n                sound: GameScene.bgmRiddle,\n                baseVolume: 1\n            },\n            {\n                active: false,\n                id: BgmId.RADIO,\n                sound: GameScene.bgmRadio,\n                baseVolume: 1\n            },\n            {\n                active: false,\n                id: BgmId.WINGS,\n                sound: GameScene.bgmWings,\n                baseVolume: 0.75\n            },\n            {\n                active: false,\n                id: BgmId.AWAKE,\n                sound: GameScene.bgmAwake,\n                baseVolume: 0.75\n            },\n            {\n                active: false,\n                id: BgmId.ECSTASY,\n                sound: GameScene.bgmEcstasy,\n                baseVolume: 1\n            }\n        ];\n        this.petEndingTexts = [\n            { label: \"The sensation lacks any kind of comparison.\", enter: 0.1 },\n            { label: \"All worldly matters seem so insignificant now.\", enter: 0.2 },\n            { label: \"Reality around me begins to fade.\", enter: 0.3 },\n            { label: \"Soon, I will be swept away in ecstasy.\", enter: 0.5 },\n            { label: \"Can I muster up the strength to break free?\", enter: 0.6 },\n            { label: \"If I don't stop now, there will be no going back.\", enter: 0.7 },\n            { label: \"Is this really how it all ends?\", enter: 0.8 },\n            { label: \"I regret nothing…\", enter: 0.9 },\n            { label: \"Farewell, cruel world…\", enter: 1 }\n        ];\n        this.windowEndingTexts = [\n            { label: \"I wiped off the heavy dust layer on the glass.\", enter: 0.1 },\n            { label: \"The surface was as cold as the corpses around me.\", enter: 0.2 },\n            { label: \"It was hard to make out anything in the darkness on the other side…\", enter: 0.3 },\n            { label: \"\", enter: 0.4 },\n            { label: \"My legs gave away when I realized what I was looking at.\", enter: 0.5 },\n            { label: \"Nothing can compare to the dread I felt in this moment.\", enter: 0.6 },\n            { label: \"\", enter: 0.7 },\n            { label: \"I wished I could go back to the dream I faintly remember.\", enter: 0.8 },\n            { label: \"But there was nothing but an inevitable death waiting for me…\", enter: 0.9 },\n        ];\n        /* Total game time (time passed while game not paused) */\n        this.gameTime = 0;\n        this.gameObjects = [];\n        this.soundEmitters = [];\n        this.pointsOfInterest = [];\n        this.triggerObjects = [];\n        this.boundObjects = [];\n        this.gateObjects = [];\n        this.paused = false;\n        this.particles = new Particles_1.Particles(this);\n        this.fireFuryEndTime = 0;\n        this.apocalypse = false;\n        this.friendshipCutscene = false;\n        this.pettingCutscene = false;\n        this.windowCutscene = false;\n        this.windowCutsceneTime = 0;\n        this.pettingCutsceneTime = 0;\n        this.pettingEndingTriggered = false;\n        this.windowEndingTriggered = false;\n        this.apocalypseFactor = 1;\n        this.fireEffects = [];\n        this.frameCounter = 0;\n        this.framesPerSecond = 0;\n        this.showBounds = false;\n        this.scale = 1;\n        this.dt = 0;\n        this.fpsInterval = null;\n        this.fadeToBlackEndTime = 0;\n        this.fadeToBlackStartTime = 0;\n        this.fadeToBlackFactor = 0;\n        this.fadeToBlackDirection = FadeDirection.FADE_OUT;\n        this.renderer = new Renderer_1.Renderer(this);\n        this.mountainRiddle = new MountainRiddle_1.MountainRiddle();\n    }\n    setup() {\n        this.mapInfo = new MapInfo_1.MapInfo();\n        this.soundEmitters = this.mapInfo.getSounds().map(o => SoundEmitter_1.SoundEmitter.fromGameObjectInfo(this, o));\n        this.pointsOfInterest = this.mapInfo.getPointers();\n        this.triggerObjects = this.mapInfo.getTriggerObjects();\n        this.boundObjects = this.mapInfo.getBoundObjects();\n        this.gateObjects = this.mapInfo.getGateObjects();\n        this.gameTime = 0;\n        this.fadeToBlackEndTime = 0;\n        this.fadeToBlackStartTime = 0;\n        this.fadeToBlackFactor = 0;\n        this.apocalypse = false;\n        this.fireFuryEndTime = 0;\n        this.pettingCutscene = false;\n        this.pettingCutsceneTime = 0;\n        this.pettingEndingTriggered = false;\n        this.windowCutscene = false;\n        this.windowCutsceneTime = 0;\n        this.windowEndingTriggered = false;\n        Conversation_1.Conversation.resetGlobals();\n        this.gameObjects = [\n            this.world = new World_1.World(this),\n            this.particles,\n            ...this.soundEmitters,\n            ...this.mapInfo.getEntities().map(entity => {\n                switch (entity.name) {\n                    case \"riddlestone\":\n                        return new RiddleStone_1.RiddleStone(this, entity.x, entity.y, entity.properties);\n                    case \"campfire\":\n                        return new Campfire_1.Campfire(this, entity.x, entity.y);\n                    case \"radio\":\n                        return new Radio_1.Radio(this, entity.x, entity.y);\n                    case \"movingplatform\":\n                        return new MovingPlatform_1.MovingPlatform(this, entity.x, entity.y, entity.properties);\n                    case \"skull\":\n                        return new Skull_1.Skull(this, entity.x, entity.y);\n                    case \"chicken\":\n                        return new Chicken_1.Chicken(this, entity.x, entity.y);\n                    case \"superthrow\":\n                        return new SuperThrow_1.SuperThrow(this, entity.x, entity.y);\n                    case \"portal\":\n                        return new Portal_1.Portal(this, entity.x, entity.y);\n                    case \"window\":\n                        return new Window_1.Window(this, entity.x, entity.y);\n                    default:\n                        return Entity_1.createEntity(entity.name, this, entity.x, entity.y, entity.properties);\n                }\n            })\n        ];\n        this.player = this.getGameObject(Player_1.Player);\n        this.fire = this.getGameObject(Fire_1.Fire);\n        this.stone = this.getGameObject(Stone_1.Stone);\n        this.stoneDisciple = this.getGameObject(StoneDisciple_1.StoneDisciple);\n        this.tree = this.getGameObject(Tree_1.Tree);\n        this.flameboy = this.getGameObject(FlameBoy_1.FlameBoy);\n        this.wing = this.getGameObject(Wing_1.Wing);\n        this.bird = this.getGameObject(Bird_1.Bird);\n        this.shiba = this.getGameObject(Shiba_1.Shiba);\n        this.powerShiba = this.getGameObject(PowerShiba_1.PowerShiba);\n        this.shadowPresence = this.getGameObject(ShadowPresence_1.ShadowPresence);\n        this.mimic = this.getGameObject(Mimic_1.Mimic);\n        this.caveman = this.getGameObject(Caveman_1.Caveman);\n        this.bone = this.getGameObject(Bone_1.Bone);\n        this.exitPortal = this.getGameObject(ExitPortal_1.ExitPortal);\n        this.camera = new Camera_1.Camera(this, this.player);\n        this.camera.setBounds(this.player.getCurrentMapBounds());\n        this.fpsInterval = setInterval(() => {\n            this.framesPerSecond = this.frameCounter;\n            this.frameCounter = 0;\n        }, 1000);\n        this.game.campaign.begin(this);\n        this.playBackgroundTrack(BgmId.CAVE);\n        Conversation_1.Conversation.setGlobal(\"devmode\", util_1.isDev() + \"\");\n        this.loadApocalypse();\n    }\n    cleanup() {\n        if (this.fpsInterval != null) {\n            clearInterval(this.fpsInterval);\n        }\n    }\n    addGameObject(object) {\n        // Insert new item right before the player so player is always in front\n        this.gameObjects.splice(this.gameObjects.indexOf(this.player) - 1, 0, object);\n    }\n    removeGameObject(object) {\n        const index = this.gameObjects.indexOf(object);\n        if (index >= 0) {\n            this.gameObjects.splice(index, 1);\n        }\n    }\n    setGateDisabled(gateId, disabled) {\n        const gate = this.gateObjects.find(o => o.name === gateId);\n        if (!gate) {\n            console.error(`cannot set disabled status of gate '${gateId}' because it does not exist`);\n            return;\n        }\n        gate.properties.disabled = disabled;\n    }\n    getBackgroundTrack(id) {\n        const found = this.backgroundTracks.find(track => track.id === id);\n        if (!found) {\n            console.error(`Missing background track with ID '${id}'.`);\n            return this.backgroundTracks[0];\n        }\n        return found;\n    }\n    fadeActiveBackgroundTrack(fade, inverse = false) {\n        this.backgroundTracks.forEach(t => {\n            if (t.active) {\n                if (inverse) {\n                    t.sound.setVolume(t.baseVolume * (1 - fade));\n                }\n                else {\n                    t.sound.setVolume(t.baseVolume * fade);\n                }\n            }\n        });\n    }\n    setActiveBgmTrack(id) {\n        this.backgroundTracks.forEach(t => { t.active = false; });\n        const track = this.backgroundTracks.find(t => t.id === id);\n        if (track) {\n            track.active = true;\n            if (!track.sound.isPlaying()) {\n                track.sound.setLoop(true);\n                track.sound.play();\n            }\n        }\n    }\n    fadeToBackgroundTrack(id) {\n        const track = this.getBackgroundTrack(id);\n        this.muteMusic();\n        this.backgroundTracks.forEach(t => { t.active = false; });\n        track.active = true;\n        track.sound.setVolume(track.baseVolume);\n        if (!track.sound.isPlaying()) {\n            track.sound.setLoop(true);\n            track.sound.play();\n        }\n    }\n    playBackgroundTrack(id) {\n        const track = this.getBackgroundTrack(id);\n        this.backgroundTracks.forEach(t => t.sound.stop());\n        track.active = true;\n        track.sound.setVolume(track.baseVolume);\n        track.sound.setLoop(true);\n        track.sound.play();\n    }\n    getGameObject(type) {\n        for (const gameObject of this.gameObjects) {\n            if (gameObject instanceof type) {\n                return gameObject;\n            }\n        }\n        throw new Error(`Game object of type ${type.name} not found.`);\n    }\n    activate() {\n        this.input.onButtonDown.connect(this.handleButtonDown, this);\n        this.input.onButtonDown.connect(this.player.handleButtonDown, this.player);\n        this.input.onButtonUp.connect(this.player.handleButtonUp, this.player);\n        this.resume();\n    }\n    deactivate() {\n        this.pause();\n        this.input.onButtonDown.disconnect(this.handleButtonDown, this);\n        this.input.onButtonDown.disconnect(this.player.handleButtonDown, this.player);\n        this.input.onButtonUp.disconnect(this.player.handleButtonUp, this.player);\n    }\n    handleButtonDown(event) {\n        var _a;\n        if (event.isAbort || event.isPause) {\n            if (this.player.getDance()) {\n                (_a = this.player.getDance()) === null || _a === void 0 ? void 0 : _a.resetMusic();\n                this.player.cancelDance();\n            }\n        }\n        if (event.isPause) {\n            this.scenes.pushScene(PauseScene_1.PauseScene);\n        }\n    }\n    gameOver() {\n        GameScene.bgm1.stop();\n        GameScene.bgm2.stop();\n        GameScene.swell.setVolume(0.5);\n        GameScene.swell.play();\n        setTimeout(() => {\n            this.game.scenes.setScene(EndScene_1.EndScene);\n        }, 2000);\n    }\n    isActive() {\n        return !this.paused;\n    }\n    update(dt) {\n        if (this.paused) {\n            dt = 0;\n        }\n        this.dt = dt;\n        this.gameTime += dt;\n        for (const obj of this.gameObjects) {\n            obj.update(dt);\n        }\n        this.camera.update(dt, this.gameTime);\n        if (this.fadeToBlackEndTime > this.gameTime) {\n            let fade = (this.gameTime - this.fadeToBlackStartTime) / (this.fadeToBlackEndTime - this.fadeToBlackStartTime);\n            if (this.fadeToBlackDirection === FadeDirection.FADE_IN) {\n                fade = 1 - fade;\n            }\n            this.fadeToBlackFactor = fade;\n        }\n        if (this.friendshipCutscene) {\n            this.updateFriendshipEndingCutscene(dt);\n        }\n        if (this.pettingCutscene) {\n            this.updatePettingEndingCutscene(dt);\n        }\n        if (this.windowCutscene) {\n            this.updateWindowEndingCutscene(dt);\n        }\n    }\n    draw(ctx, width, height) {\n        ctx.save();\n        // Center coordinate system\n        ctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);\n        // Scale by three because everything was based on 480x300 canvas and now its three times larger\n        ctx.scale(this.scale, this.scale);\n        // Draw stuff\n        this.camera.applyTransform(ctx);\n        for (const obj of this.gameObjects) {\n            obj.draw(ctx, width, height);\n        }\n        // Add all particle emitters to rendering queue\n        this.particles.addEmittersToRenderingQueue();\n        // Add all debug bounds to rendering queue\n        this.addAllDebugBoundsToRenderingQueue();\n        // Apocalypse\n        if (this.fireFuryEndTime) {\n            this.camera.setCinematicBar(1);\n            // Fade out\n            const diff = this.fireFuryEndTime - this.gameTime;\n            const p = diff / 16;\n            const fade = Particles_1.valueCurves.trapeze(0.4).get(p);\n            this.drawFade(ctx, fade, \"black\");\n        }\n        if (this.apocalypse) {\n            this.drawApocalypseOverlay(ctx);\n        }\n        // Gate Fade\n        if (this.fadeToBlackFactor > 0) {\n            this.fadeActiveBackgroundTrack(this.fadeToBlackFactor, true);\n            this.drawFade(ctx, this.fadeToBlackFactor, \"black\");\n        }\n        // Cinematic bars\n        this.camera.addCinematicBarsToRenderer();\n        // Draw stuff from Rendering queue\n        this.renderer.draw(ctx);\n        ctx.restore();\n        // Display FPS counter\n        if (util_1.isDev()) {\n            GameScene.font.drawText(ctx, `${this.framesPerSecond} FPS`, 2 * this.scale, 2 * this.scale - 3, \"white\");\n        }\n        this.frameCounter++;\n    }\n    addSingleDebugBoundsToRenderingQueue(bounds, color) {\n        this.renderer.add({\n            type: Renderer_1.RenderingType.RECT,\n            layer: Renderer_1.RenderingLayer.DEBUG,\n            position: {\n                x: bounds.x,\n                y: -bounds.y\n            },\n            lineColor: color,\n            dimension: {\n                width: bounds.width,\n                height: bounds.height\n            }\n        });\n    }\n    addAllDebugBoundsToRenderingQueue() {\n        if (this.showBounds) {\n            // Draw trigger bounds for collisions\n            for (const obj of this.triggerObjects) {\n                const bounds = util_1.boundsFromMapObject(obj);\n                this.addSingleDebugBoundsToRenderingQueue(bounds, \"blue\");\n            }\n            for (const obj of this.boundObjects) {\n                const bounds = util_1.boundsFromMapObject(obj);\n                this.addSingleDebugBoundsToRenderingQueue(bounds, \"yellow\");\n            }\n            for (const obj of this.gateObjects) {\n                const bounds = util_1.boundsFromMapObject(obj);\n                this.addSingleDebugBoundsToRenderingQueue(bounds, \"green\");\n            }\n        }\n    }\n    startApocalypseMusic() {\n        this.playBackgroundTrack(BgmId.INFERNO);\n    }\n    startFriendshipMusic() {\n        this.playBackgroundTrack(BgmId.WINGS);\n    }\n    muteMusic() {\n        this.backgroundTracks.forEach(t => t.sound.setVolume(0));\n    }\n    resetMusicVolumes() {\n        this.backgroundTracks.forEach(t => {\n            if (t.active)\n                t.sound.setVolume(t.baseVolume);\n        });\n    }\n    fadeToBlack(duration, direction) {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve) => {\n                this.fadeToBlackStartTime = this.gameTime;\n                this.fadeToBlackEndTime = this.gameTime + duration;\n                this.fadeToBlackDirection = direction;\n                setTimeout(() => {\n                    if (direction === FadeDirection.FADE_OUT) {\n                        this.fadeToBlackFactor = 1;\n                    }\n                    else {\n                        this.fadeToBlackFactor = 0;\n                    }\n                    resolve();\n                }, duration * 1000);\n            });\n        });\n    }\n    updateApocalypse() {\n        this.fireEmitter.setPosition(this.player.x, this.player.y);\n        this.fireEffects.forEach(e => e.update());\n        if (util_1.timedRnd(this.dt, 0.8)) {\n            this.fireEmitter.emit();\n        }\n        this.fire.growthTarget = Math.max(2, 20 - 6 * this.gameObjects.filter(o => o instanceof Cloud_1.Cloud && o.isRaining()).length);\n        if (this.fire.intensity < 6) {\n            this.fire.intensity = Math.max(this.fire.intensity, 4);\n            this.apocalypseFactor = util_1.clamp((this.fire.intensity - 4) / 2, 0, 1);\n            if (this.apocalypseFactor <= 0.001) {\n                // End apocalypse\n                this.apocalypseFactor = 0;\n                this.apocalypse = false;\n                this.fire.state = Fire_1.FireState.PUT_OUT;\n                this.game.campaign.getQuest(Quests_1.QuestKey.A).trigger(Quests_1.QuestATrigger.BEAT_FIRE);\n                this.game.campaign.runAction(\"enable\", null, [\"fire\", \"fire3\"]);\n                // Music\n                GameScene.bgm2.stop();\n            }\n        }\n    }\n    updateFriendshipEndingCutscene(dt) {\n        this.camera.setCinematicBar(1);\n    }\n    updateWindowEndingCutscene(dt) {\n        this.windowCutsceneTime += dt;\n        if (!this.windowEndingTriggered && this.windowCutsceneTime > constants_1.WINDOW_ENDING_CUTSCENE_DURATION + constants_1.WINDOW_ENDING_FADE_DURATION) {\n            this.windowEndingTriggered = true;\n            this.game.campaign.getQuest(Quests_1.QuestKey.E).finish();\n            this.gameOver();\n        }\n        this.windowEndingTexts.forEach((t, index) => {\n            if (this.windowCutsceneTime / constants_1.WINDOW_ENDING_CUTSCENE_DURATION > t.enter) {\n                const fadeTime = 0.5;\n                const enterTime = constants_1.WINDOW_ENDING_CUTSCENE_DURATION * t.enter;\n                const alpha = Math.max(0, Math.min(1, (this.windowCutsceneTime - enterTime) / fadeTime));\n                const measure = GameScene.font.measureText(t.label);\n                this.renderer.add({\n                    type: Renderer_1.RenderingType.TEXT, layer: Renderer_1.RenderingLayer.UI, textColor: \"white\", relativeToScreen: true, alpha,\n                    text: t.label, position: {\n                        x: (constants_1.GAME_CANVAS_WIDTH / 2) - (measure.width / 2),\n                        y: measure.height * index + (index * 3) + 50\n                    }, asset: GameScene.font,\n                });\n            }\n        });\n    }\n    updatePettingEndingCutscene(dt) {\n        this.pettingCutsceneTime += dt;\n        if (!this.pettingEndingTriggered && this.pettingCutsceneTime > constants_1.PETTING_ENDING_CUTSCENE_DURATION + constants_1.PETTING_ENDING_FADE_DURATION) {\n            this.pettingEndingTriggered = true;\n            this.game.campaign.getQuest(Quests_1.QuestKey.D).finish();\n            this.gameOver();\n        }\n        this.petEndingTexts.forEach((t, index) => {\n            if (this.pettingCutsceneTime / constants_1.PETTING_ENDING_CUTSCENE_DURATION > t.enter) {\n                const fadeTime = 0.5;\n                const enterTime = constants_1.PETTING_ENDING_CUTSCENE_DURATION * t.enter;\n                const yOffset = Math.pow((this.pettingCutsceneTime - enterTime) / 2, 2) * -1;\n                const alpha = Math.max(0, Math.min(1, (this.pettingCutsceneTime - enterTime) / fadeTime));\n                const measure = GameScene.font.measureText(t.label);\n                this.renderer.add({\n                    type: Renderer_1.RenderingType.TEXT, layer: Renderer_1.RenderingLayer.UI, textColor: \"white\", relativeToScreen: true, alpha,\n                    text: t.label, position: {\n   